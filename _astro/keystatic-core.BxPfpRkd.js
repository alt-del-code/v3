import{r as C,j as h,c as $e,p as Ea,aM as tO,aN as nO,aO as rO,aw as TS,aP as iO,$ as Cm,a as Cr,e as ro,aQ as sO,aR as oO,aS as lO,aT as aO,aU as NS,aV as cO,aW as uO,a5 as jS,aX as dO,aY as Sh,w as Be,aZ as Ch,t as Su,a_ as fO,C as _S,a$ as hO,q as pO,l as yb,b0 as bb,a8 as gO,b1 as mO,b2 as yO,b3 as bO,R as wi,b4 as xO,a3 as Wp,ac as vO,b5 as OS,b6 as kO,b7 as wO,a7 as G1,b8 as SO,b9 as RS,a1 as DS,f as pi,ba as CO,bb as EO,bc as Kp,bd as Y1,be as J1,bf as IO,bg as AO,m as TO,bh as NO,bi as jO,bj as _O,bk as OO,bl as RO,bm as DO,bn as MO,ar as FO,bo as Ee,aq as xb,bp as PO,O as $O,b as vb,v as MS,s as FS,aF as LO,bq as BO,br as zO,bs as VO,A as PS,aJ as Je,bt as UO,bu as kb,bv as qO,bw as Nn,bx as HO,by as $S,bz as LS,aA as BS,as as WO,av as zS,bA as KO,E as GO,I as YO,L as JO,bB as ZO,bC as Z1,u as XO,bD as QO,bE as eR,bF as tR,bG as nR,bH as Gp,bI as Yp}from"./react-vendor.BdeMnmW3.js";import{C as wb,c as W,T as rR,F as te,I as X,a as Eh,t as j,b as Ye,u as Si,_ as fe,d as he,e as Ar,S as Ci,f as Ei,i as rs,g as Y,h as Ue,j as iR,k as Ih,P as Tr,l as vr,m as sR,H as zr,A as ae,o as oR,n as rn,p as VS,q as US,r as lR,K as qS,w as aR,B as Re,s as Em,v as cR,x as HS,y as gt,E as V,N as df,z as Bt,D as Rt,G as L,J as De,L as We,M as aa,O as uR,Q as dR,R as fR,U as nt,V as Ad,W as zt,X as WS,Y as hR,Z as pR,$ as gR,a0 as Im,a1 as mR,a2 as yR,a3 as KS,a4 as Ds,a5 as un,a6 as dn,a7 as fl,a8 as nn,a9 as gn,aa as mn,ab as dt,ac as Sb,ad as Cu,ae as Ah,af as Eu,ag as fn,ah as GS,ai as YS,aj as JS,ak as bR,al as Ii,am as Ai,an as Iu,ao as xR,ap as ff,aq as ZS,ar as Dt,as as Cb,at as Eb,au as Au,av as Vn,aw as Ia,ax as _o,ay as XS,az as vR,aA as kR,aB as wR,aC as SR,aD as QS,aE as eC,aF as Tu,aG as tC,aH as $c,aI as nC,aJ as CR,aK as ER,aL as rC,aM as IR,aN as iC,aO as AR,aP as TR,aQ as NR,aR as jR,aS as _R,aT as hl,aU as OR,aV as RR,aW as DR,aX as Am,aY as MR,aZ as FR,a_ as PR,a$ as $R,b0 as LR,b1 as BR,b2 as zR,b3 as VR,b4 as UR,b5 as qR,b6 as HR,b7 as WR}from"./keystatic-api.DtlsqLj8.js";import{g as Ib}from"./aos.DangSV3_.js";import{p as Hs,f as Lc,m as KR,a as GR,b as sC,s as Ga,c as ce}from"./markdown.D3Gd4Avb.js";const X1=Symbol.for("react.memo_cache_sentinel");function q(t){return C.useState(()=>{const e=new Array(t);for(let n=0;n<t;n++)e[n]=X1;return e[X1]=!0,e})[0]}var hf=function(){return hf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hf.apply(this,arguments)};const YR=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4"}),h.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4M8 12.5l-5 5M3 12.5l5 5"})]}),Th=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),h.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]});var _r={},Q1;function JR(){if(Q1)return _r;Q1=1,Object.defineProperty(_r,"__esModule",{value:!0});for(var t=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:t?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)r["f"+i]=111+i;function s(f,p,g){p&&!("byKey"in p)&&(g=p,p=null),Array.isArray(f)||(f=[f]);var m=f.map(function(x){return a(x,p)}),b=function(v){return m.some(function(w){return c(w,v)})},y=g==null?b:b(g);return y}function o(f,p){return s(f,p)}function l(f,p){return s(f,{byKey:!0},p)}function a(f,p){var g=p&&p.byKey,m={};f=f.replace("++","+add");var b=f.split("+"),y=b.length;for(var x in e)m[e[x]]=!1;var v=!0,w=!1,S=void 0;try{for(var k=b[Symbol.iterator](),E;!(v=(E=k.next()).done);v=!0){var T=E.value,N=T.endsWith("?")&&T.length>1;N&&(T=T.slice(0,-1));var I=d(T),A=e[I];if(T.length>1&&!A&&!n[T]&&!r[I])throw new TypeError('Unknown modifier: "'+T+'"');(y===1||!A)&&(g?m.key=I:m.which=u(T)),A&&(m[A]=N?null:!0)}}catch(O){w=!0,S=O}finally{try{!v&&k.return&&k.return()}finally{if(w)throw S}}return m}function c(f,p){for(var g in f){var m=f[g],b=void 0;if(m!=null&&(g==="key"&&p.key!=null?b=p.key.toLowerCase():g==="which"?b=m===91&&p.which===93?91:p.which:b=p[g],!(b==null&&m===!1)&&b!==m))return!1}return!0}function u(f){f=d(f);var p=r[f]||f.toUpperCase().charCodeAt(0);return p}function d(f){return f=f.toLowerCase(),f=n[f]||f,f}return _r.default=s,_r.isHotkey=s,_r.isCodeHotkey=o,_r.isKeyHotkey=l,_r.parseHotkey=a,_r.compareHotkey=c,_r.toKeyCode=u,_r.toKeyName=d,_r}var $l=JR();const Ab=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:12,cy:12,r:10}),h.jsx("path",{d:"M12 8v4M12 16h.01"})]}),ZR=h.jsx("path",{d:"M11 12H3M16 6H3M16 18H3M19 10l-4 4M15 10l4 4"}),oC=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:11,cy:11,r:8}),h.jsx("path",{d:"m21 21-4.3-4.3"})]}),XR=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"m13.5 8.5-5 5M8.5 8.5l5 5"}),h.jsx("circle",{cx:11,cy:11,r:8}),h.jsx("path",{d:"m21 21-4.3-4.3"})]}),QR=h.jsx("path",{d:"M12 3v14M5 10h14M5 21h14"}),eD=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:18,height:18,x:3,y:3,rx:2}),h.jsx("path",{d:"M8 12h8M12 8v8"})]}),tD=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:18,height:18,x:3,y:3,rx:2}),h.jsx("circle",{cx:12,cy:12,r:1})]}),nD=C.forwardRef(function(e,n){const r=$e(30);let i,s,o,l,a,c,u,d;if(r[0]!==e){const{autoFocus:F,description:M,errorMessage:P,id:B,isDisabled:z,isReadOnly:U,isRequired:R,label:J,showIcon:Z,...D}=e;u=M,d=P,s=z,l=U,a=R,c=J,i=Z,o=D,r[0]=e,r[1]=i,r[2]=s,r[3]=o,r[4]=l,r[5]=a,r[6]=c,r[7]=u,r[8]=d}else i=r[1],s=r[2],o=r[3],l=r[4],a=r[5],c=r[6],u=r[7],d=r[8];const f=i===void 0?!0:i,p=Ea(n),g=tO(e),{labelProps:m,inputProps:b,clearButtonProps:y,descriptionProps:x,errorMessageProps:v}=nO(e,g,p),w=g.value!==""&&!e.isReadOnly;let S;r[9]!==y||r[10]!==s?(S=h.jsx(wb,{...y,preventFocus:!0,isDisabled:s}),r[9]=y,r[10]=s,r[11]=S):S=r[11];const k=S,E=e.isDisabled?"color.alias.foregroundDisabled":"neutralSecondary";let T;r[12]!==E?(T=h.jsx(te,{alignItems:"center",flexShrink:0,justifyContent:"center",pointerEvents:"none",width:"element.regular",children:h.jsx(X,{src:oC,color:E})}),r[12]=E,r[13]=T):T=r[13];const N=T;let I;r[14]===Symbol.for("react.memo_cache_sentinel")?(I={className:W({input:{'&[data-adornment="start"]':{paddingInlineStart:0},'&[data-adornment="end"]':{paddingInlineEnd:0},'&[data-adornment="both"]':{paddingInline:0}}})},r[14]=I):I=r[14];const A=f&&N,O=w&&k;let _;return r[15]!==p||r[16]!==o||r[17]!==s||r[18]!==l||r[19]!==a||r[20]!==c||r[21]!==m||r[22]!==b||r[23]!==u||r[24]!==x||r[25]!==d||r[26]!==v||r[27]!==A||r[28]!==O?(_=h.jsx(rR,{ref:p,...o,isDisabled:s,isReadOnly:l,isRequired:a,label:c,labelProps:m,inputProps:b,inputWrapperProps:I,description:u,descriptionProps:x,errorMessage:d,errorMessageProps:v,startElement:A,endElement:O}),r[15]=p,r[16]=o,r[17]=s,r[18]=l,r[19]=a,r[20]=c,r[21]=m,r[22]=b,r[23]=u,r[24]=x,r[25]=d,r[26]=v,r[27]=A,r[28]=O,r[29]=_):_=r[29],_}),rD=h.jsx("path",{d:"m5 12 7-7 7 7M12 19V5"}),lC=C.createContext(null);function jn(){const t=C.useContext(lC);if(t===null)throw new Error("TableContext not found");return t}const aC=C.createContext(null);function iD(){const t=C.useContext(aC);if(t===null)throw new Error("VirtualizerContext not found");return t}const cC=C.createContext(null);function sD(){const t=C.useContext(cC);if(t===null)throw new Error("TableRowContext not found");return t}const Rr=new Eh("TableView",["cell","cell-wrapper","row","body","header"]),uC=()=>{const t=$e(2),e=j.typography.text.regular.capheight;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=W({alignItems:"center",display:"flex",flexShrink:0,gridArea:"sort-indicator",height:e,justifyContent:"center",marginInline:j.size.space.small,opacity:0,position:"relative",transition:vr(["opacity","transform"],{easing:"easeOut"}),width:e,svg:{position:"absolute"},'[aria-sort="ascending"] &, [aria-sort="descending"] &':{opacity:1},'[aria-sort="descending"] &':{transform:"rotate(180deg)"}}),t[0]=n):n=t[0];let r;return t[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx("span",{"aria-hidden":"true",className:n,children:h.jsx(X,{src:rD})}),t[1]=r):r=t[1],r},oD=W({display:"flex",flexDirection:"column",isolation:"isolate",minHeight:0,minWidth:0,outline:"none",position:"relative",userSelect:"none"}),lD=W({boxSizing:"content-box",borderLeft:`${j.size.border.regular} solid transparent`,borderRight:`${j.size.border.regular} solid transparent`}),aD=Ye(Rr.element("header"),W({boxSizing:"border-box"})),cD=Ye(Rr.element("body"),W({backgroundColor:j.color.background.canvas,border:`${j.size.border.regular} solid ${j.color.border.neutral}`,borderRadius:j.size.radius.medium,transform:"translate3d(0, 0, 0)"})),uD=W({blockSize:"100%",boxSizing:"border-box",display:"flex",flexShrink:0,inlineSize:21,insetInlineEnd:-10,justifyContent:"center",outline:0,position:"absolute",userSelect:"none","&::after":{backgroundColor:j.color.border.neutral,blockSize:"100%",boxSizing:"border-box",content:'""',display:"block",inlineSize:1}}),dD=W({blockSize:"100%",boxSizing:"border-box",flex:"0 0 auto",flexShrink:0,inlineSize:10,userSelect:"none"}),fD=W({backgroundColor:j.color.background.accentEmphasis,display:"none",flexShrink:0,height:"100%",insetInlineEnd:0,pointerEvents:"none",position:"absolute",top:1,width:2,zIndex:3,"&[data-resizing=true]":{display:"block"}}),hD=W({backgroundColor:j.color.background.accentEmphasis,display:"none",height:"100%",position:"absolute",top:0,width:2}),pD=W({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),dC=W({boxSizing:"border-box",display:"flex",position:"relative",outline:0,[`${Rr.selector("body")} &::after`]:{content:'""',boxShadow:`inset 0 -1px 0 0 ${j.color.border.muted}`,position:"absolute",inset:0,pointerEvents:"none",zIndex:2},"&[data-flush-with-container-bottom]::after":{display:"none"},'&[aria-selected="true"]::after':{boxShadow:`inset 0 -1px 0 0 ${j.color.alias.backgroundSelectedHovered}`},'&[data-next-selected="true"]::after':{boxShadow:`inset 0 -1px 0 0 ${j.color.alias.backgroundSelectedHovered}`},[`${Rr.selector("root")}:not([data-prominence="low"]) &`]:{"&:first-child":{borderStartStartRadius:`calc(${j.size.radius.medium} - ${j.size.border.regular})`,borderStartEndRadius:`calc(${j.size.radius.medium} - ${j.size.border.regular})`},"&:last-child":{borderEndStartRadius:`calc(${j.size.radius.medium} - ${j.size.border.regular})`,borderEndEndRadius:`calc(${j.size.radius.medium} - ${j.size.border.regular})`}},"&[data-focus-visible]":{"&::before":{backgroundColor:j.color.background.accentEmphasis,borderRadius:j.size.space.small,content:'""',insetInlineStart:j.size.space.xsmall,marginBlock:j.size.space.xsmall,marginInlineEnd:`calc(${j.size.space.small} * -1)`,position:"sticky",width:j.size.space.small,zIndex:4}},[`&[data-hovered=true] ${Rr.selector("cell")}`]:{backgroundColor:j.color.scale.slate2},[`&[data-pressed=true] ${Rr.selector("cell")}`]:{backgroundColor:j.color.scale.slate3},[`&[data-disabled] ${Rr.selector("cell")}`]:{color:j.color.alias.foregroundDisabled},[`&[aria-selected="true"] ${Rr.selector("cell")}`]:{backgroundColor:j.color.alias.backgroundSelected},[`&[aria-selected="true"][data-hovered=true] ${Rr.selector("cell")}`]:{backgroundColor:j.color.alias.backgroundSelectedHovered}}),gD=W({backgroundColor:j.color.background.canvas,border:`${j.size.border.regular} solid ${j.color.alias.borderSelected}`,borderRadius:j.size.radius.small,paddingInline:j.size.space.medium,position:"relative",outline:0,width:j.size.alias.singleLineWidth,"&[data-multi=true]::after":{backgroundColor:"inherit",border:"inherit",borderRadius:"inherit",content:'" "',display:"block",height:"100%",insetBlockStart:j.size.space.small,insetInlineStart:j.size.space.small,position:"absolute",width:"100%",zIndex:-1}}),fC=W({boxSizing:"border-box",cursor:"default",display:"flex",height:"100%",justifyContent:"flex-start",minWidth:0,outline:0,paddingInline:j.size.space.medium,position:"relative",textAlign:"start","&[data-focus=visible]":{borderRadius:j.size.radius.small,inset:0,outline:`${j.size.alias.focusRing} solid ${j.color.alias.focusRing}`,outlineOffset:`calc(${j.size.alias.focusRingGap} * -1)`,position:"absolute"},paddingBlock:j.size.space.regular,'&[data-density="compact"]':{paddingBlock:j.size.space.small},'&[data-density="spacious"]':{paddingBlock:j.size.space.medium},'&[data-align="end"]':{justifyContent:"flex-end",textAlign:"end"},'&[data-align="center"]':{justifyContent:"center",textAlign:"center"},'&[data-overflow-mode="truncate"]':{alignItems:"center"}}),mD=W({[`${Rr.selector("body")} &`]:{backgroundColor:j.color.background.canvas}}),Nh=Ye(Rr.element("cell"),fC,W({color:j.color.foreground.neutral}));W({minWidth:0,flex:1});const jh=Ye(fC,W({alignItems:"center",backgroundColor:j.color.background.surface,color:j.color.foreground.neutralSecondary,minWidth:0,flex:1,"&[aria-sort]":{display:"grid",gridTemplateAreas:'". sort-indicator"','&[data-align="end"]':{gridTemplateAreas:'"sort-indicator ."'},"&[data-hovered=true]":{color:j.color.foreground.neutralEmphasis}}})),yD=W({paddingInlineStart:j.size.space.regular,paddingInlineEnd:0}),hC=W({paddingBlock:0,paddingInlineEnd:j.size.space.regular,label:{paddingInlineEnd:j.size.space.regular,paddingBlock:j.size.space.regular},'&[data-density="compact"]':{paddingBlock:0,label:{paddingBlock:j.size.space.small}},'&[data-density="spacious"]':{paddingBlock:0,label:{paddingBlock:j.size.space.medium}}});function bD(t){const e=$e(13),{itemText:n,itemCount:r,height:i,maxWidth:s}=t,o=r>1;let l;e[0]!==i||e[1]!==s?(l={height:i,maxWidth:s},e[0]=i,e[1]=s,e[2]=l):l=e[2];let a;e[3]!==n?(a=h.jsx(Y,{children:n}),e[3]=n,e[4]=a):a=e[4];let c;e[5]!==o||e[6]!==r?(c=o&&h.jsx(te,{alignItems:"center",backgroundColor:"accentEmphasis",borderRadius:"small",gridArea:"badge",justifyContent:"center",minWidth:"element.small",padding:"small",children:h.jsx(Y,{align:"center",color:"inverse",size:"small",weight:"medium",children:r})}),e[5]=o,e[6]=r,e[7]=c):c=e[7];let u;return e[8]!==o||e[9]!==l||e[10]!==a||e[11]!==c?(u=h.jsxs(te,{alignItems:"center",justifyContent:"space-between","data-multi":o,UNSAFE_className:gD,UNSAFE_style:l,children:[a,c]}),e[8]=o,e[9]=l,e[10]=a,e[11]=c,e[12]=u):u=e[12],u}function ex(t){var e,n,r,i;let{rowProps:s,target:o,visibleRect:l}=t,{dropState:a,dragAndDropHooks:c}=jn(),u=C.useRef(null);Ue(!!(c!=null&&c.useDropIndicator),"dragAndDropHooks.useDropIndicator is not defined."),Ue(!!a,"dropState is not defined.");let{dropIndicatorProps:d}=c.useDropIndicator(t,a,u),{visuallyHiddenProps:f}=yb(),p=a&&a.isDropTarget(o);if(!p&&d["aria-hidden"])return null;let g=(e=Number(s==null||(n=s.style)===null||n===void 0?void 0:n.top))!==null&&e!==void 0?e:0,m=(r=Number(s==null||(i=s.style)===null||i===void 0?void 0:i.height))!==null&&r!==void 0?r:0;return h.jsx("div",{style:{left:l.x,position:"absolute",top:g+(o.dropPosition==="after"?m:0),width:l.width,zIndex:4},role:"row","aria-hidden":d["aria-hidden"],children:h.jsx(sR,{role:"gridcell",isDropTarget:p,children:h.jsx("div",{...f,role:"button",...d,ref:u})})})}const Tb={"ar-AE":{collapse:"طي",columnResizer:"أداة تغيير حجم العمود",drag:"سحب",expand:"مد",loading:"جارٍ التحميل...",loadingMore:"جارٍ تحميل المزيد...",resizeColumn:"تغيير حجم العمود",sortAscending:"فرز بترتيب تصاعدي",sortDescending:"فرز بترتيب تنازلي"},"bg-BG":{collapse:"Свиване",columnResizer:"Преоразмеряване на колони",drag:"Плъзнете",expand:"Разширяване",loading:"Зареждане...",loadingMore:"Зареждане на още...",resizeColumn:"Преоразмеряване на колона",sortAscending:"Възходящо сортиране",sortDescending:"Низходящо сортиране "},"cs-CZ":{collapse:"Zmenšit",columnResizer:"Změna velikosti sloupce",drag:"Přetáhnout",expand:"Roztáhnout",loading:"Načítání...",loadingMore:"Načítání dalších...",resizeColumn:"Změnit velikost sloupce",sortAscending:"Seřadit vzestupně",sortDescending:"Seřadit sestupně"},"da-DK":{collapse:"Skjul",columnResizer:"Kolonneændring",drag:"Træk",expand:"Udvid",loading:"Indlæser ...",loadingMore:"Indlæser flere ...",resizeColumn:"Tilpas størrelse på kolonne",sortAscending:"Sorter stigende",sortDescending:"Sorter faldende"},"de-DE":{collapse:"Reduzieren",columnResizer:"Spaltenanpassung",drag:"Ziehen",expand:"Erweitern",loading:"Laden...",loadingMore:"Mehr laden ...",resizeColumn:"Spaltengröße ändern",sortAscending:"Aufsteigend sortieren",sortDescending:"Absteigend sortieren"},"el-GR":{collapse:"Σύμπτυξη",columnResizer:"Αλλαγή μεγέθους στήλης",drag:"Μεταφορά",expand:"Ανάπτυξη",loading:"Φόρτωση...",loadingMore:"Φόρτωση περισσότερων...",resizeColumn:"Αλλαγή μεγέθους στήλης",sortAscending:"Ταξινόμηση κατά αύξουσα σειρά",sortDescending:"Ταξινόμηση κατά φθίνουσα σειρά"},"en-US":{loading:"Loading…",loadingMore:"Loading more…",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",resizeColumn:"Resize column",columnResizer:"Column resizer",drag:"Drag",expand:"Expand",collapse:"Collapse"},"es-ES":{collapse:"Contraer",columnResizer:"Redimensionador de columnas",drag:"Arrastrar",expand:"Ampliar",loading:"Cargando…",loadingMore:"Cargando más…",resizeColumn:"Cambiar el tamaño de la columna",sortAscending:"Orden de subida",sortDescending:"Orden de bajada"},"et-EE":{collapse:"Ahenda",columnResizer:"Veeru suuruse muutja",drag:"Lohista",expand:"Laienda",loading:"Laadimine...",loadingMore:"Laadi rohkem...",resizeColumn:"Muuda veeru suurust",sortAscending:"Sordi kasvavalt",sortDescending:"Sordi kahanevalt"},"fi-FI":{collapse:"Pienennä",columnResizer:"Sarakekoon muuttaja",drag:"Vedä",expand:"Laajenna",loading:"Ladataan…",loadingMore:"Ladataan lisää…",resizeColumn:"Muuta sarakkeen kokoa",sortAscending:"Lajittelujärjestys: nouseva",sortDescending:"Lajittelujärjestys: laskeva"},"fr-FR":{collapse:"Réduire",columnResizer:"Redimensionnement de colonne",drag:"Faire glisser",expand:"Développer",loading:"Chargement...",loadingMore:"Chargement supplémentaire...",resizeColumn:"Redimensionner la colonne",sortAscending:"Trier par ordre croissant",sortDescending:"Trier par ordre décroissant"},"he-IL":{collapse:"כווץ",columnResizer:"שינוי גודל עמודה",drag:"גרור",expand:"הרחב",loading:"טוען...",loadingMore:"טוען עוד...",resizeColumn:"שנה את גודל העמודה",sortAscending:"מיין בסדר עולה",sortDescending:"מיין בסדר יורד"},"hr-HR":{collapse:"Sažmi",columnResizer:"Alat za promjenu veličine stupca",drag:"Povucite",expand:"Proširi",loading:"Učitavam...",loadingMore:"Učitavam još...",resizeColumn:"Promijeni veličinu stupca",sortAscending:"Sortiraj uzlazno",sortDescending:"Sortiraj silazno"},"hu-HU":{collapse:"Összecsukás",columnResizer:"Oszlopátméretező",drag:"Húzás",expand:"Kibontás",loading:"Betöltés folyamatban…",loadingMore:"Továbbiak betöltése folyamatban…",resizeColumn:"Oszlop átméretezése",sortAscending:"Növekvő rendezés",sortDescending:"Csökkenő rendezés"},"it-IT":{collapse:"Comprimi",columnResizer:"Ridimensionamento colonne",drag:"Trascina",expand:"Espandi",loading:"Caricamento...",loadingMore:"Caricamento altri...",resizeColumn:"Ridimensiona colonna",sortAscending:"Ordinamento crescente",sortDescending:"Ordinamento decrescente"},"ja-JP":{collapse:"折りたたむ",columnResizer:"列リサイザー",drag:"ドラッグ",expand:"展開",loading:"読み込み中...",loadingMore:"さらに読み込み中...",resizeColumn:"列幅を変更",sortAscending:"昇順に並べ替え",sortDescending:"降順に並べ替え"},"ko-KR":{collapse:"접기",columnResizer:"열 크기 조정기",drag:"드래그",expand:"펼치기",loading:"로드 중",loadingMore:"추가 로드 중",resizeColumn:"열 크기 조정",sortAscending:"오름차순 정렬",sortDescending:"내림차순 정렬"},"lt-LT":{collapse:"Sutraukti",columnResizer:"Stulpelio dydžio keitiklis",drag:"Vilkti",expand:"Išskleisti",loading:"Įkeliama...",loadingMore:"Įkeliama daugiau...",resizeColumn:"Keisti stulpelio dydį",sortAscending:"Rikiuoti didėjimo tvarka",sortDescending:"Rikiuoti mažėjimo tvarka"},"lv-LV":{collapse:"Sakļaut",columnResizer:"Kolonnas izmēru mainītājs",drag:"Vilkšana",expand:"Izvērst",loading:"Notiek ielāde...",loadingMore:"Tiek ielādēts vēl...",resizeColumn:"Mainīt kolonnas lielumu",sortAscending:"Kārtot augošā secībā",sortDescending:"Kārtot dilstošā secībā"},"nb-NO":{collapse:"Skjul",columnResizer:"Størrelsesendring av kolonne",drag:"Dra",expand:"Utvid",loading:"Laster inn ...",loadingMore:"Laster inn flere ...",resizeColumn:"Endre størrelse på kolonne",sortAscending:"Sorter stigende",sortDescending:"Sorter synkende"},"nl-NL":{collapse:"Samenvouwen",columnResizer:"Groottewijziging van kolom",drag:"Slepen",expand:"Uitvouwen",loading:"Laden...",loadingMore:"Meer laden...",resizeColumn:"Kolomgrootte wijzigen",sortAscending:"Oplopend sorteren",sortDescending:"Aflopend sorteren"},"pl-PL":{collapse:"Zwiń",columnResizer:"Narzędzie zmiany rozmiaru kolumny",drag:"Przeciągnij",expand:"Rozwiń",loading:"Ładowanie...",loadingMore:"Wczytywanie większej liczby...",resizeColumn:"Zmień rozmiar kolumny",sortAscending:"Sortuj rosnąco",sortDescending:"Sortuj malejąco"},"pt-BR":{collapse:"Recolher",columnResizer:"Redimensionamento de colunas",drag:"Arraste",expand:"Expandir",loading:"Carregando...",loadingMore:"Carregando mais...",resizeColumn:"Redimensionar coluna",sortAscending:"Ordenar por ordem crescente",sortDescending:"Ordenar por ordem decrescente"},"pt-PT":{collapse:"Colapsar",columnResizer:"Redimensionador de coluna",drag:"Arrastar",expand:"Expandir",loading:"A carregar...",loadingMore:"A carregar mais...",resizeColumn:"Redimensionar coluna",sortAscending:"Ordenar por ordem ascendente",sortDescending:"Ordenar por ordem decrescente"},"ro-RO":{collapse:"Restrângeți",columnResizer:"Instrument redimensionare coloane",drag:"Trageți",expand:"Extindeți",loading:"Se încarcă...",loadingMore:"Se încarcă mai multe...",resizeColumn:"Redimensionați coloana",sortAscending:"Sortați crescător",sortDescending:"Sortați descrescător"},"ru-RU":{collapse:"Свернуть",columnResizer:"Средство изменения размера столбцов",drag:"Перетаскивание",expand:"Развернуть",loading:"Загрузка...",loadingMore:"Дополнительная загрузка...",resizeColumn:"Изменить размер столбца",sortAscending:"Сортировать по возрастанию",sortDescending:"Сортировать по убыванию"},"sk-SK":{collapse:"Zbaliť",columnResizer:"Nástroj na zmenu veľkosti stĺpcov",drag:"Presunúť",expand:"Rozbaliť",loading:"Načítava sa...",loadingMore:"Načítava sa viac...",resizeColumn:"Zmeniť veľkosť stĺpca",sortAscending:"Zoradiť vzostupne",sortDescending:"Zoradiť zostupne"},"sl-SI":{collapse:"Strni",columnResizer:"Prilagojevalnik velikosti stolpcev",drag:"Povleci",expand:"Razširi",loading:"Nalaganje...",loadingMore:"Nalaganje več vsebine...",resizeColumn:"Spremeni velikost stolpca",sortAscending:"Razvrsti naraščajoče",sortDescending:"Razvrsti padajoče"},"sr-SP":{collapse:"Sažmi",columnResizer:"Alat za promenu veličine kolone",drag:"Prevuci",expand:"Proširi",loading:"Učitavam...",loadingMore:"Učitavam još...",resizeColumn:"Promeni veličinu kolone",sortAscending:"Sortiraj po rastućem redosledu",sortDescending:"Sortiraj po opadajućem redosledu"},"sv-SE":{collapse:"Dölj",columnResizer:"Ändra storlek på kolumn",drag:"Dra",expand:"Expandera",loading:"Läser in...",loadingMore:"Läser in mer...",resizeColumn:"Ändra storlek på kolumn",sortAscending:"Sortera i stigande ordning",sortDescending:"Sortera i fallande ordning"},"tr-TR":{collapse:"Daralt",columnResizer:"Yeniden sütun boyutlandırıcı",drag:"Sürükle",expand:"Genişlet",loading:"Yükleniyor...",loadingMore:"Daha fazla yükleniyor...",resizeColumn:"Sütunu yeniden boyutlandır",sortAscending:"Artan Sıralama",sortDescending:"Azalan Sıralama"},"uk-UA":{collapse:"Згорнути",columnResizer:"Засіб змінення розміру стовпця",drag:"Перетягнути",expand:"Розгорнути",loading:"Завантаження…",loadingMore:"Завантаження інших об’єктів...",resizeColumn:"Змінити розмір стовпця",sortAscending:"Сортувати за зростанням",sortDescending:"Сортувати за спаданням"},"zh-CN":{collapse:"折叠",columnResizer:"列尺寸调整器",drag:"拖动",expand:"扩展",loading:"正在加载...",loadingMore:"正在加载更多...",resizeColumn:"调整列大小",sortAscending:"升序排序",sortDescending:"降序排序"},"zh-TW":{collapse:"收合",columnResizer:"欄大小調整器",drag:"拖曳",expand:"展開",loading:"正在載入",loadingMore:"正在載入更多…",resizeColumn:"調整欄大小",sortAscending:"升序排序",sortDescending:"降序排序"}},Ya={ew:"col-resize",w:"w-resize",e:"e-resize"},Nb=C.createContext(null);function xD(){const t=C.useContext(Nb);if(t===null)throw new Error("ResizeStateContext not found");return t}function vD(t,e){const n=$e(29),{column:r,showResizer:i}=t,{isEmpty:s,onFocusedResizer:o}=jn(),l=C.useContext(Nb);iD();const a=Be(Tb),{direction:c}=ro(),[u,d]=C.useState(!1);let f,p;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const B=U=>{U.pointerType==="mouse"&&d(!0)},z=U=>{U.pointerType==="mouse"&&d(!1)};return document.addEventListener("pointerdown",B,{capture:!0}),document.addEventListener("pointerup",z,{capture:!0}),()=>{document.removeEventListener("pointerdown",B,{capture:!0}),document.removeEventListener("pointerup",z,{capture:!0})}},p=[],n[0]=f,n[1]=p):(f=n[0],p=n[1]),C.useEffect(f,p);const g=Ea(e);let m;n[2]!==a||n[3]!==s||n[4]!==t?(m=Cr(t,{"aria-label":a.format("columnResizer"),isDisabled:s}),n[2]=a,n[3]=s,n[4]=t,n[5]=m):m=n[5];const{inputProps:b,resizerProps:y}=kO(m,l,g),x=l.getColumnMinWidth(r.key)>=l.getColumnWidth(r.key),v=l.getColumnMaxWidth(r.key)<=l.getColumnWidth(r.key),w=l.resizingColumn===r.key;let S;x?S=c==="rtl"?Ya.w:Ya.e:v?S=c==="rtl"?Ya.e:Ya.w:S=Ya.ew;const k=i?void 0:"none";let E;n[6]!==y.style||n[7]!==k||n[8]!==S?(E={...y.style,height:"100%",display:k,cursor:S},n[6]=y.style,n[7]=k,n[8]=S,n[9]=E):E=n[9];const T=E;let N;n[10]!==o||n[11]!==b?(N=Cr(b,{onFocus:o}),n[10]=o,n[11]=b,n[12]=N):N=n[12];let I;n[13]!==g||n[14]!==N?(I=h.jsx("input",{ref:g,...N}),n[13]=g,n[14]=N,n[15]=I):I=n[15];let A;n[16]!==y||n[17]!==T||n[18]!==I?(A=h.jsx(wO,{within:!0,focusRingClass:"focus-ring",children:h.jsx("div",{...y,role:"presentation",style:T,className:uD,children:I})}),n[16]=y,n[17]=T,n[18]=I,n[19]=A):A=n[19];let O;n[20]===Symbol.for("react.memo_cache_sentinel")?(O=h.jsx("div",{"aria-hidden":!0,role:"presentation",className:dD}),n[20]=O):O=n[20];const _=w&&u;let F;n[21]!==S?(F=h.jsx("div",{style:{bottom:0,cursor:S,left:0,position:"fixed",right:0,top:0}}),n[21]=S,n[22]=F):F=n[22];let M;n[23]!==_||n[24]!==F?(M=h.jsx(kD,{show:_,children:F}),n[23]=_,n[24]=F,n[25]=M):M=n[25];let P;return n[26]!==A||n[27]!==M?(P=h.jsxs(h.Fragment,{children:[A,O,M]}),n[26]=A,n[27]=M,n[28]=P):P=n[28],P}function kD(t){const e=$e(4),{show:n,children:r}=t,{getContainer:i}=SO();let s;if(e[0]!==n||e[1]!==i||e[2]!==r){var o;s=n?RS.createPortal(r,(o=i?.())!==null&&o!==void 0?o:document.body):null,e[0]=n,e[1]=i,e[2]=r,e[3]=s}else s=e[3];return s}const wD=wi.forwardRef(vD);class SD extends xO{isLoading=!1;buildCollection(){let e=this.collection.body.props.loadingState;return this.isLoading=e==="loading"||e==="loadingMore",super.buildCollection()}buildColumn(e,n,r){let i=super.buildColumn(e,n,r);return i.layoutInfo.allowOverflow=!0,i}buildBody(){let e=super.buildBody(0),{children:n,layoutInfo:r}=e,i=e.layoutInfo.rect.width;if(this.isLoading){let s=new Wp(40,n?.length===0?40:r.rect.maxY,(i||this.virtualizer.visibleRect.width)-80,n?.length===0?this.virtualizer.visibleRect.height-80:60),o=new G1("loader","loader",s);o.parentKey=r.key,o.isSticky=n?.length===0;let l={layoutInfo:o,validRect:o.rect};n?.push(l),this.layoutNodes.set(o.key,l),r.rect.height=o.rect.maxY,i=Math.max(i,s.width)}else if(n?.length===0){let s=new Wp(40,40,this.virtualizer.visibleRect.width-80,this.virtualizer.visibleRect.height-80),o=new G1("empty","empty",s);o.parentKey=r.key,o.isSticky=!0;let l={layoutInfo:o,validRect:o.rect};n.push(l),r.rect.height=o.rect.maxY,i=Math.max(i,s.width)}return e}buildRow(e,n,r){let i=super.buildRow(e,n,r);return i.layoutInfo.rect.height+=1,i}buildCell(e,n,r){var i;let s=super.buildCell(e,n,r);return(i=e.column)!==null&&i!==void 0&&i.props.hideHeader&&(s.layoutInfo.allowOverflow=!0),s}getEstimatedRowHeight(){return super.getEstimatedRowHeight()+1}isStickyColumn(e){var n,r;return((n=e.props)===null||n===void 0?void 0:n.isDragButtonCell)||((r=e.props)===null||r===void 0?void 0:r.isSelectionCell)}getDropTargetFromPoint(e,n,r){var i;let s=(i=this.virtualizer.layout.getVisibleLayoutInfos(new Wp(e,n,1,1)).find(o=>o.type==="headerrow"))===null||i===void 0?void 0:i.rect.height;return s&&(n-=s),super.getDropTargetFromPoint(e,n,r)}}const tx=36,nx=36,rx=36,ix=20,Jp={compact:28,regular:36,spacious:44};function CD(t){var e,n,r,i,s,o;let{density:l="regular",prominence:a="default",dragAndDropHooks:c,onAction:u,onResizeEnd:d,onResizeStart:f,overflowMode:p="truncate"}=t,g=!!(c!=null&&c.useDraggableCollectionState),m=!!(c!=null&&c.useDroppableCollectionState),b=C.useRef(g),y=C.useRef(m),x=rO({...t,showSelectionCheckboxes:!0,showDragButtons:g,selectionBehavior:"toggle"});C.useEffect(()=>{b.current!==g&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),y.current!==m&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),"expandedKeys"in x&&(g||m)&&console.warn("Drag and drop is not yet fully supported with expandable rows and may produce unexpected results.")},[g,m,x]);let[v,w]=C.useState(!1),[,S]=C.useState(!1),k=C.useRef(null),E=C.useRef(null),T=C.useRef(null),N=Si(t),I=C.useMemo(()=>new SD({rowHeight:t.overflowMode==="wrap"?void 0:Jp[l],estimatedRowHeight:t.overflowMode==="wrap"?Jp[l]:void 0,headingHeight:t.overflowMode==="wrap"?void 0:tx,estimatedHeadingHeight:t.overflowMode==="wrap"?tx:void 0}),[t.overflowMode,l]),A,O=C.useRef(null);c!=null&&c.useDraggableCollection&&c!==null&&c!==void 0&&c.useDraggableCollectionState&&(A=c.useDraggableCollectionState({collection:x.collection,selectionManager:x.selectionManager,preview:O}),c.useDraggableCollection({},A,k));let _=c?.DragPreview,F,M,P=!1;c!=null&&c.useDroppableCollection&&c!==null&&c!==void 0&&c.useDroppableCollectionState&&(F=c.useDroppableCollectionState({collection:x.collection,selectionManager:x.selectionManager}),M=c.useDroppableCollection({keyboardDelegate:new TS({collection:x.collection,disabledKeys:x.selectionManager.disabledKeys,ref:k,layoutDelegate:I}),dropTargetDelegate:I},F,k),P=F.isDropTarget({type:"root"}));let{gridProps:B}=iO({...t,isVirtualized:!0,layoutDelegate:I,onRowAction:u??t.onRowAction,scrollRef:T},x,k),[z,U]=C.useState(!1),[R,J]=C.useState(!1),Z=C.useCallback((se,pe,Ze,kt)=>pe.viewType==="rowgroup"?h.jsx(TD,{layoutInfo:pe.layoutInfo,parent:se?.layoutInfo,role:"presentation",children:kt(Ze)},pe.key):pe.viewType==="header"?h.jsx(ID,{layoutInfo:pe.layoutInfo,parent:se?.layoutInfo,children:kt(Ze)},pe.key):pe.viewType==="row"?h.jsx(_D,{item:pe.content,layoutInfo:pe.layoutInfo,parent:se?.layoutInfo,children:kt(Ze)},pe.key):pe.viewType==="headerrow"?h.jsx(ND,{onHoverChange:J,layoutInfo:pe.layoutInfo,parent:se?.layoutInfo,item:pe.content,children:kt(Ze)},pe.key):h.jsx(FD,{layoutInfo:pe.layoutInfo,virtualizer:pe.virtualizer,parent:se,children:pe.rendered},pe.key),[]),D=C.useCallback((se,pe)=>{switch(se){case"header":case"rowgroup":case"section":case"row":case"headerrow":return null;case"cell":return pe.props.isSelectionCell?h.jsx(PD,{cell:pe}):pe.props.isDragButtonCell?h.jsx(OD,{cell:pe}):h.jsx(DD,{cell:pe});case"placeholder":return h.jsx("div",{role:"gridcell","aria-colindex":pe.index&&pe.index+1,"aria-colspan":pe.colspan&&pe.colspan>1?pe.colspan:void 0});case"column":return pe.props.isSelectionCell?h.jsx($D,{column:pe}):pe.props.isDragButtonCell?h.jsx(AD,{column:pe}):pe.props.hideHeader?h.jsxs(fe,{placement:"top",trigger:"focus",children:[h.jsx(sx,{column:pe}),h.jsx(he,{children:pe.rendered})]}):pe.props.allowsResizing&&pe.nextKey?h.jsx(jD,{column:pe}):h.jsx(sx,{column:pe});case"loader":return h.jsx(LD,{});case"empty":return h.jsx(BD,{});default:return null}},[]),[ie,oe]=C.useState(!1),[re,me]=C.useState(!1),ee=C.useRef({x:0,y:0,width:0,height:0}),we=C.useCallback(se=>{ee.current.width===se.width&&ee.current.height===se.height||(ee.current=se,T.current&&(oe(T.current.clientWidth+2<T.current.offsetWidth),me(T.current.clientHeight+2<T.current.offsetHeight)))},[]),{isFocusVisible:ve,focusProps:Ae}=Cm(),Oe=x.collection.size===0,ze=()=>{T.current&&E.current&&(T.current.scrollLeft=E.current.scrollLeft)},Me=C.useCallback(se=>{S(!0),f?.(se)},[S,f]),Le=C.useCallback(se=>{w(!1),S(!1),d?.(se)},[d,w,S]),be=x.selectionManager.focusedKey,rt=null;((e=F)===null||e===void 0||(e=e.target)===null||e===void 0?void 0:e.type)==="item"&&(rt=F.target.key,F.target.dropPosition==="before"&&rt!==x.collection.getFirstKey()&&(rt=x.collection.getKeyBefore(rt)));let jt=C.useMemo(()=>new Set([be,rt].filter(se=>se!==null)),[be,rt]),ot=Cr(m?(n=M)===null||n===void 0?void 0:n.collectionProps:{},B,Ae);c!=null&&(r=c.isVirtualDragging)!==null&&r!==void 0&&r.call(c)&&delete ot.tabIndex;let Ft={density:l,overflowMode:p,prominence:a};return h.jsxs(lC.Provider,{value:{cosmeticConfig:Ft,dragAndDropHooks:c,dragState:A,dropState:F,headerMenuOpen:z,headerRowHovered:R,isEmpty:Oe,isInResizeMode:v,isTableDraggable:g,isTableDroppable:m,layout:I,onFocusedResizer:ze,onResize:(i=t.onResize)!==null&&i!==void 0?i:()=>{},onResizeEnd:Le,onResizeStart:Me,renderEmptyState:t.renderEmptyState,setHeaderMenuOpen:U,setIsInResizeMode:w,state:x},children:[h.jsx(ED,{...ot,...N,...Ar({...Ft,scrollbar:ie&&re?"both":ie?"vertical":re?"horizontal":void 0}),className:Ye(oD,N.className),tableState:x,cosmeticConfig:Ft,layout:I,collection:x.collection,persistedKeys:jt,renderView:D,renderWrapper:Z,onVisibleRectChange:we,domRef:k,headerRef:E,bodyRef:T,isFocusVisible:ve,isVirtualDragging:(s=c==null||(o=c.isVirtualDragging)===null||o===void 0?void 0:o.call(c))!==null&&s!==void 0?s:!1,isRootDropTarget:P}),_&&g&&h.jsx(_,{ref:O,children:()=>{var se,pe,Ze,kt,cs,H,ne;if(c!=null&&c.renderPreview&&(se=A)!==null&&se!==void 0&&se.draggingKeys)return c.renderPreview(A.draggingKeys,A.draggedKey);let Ie=(pe=(Ze=A)===null||Ze===void 0?void 0:Ze.draggingKeys.size)!==null&&pe!==void 0?pe:0,Fe=T==null||(kt=T.current)===null||kt===void 0?void 0:kt.getBoundingClientRect().width,Xe=Jp[l],Yn=(cs=(H=x.collection).getTextValue)===null||cs===void 0?void 0:cs.call(H,(ne=A)===null||ne===void 0?void 0:ne.draggedKey);return h.jsx(bD,{itemText:Yn,itemCount:Ie,height:Xe,maxWidth:Fe})}})]})}function ED(t){var e;let{cosmeticConfig:n,tableState:r,layout:i,collection:s,persistedKeys:o,renderView:l,renderWrapper:a,domRef:c,bodyRef:u,headerRef:d,onVisibleRectChange:f,isFocusVisible:p,isVirtualDragging:g,isRootDropTarget:m,...b}=t,{direction:y}=ro(),x=s.body.props.loadingState,v=x==="loading"||x==="loadingMore",w=s.body.props.onLoadMore,[S,k]=C.useState(0);const E=C.useMemo(()=>({text:{truncate:n.overflowMode==="truncate"}}),[n.overflowMode]),T=C.useCallback(({props:{hideHeader:Z,isSelectionCell:D,showDivider:ie,isDragButtonCell:oe}})=>{if(Z){let re=nx;return ie?re+1:re}else{if(D)return rx;if(oe)return ix}},[]),N=C.useCallback(({props:{hideHeader:Z,isSelectionCell:D,showDivider:ie,isDragButtonCell:oe}})=>{if(Z){let re=nx;return ie?re+1:re}else{if(D)return rx;if(oe)return ix}return 75},[]);let I=sO({tableWidth:S,getDefaultWidth:T,getDefaultMinWidth:N},r),A=oO({layout:i,collection:s,renderView:l,onVisibleRectChange(Z){u.current&&(u.current.scrollTop=Z.y,lO(u.current,y,Z.x))},persistedKeys:o,layoutOptions:C.useMemo(()=>({columnWidths:I.columnWidths}),[I.columnWidths])});aO({isLoading:v,onLoadMore:w,scrollOffset:1},u);let O=C.useCallback(Z=>{A.setVisibleRect(Z)},[A]),_=C.useCallback(Z=>{k(Z.width),O(Z),f(Z)},[O,f]);C.useEffect(()=>{NS()==="keyboard"&&u.current&&c.current&&d.current&&d.current.contains(document.activeElement)&&document.activeElement instanceof HTMLElement&&(cO(d.current,document.activeElement),uO(document.activeElement,{containingElement:c.current}),u.current.scrollLeft=d.current.scrollLeft)},[A.contentSize,d,u,c]);let F=((e=i.getLayoutInfo("header"))===null||e===void 0?void 0:e.rect.height)||0,M=C.useCallback(()=>{u.current&&d.current&&(d.current.scrollLeft=u.current.scrollLeft)},[u,d]),P=I.resizingColumn!=null?i.getLayoutInfo(I.resizingColumn).rect.maxX-2:0,B=I.resizingColumn!=null?I.getColumnWidth(I.resizingColumn):0,z=C.useMemo(()=>({width:B,key:I.resizingColumn}),[B,I.resizingColumn]);g&&delete b.tabIndex;let U=s.columns[0],R=0;(U.props.isSelectionCell||U.props.isDragButtonCell)&&(R=I.getColumnWidth(U.key));let J=pC(null,A.visibleViews,a);return h.jsx(aC.Provider,{value:z,children:h.jsx(jS,{children:h.jsxs("div",{...b,ref:c,children:[h.jsx("div",{role:"presentation",className:lD,style:{height:F,overflow:"hidden",position:"relative",willChange:A.isScrolling?"scroll-position":void 0,scrollPaddingInlineStart:R},ref:d,children:h.jsx(Nb.Provider,{value:I,children:J[0]})}),h.jsx(Ci,{slots:E,children:h.jsxs(dO,{"data-focus":p?"visible":void 0,className:cD,role:"rowgroup",tabIndex:g?void 0:-1,style:{flex:1,scrollPaddingInlineStart:R},innerStyle:{overflow:"visible"},ref:u,contentSize:A.contentSize,onVisibleRectChange:_,onScrollStart:A.startScrolling,onScrollEnd:A.endScrolling,onScroll:M,children:[J[1],h.jsx("div",{className:hD,style:{[y==="ltr"?"left":"right"]:`${P}px`,height:`${Math.max(A.virtualizer.contentSize.height,A.virtualizer.visibleRect.height)}px`,display:I.resizingColumn?"block":"none"}})]})})]})})})}function pC(t,e,n){return e.map(r=>n(t,r,r.children?Array.from(r.children):[],i=>pC(r,i,n)))}function jb(t,e){let{direction:n}=ro(),r=vO(t,n,e);return r.overflow==="hidden"&&(r.overflow="visible"),r}function ID({children:t,layoutInfo:e,parent:n,...r}){let{rowGroupProps:i}=OS(),s=jb(e,n);return h.jsx("div",{...i,...r,className:aD,style:s,children:t})}function AD(t){let{column:e}=t,n=C.useRef(null),{state:r}=jn(),{columnHeaderProps:i}=Sh({node:e,isVirtualized:!0},r,n),s=Be(Tb);return h.jsx(Ei,{children:h.jsx("div",{...i,ref:n,className:jh,style:{padding:0,height:"inherit"},children:h.jsx(Ch,{children:s.format("drag")})})})}function TD({children:t,layoutInfo:e,parent:n,...r}){let{rowGroupProps:i}=OS(),s=jb(e,n);return h.jsx("div",{...i,...r,style:s,children:t})}function ND(t){let e=C.useRef(null),{state:n}=jn(),{hoverProps:r}=Su(t),{rowProps:i}=fO({node:t.item,isVirtualized:!0},n);return h.jsx("div",{className:dC,...Cr(i,r),ref:e,children:t.children})}function sx(t){let{column:e}=t,n=e.props,r=C.useRef(null),{cosmeticConfig:i,isEmpty:s,state:o}=jn(),{columnHeaderProps:l}=Sh({node:e,isVirtualized:!0},o,r),{hoverProps:a,isHovered:c}=Su({...t,isDisabled:s||!n.allowsSorting}),u=C.useMemo(()=>({text:{color:"inherit",weight:"medium",truncate:!0}}),[]);return h.jsx(Ei,{children:h.jsxs("div",{...Cr(l,a),...Ar({align:n.align,isHovered:c,overflowMode:"truncate",prominence:i.prominence},{omitFalsyValues:!0,trimBooleanKeys:!0}),className:jh,ref:r,children:[h.jsx(Ci,{slots:u,children:n.hideHeader?h.jsx(Ch,{children:e.rendered}):rs(e.rendered)?h.jsx(Y,{children:e.rendered}):e.rendered}),n.allowsSorting&&h.jsx(uC,{})]})})}function jD(t){var e,n;let{column:r}=t,i=C.useRef(null),s=C.useRef(null),o=C.useRef(null),{state:l,onResizeStart:a,onResize:c,onResizeEnd:u,headerRowHovered:d,isEmpty:f}=jn(),p=xD(),{pressProps:g,isPressed:m}=_S({isDisabled:f}),{columnHeaderProps:b}=Sh({node:r,isVirtualized:!0},l,i),{hoverProps:y,isHovered:x}=Su({...t,isDisabled:f}),v=C.useMemo(()=>({text:{color:"inherit",weight:"medium",truncate:!0}}),[]),w=p.resizingColumn,S=!f&&(d&&NS()!=="keyboard"||w!=null),k="start";return r.props.align==="center"||r.colspan&&r.colspan>1?k="center":r.props.align==="end"&&(k="end"),h.jsx(Ei,{children:h.jsxs("div",{...Ar({align:k,sortable:r.props.allowsSorting,resizable:r.props.allowsResizing,interaction:m?"press":x?"hover":void 0,sort:((e=l.sortDescriptor)===null||e===void 0?void 0:e.column)===r.key?(n=l.sortDescriptor)===null||n===void 0?void 0:n.direction:void 0},{omitFalsyValues:!0,trimBooleanKeys:!0}),...Cr(b,g,y),ref:i,className:jh,children:[h.jsx(Ci,{slots:v,children:r.props.hideHeader?h.jsx(Ch,{children:r.rendered}):rs(r.rendered)?h.jsx(Y,{children:r.rendered}):r.rendered}),r.props.allowsSorting&&h.jsx(uC,{}),h.jsx(wD,{ref:o,column:r,showResizer:S,onResizeStart:a,onResize:c,onResizeEnd:u,triggerRef:s}),h.jsx("div",{"aria-hidden":!0,"data-visible":w!=null,"data-resizing":w===r.key,className:fD})]})})}function _D(t){var e,n,r,i,s,o,l,a,c,u;let{item:d,children:f,layoutInfo:p,parent:g,...m}=t,b=C.useRef(null),{state:y,layout:x,dragAndDropHooks:v,isTableDraggable:w,isTableDroppable:S,dragState:k,dropState:E}=jn(),{rowProps:T,hasAction:N,allowsSelection:I}=hO({node:d,isVirtualized:!0,shouldSelectOnPressUp:w},y,b),A=y.selectionManager.isSelected(d.key),O=y.selectionManager.isDisabled(d.key),_=!O&&(N||I||w),F=S&&!O,{pressProps:M,isPressed:P}=_S({isDisabled:!_}),{isFocusVisible:B,focusProps:z}=Cm({within:!0}),{isFocusVisible:U,focusProps:R}=Cm(),{hoverProps:J,isHovered:Z}=Su({isDisabled:!_}),D=((e=y.collection.rows.find(ot=>ot.level===1))===null||e===void 0?void 0:e.key)===d.key,ie=d.nextKey==null,oe=!1;if(ie){var re,me;((re=x.getContentSize())===null||re===void 0?void 0:re.height)>=((me=x.virtualizer)===null||me===void 0?void 0:me.visibleRect.height)&&(oe=!0)}let ee=null;w&&(Ue(!!(v!=null&&v.useDraggableItem)),Ue(!!k),ee=v.useDraggableItem({key:d.key,hasDragButton:!0},k),O&&(ee=null));let we=null,ve=!1,Ae=null,Oe=C.useRef(null);if(S){Ue(!!(v!=null&&v.useDroppableItem)),Ue(!!(v!=null&&v.useDropIndicator)),Ue(!!E);let ot={type:"item",key:d.key,dropPosition:"on"};ve=E.isDropTarget(ot),we=v.useDroppableItem({target:ot},E,Oe),Ae=v.useDropIndicator({target:ot},E,Oe)}let ze=C.useRef(null),{buttonProps:Me}=pO({...(n=ee)===null||n===void 0?void 0:n.dragButtonProps,elementType:"div"},ze),Le=jb(p,g),be=Cr(T,m,{style:Le},z,R,J,M,(r=ee)===null||r===void 0?void 0:r.dragProps);v!=null&&(i=v.isVirtualDragging)!==null&&i!==void 0&&i.call(v)&&delete be.tabIndex;let rt=F?(s=we)===null||s===void 0?void 0:s.dropProps:{"aria-hidden":(o=we)===null||o===void 0?void 0:o.dropProps["aria-hidden"]},{visuallyHiddenProps:jt}=yb();return h.jsxs(cC.Provider,{value:{dragButtonProps:Me,dragButtonRef:ze,isHovered:Z,isFocusVisibleWithin:B},children:[S&&D&&h.jsx(ex,{rowProps:be,visibleRect:(l=x.virtualizer)===null||l===void 0?void 0:l.visibleRect,target:{key:d.key,type:"item",dropPosition:"before"}},`${d.key}-before`),S&&!((a=Ae)!==null&&a!==void 0&&a.isHidden)&&h.jsx("div",{role:"row",...jt,children:h.jsx("div",{role:"gridcell",children:h.jsx("div",{role:"button",...(c=Ae)===null||c===void 0?void 0:c.dropIndicatorProps,ref:Oe})})}),h.jsx("div",{...Cr(be,rt),...Ar({isDisabled:O,isDropTarget:ve,isFocusVisible:U,isFocusVisibleWithin:B,isFlushWithContainerBottom:oe,isFirstRow:D,isLastRow:ie,isHovered:Z,isPressed:P,isSelected:A,isNextSelected:d.nextKey&&y.selectionManager.isSelected(d.nextKey)},{omitFalsyValues:!0,trimBooleanKeys:!0}),ref:b,className:dC,children:f}),S&&h.jsx(ex,{rowProps:be,visibleRect:(u=x.virtualizer)===null||u===void 0?void 0:u.visibleRect,target:{key:d.key,type:"item",dropPosition:"after"}},`${d.key}-after`)]})}function OD(t){let{cell:e}=t,n=C.useRef(null),{cosmeticConfig:r,state:i,isTableDraggable:s}=jn(),o=e.parentKey&&i.selectionManager.isDisabled(e.parentKey),{gridCellProps:l}=bb({node:e,isVirtualized:!0},i,n);return h.jsx(Ei,{children:h.jsx("div",{...l,...Ar({...r,isDisabled:o},{omitFalsyValues:!0,trimBooleanKeys:!0}),ref:n,className:Ye(Nh,yD),children:s&&!o&&h.jsx(RD,{})})})}function RD(){let{dragButtonProps:t,dragButtonRef:e,isFocusVisibleWithin:n,isHovered:r}=sD(),{visuallyHiddenProps:i}=yb();return h.jsx(Ei,{children:h.jsx("div",{...t,className:W({borderRadius:j.size.radius.xsmall,display:"flex",justifyContent:"center",outline:0,padding:0,height:j.size.icon.regular,width:10,"&[data-focus=visible]":{outline:`${j.size.alias.focusRing} solid ${j.color.alias.focusRing}`}}),style:!n&&!r?i.style:{},ref:e,draggable:"true",children:h.jsx(X,{src:iR,color:"neutral"})})})}function DD({cell:t}){var e,n,r,i;let{cosmeticConfig:s,state:o}=jn(),l=C.useRef(null),{gridCellProps:a}=bb({node:t,isVirtualized:!0},o,l),{id:c,...u}=a;return h.jsx(Ei,{children:h.jsx("div",{...u,...Ar({...s,align:(e=t.column)===null||e===void 0?void 0:e.props.align,hideHeader:(n=t.column)===null||n===void 0?void 0:n.props.hideHeader,showDivider:((r=t.column)===null||r===void 0?void 0:r.props.showDivider)&&((i=t.column)===null||i===void 0?void 0:i.nextKey)!==null}),"aria-labelledby":c,ref:l,className:Nh,children:typeof t.rendered=="boolean"||t.rendered==null?null:h.jsx(MD,{id:c,children:rs(t.rendered)?h.jsx(Y,{children:t.rendered}):t.rendered})})})}function MD(t){const{children:e,...n}=t,r=C.useMemo(()=>({text:{color:"inherit"}}),[]),i=C.Children.only(e);return h.jsx(Ci,{slots:r,children:C.cloneElement(i,Cr(i.props,n))})}function FD(t){let{layoutInfo:e,virtualizer:n,parent:r,children:i}=t,{isTableDroppable:s,dropState:o}=jn(),l=!1,a=!1;if(s){Ue(!!o);let c=r.content.key;c&&(l=o.isDropTarget({type:"item",dropPosition:"on",key:c})),a=o.isDropTarget({type:"root"})}return h.jsx(gO,{layoutInfo:e,virtualizer:n,parent:r?.layoutInfo,className:mD,"data-droptarget":l||a,children:i})}function PD({cell:t}){let e=C.useRef(null),{cosmeticConfig:n,state:r}=jn(),i=r.disabledKeys.has(t.parentKey),s=r.selectionManager.isDisabled(t.parentKey),{gridCellProps:o}=bb({node:t,isVirtualized:!0},r,e),{checkboxProps:l}=mO({key:t.parentKey},r);return h.jsx("div",{...Ar({...n,isDisabled:s},{trimBooleanKeys:!0,omitFalsyValues:!0}),className:Ye(Nh,hC),ref:e,...o,children:h.jsx(Ih,{...l,isDisabled:i})})}function $D({column:t}){let e=C.useRef(null),{state:n}=jn(),{columnHeaderProps:r}=Sh({node:t,isVirtualized:!0},n,e),{checkboxProps:i}=yO(n);return h.jsx("div",{className:Ye(Nh,hC,jh),ref:e,...r,children:n.selectionManager.selectionMode==="single"?h.jsx(Ch,{children:i["aria-label"]}):h.jsx(Ih,{...i})})}function LD(){let{state:t}=jn(),e=Be(Tb);return h.jsx(gC,{children:h.jsx(Tr,{isIndeterminate:!0,"aria-label":t.collection.size>0?e.format("loadingMore"):e.format("loading")})})}function BD(){let{renderEmptyState:t}=jn(),e=t?t():null;return e==null?null:h.jsx(gC,{children:e})}function gC({children:t}){let{state:e}=jn(),n={"aria-rowindex":e.collection.headerRows.length+e.collection.size+1};return h.jsx("div",{role:"row",...n,className:pD,children:h.jsx("div",{role:"rowheader","aria-colspan":e.collection.columns.length,children:t})})}const ox=bO;function Jt(t){this.content=t}Jt.prototype={constructor:Jt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Jt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Jt(n)},addToStart:function(t,e){return new Jt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Jt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Jt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jt.from(t),t.size?new Jt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jt.from(t),t.size?new Jt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Jt.from=function(t){if(t instanceof Jt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Jt(e)};function mC(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=mC(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function yC(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=yC(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class G{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new G(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new G(r,i)}cutByIndex(e,n){return e==n?G.empty:e==0&&n==this.content.length?this:new G(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new G(i,s)}addToStart(e){return new G([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new G(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return mC(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return yC(this,e,n,r)}findIndex(e,n=-1){if(e==0)return rd(0,e);if(e==this.size)return rd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?rd(r+1,o):rd(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return G.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new G(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return G.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new G(n||e,r)}static from(e){if(!e)return G.empty;if(e instanceof G)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new G([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}G.empty=new G([],0);const Zp={index:0,offset:0};function rd(t,e){return Zp.index=t,Zp.offset=e,Zp}function pf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!pf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!pf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class Ke{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&pf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ke.none;if(e instanceof Ke)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}Ke.none=[];class gf extends Error{}class Q{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=xC(this.content,e+this.openStart,n);return r&&new Q(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Q(bC(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Q.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Q(G.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Q(e,r,i)}}Q.empty=new Q(G.empty,0,0);function bC(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(bC(s.content,e-i-1,n-i-1)))}function xC(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=xC(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function zD(t,e,n){if(n.openStart>t.depth)throw new gf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gf("Inconsistent open depths");return vC(t,e,n,0)}function vC(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=vC(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Ro(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=VD(n,t);return Ro(s,wC(t,o,l,e,r))}else return Ro(s,mf(t,e,r))}function kC(t,e){if(!e.type.compatibleContent(t.type))throw new gf("Cannot join "+e.type.name+" onto "+t.type.name)}function Tm(t,e,n){let r=t.node(n);return kC(r,e.node(n)),r}function Oo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function kc(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Oo(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Oo(i.child(l),r);e&&e.depth==n&&e.textOffset&&Oo(e.nodeBefore,r)}function Ro(t,e){return t.type.checkContent(e),t.copy(e)}function wC(t,e,n,r,i){let s=t.depth>i&&Tm(t,e,i+1),o=r.depth>i&&Tm(n,r,i+1),l=[];return kc(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(kC(s,o),Oo(Ro(s,wC(t,e,n,r,i+1)),l)):(s&&Oo(Ro(s,mf(t,e,i+1)),l),kc(e,n,i,l),o&&Oo(Ro(o,mf(n,r,i+1)),l)),kc(r,null,i,l),new G(l)}function mf(t,e,n){let r=[];if(kc(null,t,n,r),t.depth>n){let i=Tm(t,e,n+1);Oo(Ro(i,mf(t,e,n+1)),r)}return kc(e,null,n,r),new G(r)}function VD(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(G.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Bc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ke.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new yf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new Bc(n,r,s)}static resolveCached(e,n){let r=lx.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else lx.set(e,r=new UD);let i=r.elts[r.i]=Bc.resolve(e,n);return r.i=(r.i+1)%qD,i}}class UD{constructor(){this.elts=[],this.i=0}}const qD=12,lx=new WeakMap;class yf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const HD=Object.create(null);class nr{constructor(e,n,r,i=Ke.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||G.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&pf(this.attrs,n||e.defaultAttrs||HD)&&Ke.sameSet(this.marks,r||Ke.none)}copy(e=null){return e==this.content?this:new nr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new nr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Q.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new Q(c,i.depth-o,s.depth-o)}replace(e,n,r){return zD(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Bc.resolveCached(this,e)}resolveNoCache(e){return Bc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),SC(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=G.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ke.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=G.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}nr.prototype.text=void 0;class bf extends nr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):SC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function SC(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Go{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new WD(e,n);if(r.next==null)return Go.empty;let i=CC(r);r.next&&r.err("Unexpected trailing text");let s=QD(XD(i));return eM(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return G.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,l.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Go.empty=new Go(!0);class WD{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function CC(t){let e=[];do e.push(KD(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function KD(t){let e=[];do e.push(GD(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GD(t){let e=ZD(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=YD(t,e);else break;return e}function ax(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function YD(t,e){let n=ax(t),r=n;return t.eat(",")&&(t.next!="}"?r=ax(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function JD(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function ZD(t){if(t.eat("(")){let e=CC(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=JD(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function XD(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function EC(t,e){return e-t}function cx(t,e){let n=[];return r(e),n.sort(EC);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function QD(t){let e=Object.create(null);return n(cx(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);cx(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Go(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(EC);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function eM(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function IC(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function AC(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function TC(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function NC(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new nM(t,r,e[r]);return n}let ux=class jC{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=NC(e,r.attrs),this.defaultAttrs=IC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Go.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:AC(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new nr(this,this.computeAttrs(e),G.from(n),Ke.setFrom(r))}createChecked(e=null,n,r){return n=G.from(n),this.checkContent(n),new nr(this,this.computeAttrs(e),n,Ke.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=G.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(G.empty,!0);return s?new nr(this,e,n.append(s),Ke.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){TC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ke.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new jC(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function tM(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class nM{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?tM(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Aa{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=NC(e,i.attrs),this.excluded=null;let s=IC(this.attrs);this.instance=s?new Ke(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ke(this,AC(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Aa(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){TC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class rM{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Jt.from(e.nodes),n.marks=Jt.from(e.marks||{}),this.nodes=ux.compile(this.spec.nodes,this),this.marks=Aa.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Go.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?dx(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:dx(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ux){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new bf(r,r.defaultAttrs,e,Ke.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return nr.fromJSON(this,e)}markFromJSON(e){return Ke.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function dx(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function iM(t){return t.tag!=null}function sM(t){return t.style!=null}let _b=class Nm{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(iM(i))this.tags.push(i);else if(sM(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new hx(this,n,!1);return r.addAll(e,Ke.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new hx(this,n,!0);return r.addAll(e,Ke.none,n.from,n.to),Q.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(aM(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=px(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=px(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Nm(e,Nm.schemaRules(e)))}};const _C={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},OC={ol:!0,ul:!0},xf=1,vf=2,wc=4;function fx(t,e,n){return e!=null?(e?xf:0)|(e==="full"?vf:0):t&&t.whitespace=="pre"?xf|vf:n&~wc}class id{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ke.none,this.match=s||(o&wc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(G.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&xf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=G.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(G.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_C.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class hx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=fx(null,n.preserveWhitespace,0)|(r?wc:0);i?s=new id(i.type,i.attrs,Ke.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new id(null,null,Ke.none,!0,null,o):s=new id(e.schema.topNodeType,null,Ke.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&vf||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&xf)i.options&vf?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),s;OC.hasOwnProperty(i)&&this.parser.normalizeLists&&lM(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:oM.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,c=this.needsBlock;if(_C.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let u=o&&o.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),l&&this.sync(a),this.needsBlock=c}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?s:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=o,!l.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Ke.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):gx(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=fx(e,s,o.options);o.options&wc&&o.content.length==0&&(l|=wc);let a=Ke.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):gx(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new id(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function lM(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&OC.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function aM(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function px(t){let e={};for(let n in t)e[n]=t[n];return e}function gx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class pl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Xp(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Td(Xp(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Td(Xp(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Td(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new pl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=mx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return mx(e.marks)}}function mx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Xp(t){return t.document||window.document}const yx=new WeakMap;function cM(t){let e=yx.get(t);return e===void 0&&yx.set(t,e=uM(t)),e}function uM(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Td(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=cM(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:g}=Td(t,f,n,r);if(a.appendChild(p),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const RC=65535,DC=Math.pow(2,16);function dM(t,e){return t+e*DC}function bx(t){return t&RC}function fM(t){return(t-(t&RC))/DC}const MC=1,FC=2,Nd=4,PC=8;class jm{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&PC)>0}get deletedBefore(){return(this.delInfo&(MC|Nd))>0}get deletedAfter(){return(this.delInfo&(FC|Nd))>0}get deletedAcross(){return(this.delInfo&Nd)>0}}class er{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&er.empty)return er.empty}recover(e){let n=0,r=bx(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+fM(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],d=a+c;if(e<=d){let f=c?e==a?-1:e==d?1:n:n,p=a+i+(f<0?0:u);if(r)return p;let g=e==(n<0?a:d)?null:dM(l/3,e-a),m=e==a?FC:e==d?MC:Nd;return(n<0?e!=a:e!=d)&&(m|=PC),new jm(p,m,g)}i+=u-c}return r?e+i:new jm(e+i,0,null)}touches(e,n){let r=0,i=bx(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new er(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?er.empty:new er(e<0?[0,-e,0]:[0,0,e])}}er.empty=new er([]);class Xl{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Xl(this.maps,this.mirror,e,n)}copy(){return new Xl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Xl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new jm(e,i,null)}}const Qp=Object.create(null);class yn{getMap(){return er.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Qp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Qp)throw new RangeError("Duplicate use of step JSON ID "+e);return Qp[e]=n,n.prototype.jsonID=e,n}}class Et{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Et(e,null)}static fail(e){return new Et(null,e)}static fromReplace(e,n,r,i){try{return Et.ok(e.replace(n,r,i))}catch(s){if(s instanceof gf)return Et.fail(s.message);throw s}}}function Ob(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Ob(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return G.fromArray(r)}class Is extends yn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Q(Ob(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Et.fromReplace(e,this.from,this.to,s)}invert(){return new si(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Is(n.pos,r.pos,this.mark)}merge(e){return e instanceof Is&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Is(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Is(n.from,n.to,e.markFromJSON(n.mark))}}yn.jsonID("addMark",Is);class si extends yn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Q(Ob(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Et.fromReplace(e,this.from,this.to,r)}invert(){return new Is(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new si(n.pos,r.pos,this.mark)}merge(e){return e instanceof si&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new si(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new si(n.from,n.to,e.markFromJSON(n.mark))}}yn.jsonID("removeMark",si);class As extends yn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Et.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Et.fromReplace(e,this.pos,this.pos+1,new Q(G.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new As(this.pos,n.marks[i]);return new As(this.pos,this.mark)}}return new ca(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new As(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new As(n.pos,e.markFromJSON(n.mark))}}yn.jsonID("addNodeMark",As);class ca extends yn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Et.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Et.fromReplace(e,this.pos,this.pos+1,new Q(G.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new As(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ca(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ca(n.pos,e.markFromJSON(n.mark))}}yn.jsonID("removeNodeMark",ca);class ln extends yn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&_m(e,this.from,this.to)?Et.fail("Structure replace would overwrite content"):Et.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new er([this.from,this.to-this.from,this.slice.size])}invert(e){return new ln(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ln(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ln)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ln(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ln(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ln(n.from,n.to,Q.fromJSON(e,n.slice),!!n.structure)}}yn.jsonID("replace",ln);class tn extends yn{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(_m(e,this.from,this.gapFrom)||_m(e,this.gapTo,this.to)))return Et.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Et.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Et.fromReplace(e,this.from,this.to,r):Et.fail("Content does not fit in gap")}getMap(){return new er([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new tn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new tn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new tn(n.from,n.to,n.gapFrom,n.gapTo,Q.fromJSON(e,n.slice),n.insert,!!n.structure)}}yn.jsonID("replaceAround",tn);function _m(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function hM(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(g)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=p:i.push(o=new si(f,p,d[m])));l&&l.to==f?l.to=p:s.push(l=new Is(f,p,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function pM(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof Aa){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],f;for(let p=0;p<i.length;p++){let g=i[p];g.step==s-1&&d.eq(i[p].style)&&(f=g)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new si(o.from,o.to,o.style)))}function Rb(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new ln(l,u,Q.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new si(l,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,g;for(;f=p.exec(c.text);)g||(g=new Q(G.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new ln(l+f.index,l+f.index+f[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(G.empty,!0);t.replace(l,l,new Q(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function gM(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Nu(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!gM(i,s,o))break}return null}function mM(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=G.empty,d=0;for(let g=s,m=!1;g>n;g--)m||r.index(g)>0?(m=!0,u=G.from(r.node(g).copy(u)),d++):a--;let f=G.empty,p=0;for(let g=s,m=!1;g>n;g--)m||i.after(g+1)<i.end(g)?(m=!0,f=G.from(i.node(g).copy(f)),p++):c++;t.step(new tn(a,c,o,l,new Q(u.append(f),d,p),u.size-d,!0))}function Db(t,e,n=null,r=t){let i=yM(t,e),s=i&&bM(r,e);return s?i.map(xx).concat({type:e,attrs:n}).concat(s.map(xx)):null}function xx(t){return{type:t,attrs:null}}function yM(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function bM(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function xM(t,e,n){let r=G.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=G.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new tn(i,s,i,s,new Q(r,0,0),n.length,!0))}function vM(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&kM(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!g?c=!1:!p&&g&&(c=!0)}c===!1&&LC(t,o,l,s),Rb(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(l,1),f=u.map(l+o.nodeSize,1);return t.step(new tn(d,f,d+1,f-1,new Q(G.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&$C(t,o,l,s),!1}})}function $C(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function LC(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function kM(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function wM(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new tn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Q(G.from(o),0,0),1,!0))}function Ql(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),g=r&&r[u+1];g&&(p=p.replaceChild(0,g.type.create(g.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(p))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function SM(t,e,n=1,r){let i=t.doc.resolve(e),s=G.empty,o=G.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=G.from(i.node(l).copy(s));let u=r&&r[c];o=G.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new ln(e,e,new Q(s.append(o),n,n),!0))}function Ta(t,e){let n=t.resolve(e),r=n.index();return BC(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function CM(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function BC(t,e){return!!(t&&e&&!t.isLeaf&&CM(t,e))}function zC(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&BC(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function EM(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);LC(t,u.node(),u.before(),l)}o.inlineContent&&Rb(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new ln(c,a.map(e+n,-1),Q.empty,!0)),r===!0){let u=t.doc.resolve(c);$C(t,u.node(),u.before(),t.steps.length)}return t}function IM(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function kf(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Mb(t,e,n=e,r=Q.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return VC(i,s,r)?new ln(e,n,r):new AM(i,s,r).fit()}function VC(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class AM{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=G.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=G.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new Q(s,o,l);return e>-1?new tn(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new ln(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(G.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Q(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Q(cc(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Q(cc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let p=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),b=d.matchType(m.type);if(!b)break;c++,(c>1||a==0||m.content.size)&&(d=b,u.push(UC(m.mark(f.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?p:-1)))}let g=c==l.childCount;g||(p=-1),this.placed=uc(this.placed,n,G.from(u)),this.frontier[n].match=d,g&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,b=l;m<p;m++){let y=b.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),b=y.content}this.unplaced=g?e==0?Q.empty:new Q(cc(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new Q(cc(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=tg(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=tg(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=uc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=uc(this.placed,this.depth,G.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(G.empty,!0);n.childCount&&(this.placed=uc(this.placed,this.frontier.length,n))}}function cc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(cc(t.firstChild.content,e-1,n)))}function uc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(uc(t.lastChild.content,e-1,n)))}function eg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function UC(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,UC(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(G.empty,!0)))),t.copy(r)}function tg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!TM(n,s.content,o)?l:null}function TM(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function NM(t){return t.spec.defining||t.spec.definingForContent}function jM(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(VC(i,s,r))return t.step(new ln(e,n,r));let o=HC(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let g=i.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==p&&o.splice(1,0,-f)}let a=o.indexOf(l),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let g=f.firstChild;if(c.push(g),p==r.openStart)break;f=g.content}for(let f=u-1;f>=0;f--){let p=c[f],g=NM(p.type);if(g&&!p.sameMarkup(i.node(Math.abs(l)-1)))u=f;else if(g||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),g=c[p];if(g)for(let m=0;m<o.length;m++){let b=o[(m+a)%o.length],y=!0;b<0&&(y=!1,b=-b);let x=i.node(b-1),v=i.index(b-1);if(x.canReplaceWith(v,v,g.type,g.marks))return t.replace(i.before(b),y?s.after(b):n,new Q(qC(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=o[f];p<0||(e=i.before(p),n=s.after(p))}}function qC(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(qC(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(G.empty,!0))}return t}function _M(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=IM(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Q(G.from(r),0,0))}function OM(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=HC(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function HC(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ea extends yn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Et.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Et.fromReplace(e,this.pos,this.pos+1,new Q(G.from(i),0,n.isLeaf?0:1))}getMap(){return er.empty}invert(e){return new ea(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ea(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ea(n.pos,n.attr,n.value)}}yn.jsonID("attr",ea);class zc extends yn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Et.ok(r)}getMap(){return er.empty}invert(e){return new zc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new zc(n.attr,n.value)}}yn.jsonID("docAttr",zc);let ua=class extends Error{};ua=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ua.prototype=Object.create(Error.prototype);ua.prototype.constructor=ua;ua.prototype.name="TransformError";class WC{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Xl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ua(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Q.empty){let i=Mb(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Q(G.from(r),0,0))}delete(e,n){return this.replace(e,n,Q.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return jM(this,e,n,r),this}replaceRangeWith(e,n,r){return _M(this,e,n,r),this}deleteRange(e,n){return OM(this,e,n),this}lift(e,n){return mM(this,e,n),this}join(e,n=1){return EM(this,e,n),this}wrap(e,n){return xM(this,e,n),this}setBlockType(e,n=e,r,i=null){return vM(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return wM(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ea(e,n,r)),this}setDocAttribute(e,n){return this.step(new zc(e,n)),this}addNodeMark(e,n){return this.step(new As(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Ke)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new ca(e,n)),this}split(e,n=1,r){return SM(this,e,n,r),this}addMark(e,n,r){return hM(this,e,n,r),this}removeMark(e,n,r){return pM(this,e,n,r),this}clearIncompatible(e,n,r){return Rb(this,e,n,r),this}}const ng=Object.create(null);class Te{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new KC(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Q.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?Q.empty:n),l==0&&wx(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),wx(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _e(e):_l(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?_l(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):_l(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Un(e.node(0))}static atStart(e){return _l(e,e,0,0,1)||new Un(e)}static atEnd(e){return _l(e,e,e.content.size,e.childCount,-1)||new Un(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ng[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ng)throw new RangeError("Duplicate use of selection JSON ID "+e);return ng[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}}Te.prototype.visible=!0;class KC{constructor(e,n){this.$from=e,this.$to=n}}let vx=!1;function kx(t){!vx&&!t.parent.inlineContent&&(vx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _e extends Te{constructor(e,n=e){kx(e),kx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Te.near(r);let i=e.resolve(n.map(this.anchor));return new _e(i.parent.inlineContent?i:r,r)}replace(e,n=Q.empty){if(super.replace(e,n),n==Q.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _e&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Te.findFrom(n,r,!0)||Te.findFrom(n,-r,!0);if(s)n=s.$head;else return Te.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Te.findFrom(e,-r,!0)||Te.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _e(e,n)}}Te.jsonID("text",_e);class _h{constructor(e,n){this.anchor=e,this.head=n}map(e){return new _h(e.map(this.anchor),e.map(this.head))}resolve(e){return _e.between(e.resolve(this.anchor),e.resolve(this.head))}}class de extends Te{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Te.near(s):new de(s)}content(){return new Q(G.from(this.node),0,0)}eq(e){return e instanceof de&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Fb(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new de(e.resolve(n.anchor))}static create(e,n){return new de(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}de.prototype.visible=!1;Te.jsonID("node",de);class Fb{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new _h(r,r):new Fb(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&de.isSelectable(r)?new de(n):Te.near(n)}}class Un extends Te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Q.empty){if(n==Q.empty){e.delete(0,e.doc.content.size);let r=Te.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Un(e)}map(e){return new Un(e)}eq(e){return e instanceof Un}getBookmark(){return RM}}Te.jsonID("all",Un);const RM={map(){return this},resolve(t){return new Un(t)}};function _l(t,e,n,r,i,s=!1){if(e.inlineContent)return _e.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&de.isSelectable(l))return de.create(t,n-(i<0?l.nodeSize:0))}else{let a=_l(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function wx(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ln||i instanceof tn))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(Te.near(t.doc.resolve(o),n))}const Sx=1,sd=2,Cx=4;let DM=class extends WC{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Sx)&~sd,this.storedMarks=null,this}get selectionSet(){return(this.updated&Sx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=sd,this}ensureMarks(e){return Ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&sd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~sd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ke.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Te.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Cx,this}get scrolledIntoView(){return(this.updated&Cx)>0}};function Ex(t,e){return!e||!t?t:t.bind(e)}class dc{constructor(e,n,r){this.name=e,this.init=Ex(n.init,r),this.apply=Ex(n.apply,r)}}const MM=[new dc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new dc("selection",{init(t,e){return t.selection||Te.atStart(e.doc)},apply(t){return t.selection}}),new dc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new dc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=MM.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new dc(r.key,r.spec.state,r))})}}class Ll{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ll(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new DM(this)}static create(e){let n=new rg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ll(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rg(this.schema,e.plugins),r=n.fields,i=new Ll(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rg(e.schema,e.plugins),s=new Ll(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=nr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Te.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function GC(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=GC(i,e,{})),n[r]=i}return n}class At{constructor(e){this.spec=e,this.props={},e.props&&GC(e.props,this,this.props),this.key=e.key?e.key.key:YC("plugin")}getState(e){return e[this.key]}}const ig=Object.create(null);function YC(t){return t in ig?t+"$"+ ++ig[t]:(ig[t]=0,t+"$")}class Kr{constructor(e="key"){this.key=YC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ix=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function FM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const PM=(t,e,n)=>{let r=FM(t,n);if(!r)return!1;let i=JC(r);if(!i){let o=r.blockRange(),l=o&&Nu(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(nE(t,i,e,-1))return!0;if(r.parent.content.size==0&&(da(s,"end")||de.isSelectable(s)))for(let o=r.depth;;o--){let l=Mb(t.doc,r.before(o),r.after(o),Q.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(da(s,"end")?Te.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):de.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function da(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $M=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=JC(r)}let o=s&&s.nodeBefore;return!o||!de.isSelectable(o)?!1:(e&&e(t.tr.setSelection(de.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function JC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function LM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const BM=(t,e,n)=>{let r=LM(t,n);if(!r)return!1;let i=ZC(r);if(!i)return!1;let s=i.nodeAfter;if(nE(t,i,e,1))return!0;if(r.parent.content.size==0&&(da(s,"start")||de.isSelectable(s))){let o=Mb(t.doc,r.before(),r.after(),Q.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(da(s,"start")?Te.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):de.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},zM=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=ZC(r)}let o=s&&s.nodeAfter;return!o||!de.isSelectable(o)?!1:(e&&e(t.tr.setSelection(de.create(t.doc,s.pos)).scrollIntoView()),!0)};function ZC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const VM=(t,e)=>{let n=t.selection,r=n instanceof de,i;if(r){if(n.node.isTextblock||!Ta(t.doc,n.from))return!1;i=n.from}else if(i=zC(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(de.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},UM=(t,e)=>{let n=t.selection,r;if(n instanceof de){if(n.node.isTextblock||!Ta(t.doc,n.to))return!1;r=n.to}else if(r=zC(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},qM=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function XC(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const QC=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Un||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=XC(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(_e.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},eE=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Ql(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Nu(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function HM(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof de&&e.selection.node.isBlock)return!r.parentOffset||!Ql(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){a=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),l=XC(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(a&&l?{type:l}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof _e||e.selection instanceof Un)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Ql(u.doc,d,s.length,s);if(f||(s[0]=l?{type:l}:null,f=Ql(u.doc,d,s.length,s)),u.split(d,s.length,s),!a&&c&&r.node(o).type!=l){let p=u.mapping.map(r.before(o)),g=u.doc.resolve(p);l&&r.node(o-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const tE=HM(),WM=(t,e)=>(e&&e(t.tr.setSelection(new Un(t.doc))),!0);function KM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ta(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function nE(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&KM(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,g=G.empty;for(let y=o.length-1;y>=0;y--)g=G.from(o[y].create(null,g));g=G.from(i.copy(g));let m=t.tr.step(new tn(e.pos-1,p,e.pos,p,new Q(g,1,0),o.length,!0)),b=m.doc.resolve(p+2*o.length);b.nodeAfter&&b.nodeAfter.type==i.type&&Ta(m.doc,b.pos)&&m.join(b.pos),n(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:Te.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Nu(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&da(s,"start",!0)&&da(i,"end")){let p=i,g=[];for(;g.push(p),!p.isTextblock;)p=p.lastChild;let m=s,b=1;for(;!m.isTextblock;m=m.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let y=G.empty;for(let v=g.length-1;v>=0;v--)y=G.from(g[v].copy(y));let x=t.tr.step(new tn(e.pos-g.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new Q(y,g.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function rE(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(_e.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const GM=rE(-1),YM=rE(1);function iE(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&Db(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Yo(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function JM(t,e,n,r){for(let i=0;i<e.length;i++){let{$from:s,$to:o}=e[i],l=s.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(s.pos,o.pos,(a,c)=>{if(l||!r)return!1;l=a.inlineContent&&a.type.allowsMarkType(n)}),l)return!0}return!1}function xo(t,e=null,n){let r=n!==!1;return function(i,s){let{empty:o,$cursor:l,ranges:a}=i.selection;if(o&&!l||!JM(i.doc,a,t,r))return!1;if(s)if(l)t.isInSet(i.storedMarks||l.marks())?s(i.tr.removeStoredMark(t)):s(i.tr.addStoredMark(t.create(e)));else{let c,u=i.tr;c=!a.some(d=>i.doc.rangeHasMark(d.$from.pos,d.$to.pos,t));for(let d=0;d<a.length;d++){let{$from:f,$to:p}=a[d];if(!c)u.removeMark(f.pos,p.pos,t);else{let g=f.pos,m=p.pos,b=f.nodeAfter,y=p.nodeBefore,x=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,v=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;g+x<m&&(g+=x,m-=v),u.addMark(g,m,t.create(e))}}s(u.scrollIntoView())}return!0}}function fc(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";const sE=C.forwardRef(function(e,n){const r=$e(23);e=ZM(e);const{children:i,reference:s,placement:o,portal:l}=e,a=l?NO:C.Fragment,c=Si(e),[u,d]=C.useState(null);let f;r[0]!==e?(f=QM(e),r[0]=e,r[1]=f):f=r[1];const p=f;let g;r[2]!==s||r[3]!==u?(g={reference:s,floating:u},r[2]=s,r[3]=u,r[4]=g):g=r[4];let m;r[5]!==g||r[6]!==p||r[7]!==o?(m={elements:g,middleware:p,placement:o,whileElementsMounted:jO},r[5]=g,r[6]=p,r[7]=o,r[8]=m):m=r[8];const{floatingStyles:b,context:y,update:x}=CO(m);let v,w;r[9]!==y||r[10]!==x?(v=()=>({context:y,update:x}),w=[y,x],r[9]=y,r[10]=x,r[11]=v,r[12]=w):(v=r[11],w=r[12]),C.useImperativeHandle(n,v,w);let S;r[13]!==b||r[14]!==c.style?(S={...b,...c.style},r[13]=b,r[14]=c.style,r[15]=S):S=r[15];let k;r[16]!==c||r[17]!==S||r[18]!==i?(k=h.jsx(eF,{ref:d,...c,style:S,children:i}),r[16]=c,r[17]=S,r[18]=i,r[19]=k):k=r[19];let E;return r[20]!==a||r[21]!==k?(E=h.jsx(a,{children:k}),r[20]=a,r[21]=k,r[22]=E):E=r[22],E});function ZM(t){return Object.assign({},{adaptToBoundary:"flip",placement:"bottom",portal:!0},t)}const us=8;function XM(){return{name:"applyStyles",async fn(t){let{elements:e,middlewareData:n}=t;return n.hide&&Object.assign(e.floating.style,{visibility:n.hide.referenceHidden?"hidden":"visible"}),{}}}}function QM(t){const{adaptToBoundary:e,boundary:n}=t;let r=[...t.portal?[EO({boundary:n})]:[],XM()];return e==="stick"?[Kp(us),Y1({boundary:n,crossAxis:!0,padding:us,limiter:_O({offset:({rects:i,middlewareData:s,placement:o})=>{var l,a;return{crossAxis:i.floating.height+((l=(a=s.offset)===null||a===void 0?void 0:a.y)!==null&&l!==void 0?l:0)*(o==="top"?-1:1)}}})}),...r]:e==="stretch"?[Kp(us),J1({boundary:n,padding:us}),IO({apply({elements:i,availableHeight:s}){Object.assign(i.floating.style,{maxHeight:`${s}px`})},boundary:n,padding:us}),...r]:[Kp(us),J1({boundary:n,padding:us}),Y1({padding:us}),...r]}const eF=C.forwardRef(function(e,n){const r=$e(6);let i;r[0]!==e.className?(i=Ye(W({backgroundColor:j.color.background.surface,borderRadius:j.size.radius.medium,border:`${j.size.border.regular} solid ${j.color.border.emphasis}`,boxShadow:`${j.size.shadow.medium} ${j.color.shadow.regular}`,boxSizing:"content-box",minHeight:j.size.element.regular,minWidth:j.size.element.regular,outline:0}),e.className),r[0]=e.className,r[1]=i):i=r[1];let s;return r[2]!==n||r[3]!==e||r[4]!==i?(s=h.jsx("div",{role:"dialog",ref:n,...e,className:i}),r[2]=n,r[3]=e,r[4]=i,r[5]=s):s=r[5],s}),oE=C.createContext(null);function tF(){const t=$e(2),e=C.useContext(oE);if(e==null)throw new Error("useToolbarContext must be used within a EditorToolbar");let n;return t[0]!==e?(n={state:e},t[0]=e,t[1]=n):n=t[1],n}function nF(t){const e=$e(7),{children:n}=t,r=C.useRef(null),{state:i,toolbarProps:s}=aF(t,r);let o;e[0]!==r||e[1]!==s||e[2]!==n?(o=h.jsx(jS,{children:h.jsx(zr,{alignItems:"center",gap:"regular",ref:r,...s,children:n})}),e[0]=r,e[1]=s,e[2]=n,e[3]=o):o=e[3];let l;return e[4]!==i||e[5]!==o?(l=h.jsx(oE.Provider,{value:i,children:o}),e[4]=i,e[5]=o,e[6]=l):l=e[6],l}const Pb=C.createContext(null);function rF(){const t=$e(3),e=C.useContext(Pb);Ue(e!==null,'An `EditorToolbarItem` is only valid inside an `EditorToolbarGroup` with a `selectionMode` of "single" or "multiple". When no selection is needed, use `EditorToolbarButton` instead.');const n=cF(e.disabledKeys);let r;return t[0]!==e||t[1]!==n?(r={...e,disabledKeys:n},t[0]=e,t[1]=n,t[2]=r):r=t[2],r}function iF(t){const e=$e(37),n=rF();if(n.selectionMode==="single"){const{disabledKeys:r,value:i,onChange:s}=n;let o;e[0]!==r||e[1]!==t.value?(o=r.has(t.value),e[0]=r,e[1]=t.value,e[2]=o):o=e[2];const l=o,a=i===t.value;let c;e[3]!==t?(c=pi(t,{labelable:!0}),e[3]=t,e[4]=c):c=e[4];let u;e[5]!==l||e[6]!==s||e[7]!==t.value?(u=()=>{l||s(t.value)},e[5]=l,e[6]=s,e[7]=t.value,e[8]=u):u=e[8];let d;e[9]!==c||e[10]!==a||e[11]!==u?(d={...c,role:"radio","aria-checked":a,onPress:u},e[9]=c,e[10]=a,e[11]=u,e[12]=d):d=e[12];let f;return e[13]!==l||e[14]!==a||e[15]!==d?(f={isDisabled:l,isSelected:a,buttonProps:d},e[13]=l,e[14]=a,e[15]=d,e[16]=f):f=e[16],f}if(n.selectionMode==="multiple"){const{disabledKeys:r,value:i,onChange:s}=n;let o;e[17]!==r||e[18]!==t.value?(o=r.has(t.value),e[17]=r,e[18]=t.value,e[19]=o):o=e[19];const l=o;let a;e[20]!==i||e[21]!==t.value?(a=i.includes(t.value),e[20]=i,e[21]=t.value,e[22]=a):a=e[22];const c=a;let u;e[23]!==t?(u=pi(t,{labelable:!0}),e[23]=t,e[24]=u):u=e[24];let d;e[25]!==l||e[26]!==s||e[27]!==t.value?(d=()=>{l||s(t.value)},e[25]=l,e[26]=s,e[27]=t.value,e[28]=d):d=e[28];let f;e[29]!==u||e[30]!==c||e[31]!==d?(f={...u,role:"checkbox","aria-checked":c,onPress:d},e[29]=u,e[30]=c,e[31]=d,e[32]=f):f=e[32];let p;return e[33]!==l||e[34]!==c||e[35]!==f?(p={isDisabled:l,isSelected:c,buttonProps:f},e[33]=l,e[34]=c,e[35]=f,e[36]=p):p=e[36],p}rn(n)}function $b(t){const e=$e(9);if(t.selectionMode==="single"){let i;return e[0]!==t?(i=h.jsx(sF,{...t}),e[0]=t,e[1]=i):i=e[1],i}if(t.selectionMode==="multiple"){let i;return e[2]!==t?(i=h.jsx(oF,{...t}),e[2]=t,e[3]=i):i=e[3],i}let n;e[4]!==t?(n=Oh(t),e[4]=t,e[5]=n):n=e[5];let r;return e[6]!==n||e[7]!==t.children?(r=h.jsx(zr,{gap:"xsmall",role:"group",...n,children:t.children}),e[6]=n,e[7]=t.children,e[8]=r):r=e[8],r}function sF(t){const e=$e(11);let n,r;e[0]!==t?({children:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let i;e[3]!==t?(i=Oh(t),e[3]=t,e[4]=i):i=e[4];let s;e[5]!==i||e[6]!==n?(s=h.jsx(zr,{gap:"xsmall",role:"radiogroup",...i,children:n}),e[5]=i,e[6]=n,e[7]=s):s=e[7];let o;return e[8]!==r||e[9]!==s?(o=h.jsx(Pb.Provider,{value:r,children:s}),e[8]=r,e[9]=s,e[10]=o):o=e[10],o}function oF(t){const e=$e(11);let n,r;e[0]!==t?({children:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);let i;e[3]!==t?(i=Oh(t),e[3]=t,e[4]=i):i=e[4];let s;e[5]!==i||e[6]!==n?(s=h.jsx(zr,{gap:"xsmall",role:"group",...i,children:n}),e[5]=i,e[6]=n,e[7]=s):s=e[7];let o;return e[8]!==r||e[9]!==s?(o=h.jsx(Pb.Provider,{value:r,children:s}),e[8]=r,e[9]=s,e[10]=o):o=e[10],o}function lE(t){const e=$e(13),{isDisabled:n,isSelected:r,buttonProps:i}=iF(t);let s;e[0]!==t||e[1]!==n?(s={...t,isDisabled:n},e[0]=t,e[1]=n,e[2]=s):s=e[2];const{itemProps:o}=aE(s);let l;e[3]!==i||e[4]!==o?(l=Cr(i,o),e[3]=i,e[4]=o,e[5]=l):l=e[5];let a;e[6]!==n||e[7]!==r||e[8]!==t.children?(a=h.jsx(ae,{prominence:"low",isDisabled:n,isSelected:r,children:t.children}),e[6]=n,e[7]=r,e[8]=t.children,e[9]=a):a=e[9];let c;return e[10]!==l||e[11]!==a?(c=h.jsx(DS,{...l,children:a}),e[10]=l,e[11]=a,e[12]=c):c=e[12],c}function lF(t){const e=$e(5),{itemProps:n}=aE(t);let r;e[0]!==t?(r=h.jsx(VS,{prominence:"low",...t}),e[0]=t,e[1]=r):r=e[1];let i;return e[2]!==n||e[3]!==r?(i=h.jsx(DS,{...n,children:r}),e[2]=n,e[3]=r,e[4]=i):i=e[4],i}function sg(){const t=$e(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx("div",{role:"separator","aria-orientation":"vertical",className:W({alignSelf:"center",backgroundColor:j.color.border.muted,flexShrink:0,height:j.size.icon.regular,width:j.size.border.regular})}),t[0]=e):e=t[0],e}function Oh(t){let{"aria-labelledby":e,"aria-label":n}=t;return!e&&!n&&console.warn("You must specify an aria-label or aria-labelledby attribute for accessibility."),{...oR(t),...pi(t,{labelable:!0})}}function aE(t){const e=$e(11),{isDisabled:n}=t,{state:r}=tF(),{lastFocusedId:i,setLastFocusedId:s}=r,o=C.useId(),l=i===o||i==null?0:-1;let a,c;e[0]!==o||e[1]!==n||e[2]!==s?(a=()=>{const f=p=>p===o?null:p;return n&&s(f),()=>{s(f)}},c=[o,n,s],e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=c):(a=e[3],c=e[4]),C.useEffect(a,c);let u;e[5]!==s||e[6]!==o?(u=()=>{s(o)},e[5]=s,e[6]=o,e[7]=u):u=e[7];let d;return e[8]!==l||e[9]!==u?(d={itemProps:{tabIndex:l,onFocus:u}},e[8]=l,e[9]=u,e[10]=d):d=e[10],d}function aF(t,e){const n=$e(15),[r,i]=C.useState(null),{direction:s}=ro();let o;n[0]!==e?(o=AO(e,{wrap:!0}),n[0]=e,n[1]=o):o=n[1];const l=o,a=s==="rtl";let c;n[2]!==l||n[3]!==a?(c=b=>{if(!b.currentTarget.contains(b.target))return;const y=v=>{var w,S;const k=((w=v.parentElement)===null||w===void 0?void 0:w.firstElementChild)===v;return!/group/.test(((S=v.parentElement)===null||S===void 0?void 0:S.role)||"")||k},x=(TO()?b.altKey:b.ctrlKey)?{accept:y}:{};e:switch(b.key){case"Home":{b.preventDefault(),b.stopPropagation(),l.focusFirst();break e}case"End":{b.preventDefault(),b.stopPropagation(),l.focusLast();break e}case"ArrowRight":case"ArrowDown":{b.preventDefault(),b.stopPropagation(),b.key==="ArrowRight"&&a?l.focusPrevious(x):l.focusNext(x);break e}case"ArrowLeft":case"ArrowUp":b.preventDefault(),b.stopPropagation(),b.key==="ArrowLeft"&&a?l.focusNext(x):l.focusPrevious(x)}},n[2]=l,n[3]=a,n[4]=c):c=n[4];const u=c;let d;n[5]!==t?(d=Oh(t),n[5]=t,n[6]=d):d=n[6];let f;n[7]!==d||n[8]!==u?(f={...d,onKeyDown:u,role:"toolbar","aria-orientation":"horizontal"},n[7]=d,n[8]=u,n[9]=f):f=n[9];let p,g;n[10]!==r?(g={lastFocusedId:r,setLastFocusedId:i},n[10]=r,n[11]=g):g=n[11],p=g;let m;return n[12]!==f||n[13]!==p?(m={toolbarProps:f,state:p},n[12]=f,n[13]=p,n[14]=m):m=n[14],m}function cF(t){const e=$e(2);let n,r;return e[0]!==t?(r=t==null?new Set:new Set(t),e[0]=t,e[1]=r):r=e[1],n=r,n}const cE=h.jsx("path",{d:"M14 12a4 4 0 0 0 0-8H6v8M15 20a4 4 0 0 0 0-8H6v8Z"}),Rh=h.jsx("path",{d:"m16 18 6-6-6-6M8 6l-6 6 6 6"}),uE=h.jsx("path",{d:"M19 4h-9M14 20H5M15 4 9 20"}),wf=h.jsx("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"}),Lb=h.jsx("path",{d:"M10 6h11M10 12h11M10 18h11M4 6h1v4M4 10h2M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"}),Bb=h.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1zM15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"}),dE=h.jsx("path",{d:"M4 7V4h16v3M5 20h6M13 4 8 20M15 15l5 5M20 15l-5 5"}),fE=h.jsx("path",{d:"M16 4H9a3 3 0 0 0-2.83 4M14 12a4 4 0 0 1 0 8H6M4 12h16"}),zb=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M12 3v18"}),h.jsx("rect",{width:18,height:18,x:3,y:3,rx:2}),h.jsx("path",{d:"M3 9h18M3 15h18"})]}),uF=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),h.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4M10 13l-2 2 2 2M14 17l2-2-2-2"})]}),dF=h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6M17 12l3-2v8"}),fF=h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"}),hF=h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"}),pF=h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6M17 10v4h4M21 10v8"}),gF=h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6M17 13v-3h4M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17"}),mF=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M4 12h8M4 18V6M12 18V6"}),h.jsx("circle",{cx:19,cy:16,r:2}),h.jsx("path",{d:"M20 10c-2 2-3 3.5-3 6"})]}),yF=h.jsx("path",{d:"M3 12h18M8 8l4-4 4 4M16 16l-4 4-4-4"});class bF extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:l}=e,a=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??a),s!=null&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function xF(t){return kr(t)&&typeof t[Symbol.iterator]=="function"}function kr(t){return typeof t=="object"&&t!=null}function Er(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function vF(t){const{done:e,value:n}=t.next();return e?void 0:n}function kF(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:l,message:a=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${Er(r)}\``}=t;return{value:r,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...t,message:a}}function*Ax(t,e,n,r){xF(t)||(t=[t]);for(const i of t){const s=kF(i,e,n,r);s&&(yield s)}}function*hE(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,l={path:r,branch:i};if(s&&(t=e.coercer(t,l),o&&e.type!=="type"&&kr(e.schema)&&kr(t)&&!Array.isArray(t)))for(const c in t)e.schema[c]===void 0&&delete t[c];let a="valid";for(const c of e.validator(t,l))c.explanation=n.message,a="not_valid",yield[c,void 0];for(let[c,u,d]of e.entries(t,l)){const f=hE(u,d,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const p of f)p[0]?(a=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):s&&(u=p[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):kr(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(a!=="not_valid")for(const c of e.refiner(t,l))c.explanation=n.message,a="not_refined",yield[c,void 0];a==="valid"&&(yield[void 0,t])}class is{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=a=>a,entries:l=function*(){}}=e;this.type=n,this.schema=r,this.entries=l,this.coercer=o,i?this.validator=(a,c)=>{const u=i(a,c);return Ax(u,c,this,a)}:this.validator=()=>[],s?this.refiner=(a,c)=>{const u=s(a,c);return Ax(u,c,this,a)}:this.refiner=()=>[]}assert(e,n){return wF(e,this,n)}create(e,n){return SF(e,this,n)}is(e){return pE(e,this)}mask(e,n){return CF(e,this,n)}validate(e,n={}){return ju(e,this,n)}}function wF(t,e,n){const r=ju(t,e,{message:n});if(r[0])throw r[0]}function SF(t,e,n){const r=ju(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function CF(t,e,n){const r=ju(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function pE(t,e){return!ju(t,e)[0]}function ju(t,e,n={}){const r=hE(t,e,n),i=vF(r);return i[0]?[new bF(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Na(t,e){return new is({type:t,schema:null,validator:e})}function EF(t){return new is({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Er(e)}`}})}function Tx(){return Na("boolean",t=>typeof t=="boolean")}function Dh(){return Na("date",t=>t instanceof Date&&!isNaN(t.getTime())||`Expected a valid \`Date\` object, but received: ${Er(t)}`)}function Mh(t){return Na("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Er(e)}`)}function Vb(t){const e=Er(t);return new is({type:"literal",schema:t,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${Er(n)}`}})}function Ub(t,e){return new is({type:"map",schema:null,*entries(n){if(t&&e&&n instanceof Map)for(const[r,i]of n.entries())yield[r,r,t],yield[r,i,e]},coercer(n){return n instanceof Map?new Map(n):n},validator(n){return n instanceof Map||`Expected a \`Map\` object, but received: ${Er(n)}`}})}function IF(){return Na("never",()=>!1)}function fa(){return Na("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Er(t)}`)}function Fh(t){const e=t?Object.keys(t):[],n=IF();return new is({type:"object",schema:t||null,*entries(r){if(t&&kr(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator(r){return kr(r)||`Expected an object, but received: ${Er(r)}`},coercer(r){return kr(r)?{...r}:r}})}function qb(t){return new is({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function AF(t,e){return new is({type:"record",schema:null,*entries(n){if(kr(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return kr(n)||`Expected an object, but received: ${Er(n)}`}})}function He(){return Na("string",t=>typeof t=="string"||`Expected a string, but received: ${Er(t)}`)}function li(t){const e=Object.keys(t);return new is({type:"type",schema:t,*entries(n){if(kr(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return kr(n)||`Expected an object, but received: ${Er(n)}`},coercer(n){return kr(n)?{...n}:n}})}function gE(t,e,n){return new is({...t,coercer:(r,i)=>pE(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}const TF=h.jsx("path",{d:"M9 17H7A5 5 0 0 1 7 7h2M15 7h2a5 5 0 1 1 0 10h-2M8 12h8"}),NF=h.jsx("path",{d:"M9 17H7A5 5 0 0 1 7 7M15 7h2a5 5 0 0 1 4 8M8 12h4M2 2l20 20"}),Hb=h.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5ZM15 5l4 4"}),jF=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M9 14 4 9l5-5"}),h.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]}),mE=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:12,cy:12,r:10}),h.jsx("path",{d:"m9 12 2 2 4-4"})]}),yE=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:12,cy:12,r:10}),h.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),_F={"ar-AE":{info:"معلومات",critical:"خطأ",positive:"تم بنجاح"},"bg-BG":{info:"Инфо",critical:"Грешка",positive:"Успех"},"cs-CZ":{info:"Informace",critical:"Chyba",positive:"Úspěch"},"da-DK":{info:"Info",critical:"Fejl",positive:"Fuldført"},"de-DE":{info:"Informationen",critical:"Fehler",positive:"Erfolg"},"el-GR":{info:"Πληροφορίες",critical:"Σφάλμα",positive:"Επιτυχία"},"en-US":{info:"Info",critical:"Error",positive:"Success"},"es-ES":{info:"Información",critical:"Error",positive:"Éxito"},"et-EE":{info:"Teave",critical:"Viga",positive:"Valmis"},"fi-FI":{info:"Tiedot",critical:"Virhe",positive:"Onnistui"},"fr-FR":{info:"Infos",critical:"Erreur",positive:"Succès"},"he-IL":{info:"מידע",critical:"שגיאה",positive:"הצלחה"},"hr-HR":{info:"Informacije",critical:"Pogreška",positive:"Uspješno"},"hu-HU":{info:"Információ",critical:"Hiba",positive:"Siker"},"it-IT":{info:"Informazioni",critical:"Errore",positive:"Operazione riuscita"},"ja-JP":{info:"情報",critical:"エラー",positive:"成功"},"ko-KR":{info:"정보",critical:"오류",positive:"성공"},"lt-LT":{info:"Informacija",critical:"Klaida",positive:"Sėkmingai"},"lv-LV":{info:"Informācija",critical:"Kļūda",positive:"Izdevās"},"nb-NO":{info:"Info",critical:"Feil",positive:"Vellykket"},"nl-NL":{info:"Info",critical:"Fout",positive:"Geslaagd"},"pl-PL":{info:"Informacje",critical:"Błąd",positive:"Powodzenie"},"pt-BR":{info:"Informações",critical:"Erro",positive:"Sucesso"},"pt-PT":{info:"Informação",critical:"Erro",positive:"Sucesso"},"ro-RO":{info:"Informaţii",critical:"Eroare",positive:"Succes"},"ru-RU":{info:"Информация",critical:"Ошибка",positive:"Успешно"},"sk-SK":{info:"Informácie",critical:"Chyba",positive:"Úspech"},"sl-SI":{info:"Informacije",critical:"Napaka",positive:"Uspešno"},"sr-SP":{info:"Informacije",critical:"Greška",positive:"Uspešno"},"sv-SE":{info:"Info",critical:"Fel",positive:"Lyckades"},"tr-TR":{info:"Bilgiler",critical:"Hata",positive:"Başarılı"},"uk-UA":{info:"Інформація",critical:"Помилка",positive:"Успішно"},"zh-CN":{info:"信息",critical:"错误",positive:"成功"},"zh-TW":{info:"資訊",critical:"錯誤",positive:"成功"}},OF={info:yE,critical:Em,positive:mE};function RF(t,e){const n=$e(59);let r,i,s;n[0]!==t?({toast:r,state:i,...s}=t,n[0]=t,n[1]=r,n[2]=i,n[3]=s):(r=n[1],i=n[2],s=n[3]);const{key:o,animation:l,content:a}=r,{children:c,tone:u,actionLabel:d,onAction:f,shouldCloseOnAction:p}=a,g=Ea(e),{closeButtonProps:m,titleProps:b,toastProps:y,contentProps:x}=MO(t,i),v=Si(s),w=Be(_F);let S;n[4]!==u||n[5]!==w?(S=u&&u!=="neutral"?w.format(u):null,n[4]=u,n[5]=w,n[6]=S):S=n[6];const k=S,E=u&&u!=="neutral"?OF[u]:null;let T;n[7]!==f||n[8]!==p||n[9]!==i||n[10]!==o?(T=()=>{f&&f(),p&&i.close(o)},n[7]=f,n[8]=p,n[9]=i,n[10]=o,n[11]=T):T=n[11];const N=T;let I,A;n[12]===Symbol.for("react.memo_cache_sentinel")?(A={text:{color:"inherit"}},n[12]=A):A=n[12],I=A;const O=I;let _;n[13]!==v.className?(_=Ye(W({borderRadius:j.size.radius.regular,display:"flex",margin:j.size.space.large,maxWidth:j.size.container.xsmall,minHeight:j.size.element.large,padding:j.size.space.regular,paddingInlineStart:j.size.space.large,pointerEvents:"auto",position:"absolute",color:j.color.foreground.onEmphasis,"&[data-tone=neutral]":{background:j.color.scale.slate9},"&[data-tone=info]":{background:j.color.background.accentEmphasis},"&[data-tone=positive]":{background:j.color.background.positiveEmphasis},"&[data-tone=critical]":{background:j.color.background.criticalEmphasis},"&[data-animation=entering]":{animation:`${DF} 300ms`},"&[data-animation=exiting]":{animation:`${MF} 300ms forwards`}}),v.className),n[13]=v.className,n[14]=_):_=n[14];let F;n[15]!==v.style||n[16]!==t.toast.priority?(F={...v.style,zIndex:t.toast.priority},n[15]=v.style,n[16]=t.toast.priority,n[17]=F):F=n[17];let M;n[18]!==l||n[19]!==i||n[20]!==o?(M=()=>{l==="exiting"&&i.remove(o)},n[18]=l,n[19]=i,n[20]=o,n[21]=M):M=n[21];let P;n[22]===Symbol.for("react.memo_cache_sentinel")?(P=W({display:"flex"}),n[22]=P):P=n[22];let B;n[23]!==E||n[24]!==k?(B=E&&h.jsx(X,{"aria-label":k,src:E,size:"medium",marginTop:"small",marginEnd:"regular"}),n[23]=E,n[24]=k,n[25]=B):B=n[25];let z;n[26]===Symbol.for("react.memo_cache_sentinel")?(z=Ye(W({alignItems:"center",display:"flex",columnGap:j.size.space.large,flex:1,flexWrap:"wrap",justifyContent:"flex-end",paddingInlineEnd:j.size.space.large})),n[26]=z):z=n[26];let U;n[27]===Symbol.for("react.memo_cache_sentinel")?(U=Ye(W({flexGrow:1,paddingBlock:j.size.space.regular})),n[27]=U):U=n[27];let R;n[28]!==c?(R=rs(c)?h.jsx(Y,{children:c}):c,n[28]=c,n[29]=R):R=n[29];let J;n[30]!==b||n[31]!==R?(J=h.jsx("div",{className:U,...b,children:R}),n[30]=b,n[31]=R,n[32]=J):J=n[32];let Z;n[33]!==d||n[34]!==N?(Z=d&&h.jsx(Re,{onPress:N,static:"light",children:d}),n[33]=d,n[34]=N,n[35]=Z):Z=n[35];let D;n[36]!==J||n[37]!==Z?(D=h.jsxs("div",{className:z,children:[J,Z]}),n[36]=J,n[37]=Z,n[38]=D):D=n[38];let ie;n[39]!==x||n[40]!==B||n[41]!==D?(ie=h.jsxs("div",{...x,className:P,children:[B,D]}),n[39]=x,n[40]=B,n[41]=D,n[42]=ie):ie=n[42];let oe;n[43]===Symbol.for("react.memo_cache_sentinel")?(oe=W({borderInlineStart:`${j.size.border.regular} solid #fff3`,paddingInlineStart:j.size.space.regular}),n[43]=oe):oe=n[43];let re;n[44]!==m?(re=h.jsx("div",{className:oe,children:h.jsx(wb,{static:"light",...m})}),n[44]=m,n[45]=re):re=n[45];let me;n[46]!==ie||n[47]!==re?(me=h.jsxs(Ci,{slots:O,children:[ie,re]}),n[46]=ie,n[47]=re,n[48]=me):me=n[48];let ee;return n[49]!==v||n[50]!==y||n[51]!==g||n[52]!==u||n[53]!==_||n[54]!==F||n[55]!==l||n[56]!==M||n[57]!==me?(ee=h.jsx("div",{...v,...y,ref:g,"data-tone":u,className:_,style:F,"data-animation":l,onAnimationEnd:M,children:me}),n[49]=v,n[50]=y,n[51]=g,n[52]=u,n[53]=_,n[54]=F,n[55]=l,n[56]=M,n[57]=me,n[58]=ee):ee=n[58],ee}let DF=US({from:{transform:"var(--slide-from)"},to:{transform:"var(--slide-to)"}}),MF=US({from:{opacity:1},to:{opacity:0}}),FF=C.forwardRef(RF);function PF(t){const e=$e(11),{children:n,state:r}=t,{direction:i}=ro(),s=lR(),o=s?"center":t.placement||"end",l=s?"bottom":t.position||"bottom",a=C.useRef(null),{regionProps:c}=RO(t,r,a);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={background:"transparent"},e[0]=u):u=e[0];let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=W({display:"flex",insetInline:0,outline:"none",pointerEvents:"none",position:"fixed",zIndex:100,"&[data-focus=visible] > :first-child:after":{borderRadius:`calc(${j.size.radius.regular} + ${j.size.alias.focusRingGap})`,boxShadow:`0 0 0 ${j.size.alias.focusRing} ${j.color.alias.focusRing}`,content:'""',inset:0,margin:`calc(-1 * ${j.size.alias.focusRingGap})`,pointerEvents:"none",position:"absolute"},"&[data-position=top]":{top:0,flexDirection:"column","--slide-from":"translateY(-100%)","--slide-to":"translateY(0)"},"&[data-position=bottom]":{bottom:0,flexDirection:"column-reverse","--slide-from":"translateY(100%)","--slide-to":"translateY(0)"},"&[data-placement=start]":{alignItems:"flex-start","--slide-from":"translateX(-100%)","--slide-to":"translateX(0)","&[data-direction=rtl]":{"--slide-from":"translateX(100%)"}},"&[data-placement=center]":{alignItems:"center"},"&[data-placement=end]":{alignItems:"flex-end","--slide-from":"translateX(100%)","--slide-to":"translateX(0)","&[data-direction=rtl]":{"--slide-from":"translateX(-100%)"}}}),e[1]=d):d=e[1];let f;e[2]!==c||e[3]!==a||e[4]!==i||e[5]!==l||e[6]!==o||e[7]!==n?(f=h.jsx(qS,{UNSAFE_style:u,children:h.jsx(Ei,{children:h.jsx("div",{...c,ref:a,"data-direction":i,"data-position":l,"data-placement":o,className:d,children:n})})}),e[2]=c,e[3]=a,e[4]=i,e[5]=l,e[6]=o,e[7]=n,e[8]=f):f=e[8];const p=f;let g;return e[9]!==p?(g=RS.createPortal(p,document.body),e[9]=p,e[10]=g):g=e[10],g}let og=null;function Om(){return og||(og=new DO({maxVisibleToasts:1,hasExitAnimation:!0})),og}let Rm=new Set,Dm=new Set;function $F(t){return Dm.add(t),()=>Dm.delete(t)}function Nx(){return Rm.values().next().value}function LF(){return C.useSyncExternalStore($F,Nx,Nx)}function BF(t){const e=$e(10),n=C.useRef();Rm.add(n);let r;e[0]!==n?(r=()=>()=>{for(const a of Om().visibleToasts)a.animation=void 0;Rm.delete(n);for(const a of Dm)a()},e[0]=n,e[1]=r):r=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[2]=i):i=e[2],C.useEffect(r,i);const s=LF();let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=Om(),e[3]=o):o=e[3];const l=OO(o);if(n===s&&l.visibleToasts.length>0){let a;e[4]!==l?(a=l.visibleToasts.map(u=>h.jsx(FF,{toast:u,state:l},u.key)),e[4]=l,e[5]=a):a=e[5];let c;return e[6]!==l||e[7]!==t||e[8]!==a?(c=h.jsx(PF,{state:l,...t,children:a}),e[6]=l,e[7]=t,e[8]=a,e[9]=c):c=e[9],c}return null}function od(t,e,n={}){if(typeof CustomEvent<"u"&&typeof window<"u"){let l=new CustomEvent("keystar-ui-toast",{cancelable:!0,bubbles:!0,detail:{children:t,tone:e,options:n}});if(!window.dispatchEvent(l))return()=>{}}let r={children:t,tone:e,actionLabel:n.actionLabel,onAction:n.onAction,shouldCloseOnAction:n.shouldCloseOnAction};aR(typeof n.timeout=="number"&&n.timeout>=5e3);let i=n.timeout?Math.max(n.timeout,5e3):void 0,s=Om(),o=s.add(r,{priority:VF(e,n),timeout:i,onClose:n.onClose});return()=>s.close(o)}const qi={neutral(t,e={}){return od(t,"neutral",e)},positive(t,e={}){return od(t,"positive",e)},critical(t,e={}){return od(t,"critical",e)},info(t,e={}){return od(t,"info",e)}},zF={critical:10,positive:3,info:2,neutral:1};function VF(t,e){let n=zF[t]||1;return e.onAction&&(n+=4),n}const gi=Math.floor,jd=Math.abs,UF=Math.log10,ai=(t,e)=>t<e?t:e,Vr=(t,e)=>t>e?t:e,bE=t=>t!==0?t<0:1/t<0,jx=1,_x=2,lg=4,ag=8,Vc=32,Hi=64,rr=128,Ph=31,Mm=63,Do=127,qF=2147483647,xE=Number.MAX_SAFE_INTEGER,HF=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&gi(t)===t),Qi=()=>new Set,cg=t=>t[t.length-1],WF=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},es=Array.from,KF=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Fm=Array.isArray,GF=String.fromCharCode,YF=t=>t.toLowerCase(),JF=/^\s*/g,ZF=t=>t.replace(JF,""),XF=/([A-Z])/g,Ox=(t,e)=>ZF(t.replace(XF,n=>`${e}${YF(n)}`)),QF=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},Uc=typeof TextEncoder<"u"?new TextEncoder:null,eP=t=>Uc.encode(t),tP=Uc?eP:QF;let Sc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Sc&&Sc.decode(new Uint8Array).length===1&&(Sc=null);class _u{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const mt=()=>new _u,Sf=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Qe=t=>{const e=new Uint8Array(Sf(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},nP=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Vr(n,e)*2),t.cpos=0)},Pt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Pm=Pt,le=(t,e)=>{for(;e>Do;)Pt(t,rr|Do&e),e=gi(e/128);Pt(t,Do&e)},Wb=(t,e)=>{const n=bE(e);for(n&&(e=-e),Pt(t,(e>Mm?rr:0)|(n?Hi:0)|Mm&e),e=gi(e/64);e>0;)Pt(t,(e>Do?rr:0)|Do&e),e=gi(e/128)},$m=new Uint8Array(3e4),rP=$m.length/3,iP=(t,e)=>{if(e.length<rP){const n=Uc.encodeInto(e,$m).written||0;le(t,n);for(let r=0;r<n;r++)Pt(t,$m[r])}else yt(t,tP(e))},sP=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;le(t,r);for(let i=0;i<r;i++)Pt(t,n.codePointAt(i))},ci=Uc&&Uc.encodeInto?iP:sP,oP=(t,e)=>Ou(t,Qe(e)),Ou=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=ai(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Vr(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},yt=(t,e)=>{le(t,e.byteLength),Ou(t,e)},Kb=(t,e)=>{nP(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},lP=(t,e)=>Kb(t,4).setFloat32(0,e,!1),aP=(t,e)=>Kb(t,8).setFloat64(0,e,!1),cP=(t,e)=>Kb(t,8).setBigInt64(0,e,!1),Rx=new DataView(new ArrayBuffer(4)),uP=t=>(Rx.setFloat32(0,t),Rx.getFloat32(0)===t),qc=(t,e)=>{switch(typeof e){case"string":Pt(t,119),ci(t,e);break;case"number":HF(e)&&jd(e)<=qF?(Pt(t,125),Wb(t,e)):uP(e)?(Pt(t,124),lP(t,e)):(Pt(t,123),aP(t,e));break;case"bigint":Pt(t,122),cP(t,e);break;case"object":if(e===null)Pt(t,126);else if(Fm(e)){Pt(t,117),le(t,e.length);for(let n=0;n<e.length;n++)qc(t,e[n])}else if(e instanceof Uint8Array)Pt(t,116),yt(t,e);else{Pt(t,118);const n=Object.keys(e);le(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];ci(t,i),qc(t,e[i])}}break;case"boolean":Pt(t,e?120:121);break;default:Pt(t,127)}};class Dx extends _u{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&le(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Mx=t=>{t.count>0&&(Wb(t.encoder,t.count===1?t.s:-t.s),t.count>1&&le(t.encoder,t.count-2))};class _d{constructor(){this.encoder=new _u,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Mx(this),this.count=1,this.s=e)}toUint8Array(){return Mx(this),Qe(this.encoder)}}const Fx=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Wb(t.encoder,e),t.count>1&&le(t.encoder,t.count-2)}};class ug{constructor(){this.encoder=new _u,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Fx(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Fx(this),Qe(this.encoder)}}class dP{constructor(){this.sarr=[],this.s="",this.lensE=new _d}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new _u;return this.sarr.push(this.s),this.s="",ci(e,this.sarr.join("")),Ou(e,this.lensE.toUint8Array()),Qe(e)}}const Ws=t=>new Error(t),Lr=()=>{throw Ws("Method unimplemented")},ur=()=>{throw Ws("Unexpected case")},vE=Ws("Unexpected end of array"),kE=Ws("Integer out of Range");class $h{constructor(e){this.arr=e,this.pos=0}}const Hn=t=>new $h(t),fP=t=>t.pos!==t.arr.length,hP=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},$t=t=>hP(t,ye(t)),ha=t=>t.arr[t.pos++],ye=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Do)*n,n*=128,i<rr)return e;if(e>xE)throw kE}throw vE},Hc=t=>{let e=t.arr[t.pos++],n=e&Mm,r=64;const i=(e&Hi)>0?-1:1;if(!(e&rr))return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Do)*r,r*=128,e<rr)return i*n;if(n>xE)throw kE}throw vE},pP=t=>{let e=ye(t);if(e===0)return"";{let n=String.fromCodePoint(ha(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(ha(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},gP=t=>Sc.decode($t(t)),Br=Sc?gP:pP,Gb=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},mP=t=>Gb(t,4).getFloat32(0,!1),yP=t=>Gb(t,8).getFloat64(0,!1),bP=t=>Gb(t,8).getBigInt64(0,!1),xP=[t=>{},t=>null,Hc,mP,yP,bP,t=>!1,t=>!0,Br,t=>{const e=ye(t),n={};for(let r=0;r<e;r++){const i=Br(t);n[i]=Wc(t)}return n},t=>{const e=ye(t),n=[];for(let r=0;r<e;r++)n.push(Wc(t));return n},$t],Wc=t=>xP[127-ha(t)](t);class Px extends $h{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),fP(this)?this.count=ye(this)+1:this.count=-1),this.count--,this.s}}class Od extends $h{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Hc(this);const e=bE(this.s);this.count=1,e&&(this.s=-this.s,this.count=ye(this)+2)}return this.count--,this.s}}class dg extends $h{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Hc(this),n=e&1;this.diff=gi(e/2),this.count=1,n&&(this.count=ye(this)+2)}return this.s+=this.diff,this.count--,this.s}}class vP{constructor(e){this.decoder=new Od(e),this.str=Br(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Ks=Date.now,Cn=()=>new Map,Lm=t=>{const e=Cn();return t.forEach((n,r)=>{e.set(r,n)}),e},Gr=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},kP=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},wP=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1};class wE{constructor(){this._observers=Cn()}on(e,n){return Gr(this._observers,e,Qi).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return es((this._observers.get(e)||Cn()).values()).forEach(r=>r(...n))}destroy(){this._observers=Cn()}}class SP{constructor(){this._observers=Cn()}on(e,n){Gr(this._observers,e,Qi).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return es((this._observers.get(e)||Cn()).values()).forEach(r=>r(...n))}destroy(){this._observers=Cn()}}const CP=Object.assign,Yb=Object.keys,EP=(t,e)=>{for(const n in t)e(t[n],n)},$x=t=>Yb(t).length,Lx=t=>Yb(t).length,IP=t=>{for(const e in t)return!1;return!0},AP=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},SE=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),TP=(t,e)=>t===e||Lx(t)===Lx(e)&&AP(t,(n,r)=>(n!==void 0||SE(e,r))&&e[r]===n),NP=Object.freeze,CE=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&CE(t[e])}return NP(t)},Jb=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&Jb(t,e,n+1)}},jP=t=>t,_P=(t,e)=>t===e,Cc=(t,e)=>{if(t==null||e==null)return _P(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Cc(t.get(n),e.get(n)))return!1;break}case Object:if($x(t)!==$x(e))return!1;for(const n in t)if(!SE(t,n)||!Cc(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Cc(t[n],e[n]))return!1;break;default:return!1}return!0},OP=(t,e)=>e.includes(t),RP=crypto.getRandomValues.bind(crypto),DP=Math.random,EE=()=>RP(new Uint32Array(1))[0],MP=t=>t[gi(DP()*t.length)],FP="10000000-1000-4000-8000"+-1e11,PP=()=>FP.replace(/[018]/g,t=>(t^EE()&15>>t/4).toString(16)),Bx=t=>new Promise(t);Promise.all.bind(Promise);const zx=t=>t===void 0?null:t;class $P{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let IE=new $P,Zb=!0;try{typeof localStorage<"u"&&localStorage&&(IE=localStorage,Zb=!1)}catch{}const AE=IE,LP=t=>Zb||addEventListener("storage",t),BP=t=>Zb||removeEventListener("storage",t);var TE={};const pa=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Xb=typeof window<"u"&&typeof document<"u"&&!pa;let Qr;const zP=()=>{if(Qr===void 0)if(pa){Qr=Cn();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Qr.set(e,""),e=r):e!==null&&(Qr.set(e,r),e=null)}e!==null&&Qr.set(e,"")}else typeof location=="object"?(Qr=Cn(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Qr.set(`--${Ox(e,"-")}`,n),Qr.set(`-${Ox(e,"-")}`,n)}})):Qr=Cn();return Qr},Bm=t=>zP().has(t),Cf=t=>zx(pa?TE[t.toUpperCase().replaceAll("-","_")]:AE.getItem(t)),NE=t=>Bm("--"+t)||Cf(t)!==null;NE("production");const VP=pa&&OP(TE.FORCE_COLOR,["true","1","2"]),UP=VP||!Bm("--no-colors")&&!NE("no-color")&&(!pa||process.stdout.isTTY)&&(!pa||Bm("--color")||Cf("COLORTERM")!==null||(Cf("TERM")||"").includes("color")),jE=t=>new Uint8Array(t),qP=(t,e,n)=>new Uint8Array(t,e,n),HP=t=>new Uint8Array(t),WP=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=GF(t[n]);return btoa(e)},KP=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),GP=t=>{const e=atob(t),n=jE(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},YP=t=>{const e=Buffer.from(t,"base64");return qP(e.buffer,e.byteOffset,e.byteLength)},JP=Xb?WP:KP,ZP=Xb?GP:YP,XP=t=>{const e=jE(t.byteLength);return e.set(t),e};class QP{constructor(e,n){this.left=e,this.right=n}}const Mi=(t,e)=>new QP(t,e),e3=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const t3=t=>kP(t,(e,n)=>`${n}:${e};`).join(""),n3=t=>class{constructor(n){this._=n}destroy(){t(this._)}},r3=n3(clearTimeout),Qb=(t,e)=>new r3(setTimeout(e,t)),ss=Symbol,_E=ss(),OE=ss(),i3=ss(),s3=ss(),o3=ss(),RE=ss(),l3=ss(),e0=ss(),a3=ss(),c3=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},u3={[_E]:Mi("font-weight","bold"),[OE]:Mi("font-weight","normal"),[i3]:Mi("color","blue"),[o3]:Mi("color","green"),[s3]:Mi("color","grey"),[RE]:Mi("color","red"),[l3]:Mi("color","purple"),[e0]:Mi("color","orange"),[a3]:Mi("color","black")},d3=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=Cn();let i=[],s=0;for(;s<t.length;s++){const o=t[s],l=u3[o];if(l!==void 0)r.set(l.left,l.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const a=t3(r);s>0||a.length>0?(e.push("%c"+o),n.push(a)):e.push(o)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||i.push(o)}return i},DE=UP?d3:c3,f3=(...t)=>{console.log(...DE(t)),FE.forEach(e=>e.print(t))},ME=(...t)=>{console.warn(...DE(t)),t.unshift(e0),FE.forEach(e=>e.print(t))},FE=Qi(),PE=t=>({[Symbol.iterator](){return this},next:t}),h3=(t,e)=>PE(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),fg=(t,e)=>PE(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class t0{constructor(e,n){this.clock=e,this.len=n}}class ja{constructor(){this.clients=new Map}}const Gs=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);for(let o=0;o<r.length;o++){const l=r[o];YE(t,s,l.clock,l.len,n)}}),p3=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=gi((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},_a=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&p3(n,e.clock)!==null},n0=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=Vr(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},zm=t=>{const e=new ja;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)WF(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return n0(e),e},Kc=(t,e,n,r)=>{Gr(t.clients,e,()=>[]).push(new t0(n,r))},$E=()=>new ja,LE=t=>{const e=$E();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const l=o.id.clock;let a=o.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])a+=c.length;i.push(new t0(l,a))}}i.length>0&&e.clients.set(r,i)}),e},Oa=(t,e)=>{le(t.restEncoder,e.clients.size),es(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),le(t.restEncoder,n);const i=r.length;le(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},r0=t=>{const e=new ja,n=ye(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=ye(t.restDecoder),s=ye(t.restDecoder);if(s>0){const o=Gr(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new t0(t.readDsClock(),t.readDsLen()))}}return e},Vx=(t,e,n)=>{const r=new ja,i=ye(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=ye(t.restDecoder),l=ye(t.restDecoder),a=n.clients.get(o)||[],c=bt(n,o);for(let u=0;u<l;u++){const d=t.readDsClock(),f=d+t.readDsLen();if(d<c){c<f&&Kc(r,o,c,f-c);let p=mi(a,d),g=a[p];for(!g.deleted&&g.id.clock<d&&(a.splice(p+1,0,Of(e,g,d-g.id.clock)),p++);p<a.length&&(g=a[p++],g.id.clock<f);)g.deleted||(f<g.id.clock+g.length&&a.splice(p,0,Of(e,g,f-g.id.clock)),g.delete(e))}else Kc(r,o,d,f-d)}}if(r.clients.size>0){const s=new Zo;return le(s.restEncoder,0),Oa(s,r),s.toUint8Array()}return null},BE=EE;class Wn extends wE{constructor({guid:e=PP(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=BE(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new KE,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Bx(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>Bx(c=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&it(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(es(this.subdocs).map(e=>e.guid))}transact(e,n=null){return it(this,e,n)}get(e,n=Mt){const r=Gr(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==Mt&&i!==n)if(i===Mt){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Ms)}getText(e=""){return this.get(e,Ys)}getMap(e=""){return this.get(e,yi)}getXmlElement(e=""){return this.get(e,wn)}getXmlFragment(e=""){return this.get(e,Js)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,es(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Wn({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,it(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class zE{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ye(this.restDecoder)}readDsLen(){return ye(this.restDecoder)}}class Lh extends zE{readLeftID(){return Ne(ye(this.restDecoder),ye(this.restDecoder))}readRightID(){return Ne(ye(this.restDecoder),ye(this.restDecoder))}readClient(){return ye(this.restDecoder)}readInfo(){return ha(this.restDecoder)}readString(){return Br(this.restDecoder)}readParentInfo(){return ye(this.restDecoder)===1}readTypeRef(){return ye(this.restDecoder)}readLen(){return ye(this.restDecoder)}readAny(){return Wc(this.restDecoder)}readBuf(){return XP($t(this.restDecoder))}readJSON(){return JSON.parse(Br(this.restDecoder))}readKey(){return Br(this.restDecoder)}}class g3{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ye(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ye(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Jo extends g3{constructor(e){super(e),this.keys=[],ye(e),this.keyClockDecoder=new dg($t(e)),this.clientDecoder=new Od($t(e)),this.leftClockDecoder=new dg($t(e)),this.rightClockDecoder=new dg($t(e)),this.infoDecoder=new Px($t(e),ha),this.stringDecoder=new vP($t(e)),this.parentInfoDecoder=new Px($t(e),ha),this.typeRefDecoder=new Od($t(e)),this.lenDecoder=new Od($t(e))}readLeftID(){return new ta(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ta(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Wc(this.restDecoder)}readBuf(){return $t(this.restDecoder)}readJSON(){return Wc(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class i0{constructor(){this.restEncoder=mt()}toUint8Array(){return Qe(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){le(this.restEncoder,e)}writeDsLen(e){le(this.restEncoder,e)}}class Ra extends i0{writeLeftID(e){le(this.restEncoder,e.client),le(this.restEncoder,e.clock)}writeRightID(e){le(this.restEncoder,e.client),le(this.restEncoder,e.clock)}writeClient(e){le(this.restEncoder,e)}writeInfo(e){Pm(this.restEncoder,e)}writeString(e){ci(this.restEncoder,e)}writeParentInfo(e){le(this.restEncoder,e?1:0)}writeTypeRef(e){le(this.restEncoder,e)}writeLen(e){le(this.restEncoder,e)}writeAny(e){qc(this.restEncoder,e)}writeBuf(e){yt(this.restEncoder,e)}writeJSON(e){ci(this.restEncoder,JSON.stringify(e))}writeKey(e){ci(this.restEncoder,e)}}class s0{constructor(){this.restEncoder=mt(),this.dsCurrVal=0}toUint8Array(){return Qe(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,le(this.restEncoder,n)}writeDsLen(e){e===0&&ur(),le(this.restEncoder,e-1),this.dsCurrVal+=e}}class Zo extends s0{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ug,this.clientEncoder=new _d,this.leftClockEncoder=new ug,this.rightClockEncoder=new ug,this.infoEncoder=new Dx(Pm),this.stringEncoder=new dP,this.parentInfoEncoder=new Dx(Pm),this.typeRefEncoder=new _d,this.lenEncoder=new _d}toUint8Array(){const e=mt();return le(e,0),yt(e,this.keyClockEncoder.toUint8Array()),yt(e,this.clientEncoder.toUint8Array()),yt(e,this.leftClockEncoder.toUint8Array()),yt(e,this.rightClockEncoder.toUint8Array()),yt(e,Qe(this.infoEncoder)),yt(e,this.stringEncoder.toUint8Array()),yt(e,Qe(this.parentInfoEncoder)),yt(e,this.typeRefEncoder.toUint8Array()),yt(e,this.lenEncoder.toUint8Array()),Ou(e,Qe(this.restEncoder)),Qe(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){qc(this.restEncoder,e)}writeBuf(e){yt(this.restEncoder,e)}writeJSON(e){qc(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const m3=(t,e,n,r)=>{r=Vr(r,e[0].id.clock);const i=mi(e,r);le(t.restEncoder,e.length-i),t.writeClient(n),le(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},o0=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{bt(e,s)>i&&r.set(s,i)}),Ru(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),le(t.restEncoder,r.size),es(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{m3(t,e.clients.get(i),i,s)})},y3=(t,e)=>{const n=Cn(),r=ye(t.restDecoder);for(let i=0;i<r;i++){const s=ye(t.restDecoder),o=new Array(s),l=t.readClient();let a=ye(t.restDecoder);n.set(l,{i:0,refs:o});for(let c=0;c<s;c++){const u=t.readInfo();switch(Ph&u){case 0:{const d=t.readLen();o[c]=new yr(Ne(l,a),d),a+=d;break}case 10:{const d=ye(t.restDecoder);o[c]=new tr(Ne(l,a),d),a+=d;break}default:{const d=(u&(Hi|rr))===0,f=new st(Ne(l,a),null,(u&rr)===rr?t.readLeftID():null,null,(u&Hi)===Hi?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(u&Vc)===Vc?t.readString():null,bI(t,u));o[c]=f,a+=f.length}}}}return n},b3=(t,e,n)=>{const r=[];let i=es(n.keys()).sort((p,g)=>p-g);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let p=n.get(i[i.length-1]);for(;p.refs.length===p.i;)if(i.pop(),i.length>0)p=n.get(i[i.length-1]);else return null;return p};let o=s();if(o===null)return null;const l=new KE,a=new Map,c=(p,g)=>{const m=a.get(p);(m==null||m>g)&&a.set(p,g)};let u=o.refs[o.i++];const d=new Map,f=()=>{for(const p of r){const g=p.id.client,m=n.get(g);m?(m.i--,l.clients.set(g,m.refs.slice(m.i)),n.delete(g),m.i=0,m.refs=[]):l.clients.set(g,[p]),i=i.filter(b=>b!==g)}r.length=0};for(;;){if(u.constructor!==tr){const g=Gr(d,u.id.client,()=>bt(e,u.id.client))-u.id.clock;if(g<0)r.push(u),c(u.id.client,u.id.clock-1),f();else{const m=u.getMissing(t,e);if(m!==null){r.push(u);const b=n.get(m)||{refs:[],i:0};if(b.refs.length===b.i)c(m,bt(e,m)),f();else{u=b.refs[b.i++];continue}}else(g===0||g<u.length)&&(u.integrate(t,g),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=s(),o===null)break;u=o.refs[o.i++]}}if(l.clients.size>0){const p=new Zo;return o0(p,l,new Map),le(p.restEncoder,0),{missing:a,update:p.toUint8Array()}}return null},x3=(t,e)=>o0(t,e.doc.store,e.beforeState),v3=(t,e,n,r=new Jo(t))=>it(e,i=>{i.local=!1;let s=!1;const o=i.doc,l=o.store,a=y3(r,o),c=b3(i,l,a),u=l.pendingStructs;if(u){for(const[f,p]of u.missing)if(p<bt(l,f)){s=!0;break}if(c){for(const[f,p]of c.missing){const g=u.missing.get(f);(g==null||g>p)&&u.missing.set(f,p)}u.update=Af([u.update,c.update])}}else l.pendingStructs=c;const d=Vx(r,i,l);if(l.pendingDs){const f=new Jo(Hn(l.pendingDs));ye(f.restDecoder);const p=Vx(f,i,l);d&&p?l.pendingDs=Af([d,p]):l.pendingDs=d||p}else l.pendingDs=d;if(s){const f=l.pendingStructs.update;l.pendingStructs=null,Ef(i.doc,f)}},n,!1),Ef=(t,e,n,r=Jo)=>{const i=Hn(e);v3(i,t,n,new r(i))},vo=(t,e,n)=>Ef(t,e,n,Lh),k3=(t,e,n=new Map)=>{o0(t,e.store,n),Oa(t,LE(e.store))},w3=(t,e=new Uint8Array([0]),n=new Zo)=>{const r=VE(e);k3(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(XE(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===Ra)return P3(i.map((s,o)=>o===0?s:U3(s)));if(n.constructor===Zo)return Af(i)}return i[0]},If=(t,e)=>w3(t,e,new Ra),S3=t=>{const e=new Map,n=ye(t.restDecoder);for(let r=0;r<n;r++){const i=ye(t.restDecoder),s=ye(t.restDecoder);e.set(i,s)}return e},VE=t=>S3(new zE(Hn(t))),UE=(t,e)=>(le(t.restEncoder,e.size),es(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{le(t.restEncoder,n),le(t.restEncoder,r)}),t),C3=(t,e)=>UE(t,Ru(e.store)),E3=(t,e=new s0)=>(t instanceof Map?UE(e,t):C3(e,t),e.toUint8Array()),qE=t=>E3(t,new i0);class I3{constructor(){this.l=[]}}const Ux=()=>new I3,qx=(t,e)=>t.l.push(e),Hx=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},HE=(t,e,n)=>Jb(t.l,[e,n]);class ta{constructor(e,n){this.client=e,this.clock=n}}const Bl=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Ne=(t,e)=>new ta(t,e),Gc=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw ur()},Yc=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Jc{constructor(e,n,r,i=0){this.type=e,this.tname=n,this.item=r,this.assoc=i}}const Ec=t=>new Jc(t.type==null?null:Ne(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Ne(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class A3{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const T3=(t,e,n=0)=>new A3(t,e,n),ld=(t,e,n)=>{let r=null,i=null;return t._item===null?i=Gc(t):r=Ne(t._item.id.client,t._item.id.clock),new Jc(r,i,e,n)},hg=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return ld(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return ld(t,Ne(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return ld(t,r.lastId,n);r=r.right}return ld(t,null,n)},N3=(t,e,n=!0)=>{const r=e.store,i=t.item,s=t.type,o=t.tname,l=t.assoc;let a=null,c=0;if(i!==null){if(bt(r,i.client)<=i.clock)return null;const u=n?Hm(r,i):{item:na(r,i),diff:0},d=u.item;if(!(d instanceof st))return null;if(a=d.parent,a._item===null||!a._item.deleted){c=d.deleted||!d.countable?0:u.diff+(l>=0?0:1);let f=d.left;for(;f!==null;)!f.deleted&&f.countable&&(c+=f.length),f=f.left}}else{if(o!==null)a=e.get(o);else if(s!==null){if(bt(r,s.client)<=s.clock)return null;const{item:u}=n?Hm(r,s):{item:na(r,s)};if(u instanceof st&&u.content instanceof Yr)a=u.content.type;else return null}else throw ur();l>=0?c=a._length:c=0}return T3(a,c,t.assoc)},Wx=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Bl(t.item,e.item)&&Bl(t.type,e.type)&&t.assoc===e.assoc;class l0{constructor(e,n){this.ds=e,this.sv=n}}const WE=(t,e)=>new l0(t,e),pg=t=>WE(LE(t.store),Ru(t.store)),ko=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!_a(e.ds,t.id),Vm=(t,e)=>{const n=Gr(t.meta,Vm,Qi),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<bt(r,s)&&Fn(t,Ne(s,i))}),Gs(t,e.ds,i=>{}),n.add(e))};class KE{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ru=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},bt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},GE=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw ur()}n.push(e)},mi=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=gi(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=gi((n+r)/2)}throw ur()},j3=(t,e)=>{const n=t.clients.get(e.client);return n[mi(n,e.clock)]},na=j3,Um=(t,e,n)=>{const r=mi(e,n),i=e[r];return i.id.clock<n&&i instanceof st?(e.splice(r+1,0,Of(t,i,n-i.id.clock)),r+1):r},Fn=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Um(t,n,e.clock)]},Kx=(t,e,n)=>{const r=e.clients.get(n.client),i=mi(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==yr&&r.splice(i+1,0,Of(t,s,n.clock-s.id.clock+1)),s},_3=(t,e,n)=>{const r=t.clients.get(e.id.client);r[mi(r,e.id.clock)]=n},YE=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=Um(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&Um(t,e,s),i(l);while(o<e.length&&e[o].id.clock<s)};class O3{constructor(e,n,r){this.doc=e,this.deleteSet=new ja,this.beforeState=Ru(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Gx=(t,e)=>e.deleteSet.clients.size===0&&!wP(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(n0(e.deleteSet),x3(t,e),Oa(t,e.deleteSet),!0),Yx=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Gr(t.changed,e,Qi).add(n)},Rd=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof st&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},R3=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const l=i[o],a=l.clock+l.len;for(let c=mi(s,l.clock),u=s[c];c<s.length&&u.id.clock<a;u=s[++c]){const d=s[c];if(l.clock+l.len<=d.id.clock)break;d instanceof st&&d.deleted&&!d.keep&&n(d)&&d.gc(e,!1)}}}},D3=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],l=ai(i.length-1,1+mi(i,o.clock+o.len-1));for(let a=l,c=i[a];a>0&&c.id.clock>=o.clock;c=i[a])a-=1+Rd(i,a)}})},JE=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{n0(s),n.afterState=Ru(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),l.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,d)=>u.path.length-d.path.length),HE(c._dEH,a,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),Jb(l,[]),n._needFormattingCleanup&&r4(n)}finally{r.gc&&R3(s,i,r.gcFilter),D3(s,i),n.afterState.forEach((u,d)=>{const f=n.beforeState.get(d)||0;if(f!==u){const p=i.clients.get(d),g=Vr(mi(p,f),1);for(let m=p.length-1;m>=g;)m-=1+Rd(p,m)}});for(let u=o.length-1;u>=0;u--){const{client:d,clock:f}=o[u].id,p=i.clients.get(d),g=mi(p,f);g+1<p.length&&Rd(p,g+1)>1||g>0&&Rd(p,g)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(f3(e0,_E,"[yjs] ",OE,RE,"Changed the client-id because another client seems to be using it."),r.clientID=BE()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new Ra;Gx(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new Zo;Gx(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:a,added:l,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):JE(t,e+1)}}},it=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new O3(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===i[0];t._transaction=null,l&&JE(i,0)}}return o};class M3{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const Jx=(t,e,n)=>{Gs(t,n.deletions,r=>{r instanceof st&&e.scope.some(i=>Yc(i,r))&&p0(r,!1)})},Zx=(t,e,n)=>{let r=null;const i=t.doc,s=t.scope;it(i,l=>{for(;e.length>0&&t.currStackItem===null;){const a=i.store,c=e.pop(),u=new Set,d=[];let f=!1;Gs(l,c.insertions,p=>{if(p instanceof st){if(p.redone!==null){let{item:g,diff:m}=Hm(a,p.id);m>0&&(g=Fn(l,Ne(g.id.client,g.id.clock+m))),p=g}!p.deleted&&s.some(g=>Yc(g,p))&&d.push(p)}}),Gs(l,c.deletions,p=>{p instanceof st&&s.some(g=>Yc(g,p))&&!_a(c.insertions,p.id)&&u.add(p)}),u.forEach(p=>{f=yI(l,p,u,c.insertions,t.ignoreRemoteMapChanges,t)!==null||f});for(let p=d.length-1;p>=0;p--){const g=d[p];t.deleteFilter(g)&&(g.delete(l),f=!0)}t.currStackItem=f?c:null}l.changed.forEach((a,c)=>{a.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=l},t);const o=t.currStackItem;if(o!=null){const l=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:l,origin:t},t]),t.currStackItem=null}return o};class ZE extends wE{constructor(e,{captureTimeout:n=500,captureTransaction:r=a=>!0,deleteFilter:i=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:l=Fm(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=i,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=a=>{if(!this.captureTransaction(a)||!this.scope.some(b=>a.changedParentTypes.has(b))||!this.trackedOrigins.has(a.origin)&&(!a.origin||!this.trackedOrigins.has(a.origin.constructor)))return;const c=this.undoing,u=this.redoing,d=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const f=new ja;a.afterState.forEach((b,y)=>{const x=a.beforeState.get(y)||0,v=b-x;v>0&&Kc(f,y,x,v)});const p=Ks();let g=!1;if(this.lastChange>0&&p-this.lastChange<this.captureTimeout&&d.length>0&&!c&&!u){const b=d[d.length-1];b.deletions=zm([b.deletions,a.deleteSet]),b.insertions=zm([b.insertions,f])}else d.push(new M3(a.deleteSet,f)),g=!0;!c&&!u&&(this.lastChange=p),Gs(a,a.deleteSet,b=>{b instanceof st&&this.scope.some(y=>Yc(y,b))&&p0(b,!0)});const m=[{stackItem:d[d.length-1],origin:a.origin,type:c?"redo":"undo",changedParentTypes:a.changedParentTypes},this];g?this.emit("stack-item-added",m):this.emit("stack-item-updated",m)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=Fm(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&ME("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(i=>Jx(r,this,i)),this.undoStack=[]),n&&(this.redoStack.forEach(i=>Jx(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=Zx(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=Zx(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*F3(t){const e=ye(t.restDecoder);for(let n=0;n<e;n++){const r=ye(t.restDecoder),i=t.readClient();let s=ye(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const a=ye(t.restDecoder);yield new tr(Ne(i,s),a),s+=a}else if(Ph&l){const a=(l&(Hi|rr))===0,c=new st(Ne(i,s),null,(l&rr)===rr?t.readLeftID():null,null,(l&Hi)===Hi?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(l&Vc)===Vc?t.readString():null,bI(t,l));yield c,s+=c.length}else{const a=t.readLen();yield new yr(Ne(i,s),a),s+=a}}}}class Bh{constructor(e,n){this.gen=F3(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===tr);return this.curr}}class a0{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const P3=t=>Af(t,Lh,Ra),$3=(t,e=s0,n=Jo)=>{const r=new e,i=new Bh(new n(Hn(t)),!1);let s=i.curr;if(s!==null){let o=0,l=s.id.client,a=s.id.clock!==0,c=a?0:s.id.clock+s.length;for(;s!==null;s=i.next())l!==s.id.client&&(c!==0&&(o++,le(r.restEncoder,l),le(r.restEncoder,c)),l=s.id.client,c=0,a=s.id.clock!==0),s.constructor===tr&&(a=!0),a||(c=s.id.clock+s.length);c!==0&&(o++,le(r.restEncoder,l),le(r.restEncoder,c));const u=mt();return le(u,o),oP(u,r.restEncoder),r.restEncoder=u,r.toUint8Array()}else return le(r.restEncoder,0),r.toUint8Array()},L3=t=>$3(t,i0,Lh),B3=(t,e)=>{if(t.constructor===yr){const{client:n,clock:r}=t.id;return new yr(Ne(n,r+e),t.length-e)}else if(t.constructor===tr){const{client:n,clock:r}=t.id;return new tr(Ne(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new st(Ne(r,i+e),null,Ne(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Af=(t,e=Jo,n=Zo)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(Hn(u)));let i=r.map(u=>new Bh(u,!0)),s=null;const o=new n,l=new a0(o);for(;i=i.filter(f=>f.curr!==null),i.sort((f,p)=>{if(f.curr.id.client===p.curr.id.client){const g=f.curr.id.clock-p.curr.id.clock;return g===0?f.curr.constructor===p.curr.constructor?0:f.curr.constructor===tr?1:-1:g}else return p.curr.id.client-f.curr.id.client}),i.length!==0;){const u=i[0],d=u.curr.id.client;if(s!==null){let f=u.curr,p=!1;for(;f!==null&&f.id.clock+f.length<=s.struct.id.clock+s.struct.length&&f.id.client>=s.struct.id.client;)f=u.next(),p=!0;if(f===null||f.id.client!==d||p&&f.id.clock>s.struct.id.clock+s.struct.length)continue;if(d!==s.struct.id.client)vs(l,s.struct,s.offset),s={struct:f,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<f.id.clock)if(s.struct.constructor===tr)s.struct.length=f.id.clock+f.length-s.struct.id.clock;else{vs(l,s.struct,s.offset);const g=f.id.clock-s.struct.id.clock-s.struct.length;s={struct:new tr(Ne(d,s.struct.id.clock+s.struct.length),g),offset:0}}else{const g=s.struct.id.clock+s.struct.length-f.id.clock;g>0&&(s.struct.constructor===tr?s.struct.length-=g:f=B3(f,g)),s.struct.mergeWith(f)||(vs(l,s.struct,s.offset),s={struct:f,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===d&&f.id.clock===s.struct.id.clock+s.struct.length&&f.constructor!==tr;f=u.next())vs(l,s.struct,s.offset),s={struct:f,offset:0}}s!==null&&(vs(l,s.struct,s.offset),s=null),c0(l);const a=r.map(u=>r0(u)),c=zm(a);return Oa(o,c),o.toUint8Array()},XE=(t,e,n=Jo,r=Zo)=>{const i=VE(e),s=new r,o=new a0(s),l=new n(Hn(t)),a=new Bh(l,!1);for(;a.curr;){const u=a.curr,d=u.id.client,f=i.get(d)||0;if(a.curr.constructor===tr){a.next();continue}if(u.id.clock+u.length>f)for(vs(o,u,Vr(f-u.id.clock,0)),a.next();a.curr&&a.curr.id.client===d;)vs(o,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===d&&a.curr.id.clock+a.curr.length<=f;)a.next()}c0(o);const c=r0(l);return Oa(s,c),s.toUint8Array()},z3=(t,e)=>XE(t,e,Lh,Ra),QE=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Qe(t.encoder.restEncoder)}),t.encoder.restEncoder=mt(),t.written=0)},vs=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&QE(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),le(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},c0=t=>{QE(t);const e=t.encoder.restEncoder;le(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];le(e,r.written),Ou(e,r.restEncoder)}},V3=(t,e,n,r)=>{const i=new n(Hn(t)),s=new Bh(i,!1),o=new r,l=new a0(o);for(let c=s.curr;c!==null;c=s.next())vs(l,e(c),0);c0(l);const a=r0(i);return Oa(o,a),o.toUint8Array()},U3=t=>V3(t,jP,Jo,Ra),Xx="You must not compute changes after the event-handler fired.";class zh{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=q3(this.currentTarget,this.target))}deletes(e){return _a(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ws(Xx);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,l;if(this.adds(s)){let a=s.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(s))if(a!==null&&this.deletes(a))o="delete",l=cg(a.content.getContent());else return;else a!==null&&this.deletes(a)?(o="update",l=cg(a.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=cg(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ws(Xx);const n=this.target,r=Qi(),i=Qi(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const a=()=>{l&&s.push(l)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,i.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),r.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}}const q3=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},hn=()=>{ME("Invalid access: Add Yjs type to a document before reading data.")},eI=80;let u0=0;class H3{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=u0++}}const W3=t=>{t.timestamp=u0++},tI=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=u0++},K3=(t,e,n)=>{if(t.length>=eI){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return tI(r,e,n),r}else{const r=new H3(e,n);return t.push(r),r}},Vh=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>jd(e-s.index)<jd(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,W3(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&jd(n.index-i)<r.parent.length/eI?(tI(n,r,i),n):K3(t._searchMarker,r,i)},Zc=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Vr(e,i.index+n))}},Uh=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Gr(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;HE(r._eH,n,e)};class Mt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Ux(),this._dEH=Ux(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Lr()}clone(){throw Lr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){qx(this._eH,e)}observeDeep(e){qx(this._dEH,e)}unobserve(e){Hx(this._eH,e)}unobserveDeep(e){Hx(this._dEH,e)}toJSON(){}}const nI=(t,e,n)=>{t.doc??hn(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)i.push(o[l]),r--;e=0}}s=s.right}return i},rI=t=>{t.doc??hn();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},iI=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&ko(r,e)){const i=r.content.getContent();for(let s=0;s<i.length;s++)n.push(i[s])}r=r.right}return n},Xc=(t,e)=>{let n=0,r=t._start;for(t.doc??hn();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},sI=(t,e)=>{const n=[];return Xc(t,(r,i)=>{n.push(e(r,i,t))}),n},G3=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},oI=(t,e)=>{t.doc??hn();const n=Vh(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Tf=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,l=s.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new st(Ne(o,bt(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Xo(c)),i.integrate(t,0),c=[])};r.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:i=new st(Ne(o,bt(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Du(new Uint8Array(d))),i.integrate(t,0);break;case Wn:i=new st(Ne(o,bt(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Mu(d)),i.integrate(t,0);break;default:if(d instanceof Mt)i=new st(Ne(o,bt(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Yr(d)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},lI=()=>Ws("Length exceeded!"),aI=(t,e,n,r)=>{if(n>e._length)throw lI();if(n===0)return e._searchMarker&&Zc(e._searchMarker,n,r.length),Tf(t,e,null,r);const i=n,s=Vh(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Fn(t,Ne(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&Zc(e._searchMarker,i,r.length),Tf(t,e,o,r)},Y3=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return Tf(t,e,i,n)},cI=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=Vh(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Fn(t,Ne(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Fn(t,Ne(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw lI();e._searchMarker&&Zc(e._searchMarker,i,-s+r)},Nf=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},d0=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(r==null)l=new Xo([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new Xo([r]);break;case Uint8Array:l=new Du(r);break;case Wn:l=new Mu(r);break;default:if(r instanceof Mt)l=new Yr(r);else throw new Error("Unexpected content type")}new st(Ne(o,bt(s.store,o)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},f0=(t,e)=>{t.doc??hn();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},uI=t=>{const e={};return t.doc??hn(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},dI=(t,e)=>{t.doc??hn();const n=t._map.get(e);return n!==void 0&&!n.deleted},J3=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&ko(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},ad=t=>(t.doc??hn(),h3(t._map.entries(),e=>!e[1].deleted));class Z3 extends zh{}class Ms extends Mt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Ms;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ms}clone(){const e=new Ms;return e.insert(0,this.toArray().map(n=>n instanceof Mt?n.clone():n)),e}get length(){return this.doc??hn(),this._length}_callObserver(e,n){super._callObserver(e,n),Uh(this,e,new Z3(this,e))}insert(e,n){this.doc!==null?it(this.doc,r=>{aI(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?it(this.doc,n=>{Y3(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?it(this.doc,r=>{cI(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return oI(this,e)}toArray(){return rI(this)}slice(e=0,n=this.length){return nI(this,e,n)}toJSON(){return this.map(e=>e instanceof Mt?e.toJSON():e)}map(e){return sI(this,e)}forEach(e){Xc(this,e)}[Symbol.iterator](){return G3(this)}_write(e){e.writeTypeRef(w4)}}const X3=t=>new Ms;class Q3 extends zh{constructor(e,n,r){super(e,n),this.keysChanged=r}}class yi extends Mt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new yi}clone(){const e=new yi;return this.forEach((n,r)=>{e.set(r,n instanceof Mt?n.clone():n)}),e}_callObserver(e,n){Uh(this,e,new Q3(this,e,n))}toJSON(){this.doc??hn();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Mt?i.toJSON():i}}),e}get size(){return[...ad(this)].length}keys(){return fg(ad(this),e=>e[0])}values(){return fg(ad(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return fg(ad(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??hn(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?it(this.doc,n=>{Nf(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?it(this.doc,r=>{d0(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return f0(this,e)}has(e){return dI(this,e)}clear(){this.doc!==null?it(this.doc,e=>{this.forEach(function(n,r,i){Nf(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(S4)}}const e4=t=>new yi,Ts=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&TP(t,e);class qm{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&ur(),this.right.content.constructor){case Tt:this.right.deleted||Da(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Qx=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Tt:e.right.deleted||Da(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Fn(t,Ne(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},cd=(t,e,n,r)=>{const i=new Map,s=r?Vh(e,n):null;if(s){const o=new qm(s.p.left,s.p,s.index,i);return Qx(t,o,n-s.index)}else{const o=new qm(null,e._start,0,i);return Qx(t,o,n)}},fI=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Tt&&Ts(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,l)=>{const a=n.left,c=n.right,u=new st(Ne(s,bt(i.store,s)),a,a&&a.lastId,c,c&&c.id,e,null,new Tt(l,o));u.integrate(t,0),n.right=u,n.forward()})},Da=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},hI=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Tt&&Ts(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},pI=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const l in r){const a=r[l],c=n.currentAttributes.get(l)??null;if(!Ts(c,a)){o.set(l,c);const{left:u,right:d}=n;n.right=new st(Ne(s,bt(i.store,s)),u,u&&u.lastId,d,d&&d.id,e,null,new Tt(l,a)),n.right.integrate(t,0),n.forward()}}return o},gg=(t,e,n,r,i)=>{n.currentAttributes.forEach((f,p)=>{i[p]===void 0&&(i[p]=null)});const s=t.doc,o=s.clientID;hI(n,i);const l=pI(t,e,n,i),a=r.constructor===String?new Ur(r):r instanceof Mt?new Yr(r):new gl(r);let{left:c,right:u,index:d}=n;e._searchMarker&&Zc(e._searchMarker,n.index,a.getLength()),u=new st(Ne(o,bt(s.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=d,n.forward(),fI(t,e,n,l)},ev=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;hI(n,i);const l=pI(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===Tt));){if(!n.right.deleted)switch(n.right.content.constructor){case Tt:{const{key:a,value:c}=n.right.content,u=i[a];if(u!==void 0){if(Ts(u,c))l.delete(a);else{if(r===0)break e;l.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:r<n.right.length&&Fn(t,Ne(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let a="";for(;r>0;r--)a+=`
`;n.right=new st(Ne(o,bt(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ur(a)),n.right.integrate(t,0),n.forward()}fI(t,e,n,l)},gI=(t,e,n,r,i)=>{let s=e;const o=Cn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Tt){const c=s.content;o.set(c.key,c)}s=s.right}let l=0,a=!1;for(;e!==s;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case Tt:{const{key:u,value:d}=c,f=r.get(u)??null;(o.get(u)!==c||f===d)&&(e.delete(t),l++,!a&&(i.get(u)??null)===d&&f!==d&&(f===null?i.delete(u):i.set(u,f))),!a&&!e.deleted&&Da(i,c);break}}}e=e.right}return l},t4=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Tt){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},n4=t=>{let e=0;return it(t.doc,n=>{let r=t._start,i=t._start,s=Cn();const o=Lm(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Tt:Da(o,i.content);break;default:e+=gI(n,r,i,s,o),s=Lm(o),r=i;break}i=i.right}}),e},r4=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&YE(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===Tt&&o.constructor!==yr&&e.add(o.parent)})}it(n,r=>{Gs(t,t.deleteSet,i=>{if(i instanceof yr||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===Tt?e.add(s):t4(r,i)});for(const i of e)n4(i)})},tv=(t,e,n)=>{const r=n,i=Lm(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Yr:case gl:case Ur:n<e.right.length&&Fn(t,Ne(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&gI(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Zc(o._searchMarker,e.index,-r+n),e};class i4 extends zh{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];it(e,r=>{const i=new Map,s=new Map;let o=this.target._start,l=null;const a={};let c="",u=0,d=0;const f=()=>{if(l!==null){let p=null;switch(l){case"delete":d>0&&(p={delete:d}),d=0;break;case"insert":(typeof c=="object"||c.length>0)&&(p={insert:c},i.size>0&&(p.attributes={},i.forEach((g,m)=>{g!==null&&(p.attributes[m]=g)}))),c="";break;case"retain":u>0&&(p={retain:u},IP(a)||(p.attributes=CP({},a))),u=0;break}p&&n.push(p),l=null}};for(;o!==null;){switch(o.content.constructor){case Yr:case gl:this.adds(o)?this.deletes(o)||(f(),l="insert",c=o.content.getContent()[0],f()):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),d+=1):o.deleted||(l!=="retain"&&(f(),l="retain"),u+=1);break;case Ur:this.adds(o)?this.deletes(o)||(l!=="insert"&&(f(),l="insert"),c+=o.content.str):this.deletes(o)?(l!=="delete"&&(f(),l="delete"),d+=o.length):o.deleted||(l!=="retain"&&(f(),l="retain"),u+=o.length);break;case Tt:{const{key:p,value:g}=o.content;if(this.adds(o)){if(!this.deletes(o)){const m=i.get(p)??null;Ts(m,g)?g!==null&&o.delete(r):(l==="retain"&&f(),Ts(g,s.get(p)??null)?delete a[p]:a[p]=g)}}else if(this.deletes(o)){s.set(p,g);const m=i.get(p)??null;Ts(m,g)||(l==="retain"&&f(),a[p]=m)}else if(!o.deleted){s.set(p,g);const m=a[p];m!==void 0&&(Ts(m,g)?m!==null&&o.delete(r):(l==="retain"&&f(),g===null?delete a[p]:a[p]=g))}o.deleted||(l==="insert"&&f(),Da(i,o.content));break}}o=o.right}for(f();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Ys extends Mt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??hn(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Ys}clone(){const e=new Ys;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new i4(this,e,n);Uh(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??hn();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Ur&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?it(this.doc,r=>{const i=new qm(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&gg(r,this,i,l,o.attributes||{})}else o.retain!==void 0?ev(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&tv(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??hn();const i=[],s=new Map,o=this.doc;let l="",a=this._start;function c(){if(l.length>0){const d={};let f=!1;s.forEach((g,m)=>{f=!0,d[m]=g});const p={insert:l};f&&(p.attributes=d),i.push(p),l=""}}const u=()=>{for(;a!==null;){if(ko(a,e)||n!==void 0&&ko(a,n))switch(a.content.constructor){case Ur:{const d=s.get("ychange");e!==void 0&&!ko(a,e)?(d===void 0||d.user!==a.id.client||d.type!=="removed")&&(c(),s.set("ychange",r?r("removed",a.id):{type:"removed"})):n!==void 0&&!ko(a,n)?(d===void 0||d.user!==a.id.client||d.type!=="added")&&(c(),s.set("ychange",r?r("added",a.id):{type:"added"})):d!==void 0&&(c(),s.delete("ychange")),l+=a.content.str;break}case Yr:case gl:{c();const d={insert:a.content.getContent()[0]};if(s.size>0){const f={};d.attributes=f,s.forEach((p,g)=>{f[g]=p})}i.push(d);break}case Tt:ko(a,e)&&(c(),Da(s,a.content));break}a=a.right}c()};return e||n?it(o,d=>{e&&Vm(d,e),n&&Vm(d,n),u()},"cleanup"):u(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?it(i,s=>{const o=cd(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,a)=>{r[a]=l})),gg(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?it(i,s=>{const o=cd(s,this,e,!r);gg(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?it(r,i=>{tv(i,cd(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?it(i,s=>{const o=cd(s,this,e,!1);o.right!==null&&ev(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?it(this.doc,n=>{Nf(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?it(this.doc,r=>{d0(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return f0(this,e)}getAttributes(){return uI(this)}_write(e){e.writeTypeRef(C4)}}const s4=t=>new Ys;class mg{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??hn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===wn||n.constructor===Js)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Js extends Mt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Js}clone(){const e=new Js;return e.insert(0,this.toArray().map(n=>n instanceof Mt?n.clone():n)),e}get length(){return this.doc??hn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new mg(this,e)}querySelector(e){e=e.toUpperCase();const r=new mg(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),es(new mg(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Uh(this,e,new a4(this,n,e))}toString(){return sI(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Xc(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?it(this.doc,r=>{aI(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)it(this.doc,r=>{const i=e&&e instanceof Mt?e._item:e;Tf(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Ws("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?it(this.doc,r=>{cI(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return rI(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return oI(this,e)}slice(e=0,n=this.length){return nI(this,e,n)}forEach(e){Xc(this,e)}_write(e){e.writeTypeRef(I4)}}const o4=t=>new Js;class wn extends Js{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new wn(this.nodeName)}clone(){const e=new wn(this.nodeName),n=this.getAttributes();return EP(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Mt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const a=r[l];n.push(a+'="'+e[a]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?it(this.doc,n=>{Nf(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?it(this.doc,r=>{d0(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return f0(this,e)}hasAttribute(e){return dI(this,e)}getAttributes(e){return e?J3(this,e):uI(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return Xc(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(E4),e.writeKey(this.nodeName)}}const l4=t=>new wn(t.readKey());class a4 extends zh{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class jf extends yi{constructor(e){super(),this.hookName=e}_copy(){return new jf(this.hookName)}clone(){const e=new jf(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(A4),e.writeKey(this.hookName)}}const c4=t=>new jf(t.readKey());class ir extends Ys{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ir}clone(){const e=new ir;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(T4)}}const u4=t=>new ir;class h0{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Lr()}mergeWith(e){return!1}write(e,n,r){throw Lr()}integrate(e,n){throw Lr()}}const d4=0;class yr extends h0{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),GE(e.doc.store,this)}write(e,n){e.writeInfo(d4),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Du{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Du(this.content)}splice(e){throw Lr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const f4=t=>new Du(t.readBuf());class Qc{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Qc(this.len)}splice(e){const n=new Qc(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Kc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const h4=t=>new Qc(t.readLen()),mI=(t,e)=>new Wn({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Mu{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Mu(mI(this.doc.guid,this.opts))}splice(e){throw Lr()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const p4=t=>new Mu(mI(t.readString(),t.readAny()));class gl{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new gl(this.embed)}splice(e){throw Lr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const g4=t=>new gl(t.readJSON());class Tt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Tt(this.key,this.value)}splice(e){throw Lr()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const m4=t=>new Tt(t.readKey(),t.readJSON());class _f{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new _f(this.arr)}splice(e){const n=new _f(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const y4=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new _f(n)},b4=Cf("node_env")==="development";class Xo{constructor(e){this.arr=e,b4&&CE(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Xo(this.arr)}splice(e){const n=new Xo(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const x4=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Xo(n)};class Ur{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ur(this.str)}splice(e){const n=new Ur(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const v4=t=>new Ur(t.readString()),k4=[X3,e4,s4,l4,o4,c4,u4],w4=0,S4=1,C4=2,E4=3,I4=4,A4=5,T4=6;class Yr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Yr(this.type._copy())}splice(e){throw Lr()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const N4=t=>new Yr(k4[t.readTypeRef()](t)),Hm=(t,e)=>{let n=e,r=0,i;do r>0&&(n=Ne(n.client,n.clock+r)),i=na(t,n),r=n.clock-i.id.clock,n=i.redone;while(n!==null&&i instanceof st);return{item:i,diff:r}},p0=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},Of=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new st(Ne(r,i+n),e,Ne(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Ne(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},nv=(t,e)=>KF(t,n=>_a(n.deletions,e)),yI=(t,e,n,r,i,s)=>{const o=t.doc,l=o.store,a=o.clientID,c=e.redone;if(c!==null)return Fn(t,c);let u=e.parent._item,d=null,f;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!n.has(u)||yI(t,u,n,r,i,s)===null))return null;for(;u.redone!==null;)u=Fn(t,u.redone)}const p=u===null?e.parent:u.content.type;if(e.parentSub===null){for(d=e.left,f=e;d!==null;){let y=d;for(;y!==null&&y.parent._item!==u;)y=y.redone===null?null:Fn(t,y.redone);if(y!==null&&y.parent._item===u){d=y;break}d=d.left}for(;f!==null;){let y=f;for(;y!==null&&y.parent._item!==u;)y=y.redone===null?null:Fn(t,y.redone);if(y!==null&&y.parent._item===u){f=y;break}f=f.right}}else if(f=null,e.right&&!i){for(d=e;d!==null&&d.right!==null&&(d.right.redone||_a(r,d.right.id)||nv(s.undoStack,d.right.id)||nv(s.redoStack,d.right.id));)for(d=d.right;d.redone;)d=Fn(t,d.redone);if(d&&d.right!==null)return null}else d=p._map.get(e.parentSub)||null;const g=bt(l,a),m=Ne(a,g),b=new st(m,d,d&&d.lastId,f,f&&f.id,p,e.parentSub,e.content.copy());return e.redone=m,p0(b,!0),b.integrate(t,0),b};let st=class Wm extends h0{constructor(e,n,r,i,s,o,l,a){super(e,a.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?_x:0}set marker(e){(this.info&ag)>0!==e&&(this.info^=ag)}get marker(){return(this.info&ag)>0}get keep(){return(this.info&jx)>0}set keep(e){this.keep!==e&&(this.info^=jx)}get countable(){return(this.info&_x)>0}get deleted(){return(this.info&lg)>0}set deleted(e){this.deleted!==e&&(this.info^=lg)}markDeleted(){this.info|=lg}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=bt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=bt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ta&&this.id.client!==this.parent.client&&this.parent.clock>=bt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Kx(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Fn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===yr||this.right&&this.right.constructor===yr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Wm&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Wm&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ta){const r=na(n,this.parent);r.constructor===yr?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=Kx(e,e.doc.store,Ne(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Bl(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Bl(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(na(e.doc.store,i.origin)))s.has(na(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),GE(e.doc.store,this),this.content.integrate(e,this),Yx(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new yr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Ne(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Bl(e.origin,this.lastId)&&this.right===e&&Bl(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Kc(e.deleteSet,this.id.client,this.id.clock,this.length),Yx(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw ur();this.content.gc(e),n?_3(e,this,new yr(this.id,this.length)):this.content=new Qc(this.length)}write(e,n){const r=n>0?Ne(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&Ph|(r===null?0:rr)|(i===null?0:Hi)|(s===null?0:Vc);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const a=l._item;if(a===null){const c=Gc(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===ta?(e.writeParentInfo(!1),e.writeLeftID(l)):ur();s!==null&&e.writeString(s)}this.content.write(e,n)}};const bI=(t,e)=>j4[e&Ph](t),j4=[()=>{ur()},h4,y4,f4,v4,g4,m4,N4,x4,p4,()=>{ur()}],_4=10;class tr extends h0{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){ur()}write(e,n){e.writeInfo(_4),le(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const xI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vI="__ $YJS$ __";xI[vI]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");xI[vI]=!0;const yg=3e4;class O4 extends SP{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Ks();this.getLocalState()!==null&&yg/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&yg<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&g0(this,r,"timeout")},gi(yg/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Ks()});const o=[],l=[],a=[],c=[];e===null?c.push(n):s==null?e!=null&&o.push(n):(l.push(n),Cc(s,e)||a.push(n)),(o.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:o,updated:a,removed:c},"local"]),this.emit("update",[{added:o,updated:l,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const g0=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Ks()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},hc=(t,e,n=t.states)=>{const r=e.length,i=mt();le(i,r);for(let s=0;s<r;s++){const o=e[s],l=n.get(o)||null,a=t.meta.get(o).clock;le(i,o),le(i,a),ci(i,JSON.stringify(l))}return Qe(i)},R4=(t,e,n)=>{const r=Hn(e),i=Ks(),s=[],o=[],l=[],a=[],c=ye(r);for(let u=0;u<c;u++){const d=ye(r);let f=ye(r);const p=JSON.parse(Br(r)),g=t.meta.get(d),m=t.states.get(d),b=g===void 0?0:g.clock;(b<f||b===f&&p===null&&t.states.has(d))&&(p===null?d===t.clientID&&t.getLocalState()!=null?f++:t.states.delete(d):t.states.set(d,p),t.meta.set(d,{clock:f,lastUpdated:i}),g===void 0&&p!==null?s.push(d):g!==void 0&&p===null?a.push(d):p!==null&&(Cc(p,m)||l.push(d),o.push(d)))}(s.length>0||l.length>0||a.length>0)&&t.emit("change",[{added:s,updated:l,removed:a},n]),(s.length>0||o.length>0||a.length>0)&&t.emit("update",[{added:s,updated:o,removed:a},n])},D4=(t,e)=>e.some(n=>t instanceof n);let rv,iv;function M4(){return rv||(rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F4(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kI=new WeakMap,Km=new WeakMap,wI=new WeakMap,bg=new WeakMap,m0=new WeakMap;function P4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kI.set(n,t)}).catch(()=>{}),m0.set(e,t),e}function $4(t){if(Km.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Km.set(t,e)}let Gm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Km.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function L4(t){Gm=t(Gm)}function B4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xg(this),e,...n);return wI.set(r,e.sort?e.sort():[e]),Fs(r)}:F4().includes(t)?function(...e){return t.apply(xg(this),e),Fs(kI.get(this))}:function(...e){return Fs(t.apply(xg(this),e))}}function z4(t){return typeof t=="function"?B4(t):(t instanceof IDBTransaction&&$4(t),D4(t,M4())?new Proxy(t,Gm):t)}function Fs(t){if(t instanceof IDBRequest)return P4(t);if(bg.has(t))return bg.get(t);const e=z4(t);return e!==t&&(bg.set(t,e),m0.set(e,t)),e}const xg=t=>m0.get(t);function V4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Fs(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Fs(o.result),a.oldVersion,a.newVersion,Fs(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const U4=["get","getKey","getAll","getAllKeys","count"],q4=["put","add","delete","clear"],vg=new Map;function sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U4.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return vg.set(e,s),s}L4(t=>({...t,get:(e,n,r)=>sv(e,n)||t.get(e,n,r),has:(e,n)=>!!sv(e,n)||t.has(e,n)}));function ov(t,e="val does not exist"){if(t==null)throw e instanceof Error?e:new Error(e)}function SI(t,e){if(t.guid===e)return t;for(const n of t.subdocs){const r=SI(n,e);if(r)return r}}const H4=(t,e,n={})=>{let r=!1;const i=new Map,s=new Map,o=new Set;let l=null;const{origin:a="lazy-provider"}=n;let c={type:"idle"},u=0;const d=new Set,f=k=>{k.type==="syncing"?u++:(k.type==="synced"||k.type==="error")&&u--,u<0&&console.error("syncingStatus < 0, this should not happen",n.origin),u===0&&(c=k),k.type!=="synced"&&(c=k),u===0&&(r?c={type:"synced"}:c={type:"idle"}),d.forEach(E=>E())};async function p(k){const E=k.guid;{const N=E.startsWith("space:")?E.slice(6):E,I=`${t.guid}:space:${N}`,A=`space:${N}`,O=await e.queryDocState(I),_=await e.queryDocState(A);let F=!1;O&&O.missing.length!==2&&O.missing[0]!==0&&O.missing[1]!==0&&(vo(k,O.missing,a),F=!0),_&&_.missing.length!==2&&_.missing[0]!==0&&_.missing[1]!==0&&(vo(k,_.missing,a),F=!0),F&&await e.sendDocUpdate(E,If(k,O?O.state:_?_.state:void 0))}if(!r)return;f({type:"syncing"});const T=await e.queryDocState(E,{stateVector:qE(k)}).then(N=>(f({type:"synced"}),N)).catch(N=>{throw f({type:"error",error:N}),N});i.set(E,[]),T&&vo(k,T.missing,a),r&&(await e.sendDocUpdate(E,If(k,T?T.state:void 0)),k.emit("sync",[]))}function g(k){const E=new Set;s.set(k.guid,E);const T=async(I,A)=>{a!==A&&(f({type:"syncing"}),e.sendDocUpdate(k.guid,I).then(()=>{f({type:"synced"})}).catch(O=>{f({type:"error",error:O}),console.error(O)}))},N=I=>{I.loaded.forEach(A=>{b(A).catch(console.error)}),I.removed.forEach(A=>{y(A)})};k.on("update",T),k.on("subdocs",N),E.add(()=>{k.off("update",T),k.off("subdocs",N)})}function m(){var k;ov(l,"abortController should be defined");const E=(k=e.onDocUpdate)==null?void 0:k.call(e,(T,N)=>{var I;f({type:"syncing"});const A=SI(t,T);A?(vo(A,N,a),i.has(T)&&((I=i.get(T))==null||I.forEach(O=>vo(A,O,a)),i.delete(T))):(console.warn("doc not found",T),i.set(T,(i.get(T)??[]).concat(N))),f({type:"synced"})});l.signal.addEventListener("abort",()=>{E?.()})}async function b(k){o.has(k.guid)||(o.add(k.guid),g(k),await p(k),await Promise.all([...k.subdocs].filter(E=>E.shouldLoad).map(E=>b(E))))}function y(k){o.delete(k.guid);const E=s.get(k.guid);E&&(E.forEach(T=>T()),s.delete(k.guid)),k.subdocs.forEach(y)}function x(){s.forEach(k=>{k.forEach(E=>E())}),s.clear(),o.clear()}function v(){r=!0,l=new AbortController,f({type:"syncing"}),b(t).then(()=>{f({type:"synced"})}).catch(k=>{f({type:"error",error:k}),console.error(k)}),m()}async function w(){r=!1,x(),ov(l,"abortController should be defined"),l.abort(),l=null}const S=async k=>{await p(k),await Promise.all([...k.subdocs.values()].map(E=>S(E)))};return{sync:async k=>{r=!0;try{k?await p(t):await S(t)}finally{r=!1}},get status(){return c},subscribeStatusChange(k){return d.add(k),()=>{d.delete(k)}},get connected(){return r},passive:!0,connect:v,disconnect:w,datasource:e}},lv=t=>(t.preventDefault(),t.returnValue="Data is not saved. Are you sure you want to leave?"),W4=async t=>{window.addEventListener("beforeunload",lv,{capture:!0}),await t,window.removeEventListener("beforeunload",lv,{capture:!0})},K4=1,CI="affine-local";function G4(t){t.createObjectStore("workspace",{keyPath:"id"}),t.createObjectStore("milestone",{keyPath:"id"})}function av(t,e="val does not exist"){if(t==null)throw e instanceof Error?e:new Error(e)}function cv(t){const e=new Wn;return t.forEach(n=>{vo(e,n)}),If(e)}let Y4=500;const J4=({dbName:t=CI,mergeCount:e})=>{let n=null;const r=async()=>(n===null&&(n=V4(t,K4,{upgrade:G4})),n);return{queryDocState:async(i,s)=>{var o;try{const l=await(await r()).transaction("workspace","readonly").objectStore("workspace").get(i);if(!l)return!1;const{updates:a}=l,c=cv(a.map(({update:u})=>u));return{missing:s!=null&&s.stateVector?z3(c,s?.stateVector):c,state:L3(c)}}catch(l){if(!((o=l.message)!=null&&o.includes("The database connection is closing.")))throw l;return!1}},sendDocUpdate:async(i,s)=>{var o;try{const l=(await r()).transaction("workspace","readwrite").objectStore("workspace"),{updates:a}=await l.get(i)??{updates:[]};let c=[...a,{timestamp:Date.now(),update:s}];if(e&&c.length>=e){const u=cv(c.map(({update:d})=>d));c=[{timestamp:Date.now(),update:u}]}await W4(l.put({id:i,updates:c}))}catch(l){if(!((o=l.message)!=null&&o.includes("The database connection is closing.")))throw l}},disconnect:()=>{r().then(i=>i.close()).then(()=>{n=null}).catch(console.error)},cleanup:async()=>{await(await r()).clear("workspace")}}},Z4=(t,e=CI)=>{const n=J4({dbName:e,mergeCount:Y4});let r=null;const i={get status(){return av(r),r.status},subscribeStatusChange(s){return av(r),r.subscribeStatusChange(s)},connect:()=>{i.connected&&i.disconnect(),r=H4(t,n,{origin:"idb"}),r.connect()},disconnect:()=>{n?.disconnect(),r?.disconnect(),r=null},cleanup:async()=>{await n?.cleanup()},get connected(){return r?.connected||!1},datasource:n};return i},EI=new Map;class X4{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:ZP(n.newValue||"")}),LP(this._onChange)}postMessage(e){AE.setItem(this.room,JP(HP(e)))}close(){BP(this._onChange)}}const Q4=typeof BroadcastChannel>"u"?X4:BroadcastChannel,y0=t=>Gr(EI,t,()=>{const e=Qi(),n=new Q4(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),e$=(t,e)=>(y0(t).subs.add(e),e),t$=(t,e)=>{const n=y0(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),EI.delete(t)),r},Ol=(t,e,n=null)=>{const r=y0(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},II=0,qh=1,AI=2,ud=(t,e)=>{le(t,II);const n=qE(e);yt(t,n)},TI=(t,e,n)=>{le(t,qh),yt(t,If(e,n))},n$=(t,e,n)=>TI(e,n,$t(t)),NI=(t,e,n)=>{try{vo(e,$t(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},uv=(t,e)=>{le(t,AI),yt(t,e)},r$=NI,jI=(t,e,n,r)=>{const i=ye(t);switch(i){case II:n$(t,e,n);break;case qh:NI(t,n,r);break;case AI:r$(t,n,r);break;default:throw new Error("Unknown message type")}return i},i$=0,s$=(t,e,n)=>{switch(ye(t)){case i$:n(e,Br(t))}},_I=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}};var OI=function(e){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=e(r);return n.set(r,i),i}},Ja={},dv;function o$(){if(dv)return Ja;dv=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.parse=o,Ja.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,p){const g=new s,m=f.length;if(m<2)return g;const b=p?.decode||u;let y=0;do{const x=f.indexOf("=",y);if(x===-1)break;const v=f.indexOf(";",y),w=v===-1?m:v;if(x>w){y=f.lastIndexOf(";",x-1)+1;continue}const S=l(f,y,x),k=a(f,x,S),E=f.slice(S,k);if(g[E]===void 0){let T=l(f,x+1,w),N=a(f,w,T);const I=b(f.slice(T,N));g[E]=I}y=w+1}while(y<m);return g}function l(f,p,g){do{const m=f.charCodeAt(p);if(m!==32&&m!==9)return p}while(++p<g);return g}function a(f,p,g){for(;p>g;){const m=f.charCodeAt(--p);if(m!==32&&m!==9)return p+1}return g}function c(f,p,g){const m=g?.encode||encodeURIComponent;if(!t.test(f))throw new TypeError(`argument name is invalid: ${f}`);const b=m(p);if(!e.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=f+"="+b;if(!g)return y;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);y+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);y+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);y+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);y+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(y+="; HttpOnly"),g.secure&&(y+="; Secure"),g.partitioned&&(y+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return y}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return i.call(f)==="[object Date]"}return Ja}var RI=o$();function kg(t,e){if(!!!t)throw new Error(e)}function l$(t){return typeof t=="object"&&t!==null}function a$(t,e){if(!!!t)throw new Error("Unexpected invariant triggered.")}const c$=/\r\n|[\n\r]/g;function Ym(t,e){let n=0,r=1;for(const i of t.body.matchAll(c$)){if(typeof i.index=="number"||a$(!1),i.index>=e)break;n=i.index+i[0].length,r+=1}return{line:r,column:e+1-n}}function u$(t){return DI(t.source,Ym(t.source,t.start))}function DI(t,e){const n=t.locationOffset.column-1,r="".padStart(n)+t.body,i=e.line-1,s=t.locationOffset.line-1,o=e.line+s,l=e.line===1?n:0,a=e.column+l,c=`${t.name}:${o}:${a}
`,u=r.split(/\r\n|[\n\r]/g),d=u[i];if(d.length>120){const f=Math.floor(a/80),p=a%80,g=[];for(let m=0;m<d.length;m+=80)g.push(d.slice(m,m+80));return c+fv([[`${o} |`,g[0]],...g.slice(1,f+1).map(m=>["|",m]),["|","^".padStart(p)],["|",g[f+1]]])}return c+fv([[`${o-1} |`,u[i-1]],[`${o} |`,d],["|","^".padStart(a)],[`${o+1} |`,u[i+1]]])}function fv(t){const e=t.filter(([r,i])=>i!==void 0),n=Math.max(...e.map(([r])=>r.length));return e.map(([r,i])=>r.padStart(n)+(i?" "+i:"")).join(`
`)}function d$(t){const e=t[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:t[1],positions:t[2],path:t[3],originalError:t[4],extensions:t[5]}:e}let f$=class MI extends Error{constructor(e,...n){var r,i,s;const{nodes:o,source:l,positions:a,path:c,originalError:u,extensions:d}=d$(n);super(e),this.name="GraphQLError",this.path=c??void 0,this.originalError=u??void 0,this.nodes=hv(Array.isArray(o)?o:o?[o]:void 0);const f=hv((r=this.nodes)===null||r===void 0?void 0:r.map(g=>g.loc).filter(g=>g!=null));this.source=l??(f==null||(i=f[0])===null||i===void 0?void 0:i.source),this.positions=a??f?.map(g=>g.start),this.locations=a&&l?a.map(g=>Ym(l,g)):f?.map(g=>Ym(g.source,g.start));const p=l$(u?.extensions)?u?.extensions:void 0;this.extensions=(s=d??p)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,MI):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(e+=`

`+u$(n.loc));else if(this.source&&this.locations)for(const n of this.locations)e+=`

`+DI(this.source,n);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}};function hv(t){return t===void 0||t.length===0?void 0:t}function Lt(t,e,n){return new f$(`Syntax Error: ${n}`,{source:t,positions:[e]})}class h${constructor(e,n,r){this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class FI{constructor(e,n,r,i,s,o){this.kind=e,this.start=n,this.end=r,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const p$={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};new Set(Object.keys(p$));var zl;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(zl||(zl={}));var Jm;(function(t){t.QUERY="QUERY",t.MUTATION="MUTATION",t.SUBSCRIPTION="SUBSCRIPTION",t.FIELD="FIELD",t.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",t.FRAGMENT_SPREAD="FRAGMENT_SPREAD",t.INLINE_FRAGMENT="INLINE_FRAGMENT",t.VARIABLE_DEFINITION="VARIABLE_DEFINITION",t.SCHEMA="SCHEMA",t.SCALAR="SCALAR",t.OBJECT="OBJECT",t.FIELD_DEFINITION="FIELD_DEFINITION",t.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",t.INTERFACE="INTERFACE",t.UNION="UNION",t.ENUM="ENUM",t.ENUM_VALUE="ENUM_VALUE",t.INPUT_OBJECT="INPUT_OBJECT",t.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Jm||(Jm={}));var Se;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Se||(Se={}));function g$(t){return t===9||t===32}function eu(t){return t>=48&&t<=57}function PI(t){return t>=97&&t<=122||t>=65&&t<=90}function $I(t){return PI(t)||t===95}function m$(t){return PI(t)||eu(t)||t===95}function y$(t){var e;let n=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let o=0;o<t.length;++o){var s;const l=t[o],a=b$(l);a!==l.length&&(r=(s=r)!==null&&s!==void 0?s:o,i=o,o!==0&&a<n&&(n=a))}return t.map((o,l)=>l===0?o:o.slice(n)).slice((e=r)!==null&&e!==void 0?e:0,i+1)}function b$(t){let e=0;for(;e<t.length&&g$(t.charCodeAt(e));)++e;return e}var K;(function(t){t.SOF="<SOF>",t.EOF="<EOF>",t.BANG="!",t.DOLLAR="$",t.AMP="&",t.PAREN_L="(",t.PAREN_R=")",t.SPREAD="...",t.COLON=":",t.EQUALS="=",t.AT="@",t.BRACKET_L="[",t.BRACKET_R="]",t.BRACE_L="{",t.PIPE="|",t.BRACE_R="}",t.NAME="Name",t.INT="Int",t.FLOAT="Float",t.STRING="String",t.BLOCK_STRING="BlockString",t.COMMENT="Comment"})(K||(K={}));class x${constructor(e){const n=new FI(K.SOF,0,0,0,0);this.source=e,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==K.EOF)do if(e.next)e=e.next;else{const n=k$(this,e.end);e.next=n,n.prev=e,e=n}while(e.kind===K.COMMENT);return e}}function v$(t){return t===K.BANG||t===K.DOLLAR||t===K.AMP||t===K.PAREN_L||t===K.PAREN_R||t===K.SPREAD||t===K.COLON||t===K.EQUALS||t===K.AT||t===K.BRACKET_L||t===K.BRACKET_R||t===K.BRACE_L||t===K.PIPE||t===K.BRACE_R}function Ma(t){return t>=0&&t<=55295||t>=57344&&t<=1114111}function Hh(t,e){return LI(t.charCodeAt(e))&&BI(t.charCodeAt(e+1))}function LI(t){return t>=55296&&t<=56319}function BI(t){return t>=56320&&t<=57343}function Qo(t,e){const n=t.source.body.codePointAt(e);if(n===void 0)return K.EOF;if(n>=32&&n<=126){const r=String.fromCodePoint(n);return r==='"'?`'"'`:`"${r}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function St(t,e,n,r,i){const s=t.line,o=1+n-t.lineStart;return new FI(e,n,r,s,o,i)}function k$(t,e){const n=t.source.body,r=n.length;let i=e;for(;i<r;){const s=n.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++t.line,t.lineStart=i;continue;case 13:n.charCodeAt(i+1)===10?i+=2:++i,++t.line,t.lineStart=i;continue;case 35:return w$(t,i);case 33:return St(t,K.BANG,i,i+1);case 36:return St(t,K.DOLLAR,i,i+1);case 38:return St(t,K.AMP,i,i+1);case 40:return St(t,K.PAREN_L,i,i+1);case 41:return St(t,K.PAREN_R,i,i+1);case 46:if(n.charCodeAt(i+1)===46&&n.charCodeAt(i+2)===46)return St(t,K.SPREAD,i,i+3);break;case 58:return St(t,K.COLON,i,i+1);case 61:return St(t,K.EQUALS,i,i+1);case 64:return St(t,K.AT,i,i+1);case 91:return St(t,K.BRACKET_L,i,i+1);case 93:return St(t,K.BRACKET_R,i,i+1);case 123:return St(t,K.BRACE_L,i,i+1);case 124:return St(t,K.PIPE,i,i+1);case 125:return St(t,K.BRACE_R,i,i+1);case 34:return n.charCodeAt(i+1)===34&&n.charCodeAt(i+2)===34?T$(t,i):C$(t,i)}if(eu(s)||s===45)return S$(t,i,s);if($I(s))return N$(t,i);throw Lt(t.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Ma(s)||Hh(n,i)?`Unexpected character: ${Qo(t,i)}.`:`Invalid character: ${Qo(t,i)}.`)}return St(t,K.EOF,r,r)}function w$(t,e){const n=t.source.body,r=n.length;let i=e+1;for(;i<r;){const s=n.charCodeAt(i);if(s===10||s===13)break;if(Ma(s))++i;else if(Hh(n,i))i+=2;else break}return St(t,K.COMMENT,e,i,n.slice(e+1,i))}function S$(t,e,n){const r=t.source.body;let i=e,s=n,o=!1;if(s===45&&(s=r.charCodeAt(++i)),s===48){if(s=r.charCodeAt(++i),eu(s))throw Lt(t.source,i,`Invalid number, unexpected digit after 0: ${Qo(t,i)}.`)}else i=wg(t,i,s),s=r.charCodeAt(i);if(s===46&&(o=!0,s=r.charCodeAt(++i),i=wg(t,i,s),s=r.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=r.charCodeAt(++i),(s===43||s===45)&&(s=r.charCodeAt(++i)),i=wg(t,i,s),s=r.charCodeAt(i)),s===46||$I(s))throw Lt(t.source,i,`Invalid number, expected digit but got: ${Qo(t,i)}.`);return St(t,o?K.FLOAT:K.INT,e,i,r.slice(e,i))}function wg(t,e,n){if(!eu(n))throw Lt(t.source,e,`Invalid number, expected digit but got: ${Qo(t,e)}.`);const r=t.source.body;let i=e+1;for(;eu(r.charCodeAt(i));)++i;return i}function C$(t,e){const n=t.source.body,r=n.length;let i=e+1,s=i,o="";for(;i<r;){const l=n.charCodeAt(i);if(l===34)return o+=n.slice(s,i),St(t,K.STRING,e,i+1,o);if(l===92){o+=n.slice(s,i);const a=n.charCodeAt(i+1)===117?n.charCodeAt(i+2)===123?E$(t,i):I$(t,i):A$(t,i);o+=a.value,i+=a.size,s=i;continue}if(l===10||l===13)break;if(Ma(l))++i;else if(Hh(n,i))i+=2;else throw Lt(t.source,i,`Invalid character within String: ${Qo(t,i)}.`)}throw Lt(t.source,i,"Unterminated string.")}function E$(t,e){const n=t.source.body;let r=0,i=3;for(;i<12;){const s=n.charCodeAt(e+i++);if(s===125){if(i<5||!Ma(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|pc(s),r<0)break}throw Lt(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+i)}".`)}function I$(t,e){const n=t.source.body,r=pv(n,e+2);if(Ma(r))return{value:String.fromCodePoint(r),size:6};if(LI(r)&&n.charCodeAt(e+6)===92&&n.charCodeAt(e+7)===117){const i=pv(n,e+8);if(BI(i))return{value:String.fromCodePoint(r,i),size:12}}throw Lt(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+6)}".`)}function pv(t,e){return pc(t.charCodeAt(e))<<12|pc(t.charCodeAt(e+1))<<8|pc(t.charCodeAt(e+2))<<4|pc(t.charCodeAt(e+3))}function pc(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function A$(t,e){const n=t.source.body;switch(n.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Lt(t.source,e,`Invalid character escape sequence: "${n.slice(e,e+2)}".`)}function T$(t,e){const n=t.source.body,r=n.length;let i=t.lineStart,s=e+3,o=s,l="";const a=[];for(;s<r;){const c=n.charCodeAt(s);if(c===34&&n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34){l+=n.slice(o,s),a.push(l);const u=St(t,K.BLOCK_STRING,e,s+3,y$(a).join(`
`));return t.line+=a.length-1,t.lineStart=i,u}if(c===92&&n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34&&n.charCodeAt(s+3)===34){l+=n.slice(o,s),o=s+1,s+=4;continue}if(c===10||c===13){l+=n.slice(o,s),a.push(l),c===13&&n.charCodeAt(s+1)===10?s+=2:++s,l="",o=s,i=s;continue}if(Ma(c))++s;else if(Hh(n,s))s+=2;else throw Lt(t.source,s,`Invalid character within String: ${Qo(t,s)}.`)}throw Lt(t.source,s,"Unterminated string.")}function N$(t,e){const n=t.source.body,r=n.length;let i=e+1;for(;i<r;){const s=n.charCodeAt(i);if(m$(s))++i;else break}return St(t,K.NAME,e,i,n.slice(e,i))}const j$=10,zI=2;function VI(t){return Wh(t,[])}function Wh(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return _$(t,e);default:return String(t)}}function _$(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const n=[...e,t];if(O$(t)){const r=t.toJSON();if(r!==t)return typeof r=="string"?r:Wh(r,n)}else if(Array.isArray(t))return D$(t,n);return R$(t,n)}function O$(t){return typeof t.toJSON=="function"}function R$(t,e){const n=Object.entries(t);return n.length===0?"{}":e.length>zI?"["+M$(t)+"]":"{ "+n.map(([i,s])=>i+": "+Wh(s,e)).join(", ")+" }"}function D$(t,e){if(t.length===0)return"[]";if(e.length>zI)return"[Array]";const n=Math.min(j$,t.length),r=t.length-n,i=[];for(let s=0;s<n;++s)i.push(Wh(t[s],e));return r===1?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}function M$(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const n=t.constructor.name;if(typeof n=="string"&&n!=="")return n}return e}const F$=globalThis.process&&!0,P$=F$?function(e,n){return e instanceof n}:function(e,n){if(e instanceof n)return!0;if(typeof e=="object"&&e!==null){var r;const i=n.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(i===s){const o=VI(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class UI{constructor(e,n="GraphQL request",r={line:1,column:1}){typeof e=="string"||kg(!1,`Body must be a string. Received: ${VI(e)}.`),this.body=e,this.name=n,this.locationOffset=r,this.locationOffset.line>0||kg(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||kg(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function $$(t){return P$(t,UI)}function L$(t,e){return new B$(t,e).parseDocument()}class B${constructor(e,n={}){const r=$$(e)?e:new UI(e);this._lexer=new x$(r),this._options=n,this._tokenCounter=0}parseName(){const e=this.expectToken(K.NAME);return this.node(e,{kind:Se.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Se.DOCUMENT,definitions:this.many(K.SOF,this.parseDefinition,K.EOF)})}parseDefinition(){if(this.peek(K.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),n=e?this._lexer.lookahead():this._lexer.token;if(n.kind===K.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Lt(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(K.BRACE_L))return this.node(e,{kind:Se.OPERATION_DEFINITION,operation:zl.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseOperationType();let r;return this.peek(K.NAME)&&(r=this.parseName()),this.node(e,{kind:Se.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(K.NAME);switch(e.value){case"query":return zl.QUERY;case"mutation":return zl.MUTATION;case"subscription":return zl.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(K.PAREN_L,this.parseVariableDefinition,K.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Se.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(K.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(K.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(K.DOLLAR),this.node(e,{kind:Se.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Se.SELECTION_SET,selections:this.many(K.BRACE_L,this.parseSelection,K.BRACE_R)})}parseSelection(){return this.peek(K.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,n=this.parseName();let r,i;return this.expectOptionalToken(K.COLON)?(r=n,i=this.parseName()):i=n,this.node(e,{kind:Se.FIELD,alias:r,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(K.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const n=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(K.PAREN_L,n,K.PAREN_R)}parseArgument(e=!1){const n=this._lexer.token,r=this.parseName();return this.expectToken(K.COLON),this.node(n,{kind:Se.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(K.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(K.NAME)?this.node(e,{kind:Se.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Se.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:Se.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:Se.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const n=this._lexer.token;switch(n.kind){case K.BRACKET_L:return this.parseList(e);case K.BRACE_L:return this.parseObject(e);case K.INT:return this.advanceLexer(),this.node(n,{kind:Se.INT,value:n.value});case K.FLOAT:return this.advanceLexer(),this.node(n,{kind:Se.FLOAT,value:n.value});case K.STRING:case K.BLOCK_STRING:return this.parseStringLiteral();case K.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:Se.BOOLEAN,value:!0});case"false":return this.node(n,{kind:Se.BOOLEAN,value:!1});case"null":return this.node(n,{kind:Se.NULL});default:return this.node(n,{kind:Se.ENUM,value:n.value})}case K.DOLLAR:if(e)if(this.expectToken(K.DOLLAR),this._lexer.token.kind===K.NAME){const r=this._lexer.token.value;throw Lt(this._lexer.source,n.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:Se.STRING,value:e.value,block:e.kind===K.BLOCK_STRING})}parseList(e){const n=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:Se.LIST,values:this.any(K.BRACKET_L,n,K.BRACKET_R)})}parseObject(e){const n=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:Se.OBJECT,fields:this.any(K.BRACE_L,n,K.BRACE_R)})}parseObjectField(e){const n=this._lexer.token,r=this.parseName();return this.expectToken(K.COLON),this.node(n,{kind:Se.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const n=[];for(;this.peek(K.AT);)n.push(this.parseDirective(e));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const n=this._lexer.token;return this.expectToken(K.AT),this.node(n,{kind:Se.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let n;if(this.expectOptionalToken(K.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(K.BRACKET_R),n=this.node(e,{kind:Se.LIST_TYPE,type:r})}else n=this.parseNamedType();return this.expectOptionalToken(K.BANG)?this.node(e,{kind:Se.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:Se.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(K.STRING)||this.peek(K.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),i=this.many(K.BRACE_L,this.parseOperationTypeDefinition,K.BRACE_R);return this.node(e,{kind:Se.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,n=this.parseOperationType();this.expectToken(K.COLON);const r=this.parseNamedType();return this.node(e,{kind:Se.OPERATION_TYPE_DEFINITION,operation:n,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:Se.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Se.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(K.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(K.BRACE_L,this.parseFieldDefinition,K.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName(),i=this.parseArgumentDefs();this.expectToken(K.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:Se.FIELD_DEFINITION,description:n,name:r,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(K.PAREN_L,this.parseInputValueDef,K.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(K.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(K.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:Se.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Se.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:Se.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(K.EQUALS)?this.delimitedMany(K.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:Se.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(K.BRACE_L,this.parseEnumValueDefinition,K.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:Se.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Lt(this._lexer.source,this._lexer.token.start,`${dd(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:Se.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(K.BRACE_L,this.parseInputValueDef,K.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===K.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.optionalMany(K.BRACE_L,this.parseOperationTypeDefinition,K.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:Se.SCHEMA_EXTENSION,directives:n,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:Se.SCALAR_TYPE_EXTENSION,name:n,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:Se.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:Se.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Se.UNION_TYPE_EXTENSION,name:n,directives:r,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Se.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Se.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(K.AT);const r=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:Se.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(K.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(Jm,n.value))return n;throw this.unexpected(e)}node(e,n){return this._options.noLocation!==!0&&(n.loc=new h$(e,this._lexer.lastToken,this._lexer.source)),n}peek(e){return this._lexer.token.kind===e}expectToken(e){const n=this._lexer.token;if(n.kind===e)return this.advanceLexer(),n;throw Lt(this._lexer.source,n.start,`Expected ${qI(e)}, found ${dd(n)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const n=this._lexer.token;if(n.kind===K.NAME&&n.value===e)this.advanceLexer();else throw Lt(this._lexer.source,n.start,`Expected "${e}", found ${dd(n)}.`)}expectOptionalKeyword(e){const n=this._lexer.token;return n.kind===K.NAME&&n.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const n=e??this._lexer.token;return Lt(this._lexer.source,n.start,`Unexpected ${dd(n)}.`)}any(e,n,r){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(r);)i.push(n.call(this));return i}optionalMany(e,n,r){if(this.expectOptionalToken(e)){const i=[];do i.push(n.call(this));while(!this.expectOptionalToken(r));return i}return[]}many(e,n,r){this.expectToken(e);const i=[];do i.push(n.call(this));while(!this.expectOptionalToken(r));return i}delimitedMany(e,n){this.expectOptionalToken(e);const r=[];do r.push(n.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,n=this._lexer.advance();if(e!==void 0&&n.kind!==K.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw Lt(this._lexer.source,n.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function dd(t){const e=t.value;return qI(t.kind)+(e!=null?` "${e}"`:"")}function qI(t){return v$(t)?`"${t}"`:t}var Dd=new Map,Zm=new Map,HI=!0,Rf=!1;function WI(t){return t.replace(/[\s,]+/g," ").trim()}function z$(t){return WI(t.source.body.substring(t.start,t.end))}function V$(t){var e=new Set,n=[];return t.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var i=r.name.value,s=z$(r.loc),o=Zm.get(i);o&&!o.has(s)?HI&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||Zm.set(i,o=new Set),o.add(s),e.has(s)||(e.add(s),n.push(r))}else n.push(r)}),hf(hf({},t),{definitions:n})}function U$(t){var e=new Set(t.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(i){var s=r[i];s&&typeof s=="object"&&e.add(s)})});var n=t.loc;return n&&(delete n.startToken,delete n.endToken),t}function q$(t){var e=WI(t);if(!Dd.has(e)){var n=L$(t,{experimentalFragmentVariables:Rf,allowLegacyFragmentVariables:Rf});if(!n||n.kind!=="Document")throw new Error("Not a valid GraphQL document.");Dd.set(e,U$(V$(n)))}return Dd.get(e)}function Ht(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];typeof t=="string"&&(t=[t]);var r=t[0];return e.forEach(function(i,s){i&&i.kind==="Document"?r+=i.loc.source.body:r+=i,r+=t[s+1]}),q$(r)}function H$(){Dd.clear(),Zm.clear()}function W$(){HI=!1}function K$(){Rf=!0}function G$(){Rf=!1}var Za={gql:Ht,resetCaches:H$,disableFragmentWarnings:W$,enableExperimentalFragmentVariables:K$,disableExperimentalFragmentVariables:G$};(function(t){t.gql=Za.gql,t.resetCaches=Za.resetCaches,t.disableFragmentWarnings=Za.disableFragmentWarnings,t.enableExperimentalFragmentVariables=Za.enableExperimentalFragmentVariables,t.disableExperimentalFragmentVariables=Za.disableExperimentalFragmentVariables})(Ht||(Ht={}));Ht.default=Ht;var oi={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};class Xm extends Error{constructor(e,n,r,i,s,o,l){super(e),this.name="GraphQLError",this.message=e,s&&(this.path=s),n&&(this.nodes=Array.isArray(n)?n:[n]),r&&(this.source=r),i&&(this.positions=i),o&&(this.originalError=o);var a=l;if(!a&&o){var c=o.extensions;c&&typeof c=="object"&&(a=c)}this.extensions=a||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var Ve,ge;function xt(t){return new Xm(`Syntax Error: Unexpected token at ${ge} in ${t}`)}function sr(t){if(t.lastIndex=ge,t.test(Ve))return Ve.slice(ge,ge=t.lastIndex)}var fd=/ +(?=[^\s])/y;function Y$(t){for(var e=t.split(`
`),n="",r=0,i=0,s=e.length-1,o=0;o<e.length;o++)fd.lastIndex=0,fd.test(e[o])&&(o&&(!r||fd.lastIndex<r)&&(r=fd.lastIndex),i=i||o,s=o);for(var l=i;l<=s;l++)l!==i&&(n+=`
`),n+=e[l].slice(r).replace(/\\"""/g,'"""');return n}function je(){for(var t=0|Ve.charCodeAt(ge++);t===9||t===10||t===13||t===32||t===35||t===44||t===65279;t=0|Ve.charCodeAt(ge++))if(t===35)for(;(t=Ve.charCodeAt(ge++))!==10&&t!==13;);ge--}var En=/[_A-Za-z]\w*/y,Sg=new RegExp("(?:(null|true|false)|\\$("+En.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+En.source+"))","y"),gs=function(t){return t[t.Const=1]="Const",t[t.Var=2]="Var",t[t.Int=3]="Int",t[t.Float=4]="Float",t[t.BlockString=5]="BlockString",t[t.String=6]="String",t[t.Enum=7]="Enum",t}(gs||{}),J$=/\\/;function Df(t){var e,n;if(Sg.lastIndex=ge,Ve.charCodeAt(ge)===91){ge++,je();for(var r=[];Ve.charCodeAt(ge)!==93;)r.push(Df(t));return ge++,je(),{kind:"ListValue",values:r}}else if(Ve.charCodeAt(ge)===123){ge++,je();for(var i=[];Ve.charCodeAt(ge)!==125;){if((e=sr(En))==null||(je(),Ve.charCodeAt(ge++)!==58))throw xt("ObjectField");je(),i.push({kind:"ObjectField",name:{kind:"Name",value:e},value:Df(t)})}return ge++,je(),{kind:"ObjectValue",fields:i}}else if((n=Sg.exec(Ve))!=null){if(ge=Sg.lastIndex,je(),(e=n[gs.Const])!=null)return e==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:e==="true"};if((e=n[gs.Var])!=null){if(t)throw xt("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}else if((e=n[gs.Int])!=null){var s;return(s=n[gs.Float])!=null?{kind:"FloatValue",value:e+s}:{kind:"IntValue",value:e}}else{if((e=n[gs.BlockString])!=null)return{kind:"StringValue",value:Y$(e.slice(3,-3)),block:!0};if((e=n[gs.String])!=null)return{kind:"StringValue",value:J$.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if((e=n[gs.Enum])!=null)return{kind:"EnumValue",value:e}}}throw xt("Value")}function KI(t){if(Ve.charCodeAt(ge)===40){var e=[];ge++,je();var n;do{if((n=sr(En))==null||(je(),Ve.charCodeAt(ge++)!==58))throw xt("Argument");je(),e.push({kind:"Argument",name:{kind:"Name",value:n},value:Df(t)})}while(Ve.charCodeAt(ge)!==41);return ge++,je(),e}}function ra(t){if(Ve.charCodeAt(ge)===64){var e=[],n;do{if(ge++,(n=sr(En))==null)throw xt("Directive");je(),e.push({kind:"Directive",name:{kind:"Name",value:n},arguments:KI(t)})}while(Ve.charCodeAt(ge)===64);return e}}function Z$(){for(var t,e=0;Ve.charCodeAt(ge)===91;)e++,ge++,je();if((t=sr(En))==null)throw xt("NamedType");je();var n={kind:"NamedType",name:{kind:"Name",value:t}};do if(Ve.charCodeAt(ge)===33&&(ge++,je(),n={kind:"NonNullType",type:n}),e){if(Ve.charCodeAt(ge++)!==93)throw xt("NamedType");je(),n={kind:"ListType",type:n}}while(e--);return n}var Cg=new RegExp("(?:(\\.{3})|("+En.source+"))","y"),Qm=function(t){return t[t.Spread=1]="Spread",t[t.Name=2]="Name",t}(Qm||{});function Mf(){var t=[],e,n;do if(Cg.lastIndex=ge,(n=Cg.exec(Ve))!=null){if(ge=Cg.lastIndex,n[Qm.Spread]!=null){je();var r=sr(En);if(r!=null&&r!=="on")je(),t.push({kind:"FragmentSpread",name:{kind:"Name",value:r},directives:ra(!1)});else{if(je(),r==="on"){if((r=sr(En))==null)throw xt("NamedType");je()}var i=ra(!1);if(Ve.charCodeAt(ge++)!==123)throw xt("InlineFragment");je(),t.push({kind:"InlineFragment",typeCondition:r?{kind:"NamedType",name:{kind:"Name",value:r}}:void 0,directives:i,selectionSet:Mf()})}}else if((e=n[Qm.Name])!=null){var s=void 0;if(je(),Ve.charCodeAt(ge)===58){if(ge++,je(),s=e,(e=sr(En))==null)throw xt("Field");je()}var o=KI(!1);je();var l=ra(!1),a=void 0;Ve.charCodeAt(ge)===123&&(ge++,je(),a=Mf()),t.push({kind:"Field",alias:s?{kind:"Name",value:s}:void 0,name:{kind:"Name",value:e},arguments:o,directives:l,selectionSet:a})}}else throw xt("SelectionSet");while(Ve.charCodeAt(ge)!==125);return ge++,je(),{kind:"SelectionSet",selections:t}}function X$(){var t,e;if((t=sr(En))==null||(je(),sr(En)!=="on")||(je(),(e=sr(En))==null))throw xt("FragmentDefinition");je();var n=ra(!1);if(Ve.charCodeAt(ge++)!==123)throw xt("FragmentDefinition");return je(),{kind:"FragmentDefinition",name:{kind:"Name",value:t},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:n,selectionSet:Mf()}}var Q$=/(?:query|mutation|subscription|fragment)/y;function eL(t){var e,n,r;if(t&&(je(),e=sr(En),n=function(){if(je(),Ve.charCodeAt(ge)===40){var s=[];ge++,je();var o;do{if(Ve.charCodeAt(ge++)!==36||(o=sr(En))==null)throw xt("Variable");if(je(),Ve.charCodeAt(ge++)!==58)throw xt("VariableDefinition");je();var l=Z$(),a=void 0;Ve.charCodeAt(ge)===61&&(ge++,je(),a=Df(!0)),je(),s.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:o}},type:l,defaultValue:a,directives:ra(!0)})}while(Ve.charCodeAt(ge)!==41);return ge++,je(),s}}(),r=ra(!1)),Ve.charCodeAt(ge)===123)return ge++,je(),{kind:"OperationDefinition",operation:t||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:n,directives:r,selectionSet:Mf()}}function tL(t,e){return ge=0,function(r,i){var s,o;je();var l=[];do if((s=sr(Q$))==="fragment")je(),l.push(X$());else if((o=eL(s))!=null)l.push(o);else throw xt("Document");while(ge<r.length);if(!i){var a;return{kind:"Document",definitions:l,set loc(c){a=c},get loc(){return a||(a={start:0,end:r.length,startToken:void 0,endToken:void 0,source:{body:r,name:"graphql.web",locationOffset:{line:1,column:1}}}),a}}}return{kind:"Document",definitions:l}}(Ve=typeof t.body=="string"?t.body:t,e&&e.noLocation)}function _n(t,e,n){for(var r="",i=0;i<t.length;i++)i&&(r+=e),r+=n(t[i]);return r}function nL(t){return JSON.stringify(t)}function rL(t){return`"""
`+t.replace(/"""/g,'\\"""')+`
"""`}var ti=`
`,wt={OperationDefinition(t){var e=t.operation;return t.name&&(e+=" "+t.name.value),t.variableDefinitions&&t.variableDefinitions.length&&(t.name||(e+=" "),e+="("+_n(t.variableDefinitions,", ",wt.VariableDefinition)+")"),t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),e!=="query"?e+" "+wt.SelectionSet(t.selectionSet):wt.SelectionSet(t.selectionSet)},VariableDefinition(t){var e=wt.Variable(t.variable)+": "+Fi(t.type);return t.defaultValue&&(e+=" = "+Fi(t.defaultValue)),t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),e},Field(t){var e=t.alias?t.alias.value+": "+t.name.value:t.name.value;if(t.arguments&&t.arguments.length){var n=_n(t.arguments,", ",wt.Argument);e.length+n.length+2>80?e+="("+(ti+="  ")+_n(t.arguments,ti,wt.Argument)+(ti=ti.slice(0,-2))+")":e+="("+n+")"}return t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),t.selectionSet&&(e+=" "+wt.SelectionSet(t.selectionSet)),e},StringValue(t){return t.block?rL(t.value).replace(/\n/g,ti):nL(t.value)},BooleanValue:t=>""+t.value,NullValue:t=>"null",IntValue:t=>t.value,FloatValue:t=>t.value,EnumValue:t=>t.value,Name:t=>t.value,Variable:t=>"$"+t.name.value,ListValue:t=>"["+_n(t.values,", ",Fi)+"]",ObjectValue:t=>"{"+_n(t.fields,", ",wt.ObjectField)+"}",ObjectField:t=>t.name.value+": "+Fi(t.value),Document(t){return!t.definitions||!t.definitions.length?"":_n(t.definitions,`

`,Fi)},SelectionSet:t=>"{"+(ti+="  ")+_n(t.selections,ti,Fi)+(ti=ti.slice(0,-2))+"}",Argument:t=>t.name.value+": "+Fi(t.value),FragmentSpread(t){var e="..."+t.name.value;return t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),e},InlineFragment(t){var e="...";return t.typeCondition&&(e+=" on "+t.typeCondition.name.value),t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),e+=" "+wt.SelectionSet(t.selectionSet)},FragmentDefinition(t){var e="fragment "+t.name.value;return e+=" on "+t.typeCondition.name.value,t.directives&&t.directives.length&&(e+=" "+_n(t.directives," ",wt.Directive)),e+" "+wt.SelectionSet(t.selectionSet)},Directive(t){var e="@"+t.name.value;return t.arguments&&t.arguments.length&&(e+="("+_n(t.arguments,", ",wt.Argument)+")"),e},NamedType:t=>t.name.value,ListType:t=>"["+Fi(t.type)+"]",NonNullType:t=>Fi(t.type)+"!"},Fi=t=>wt[t.kind](t);function iL(t){return ti=`
`,wt[t.kind]?wt[t.kind](t):""}function ga(t,e){switch(t.kind){case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"StringValue":case"EnumValue":case"BooleanValue":return t.value;case"ListValue":for(var n=[],r=0,i=t.values.length;r<i;r++)n.push(ga(t.values[r],e));return n;case"ObjectValue":for(var s=Object.create(null),o=0,l=t.fields.length;o<l;o++){var a=t.fields[o];s[a.name.value]=ga(a.value,e)}return s;case"Variable":return e&&e[t.name.value]}}var b0=()=>{},or=b0;function Nr(t){return{tag:0,0:t}}function Fu(t){return{tag:1,0:t}}var gv=()=>typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator",sL=t=>t;function ut(t){return e=>n=>{var r=or;e(i=>{i===0?n(0):i.tag===0?(r=i[0],n(i)):t(i[0])?n(i):r(0)})}}function ks(t){return e=>n=>e(r=>{r===0||r.tag===0?n(r):n(Fu(t(r[0])))})}function Kh(t){return e=>n=>{var r=[],i=or,s=!1,o=!1;e(l=>{o||(l===0?(o=!0,r.length||n(0)):l.tag===0?i=l[0]:(s=!1,function(c){var u=or;c(d=>{if(d===0){if(r.length){var f=r.indexOf(u);f>-1&&(r=r.slice()).splice(f,1),r.length||(o?n(0):s||(s=!0,i(0)))}}else d.tag===0?(r.push(u=d[0]),u(0)):r.length&&(n(d),u(0))})}(t(l[0])),s||(s=!0,i(0))))}),n(Nr(l=>{if(l===1){o||(o=!0,i(1));for(var a=0,c=r,u=r.length;a<u;a++)c[a](1);r.length=0}else{!o&&!s?(s=!0,i(0)):s=!1;for(var d=0,f=r,p=r.length;d<p;d++)f[d](0)}}))}}function oL(t){return Kh(sL)(t)}function Zs(t){return oL(JI(t))}function x0(t){return e=>n=>{var r=!1;e(i=>{if(!r)if(i===0)r=!0,n(0),t();else if(i.tag===0){var s=i[0];n(Nr(o=>{o===1?(r=!0,s(1),t()):s(o)}))}else n(i)})}}function Ff(t){return e=>n=>{var r=!1;e(i=>{if(!r)if(i===0)r=!0,n(0);else if(i.tag===0){var s=i[0];n(Nr(o=>{o===1&&(r=!0),s(o)}))}else t(i[0]),n(i)})}}function ey(t){return e=>n=>e(r=>{r===0?n(0):r.tag===0?(n(r),t()):n(r)})}function ma(t){var e=[],n=or,r=!1;return i=>{e.push(i),e.length===1&&t(s=>{if(s===0){for(var o=0,l=e,a=e.length;o<a;o++)l[o](0);e.length=0}else if(s.tag===0)n=s[0];else{r=!1;for(var c=0,u=e,d=e.length;c<d;c++)u[c](s)}}),i(Nr(s=>{if(s===1){var o=e.indexOf(i);o>-1&&(e=e.slice()).splice(o,1),e.length||n(1)}else r||(r=!0,n(0))}))}}function mv(t){return e=>n=>{var r=or,i=or,s=!1,o=!1,l=!1,a=!1;e(c=>{a||(c===0?(a=!0,l||n(0)):c.tag===0?r=c[0]:(l&&(i(1),i=or),s?s=!1:(s=!0,r(0)),function(d){l=!0,d(f=>{l&&(f===0?(l=!1,a?n(0):s||(s=!0,r(0))):f.tag===0?(o=!1,(i=f[0])(0)):(n(f),o?o=!1:i(0)))})}(t(c[0]))))}),n(Nr(c=>{c===1?(a||(a=!0,r(1)),l&&(l=!1,i(1))):(!a&&!s&&(s=!0,r(0)),l&&!o&&(o=!0,i(0)))}))}}function Gh(t){return e=>n=>{var r=or,i=!1,s=0;e(o=>{i||(o===0?(i=!0,n(0)):o.tag===0?r=o[0]:s++<t?(n(o),!i&&s>=t&&(i=!0,n(0),r(1))):n(o))}),n(Nr(o=>{o===1&&!i?(i=!0,r(1)):o===0&&!i&&s<t&&r(0)}))}}function v0(t){return e=>n=>{var r=or,i=or,s=!1;e(o=>{s||(o===0?(s=!0,i(1),n(0)):o.tag===0?(r=o[0],t(l=>{l===0||(l.tag===0?(i=l[0])(0):(s=!0,i(1),r(1),n(0)))})):n(o))}),n(Nr(o=>{o===1&&!s?(s=!0,r(1),i(1)):s||r(0)}))}}function GI(t,e){return n=>r=>{var i=or,s=!1;n(o=>{s||(o===0?(s=!0,r(0)):o.tag===0?(i=o[0],r(o)):t(o[0])?r(o):(s=!0,e&&r(o),r(0),i(1)))})}}function lL(t){return e=>t()(e)}function YI(t){return e=>{var n=t[gv()]&&t[gv()]()||t,r=!1,i=!1,s=!1,o;e(Nr(async l=>{if(l===1)r=!0,n.return&&n.return();else if(i)s=!0;else{for(s=i=!0;s&&!r;)if((o=await n.next()).done)r=!0,n.return&&await n.return(),e(0);else try{s=!1,e(Fu(o.value))}catch(a){if(n.throw)(r=!!(await n.throw(a)).done)&&e(0);else throw a}i=!1}}))}}function aL(t){return t[Symbol.asyncIterator]?YI(t):e=>{var n=t[Symbol.iterator](),r=!1,i=!1,s=!1,o;e(Nr(l=>{if(l===1)r=!0,n.return&&n.return();else if(i)s=!0;else{for(s=i=!0;s&&!r;)if((o=n.next()).done)r=!0,n.return&&n.return(),e(0);else try{s=!1,e(Fu(o.value))}catch(a){if(n.throw)(r=!!n.throw(a).done)&&e(0);else throw a}i=!1}}))}}var JI=aL;function Eg(t){return e=>{var n=!1;e(Nr(r=>{r===1?n=!0:n||(n=!0,e(Fu(t)),e(0))}))}}function ZI(t){return e=>{var n=!1,r=t({next(i){n||e(Fu(i))},complete(){n||(n=!0,e(0))}});e(Nr(i=>{i===1&&!n&&(n=!0,r())}))}}function Pf(){var t,e;return{source:ma(ZI(n=>(t=n.next,e=n.complete,b0))),next(n){t&&t(n)},complete(){e&&e()}}}var cL=t=>{var e=!1;t(Nr(n=>{n===1?e=!0:e||(e=!0,t(0))}))};function uL(t){return ZI(e=>(t.then(n=>{Promise.resolve(n).then(()=>{e.next(n),e.complete()})}),b0))}function ya(t){return e=>{var n=or,r=!1;return e(i=>{i===0?r=!0:i.tag===0?(n=i[0])(0):r||(t(i[0]),n(0))}),{unsubscribe(){r||(r=!0,n(1))}}}}function dL(t){ya(e=>{})(t)}function k0(t){return new Promise(e=>{var n=or,r;t(i=>{i===0?Promise.resolve(r).then(e):i.tag===0?(n=i[0])(0):(r=i[0],n(0))})})}var fL=t=>t&&typeof t.message=="string"&&(t.extensions||t.name==="GraphQLError")?t:typeof t=="object"&&typeof t.message=="string"?new Xm(t.message,t.nodes,t.source,t.positions,t.path,t,t.extensions||{}):new Xm(t);class w0 extends Error{constructor(e){var n=(e.graphQLErrors||[]).map(fL),r=((i,s)=>{var o="";if(i)return`[Network] ${i.message}`;if(s)for(var l=0,a=s.length;l<a;l++)o&&(o+=`
`),o+=`[GraphQL] ${s[l].message}`;return o})(e.networkError,n);super(r),this.name="CombinedError",this.message=r,this.graphQLErrors=n,this.networkError=e.networkError,this.response=e.response}toString(){return this.message}}var Md=(t,e)=>{for(var n=0|(e||5381),r=0,i=0|t.length;r<i;r++)n=(n<<5)+n+t.charCodeAt(r);return n},Mo=new Set,yv=new WeakMap,Rl=(t,e)=>{if(t===null||Mo.has(t))return"null";if(typeof t!="object")return JSON.stringify(t)||"";if(t.toJSON)return Rl(t.toJSON(),e);if(Array.isArray(t)){for(var n="[",r=0,i=t.length;r<i;r++)n.length>1&&(n+=","),n+=Rl(t[r],e)||"null";return n+="]"}else if(!e&&($f!==ba&&t instanceof $f||Lf!==ba&&t instanceof Lf))return"null";var s=Object.keys(t).sort();if(!s.length&&t.constructor&&Object.getPrototypeOf(t).constructor!==Object.prototype.constructor){var o=yv.get(t)||Math.random().toString(36).slice(2);return yv.set(t,o),Rl({__key:o},e)}Mo.add(t);for(var l="{",a=0,c=s.length;a<c;a++){var u=Rl(t[s[a]],e);u&&(l.length>1&&(l+=","),l+=Rl(s[a],e)+":"+u)}return Mo.delete(t),l+="}"},ty=(t,e,n)=>{if(!(n==null||typeof n!="object"||n.toJSON||Mo.has(n)))if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++)ty(t,`${e}.${r}`,n[r]);else if(n instanceof $f||n instanceof Lf)t.set(e,n);else{Mo.add(n);for(var s in n)ty(t,`${e}.${s}`,n[s])}},ts=(t,e)=>(Mo.clear(),Rl(t,e||!1));class ba{}var $f=typeof File<"u"?File:ba,Lf=typeof Blob<"u"?Blob:ba,hL=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,pL=/(?:#[^\n\r]+)?(?:[\r\n]+|$)/g,gL=(t,e)=>e%2==0?t.replace(pL,`
`):t,bv=t=>t.split(hL).map(gL).join("").trim(),xv=new Map,Fd=new Map,Yh=t=>{var e;return typeof t=="string"?e=bv(t):t.loc&&Fd.get(t.__key)===t?e=t.loc.source.body:(e=xv.get(t)||bv(iL(t)),xv.set(t,e)),typeof t!="string"&&!t.loc&&(t.loc={start:0,end:e.length,source:{body:e,name:"gql",locationOffset:{line:1,column:1}}}),e},vv=t=>{var e;if(t.documentId)e=Md(t.documentId);else if(e=Md(Yh(t)),t.definitions){var n=QI(t);n&&(e=Md(`
# ${n}`,e))}return e},XI=t=>{var e,n;return typeof t=="string"?(e=vv(t),n=Fd.get(e)||tL(t,{noLocation:!0})):(e=t.__key||vv(t),n=Fd.get(e)||t),n.loc||Yh(n),n.__key=e,Fd.set(e,n),n},Ps=(t,e,n)=>{var r=e||{},i=XI(t),s=ts(r,!0),o=i.__key;return s!=="{}"&&(o=Md(s,o)),{key:o,query:i,variables:r,extensions:n}},QI=t=>{for(var e=0,n=t.definitions.length;e<n;e++){var r=t.definitions[e];if(r.kind===oi.OPERATION_DEFINITION)return r.name?r.name.value:void 0}},kv=(t,e,n)=>{if(!("data"in e||"errors"in e&&Array.isArray(e.errors)))throw new Error("No Content");var r=t.kind==="subscription";return{operation:t,data:e.data,error:Array.isArray(e.errors)?new w0({graphQLErrors:e.errors,response:n}):void 0,extensions:e.extensions?{...e.extensions}:void 0,hasNext:e.hasNext==null?r:e.hasNext,stale:!1}},Bf=(t,e)=>{if(typeof t=="object"&&t!=null){if(Array.isArray(t)){t=[...t];for(var n=0,r=e.length;n<r;n++)t[n]=Bf(t[n],e[n]);return t}if(!t.constructor||t.constructor===Object){t={...t};for(var i in e)t[i]=Bf(t[i],e[i]);return t}}return e},mL=(t,e,n,r)=>{var i=t.error?t.error.graphQLErrors:[],s=!!t.extensions||!!(e.payload||e).extensions,o={...t.extensions,...(e.payload||e).extensions},l=e.incremental;"path"in e&&(l=[e]);var a={data:t.data};if(l)for(var c=function(){var f=l[u];Array.isArray(f.errors)&&i.push(...f.errors),f.extensions&&(Object.assign(o,f.extensions),s=!0);var p="data",g=a,m=[];if(f.path)m=f.path;else if(r){var b=r.find(k=>k.id===f.id);f.subPath?m=[...b.path,...f.subPath]:m=b.path}for(var y=0,x=m.length;y<x;p=m[y++])g=g[p]=Array.isArray(g[p])?[...g[p]]:{...g[p]};if(f.items)for(var v=+p>=0?p:0,w=0,S=f.items.length;w<S;w++)g[v+w]=Bf(g[v+w],f.items[w]);else f.data!==void 0&&(g[p]=Bf(g[p],f.data))},u=0,d=l.length;u<d;u++)c();else a.data=(e.payload||e).data||t.data,i=e.errors||e.payload&&e.payload.errors||i;return{operation:t.operation,data:a.data,error:i.length?new w0({graphQLErrors:i,response:n}):void 0,extensions:s?o:void 0,hasNext:e.hasNext!=null?e.hasNext:t.hasNext,stale:!1}},eA=(t,e,n)=>({operation:t,data:void 0,error:new w0({networkError:e,response:n}),extensions:void 0,hasNext:!1,stale:!1});function yL(t){var e={query:void 0,documentId:void 0,operationName:QI(t.query),variables:t.variables||void 0,extensions:t.extensions};return"documentId"in t.query&&t.query.documentId&&(!t.query.definitions||!t.query.definitions.length)?e.documentId=t.query.documentId:(!t.extensions||!t.extensions.persistedQuery||t.extensions.persistedQuery.miss)&&(e.query=Yh(t.query)),e}var bL=(t,e)=>{var n=t.kind==="query"&&t.context.preferGetMethod;if(!n||!e)return t.context.url;var r=xL(t.context.url);for(var i in e){var s=e[i];s&&r[1].set(i,typeof s=="object"?ts(s):s)}var o=r.join("?");return o.length>2047&&n!=="force"?(t.context.preferGetMethod=!1,t.context.url):o},xL=t=>{var e=t.indexOf("?");return e>-1?[t.slice(0,e),new URLSearchParams(t.slice(e+1))]:[t,new URLSearchParams]},vL=(t,e)=>{if(e&&!(t.kind==="query"&&t.context.preferGetMethod)){var n=ts(e),r=(l=>{var a=new Map;return($f!==ba||Lf!==ba)&&(Mo.clear(),ty(a,"variables",l)),a})(e.variables);if(r.size){var i=new FormData;i.append("operations",n),i.append("map",ts({...[...r.keys()].map(l=>[l])}));var s=0;for(var o of r.values())i.append(""+s++,o);return i}return n}},kL=(t,e)=>{var n={accept:t.kind==="subscription"?"text/event-stream, multipart/mixed":"application/graphql-response+json, application/graphql+json, application/json, text/event-stream, multipart/mixed"},r=(typeof t.context.fetchOptions=="function"?t.context.fetchOptions():t.context.fetchOptions)||{};if(r.headers)if((o=>"has"in o&&!Object.keys(o).length)(r.headers))r.headers.forEach((o,l)=>{n[l]=o});else if(Array.isArray(r.headers))r.headers.forEach((o,l)=>{Array.isArray(o)?n[o[0]]?n[o[0]]=`${n[o[0]]},${o[1]}`:n[o[0]]=o[1]:n[l]=o});else for(var i in r.headers)n[i.toLowerCase()]=r.headers[i];var s=vL(t,e);return typeof s=="string"&&!n["content-type"]&&(n["content-type"]="application/json"),{...r,method:s?"POST":"GET",body:s,headers:n}},wL=typeof TextDecoder<"u"?new TextDecoder:null,SL=/boundary="?([^=";]+)"?/i,CL=/data: ?([^\n]+)/,wv=t=>t.constructor.name==="Buffer"?t.toString():wL.decode(t);async function*Sv(t){if(t.body[Symbol.asyncIterator])for await(var e of t.body)yield wv(e);else{var n=t.body.getReader(),r;try{for(;!(r=await n.read()).done;)yield wv(r.value)}finally{n.cancel()}}}async function*Cv(t,e){var n="",r;for await(var i of t)for(n+=i;(r=n.indexOf(e))>-1;)yield n.slice(0,r),n=n.slice(r+e.length)}async function*EL(t,e,n){var r=!0,i=null,s;try{yield await Promise.resolve();var o=(s=await(t.context.fetch||fetch)(e,n)).headers.get("Content-Type")||"",l;/multipart\/mixed/i.test(o)?l=async function*(d,f){var p=d.match(SL),g="--"+(p?p[1]:"-"),m=!0,b;for await(var y of Cv(Sv(f),`\r
`+g)){if(m){m=!1;var x=y.indexOf(g);if(x>-1)y=y.slice(x+g.length);else continue}try{yield b=JSON.parse(y.slice(y.indexOf(`\r
\r
`)+4))}catch(v){if(!b)throw v}if(b&&b.hasNext===!1)break}b&&b.hasNext!==!1&&(yield{hasNext:!1})}(o,s):/text\/event-stream/i.test(o)?l=async function*(d){var f;for await(var p of Cv(Sv(d),`

`)){var g=p.match(CL);if(g){var m=g[1];try{yield f=JSON.parse(m)}catch(b){if(!f)throw b}if(f&&f.hasNext===!1)break}}f&&f.hasNext!==!1&&(yield{hasNext:!1})}(s):/text\//i.test(o)?l=async function*(d){var f=await d.text();try{var p=JSON.parse(f);yield p}catch{throw new Error(f)}}(s):l=async function*(d){yield JSON.parse(await d.text())}(s);var a;for await(var c of l)c.pending&&!i?a=c.pending:c.pending&&(a=[...a,...c.pending]),i=i?mL(i,c,s,a):kv(t,c,s),r=!1,yield i,r=!0;i||(yield i=kv(t,{},s))}catch(u){if(!r)throw u;yield eA(t,s&&(s.status<200||s.status>=300)&&s.statusText?new Error(s.statusText):u,s)}}function IL(t,e,n){var r;return typeof AbortController<"u"&&(n.signal=(r=new AbortController).signal),x0(()=>{r&&r.abort()})(ut(i=>!!i)(YI(EL(t,e,n))))}var ny=t=>{if("definitions"in t){for(var e=[],n=0,r=t.definitions.length;n<r;n++){var i=ny(t.definitions[n]);e.push(i)}return{...t,definitions:e}}if("directives"in t&&t.directives&&t.directives.length){for(var s=[],o={},l=0,a=t.directives.length;l<a;l++){var c=t.directives[l],u=c.name.value;u[0]!=="_"?s.push(c):u=u.slice(1),o[u]=c}t={...t,directives:s,_directives:o}}if("selectionSet"in t){var d=[],f=t.kind===oi.OPERATION_DEFINITION;if(t.selectionSet){for(var p=0,g=t.selectionSet.selections.length;p<g;p++){var m=t.selectionSet.selections[p];f=f||m.kind===oi.FIELD&&m.name.value==="__typename"&&!m.alias;var b=ny(m);d.push(b)}return f||d.push({kind:oi.FIELD,name:{kind:oi.NAME,value:"__typename"},_generated:!0}),{...t,selectionSet:{...t.selectionSet,selections:d}}}}return t},Ev=new Map,tu=t=>{var e=XI(t),n=Ev.get(e.__key);return n||(Ev.set(e.__key,n=ny(e)),Object.defineProperty(n,"__key",{value:e.__key,enumerable:!1})),n};function Iv(t){var e=n=>t(n);return e.toPromise=()=>k0(Gh(1)(ut(n=>!n.stale&&!n.hasNext)(e))),e.then=(n,r)=>e.toPromise().then(n,r),e.subscribe=n=>ya(n)(e),e}function Wi(t,e,n){return{...e,kind:t,context:e.context?{...e.context,...n}:n||e.context}}var AL=()=>{},TL=({forward:t,dispatchDebug:e})=>n=>{var r=Kh(s=>{var o=yL(s),l=bL(s,o),a=kL(s,o),c=v0(ut(u=>u.kind==="teardown"&&u.key===s.key)(n))(IL(s,l,a));return c})(ut(s=>s.kind!=="teardown"&&(s.kind!=="subscription"||!!s.context.fetchSubscriptions))(n)),i=t(ut(s=>s.kind==="teardown"||s.kind==="subscription"&&!s.context.fetchSubscriptions)(n));return Zs([r,i])},NL=t=>({client:e,forward:n,dispatchDebug:r})=>t.reduceRight((i,s)=>s({client:e,forward(o){return ma(i(ma(o)))},dispatchDebug(o){}}),n),jL=({dispatchDebug:t})=>e=>ut(n=>!1)(e),_L=function t(e){var n=0,r=new Map,i=new Map,s=new Set,o=[],l={url:e.url,fetchSubscriptions:e.fetchSubscriptions,fetchOptions:e.fetchOptions,fetch:e.fetch,preferGetMethod:e.preferGetMethod,requestPolicy:e.requestPolicy||"cache-first"},a=Pf();function c(x){(x.kind==="mutation"||x.kind==="teardown"||!s.has(x.key))&&(x.kind==="teardown"?s.delete(x.key):x.kind!=="mutation"&&s.add(x.key),a.next(x))}var u=!1;function d(x){if(x&&c(x),!u){for(u=!0;u&&(x=o.shift());)c(x);u=!1}}var f=x=>{var v=v0(ut(w=>w.kind==="teardown"&&w.key===x.key)(a.source))(ut(w=>w.operation.kind===x.kind&&w.operation.key===x.key&&(!w.operation.context._instance||w.operation.context._instance===x.context._instance))(y));return x.kind!=="query"?v=GI(w=>!!w.hasNext,!0)(v):v=mv(w=>{var S=Eg(w);return w.stale||w.hasNext?S:Zs([S,ks(()=>(w.stale=!0,w))(Gh(1)(ut(k=>k.key===x.key)(a.source)))])})(v),x.kind!=="mutation"?v=x0(()=>{s.delete(x.key),r.delete(x.key),i.delete(x.key),u=!1;for(var w=o.length-1;w>=0;w--)o[w].key===x.key&&o.splice(w,1);c(Wi("teardown",x,x.context))})(Ff(w=>{if(w.stale)if(!w.hasNext)s.delete(x.key);else for(var S=0;S<o.length;S++){var k=o[S];if(k.key===w.operation.key){s.delete(k.key);break}}else w.hasNext||s.delete(x.key);r.set(x.key,w)})(v)):v=ey(()=>{c(x)})(v),ma(v)},p=this instanceof t?this:Object.create(t.prototype),g=Object.assign(p,{suspense:!!e.suspense,operations$:a.source,reexecuteOperation(x){if(x.kind==="teardown")d(x);else if(x.kind==="mutation")o.push(x),Promise.resolve().then(d);else if(i.has(x.key)){for(var v=!1,w=0;w<o.length;w++)o[w].key===x.key&&(o[w]=x,v=!0);v||s.has(x.key)&&x.context.requestPolicy!=="network-only"?(s.delete(x.key),Promise.resolve().then(d)):(o.push(x),Promise.resolve().then(d))}},createRequestOperation(x,v,w){return w||(w={}),Wi(x,v,{_instance:x==="mutation"?n=n+1|0:void 0,...l,...w,requestPolicy:w.requestPolicy||l.requestPolicy,suspense:w.suspense||w.suspense!==!1&&g.suspense})},executeRequestOperation(x){return x.kind==="mutation"?Iv(f(x)):Iv(lL(()=>{var v=i.get(x.key);v||i.set(x.key,v=f(x)),v=ey(()=>{d(x)})(v);var w=r.get(x.key);return x.kind==="query"&&w&&(w.stale||w.hasNext)?mv(Eg)(Zs([v,ut(S=>S===r.get(x.key))(Eg(w))])):v}))},executeQuery(x,v){var w=g.createRequestOperation("query",x,v);return g.executeRequestOperation(w)},executeSubscription(x,v){var w=g.createRequestOperation("subscription",x,v);return g.executeRequestOperation(w)},executeMutation(x,v){var w=g.createRequestOperation("mutation",x,v);return g.executeRequestOperation(w)},readQuery(x,v,w){var S=null;return ya(k=>{S=k})(g.query(x,v,w)).unsubscribe(),S},query:(x,v,w)=>g.executeQuery(Ps(x,v),w),subscription:(x,v,w)=>g.executeSubscription(Ps(x,v),w),mutation:(x,v,w)=>g.executeMutation(Ps(x,v),w)}),m=AL,b=NL(e.exchanges),y=ma(b({client:g,dispatchDebug:m,forward:jL({dispatchDebug:m})})(a.source));return dL(y),g},OL=_L,tA={},Jh=C.createContext(tA),RL=Jh.Provider;Jh.Consumer;Jh.displayName="UrqlContext";var S0=()=>{var t=C.useContext(Jh);if(t===tA&&!1)var e;return t},ry={fetching:!1,stale:!1,hasNext:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0},DL=(t,e)=>t===e||!(!t||!e||t.key!==e.key),Ig=(t,e)=>{var n={...t,...e,data:e.data!==void 0||e.error?e.data:t.data,fetching:!!e.fetching,stale:!!e.stale};return((r,i)=>{for(var s in r)if(!(s in i))return!0;for(var o in i)if(o==="operation"?!DL(r[o],i[o]):r[o]!==i[o])return!0;return!1})(t,n)?n:t},ML=(t,e)=>{for(var n=0,r=e.length;n<r;n++)if(t[n]!==e[n])return!0;return!1};function zf(t,e){t(e)}function Zh(t){var e=C.useRef(!0),n=S0(),[r,i]=C.useState(ry),s=C.useCallback((o,l)=>(zf(i,{...ry,fetching:!0}),k0(Gh(1)(ut(a=>!a.hasNext)(Ff(a=>{e.current&&zf(i,{fetching:!1,stale:a.stale,data:a.data,error:a.error,extensions:a.extensions,operation:a.operation,hasNext:a.hasNext})})(n.executeMutation(Ps(t,o),l||{})))))),[n,t,i]);return C.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),[r,s]}function FL(t,e){var n=C.useRef(void 0);return C.useMemo(()=>{var r=Ps(t,e);return n.current!==void 0&&n.current.key===r.key?n.current:(n.current=r,r)},[t,e])}var PL=t=>{if(!t._react){var e=new Set,n=new Map;t.operations$&&ya(r=>{r.kind==="teardown"&&e.has(r.key)&&(e.delete(r.key),n.delete(r.key))})(t.operations$),t._react={get:r=>n.get(r),set(r,i){e.delete(r),n.set(r,i)},dispose(r){e.add(r)}}}return t._react},$L=(t,e)=>e&&e.suspense!==void 0?!!e.suspense:t.suspense;function iy(t){var e=S0(),n=PL(e),r=$L(e,t.context),i=FL(t.query,t.variables),s=C.useMemo(()=>{if(t.pause)return null;var f=e.executeQuery(i,{requestPolicy:t.requestPolicy,...t.context});return r?Ff(p=>{n.set(i.key,p)})(f):f},[n,e,i,r,t.pause,t.requestPolicy,t.context]),o=C.useCallback((f,p)=>{if(!f)return{fetching:!1};var g=n.get(i.key);if(g){if(p&&g!=null&&"then"in g)throw g}else{var m,b=ya(x=>{g=x,m&&m(g)})(GI(()=>p&&!m||!g||"hasNext"in g&&g.hasNext)(f));if(g==null&&p){var y=new Promise(x=>{m=x});throw n.set(i.key,y),y}else b.unsubscribe()}return g||{fetching:!0}},[n,i]),l=[e,i,t.requestPolicy,t.context,t.pause],[a,c]=C.useState(()=>[s,Ig(ry,o(s,r)),l]),u=a[1];s!==a[0]&&ML(a[2],l)&&c([s,u=Ig(a[1],o(s,r)),l]),C.useEffect(()=>{var f=a[0],p=a[2][1],g=!1,m=y=>{g=!0,zf(c,x=>{var v=Ig(x[1],y);return x[1]!==v?[x[0],v,x[2]]:x})};if(f){var b=ya(m)(x0(()=>{m({fetching:!1})})(f));return g||m({fetching:!0}),()=>{n.dispose(p.key),b.unsubscribe()}}else m({fetching:!1})},[n,a[0],a[2][1]]);var d=C.useCallback(f=>{var p={requestPolicy:t.requestPolicy,...t.context,...f};zf(c,g=>[r?Ff(m=>{n.set(i.key,m)})(e.executeQuery(i,p)):e.executeQuery(i,p),g[1],l])},[e,n,i,r,t.requestPolicy,t.context,t.pause]);return[u,d]}function LL(t){let e="";for(const n of t)e+=n.toString(16).padStart(2,"0");return e}function Xh(t){const e=atob(t.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(e,n=>n.codePointAt(0))}function Fo(t){return sy(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function sy(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}function qr(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Qh(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=qr(n);return(i,s)=>r.then(o=>s(o.transaction(e,i).objectStore(e)))}let Ag;function io(){return Ag||(Ag=Qh("keyval-store","keyval")),Ag}function nA(t,e=io()){return e("readonly",n=>qr(n.get(t)))}function rA(t,e,n=io()){return n("readwrite",r=>(r.put(e,t),qr(r.transaction)))}function BL(t,e=io()){return e("readwrite",n=>(t.forEach(r=>n.put(r[1],r[0])),qr(n.transaction)))}function zL(t,e=io()){return e("readwrite",n=>(n.delete(t),qr(n.transaction)))}function Av(t,e=io()){return e("readwrite",n=>(t.forEach(r=>n.delete(r)),qr(n.transaction)))}function oy(t=io()){return t("readwrite",e=>(e.clear(),qr(e.transaction)))}function iA(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},qr(t.transaction)}function VL(t=io()){return t("readonly",e=>{if(e.getAllKeys)return qr(e.getAllKeys());const n=[];return iA(e,r=>n.push(r.key)).then(()=>n)})}function UL(t=io()){return t("readonly",e=>{if(e.getAll&&e.getAllKeys)return Promise.all([qr(e.getAllKeys()),qr(e.getAll())]).then(([r,i])=>r.map((s,o)=>[s,i[o]]));const n=[];return t("readonly",r=>iA(r,i=>n.push([i.key,i.value])).then(()=>n))})}const Cl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,sA=new Set,ly=typeof process=="object"&&process?process:{},oA=(t,e,n,r)=>{typeof ly.emitWarning=="function"?ly.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Vf=globalThis.AbortController,Tv=globalThis.AbortSignal;if(typeof Vf>"u"){Tv=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Vf=class{constructor(){e()}signal=new Tv;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let t=ly.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{t&&(t=!1,oA("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const qL=t=>!sA.has(t),ms=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),lA=t=>ms(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Pd:null:null;class Pd extends Array{constructor(e){super(e),this.fill(0)}}class Vl{heap;length;static#s=!1;static create(e){const n=lA(e);if(!n)return[];Vl.#s=!0;const r=new Vl(e,n);return Vl.#s=!1,r}constructor(e,n){if(!Vl.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class ep{#s;#o;#c;#h;#E;#I;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#p;#r;#n;#e;#d;#g;#u;#l;#b;#a;#x;#v;#m;#k;#T;#f;static unsafeExposeInternals(e){return{starts:e.#v,ttls:e.#m,sizes:e.#x,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#d,prev:e.#g,get head(){return e.#u},get tail(){return e.#l},free:e.#b,isBackgroundFetch:n=>e.#t(n),backgroundFetch:(n,r,i,s)=>e.#D(n,r,i,s),moveToTail:n=>e.#_(n),indexes:n=>e.#w(n),rindexes:n=>e.#S(n),isStale:n=>e.#y(n)}}get max(){return this.#s}get maxSize(){return this.#o}get calculatedSize(){return this.#p}get size(){return this.#i}get fetchMethod(){return this.#E}get memoMethod(){return this.#I}get dispose(){return this.#c}get disposeAfter(){return this.#h}constructor(e){const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:l,allowStale:a,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:f,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:m,fetchMethod:b,memoMethod:y,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:S,ignoreFetchAbort:k}=e;if(n!==0&&!ms(n))throw new TypeError("max option must be a nonnegative integer");const E=n?lA(n):Array;if(!E)throw new Error("invalid max value: "+n);if(this.#s=n,this.#o=p,this.maxEntrySize=g||this.#o,this.sizeCalculation=m,this.sizeCalculation){if(!this.#o&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#I=y,b!==void 0&&typeof b!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#E=b,this.#T=!!b,this.#r=new Map,this.#n=new Array(n).fill(void 0),this.#e=new Array(n).fill(void 0),this.#d=new E(n),this.#g=new E(n),this.#u=0,this.#l=0,this.#b=Vl.create(n),this.#i=0,this.#p=0,typeof c=="function"&&(this.#c=c),typeof u=="function"?(this.#h=u,this.#a=[]):(this.#h=void 0,this.#a=void 0),this.#k=!!this.#c,this.#f=!!this.#h,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!x,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!S,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(this.#o!==0&&!ms(this.#o))throw new TypeError("maxSize must be a positive integer if specified");if(!ms(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#z()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!l,this.ttlResolution=ms(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!ms(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#s===0&&this.ttl===0&&this.#o===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#o){const T="LRU_CACHE_UNBOUNDED";qL(T)&&(sA.add(T),oA("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,ep))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#M(){const e=new Pd(this.#s),n=new Pd(this.#s);this.#m=e,this.#v=n,this.#F=(s,o,l=Cl.now())=>{if(n[s]=o!==0?l:0,e[s]=o,o!==0&&this.ttlAutopurge){const a=setTimeout(()=>{this.#y(s)&&this.#C(this.#n[s],"expire")},o+1);a.unref&&a.unref()}},this.#N=s=>{n[s]=e[s]!==0?Cl.now():0},this.#A=(s,o)=>{if(e[o]){const l=e[o],a=n[o];if(!l||!a)return;s.ttl=l,s.start=a,s.now=r||i();const c=s.now-a;s.remainingTTL=l-c}};let r=0;const i=()=>{const s=Cl.now();if(this.ttlResolution>0){r=s;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=this.#r.get(s);if(o===void 0)return 0;const l=e[o],a=n[o];if(!l||!a)return 1/0;const c=(r||i())-a;return l-c},this.#y=s=>{const o=n[s],l=e[s];return!!l&&!!o&&(r||i())-o>l}}#N=()=>{};#A=()=>{};#F=()=>{};#y=()=>!1;#z(){const e=new Pd(this.#s);this.#p=0,this.#x=e,this.#j=n=>{this.#p-=e[n],e[n]=0},this.#P=(n,r,i,s)=>{if(this.#t(r))return 0;if(!ms(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!ms(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#O=(n,r,i)=>{if(e[n]=r,this.#o){const s=this.#o-e[n];for(;this.#p>s;)this.#R(!0)}this.#p+=e[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#p)}}#j=e=>{};#O=(e,n,r)=>{};#P=(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:e=this.allowStale}={}){if(this.#i)for(let n=this.#l;!(!this.#$(n)||((e||!this.#y(n))&&(yield n),n===this.#u));)n=this.#g[n]}*#S({allowStale:e=this.allowStale}={}){if(this.#i)for(let n=this.#u;!(!this.#$(n)||((e||!this.#y(n))&&(yield n),n===this.#l));)n=this.#d[n]}#$(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(const e of this.#w())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(const e of this.#S())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(const e of this.#w()){const n=this.#n[e];n!==void 0&&!this.#t(this.#e[e])&&(yield n)}}*rkeys(){for(const e of this.#S()){const n=this.#n[e];n!==void 0&&!this.#t(this.#e[e])&&(yield n)}}*values(){for(const e of this.#w())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#S())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,n={}){for(const r of this.#w()){const i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],n)}}forEach(e,n=this){for(const r of this.#w()){const i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#n[r],this)}}rforEach(e,n=this){for(const r of this.#S()){const i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#n[r],this)}}purgeStale(){let e=!1;for(const n of this.#S({allowStale:!0}))this.#y(n)&&(this.#C(this.#n[n],"expire"),e=!0);return e}info(e){const n=this.#r.get(e);if(n===void 0)return;const r=this.#e[n],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;const s={value:i};if(this.#m&&this.#v){const o=this.#m[n],l=this.#v[n];if(o&&l){const a=o-(Cl.now()-l);s.ttl=a,s.start=Date.now()}}return this.#x&&(s.size=this.#x[n]),s}dump(){const e=[];for(const n of this.#w({allowStale:!0})){const r=this.#n[n],i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;const o={value:s};if(this.#m&&this.#v){o.ttl=this.#m[n];const l=Cl.now()-this.#v[n];o.start=Math.floor(Date.now()-l)}this.#x&&(o.size=this.#x[n]),e.unshift([r,o])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Cl.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:a}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const u=this.#P(e,n,r.size||0,l);if(this.maxEntrySize&&u>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#C(e,"set"),this;let d=this.#i===0?void 0:this.#r.get(e);if(d===void 0)d=this.#i===0?this.#l:this.#b.length!==0?this.#b.pop():this.#i===this.#s?this.#R(!1):this.#i,this.#n[d]=e,this.#e[d]=n,this.#r.set(e,d),this.#d[this.#l]=d,this.#g[d]=this.#l,this.#l=d,this.#i++,this.#O(d,u,a),a&&(a.set="add"),c=!1;else{this.#_(d);const f=this.#e[d];if(n!==f){if(this.#T&&this.#t(f)){f.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:p}=f;p!==void 0&&!o&&(this.#k&&this.#c?.(p,e,"set"),this.#f&&this.#a?.push([p,e,"set"]))}else o||(this.#k&&this.#c?.(f,e,"set"),this.#f&&this.#a?.push([f,e,"set"]));if(this.#j(d),this.#O(d,u,a),this.#e[d]=n,a){a.set="replace";const p=f&&this.#t(f)?f.__staleWhileFetching:f;p!==void 0&&(a.oldValue=p)}}else a&&(a.set="update")}if(i!==0&&!this.#m&&this.#M(),this.#m&&(c||this.#F(d,i,s),a&&this.#A(a,d)),!o&&this.#f&&this.#a){const f=this.#a;let p;for(;p=f?.shift();)this.#h?.(...p)}return this}pop(){try{for(;this.#i;){const e=this.#e[this.#u];if(this.#R(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#a){const e=this.#a;let n;for(;n=e?.shift();)this.#h?.(...n)}}}#R(e){const n=this.#u,r=this.#n[n],i=this.#e[n];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#k||this.#f)&&(this.#k&&this.#c?.(i,r,"evict"),this.#f&&this.#a?.push([i,r,"evict"])),this.#j(n),e&&(this.#n[n]=void 0,this.#e[n]=void 0,this.#b.push(n)),this.#i===1?(this.#u=this.#l=0,this.#b.length=0):this.#u=this.#d[n],this.#r.delete(r),this.#i--,n}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=this.#r.get(e);if(s!==void 0){const o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#y(s))i&&(i.has="stale",this.#A(i,s));else return r&&this.#N(s),i&&(i.has="hit",this.#A(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=this.#r.get(e);if(i===void 0||!r&&this.#y(i))return;const s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#D(e,n,r,i){const s=n===void 0?void 0:this.#e[n];if(this.#t(s))return s;const o=new Vf,{signal:l}=r;l?.addEventListener("abort",()=>o.abort(l.reason),{signal:o.signal});const a={signal:o.signal,options:r,context:i},c=(m,b=!1)=>{const{aborted:y}=o.signal,x=r.ignoreFetchAbort&&m!==void 0;if(r.status&&(y&&!b?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,x&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),y&&!x&&!b)return d(o.signal.reason);const v=p;return this.#e[n]===p&&(m===void 0?v.__staleWhileFetching?this.#e[n]=v.__staleWhileFetching:this.#C(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,m,a.options))),m},u=m=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=m),d(m)),d=m=>{const{aborted:b}=o.signal,y=b&&r.allowStaleOnFetchAbort,x=y||r.allowStaleOnFetchRejection,v=x||r.noDeleteOnFetchRejection,w=p;if(this.#e[n]===p&&(!v||w.__staleWhileFetching===void 0?this.#C(e,"fetch"):y||(this.#e[n]=w.__staleWhileFetching)),x)return r.status&&w.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),w.__staleWhileFetching;if(w.__returned===w)throw m},f=(m,b)=>{const y=this.#E?.(e,s,a);y&&y instanceof Promise&&y.then(x=>m(x===void 0?void 0:x),b),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(m(void 0),r.allowStaleOnFetchAbort&&(m=x=>c(x,!0)))})};r.status&&(r.status.fetchDispatched=!0);const p=new Promise(f).then(c,u),g=Object.assign(p,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,g,{...a.options,status:void 0}),n=this.#r.get(e)):this.#e[n]=g,g}#t(e){if(!this.#T)return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Vf}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:m,forceRefresh:b=!1,status:y,signal:x}=n;if(!this.#T)return y&&(y.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:y});const v={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:l,size:a,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:y,signal:x};let w=this.#r.get(e);if(w===void 0){y&&(y.fetch="miss");const S=this.#D(e,w,v,m);return S.__returned=S}else{const S=this.#e[w];if(this.#t(S)){const I=r&&S.__staleWhileFetching!==void 0;return y&&(y.fetch="inflight",I&&(y.returnedStale=!0)),I?S.__staleWhileFetching:S.__returned=S}const k=this.#y(w);if(!b&&!k)return y&&(y.fetch="hit"),this.#_(w),i&&this.#N(w),y&&this.#A(y,w),S;const E=this.#D(e,w,v,m),N=E.__staleWhileFetching!==void 0&&r;return y&&(y.fetch=k?"stale":"refresh",N&&k&&(y.returnedStale=!0)),N?E.__staleWhileFetching:E.__returned=E}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=this.#I;if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:s,...o}=n,l=this.get(e,o);if(!s&&l!==void 0)return l;const a=r(e,l,{options:o,context:i});return this.set(e,a,o),a}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,l=this.#r.get(e);if(l!==void 0){const a=this.#e[l],c=this.#t(a);return o&&this.#A(o,l),this.#y(l)?(o&&(o.get="stale"),c?(o&&r&&a.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?a.__staleWhileFetching:void 0):(s||this.#C(e,"expire"),o&&r&&(o.returnedStale=!0),r?a:void 0)):(o&&(o.get="hit"),c?a.__staleWhileFetching:(this.#_(l),i&&this.#N(l),a))}else o&&(o.get="miss")}#L(e,n){this.#g[n]=e,this.#d[e]=n}#_(e){e!==this.#l&&(e===this.#u?this.#u=this.#d[e]:this.#L(this.#g[e],this.#d[e]),this.#L(this.#l,e),this.#l=e)}delete(e){return this.#C(e,"delete")}#C(e,n){let r=!1;if(this.#i!==0){const i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#B(n);else{this.#j(i);const s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#k||this.#f)&&(this.#k&&this.#c?.(s,e,n),this.#f&&this.#a?.push([s,e,n])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#l)this.#l=this.#g[i];else if(i===this.#u)this.#u=this.#d[i];else{const o=this.#g[i];this.#d[o]=this.#d[i];const l=this.#d[i];this.#g[l]=this.#g[i]}this.#i--,this.#b.push(i)}}if(this.#f&&this.#a?.length){const i=this.#a;let s;for(;s=i?.shift();)this.#h?.(...s)}return r}clear(){return this.#B("delete")}#B(e){for(const n of this.#S({allowStale:!0})){const r=this.#e[n];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{const i=this.#n[n];this.#k&&this.#c?.(r,i,e),this.#f&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#m&&this.#v&&(this.#m.fill(0),this.#v.fill(0)),this.#x&&this.#x.fill(0),this.#u=0,this.#l=0,this.#b.length=0,this.#p=0,this.#i=0,this.#f&&this.#a){const n=this.#a;let r;for(;r=n?.shift();)this.#h?.(...r)}}}(!globalThis.EventTarget||!globalThis.Event)&&console.error(`
  PartySocket requires a global 'EventTarget' class to be available!
  You can polyfill this global by adding this to your code before any partysocket imports: 
  
  \`\`\`
  import 'partysocket/event-target-polyfill';
  \`\`\`
  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.
`);var aA=class extends Event{message;error;constructor(t,e){super("error",e),this.message=t.message,this.error=t}},cA=class extends Event{code;reason;wasClean=!0;constructor(t=1e3,e="",n){super("close",n),this.code=t,this.reason=e}},Tg={Event,ErrorEvent:aA,CloseEvent:cA};function HL(t,e){if(!t)throw new Error(e)}function WL(t){return new t.constructor(t.type,t)}function KL(t){return"data"in t?new MessageEvent(t.type,t):"code"in t||"reason"in t?new cA(t.code||1999,t.reason||"unknown reason",t):"error"in t?new aA(t.error,t):new Event(t.type,t)}var GL=typeof process<"u"&&typeof process.versions?.node<"u"&&typeof document>"u",hd=GL?KL:WL,co={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Nv=!1,YL=class po extends EventTarget{_ws;_retryCount=-1;_uptimeTimeout;_connectTimeout;_shouldReconnect=!0;_connectLock=!1;_binaryType="blob";_closeCalled=!1;_messageQueue=[];_url;_protocols;_options;constructor(e,n,r={}){super(),this._url=e,this._protocols=n,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return po.CONNECTING}get OPEN(){return po.OPEN}get CLOSING(){return po.CLOSING}get CLOSED(){return po.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((n,r)=>(typeof r=="string"?n+=r.length:r instanceof Blob?n+=r.size:n+=r.byteLength,n),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?po.CLOSED:po.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}onclose=null;onerror=null;onmessage=null;onopen=null;close(e=1e3,n){if(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,n)}reconnect(e,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,n),this._connect())}send(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{const{maxEnqueuedMessages:n=co.maxEnqueuedMessages}=this._options;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}}_debug(...e){this._options.debug&&console.log.apply(console,["RWS>",...e])}_getNextDelay(){const{reconnectionDelayGrowFactor:e=co.reconnectionDelayGrowFactor,minReconnectionDelay:n=co.minReconnectionDelay,maxReconnectionDelay:r=co.maxReconnectionDelay}=this._options;let i=0;return this._retryCount>0&&(i=n*Math.pow(e,this._retryCount-1),i>r&&(i=r)),this._debug("next delay",i),i}_wait(){return new Promise(e=>{setTimeout(e,this._getNextDelay())})}_getNextProtocols(e){if(!e)return Promise.resolve(null);if(typeof e=="string"||Array.isArray(e))return Promise.resolve(e);if(typeof e=="function"){const n=e();if(!n)return Promise.resolve(null);if(typeof n=="string"||Array.isArray(n))return Promise.resolve(n);if(n.then)return n}throw Error("Invalid protocols")}_getNextUrl(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){const n=e();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;const{maxRetries:e=co.maxRetries,connectionTimeout:n=co.connectionTimeout}=this._options;if(this._retryCount>=e){this._debug("max retries reached",this._retryCount,">=",e);return}this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)])).then(([r,i])=>{if(this._closeCalled){this._connectLock=!1;return}!this._options.WebSocket&&typeof WebSocket>"u"&&!Nv&&(console.error(`‼️ No WebSocket implementation available. You should define options.WebSocket. 

For example, if you're using node.js, run \`npm install ws\`, and then in your code:

import PartySocket from 'partysocket';
import WS from 'ws';

const partysocket = new PartySocket({
  host: "127.0.0.1:1999",
  room: "test-room",
  WebSocket: WS
});

`),Nv=!0);const s=this._options.WebSocket||WebSocket;this._debug("connect",{url:r,protocols:i}),this._ws=i?new s(r,i):new s(r),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),n)}).catch(r=>{this._connectLock=!1,this._handleError(new Tg.ErrorEvent(Error(r.message),this))})}_handleTimeout(){this._debug("timeout event"),this._handleError(new Tg.ErrorEvent(Error("TIMEOUT"),this))}_disconnect(e=1e3,n){if(this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,n),this._handleClose(new Tg.CloseEvent(e,n,this))}catch{}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_handleOpen=e=>{this._debug("open event");const{minUptime:n=co.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),n),HL(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(r=>this._ws?.send(r)),this._messageQueue=[],this.onopen&&this.onopen(e),this.dispatchEvent(hd(e))};_handleMessage=e=>{this._debug("message event"),this.onmessage&&this.onmessage(e),this.dispatchEvent(hd(e))};_handleError=e=>{this._debug("error event",e.message),this._disconnect(void 0,e.message==="TIMEOUT"?"timeout":void 0),this.onerror&&this.onerror(e),this._debug("exec error listeners"),this.dispatchEvent(hd(e)),this._connect()};_handleClose=e=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(e),this.dispatchEvent(hd(e))};_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}};/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */const tp=C.forwardRef(function(e,n){const r=$e(19);e=cR(e,"avatar");let i,s,o;r[0]!==e?({alt:o,size:i,...s}=e,r[0]=e,r[1]=i,r[2]=s,r[3]=o):(i=r[1],s=r[2],o=r[3]);const l=i===void 0?"regular":i,a=Si(s),c=l==="regular"?void 0:l;let u;r[4]!==s?(u=pi(s),r[4]=s,r[5]=u):u=r[5];let d;r[6]!==a.className?(d=Ye(a.className,W({alignItems:"center",backgroundColor:j.color.background.surfaceTertiary,borderRadius:"50%",display:"inline-flex",flexShrink:0,fontSize:"var(--avatar-text-size)",height:"var(--avatar-size)",justifyContent:"center",overflow:"hidden",width:"var(--avatar-size)",userSelect:"none","--avatar-size":j.size.element.regular,"--avatar-text-size":j.typography.text.regular.size,"&[data-size=xsmall]":{"--avatar-size":j.size.element.xsmall,"--avatar-text-size":j.typography.text.small.size},"&[data-size=small]":{"--avatar-size":j.size.element.small,"--avatar-text-size":j.typography.text.small.size},"&[data-size=medium]":{"--avatar-size":j.size.element.medium,"--avatar-text-size":j.typography.text.medium.size},"&[data-size=large]":{"--avatar-size":j.size.element.large,"--avatar-text-size":j.typography.text.large.size},"&[data-size=xlarge]":{"--avatar-size":j.size.element.xlarge,"--avatar-text-size":j.typography.text.large.size}})),r[6]=a.className,r[7]=d):d=r[7];let f;r[8]!==e||r[9]!==l?(f="src"in e?h.jsx("div",{className:W({height:"100%",width:"100%"}),style:{backgroundImage:`url(${e.src})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}):h.jsx(Y,{"aria-hidden":!0,color:"neutralSecondary",weight:"medium",UNSAFE_className:W({fontSize:"inherit"}),children:JL(e.name,l)}),r[8]=e,r[9]=l,r[10]=f):f=r[10];let p;return r[11]!==n||r[12]!==o||r[13]!==c||r[14]!==a||r[15]!==u||r[16]!==d||r[17]!==f?(p=h.jsx("div",{ref:n,role:"img","aria-label":o,"data-size":c,...a,...u,className:d,children:f}),r[11]=n,r[12]=o,r[13]=c,r[14]=a,r[15]=u,r[16]=d,r[17]=f,r[18]=p):p=r[18],p});function JL(t,e){const n=t.split(" "),r=n[0].charAt(0),i=n[n.length-1].charAt(0);return e==="xsmall"?`${r}`.toUpperCase():`${r}${i}`.toUpperCase()}const uA=C.createContext(null);function ZL(t){const e=q(17);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>window.location.href,e[0]=n):n=e[0];const[r,i]=C.useState(n);let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=function(S,k){const E=new URL(S,window.location.href);if(E.origin!==window.location.origin||!E.pathname.startsWith("/keystatic")){window.location.assign(E);return}window.history[k?"replaceState":"pushState"](null,"",E),C.startTransition(()=>{i(E.toString())})},e[1]=s):s=e[1];const o=s;let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=function(S){o(S,!0)},e[2]=l):l=e[2];const a=l;let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=function(S){o(S,!1)},e[3]=c):c=e[3];const u=c;let d,f;if(e[4]!==r){f=new URL(r);const w=f.pathname.replace(/^\/keystatic\/?/,"");d=w===""?[]:w.split("/").map(decodeURIComponent),e[4]=r,e[5]=d,e[6]=f}else d=e[5],f=e[6];const p=d,g=f.pathname+f.search;let m;e[7]!==g||e[8]!==f.pathname||e[9]!==f.search||e[10]!==p?(m={href:g,pathname:f.pathname,search:f.search,replace:a,push:u,params:p},e[7]=g,e[8]=f.pathname,e[9]=f.search,e[10]=p,e[11]=m):m=e[11];const b=m;let y,x;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{const w=()=>{C.startTransition(()=>{i(window.location.href)})};return window.addEventListener("popstate",w),()=>{window.removeEventListener("popstate",w)}},x=[],e[12]=y,e[13]=x):(y=e[12],x=e[13]),C.useEffect(y,x);let v;return e[14]!==b||e[15]!==t.children?(v=h.jsx(uA.Provider,{value:b,children:t.children}),e[14]=b,e[15]=t.children,e[16]=v):v=e[16],v}function ft(){const t=C.useContext(uA);if(t==null)throw new Error("useRouter must be used within a RouterProvider");return t}const pd=Symbol("emptyCacheNode");function XL(t){const e={value:pd,strong:void 0,weak:void 0};return(...n)=>{let r=e;for(const s of n){if(typeof s=="string"||typeof s=="number"){r.strong===void 0&&(r.strong=new Map),r.strong.has(s)||r.strong.set(s,{value:pd,strong:void 0,weak:void 0}),r=r.strong.get(s);continue}if(typeof s=="object"){r.weak===void 0&&(r.weak=new WeakMap),r.weak.has(s)||r.weak.set(s,{value:pd,strong:void 0,weak:void 0}),r=r.weak.get(s);continue}}if(r.value!==pd)return r.value;const i=t(...n);return r.value=i,i}}function Wt(t){return t.replace(/^\.?\/+/,"").replace(/\/*$/,"")}const QL=/\/\*\*?(?:$|\/)/;function np(t,e){var n;const i=(n=t.collections[e].path)!==null&&n!==void 0?n:`${e}/*/`;if(!QL.test(i))throw new Error(`Collection path must end with /* or /** or include /*/ or /**/ but ${e} has ${i}`);return i}function C0(t,e){const n=np(t,e);return Wt(n.replace(/\*\*?.*$/,""))}function Ir(t,e){return fA(t,"collections",e)}function nu(t,e){return fA(t,"singletons",e)}function $n(t,e,n){const r=C0(t,e),i=dA(t,e);return`${r}/${n}${i}`}function Fa(t,e){return`${t}${e.dataLocation==="index"?"/index":""}${$u(e)}`}function E0(t,e){return np(t,e).includes("**")?"**":"*"}function dA(t,e){const n=np(t,e),r=Wt(n.replace(/^[^*]+\*\*?/,""));return r?`/${r}`:""}function Pu(t,e){var n,r;if((n=t.singletons[e].path)!==null&&n!==void 0&&n.includes("*"))throw new Error(`Singleton paths cannot include * but ${e} has ${t.singletons[e].path}`);return Wt((r=t.singletons[e].path)!==null&&r!==void 0?r:e)}function $u(t){return t.contentField?t.contentField.contentExtension:"."+t.data}const fA=XL(eB);function eB(t,e,n){var r,i;const s=e==="collections"?t.collections[n]:t.singletons[n],l=(e==="collections"?np(t,n):(r=s.path)!==null&&r!==void 0?r:`${n}/`).endsWith("/")?"index":"outer",{schema:a,format:c="yaml"}=s;if(typeof c=="string")return{dataLocation:l,contentField:void 0,data:c};let u;if(c.contentField){let d={kind:"object",fields:a},f=Array.isArray(c.contentField)?c.contentField:[c.contentField],p;try{p=ay(f,d,()=>JSON.stringify(c.contentField))}catch(g){throw g instanceof go?new Error(`${g.message} (${e}.${n})`):g}u={path:f,contentExtension:p}}return{data:(i=c.data)!==null&&i!==void 0?i:"yaml",contentField:u,dataLocation:l}}class go extends Error{constructor(e){super(e)}}function ay(t,e,n){if(t.length===0){if(e.kind!=="form"||e.formKind!=="content")throw new go(`Content field for ${n()} is not a content field`);return e.contentExtension}if(e.kind==="object"){const r=e.fields[t[0]];if(!r)throw new go(`Field ${n()} specified in contentField does not exist`);return ay(t.slice(1),r,n)}if(e.kind==="conditional"){if(t[0]!=="value")throw new go(`Conditional fields referenced in a contentField path must only reference the value field (${n()})`);let r;const i=t.slice(1);for(const s of Object.values(e.values)){const o=ay(i,s,n);if(!r){r=o;continue}if(r!==o)throw new go(`contentField ${n()} has conflicting content extensions`)}if(!r)throw new go(`contentField ${n()} does not point to a content field`);return r}throw new go(`Path specified in contentField ${n()} does not point to a content field`)}function Xs(t){if(!(t.kind==="local"||!t.pathPrefix))return Wt(t.pathPrefix)+"/"}async function hA(t){const e=await crypto.subtle.digest("SHA-1",t);return LL(new Uint8Array(e))}const Ic=new TextEncoder,Ng=new WeakMap;async function I0(t){const e=Ng.get(t);if(e!==void 0)return e;const n=Ic.encode("blob "+t.length+"\0"),r=new Uint8Array(n.byteLength+t.byteLength);r.set(n,0),r.set(t,n.byteLength);const i=hA(r);return Ng.set(t,i),i.then(s=>Ng.set(t,s)),i}function Ki(t,e){const n=e.split("/");let r=t.get(n[0]);for(const i of n.slice(1)){if(!r||!r.children)return;r=r.children.get(i)}return r}function jv(t,e){if(e==="")return t;let n=t;for(const r of e.split("/")){n.has(r)||n.set(r,new Map);const i=n.get(r);Ue(i instanceof Map,"expected tree"),n=i}return n}function _v(t){return t.replace(/.*\//,"")}function Ov(t){return t.includes("/")?t.replace(/\/[^/]+$/,""):""}function tB(t){const e=new Map;for(const n of t.deletions)jv(e,Ov(n)).set(_v(n),"delete");for(const n of t.additions)jv(e,Ov(n.path)).set(_v(n.path),n.contents);return e}const nB=32,rB=new Uint8Array([nB]),Rv=new Uint8Array([0]),iB=Ic.encode("tree ");function Lu(t){const e=[...t].map(([r,i])=>({name:r,sha:i.entry.sha,mode:i.entry.mode}));e.sort((r,i)=>{const s=r.mode==="040000"?r.name+"/":r.name,o=i.mode==="040000"?i.name+"/":i.name;return s===o?0:s<o?-1:1});const n=e.flatMap(r=>{const i=Ic.encode(r.mode.replace(/^0/,"")),s=Ic.encode(r.name),o=oB(r.sha);return[i,rB,s,Rv,o]});return hA(sB([iB,Ic.encode(n.reduce((r,i)=>r+i.byteLength,0).toString()),Rv,...n]))}function sB(t){const e=t.reduce((i,s)=>i+s.byteLength,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}function oB(t){const e=new Uint8Array(t.length/2);for(var n=0;n<e.byteLength;n+=1){const r=n*2;e[n]=parseInt(t.slice(r,r+2),16)}return e}async function lB(t,e){const n=await Lu(e);return{path:t,mode:"040000",type:"tree",sha:n}}async function aB(t,e){const n="sha"in e?e.sha:await I0(e);return{path:t,mode:"100644",type:"blob",sha:n}}async function pA(t,e){var n;const r=(n=await gA(t,tB(e),[]))!==null&&n!==void 0?n:new Map;return{entries:Uf(r),sha:await Lu(r??new Map)}}function Uf(t){return[...t.values()].flatMap(e=>e.children?[e.entry,...Uf(e.children)]:[e.entry])}async function gA(t,e,n){const r=new Map(t);for(const[o,l]of e){if(l==="delete"&&r.delete(o),l instanceof Map){var i,s;const a=(i=(s=r.get(o))===null||s===void 0?void 0:s.children)!==null&&i!==void 0?i:new Map,c=await gA(a,l,n.concat(o));if(c===void 0){r.delete(o);continue}const u=await lB(n.concat(o).join("/"),c);r.set(o,{entry:u,children:c})}if(l instanceof Uint8Array||typeof l=="object"&&"sha"in l){const a=await aB(n.concat(o).join("/"),l);r.set(o,{entry:a})}}if(r.size!==0)return r}function A0(t){const e=new Map,n=r=>{var i;if(r.length===0)return e;let s=e.get(r[0]);for(const o of r.slice(1)){if(!s||!s.children)return;s=s.children.get(o)}return(i=s)===null||i===void 0?void 0:i.children};for(const r of t){const i=r.path.split("/"),s=n(i.slice(0,-1));s&&s.set(i[i.length-1],{entry:r,children:r.type==="tree"?new Map:void 0})}return e}function cB(t){const e={inner:new WeakMap};return function(...n){let r=e;for(const i of n){const{inner:s}=r;s.has(i)||s.set(i,{inner:new WeakMap}),r=s.get(i)}return r.hasOwnProperty("value")||(r.value=t(...n)),r.value}}const xr={then(){}};function gd(t){return t&&typeof t.then=="function"}function jg(t){if(t.kind==="error")throw t.error;if(t.kind==="loaded")return t.data;throw t.promise}function dr(t){const e=C.useMemo(()=>{try{const o=t();return gd(o)&&o.then(()=>{},()=>{}),{kind:"result",result:o}}catch(o){return{kind:"error",error:o}}},[t]),[n,r]=C.useState(()=>e.kind==="result"?gd(e.result)?{kind:"loading",promise:e.result}:{kind:"loaded",data:e.result}:e);let i=n;const s=C.useMemo(()=>{if(e.kind==="error"&&(n.kind!=="error"||n.error!==e.error))return{kind:"error",error:e.error};if(e.kind==="result"&&!gd(e.result)&&(n.kind!=="loaded"||n.data!==e.result))return{kind:"loaded",data:e.result}},[e,n]);return s&&s!==n&&(i=s,r(s)),C.useEffect(()=>{if(e.kind==="result"&&gd(e.result)){r({kind:"loading",promise:e.result});let o=!0;return e.result.then(l=>{o&&r({kind:"loaded",data:l})},l=>{o&&r({kind:"error",error:l})}),()=>{o=!1}}},[e]),i}function Dv(t,e){return t.kind==="error"||t.kind==="loading"?t:{kind:"loaded",data:e(t.data)}}function mA(t){const e=Object.entries(t);for(const[,r]of e)if(r.kind==="error")return{kind:"error",error:r.error};let n=[];for(const[,r]of e)r.kind==="loading"&&n.push(r.promise);return n.length?{kind:"loading",promise:uB(...n)}:{kind:"loaded",data:Object.fromEntries(e.map(([r,i])=>[r,i.data]))}}const uB=cB((...t)=>Promise.all(t));function $d(t,e,n){if(!n.has(t)){if(n.add(t),t.kind==="array")return $d(t.element,e,n);if(t.kind!=="child"){if(t.kind==="form"){if(t.formKind==="asset"&&t.directory!==void 0&&e.add(Wt(t.directory)),(t.formKind==="content"||t.formKind==="assets")&&t.directories!==void 0)for(const r of t.directories)e.add(Wt(r));return}if(t.kind==="object"){for(const r of Object.values(t.fields))$d(r,e,n);return}if(t.kind==="conditional"){for(const r of Object.values(t.values))$d(r,e,n);return}rn(t)}}}function rp(t){const e=new Set;return $d(t,e,new Set),e}function yA(t,e,n,r){const i=[Wt(e)];r.dataLocation==="outer"&&i.push(Wt(e)+$u(r));const s=n===void 0?"":`/${n}`;for(const o of rp(t))i.push(o+s);return i}function Ac(t,e){return t.map(n=>{var r;return(r=Ki(e,n))===null||r===void 0?void 0:r.entry.sha}).join("-")}var bA={name:"@keystatic/core",version:"0.5.42",license:"MIT",repository:{type:"git",url:"https://github.com/Thinkmill/keystatic/",directory:"packages/keystatic"},type:"module",exports:{"./ui":{types:"./dist/keystatic-core-ui.js",node:{"react-server":"./dist/keystatic-core-ui.node.react-server.js",default:"./dist/keystatic-core-ui.node.js"},"react-server":"./dist/keystatic-core-ui.react-server.js",worker:"./dist/keystatic-core-ui.worker.js",default:"./dist/keystatic-core-ui.js"},".":{types:"./dist/keystatic-core.js",node:{"react-server":"./dist/keystatic-core.node.react-server.js",default:"./dist/keystatic-core.node.js"},"react-server":"./dist/keystatic-core.react-server.js",worker:"./dist/keystatic-core.worker.js",default:"./dist/keystatic-core.js"},"./api/utils":{types:"./dist/keystatic-core-api-utils.js",node:{"react-server":"./dist/keystatic-core-api-utils.node.react-server.js",default:"./dist/keystatic-core-api-utils.node.js"},"react-server":"./dist/keystatic-core-api-utils.react-server.js",worker:"./dist/keystatic-core-api-utils.worker.js",default:"./dist/keystatic-core-api-utils.js"},"./renderer":{types:"./dist/keystatic-core-renderer.js",node:{"react-server":"./dist/keystatic-core-renderer.node.react-server.js",default:"./dist/keystatic-core-renderer.node.js"},"react-server":"./dist/keystatic-core-renderer.react-server.js",worker:"./dist/keystatic-core-renderer.worker.js",default:"./dist/keystatic-core-renderer.js"},"./api/generic":{types:"./dist/keystatic-core-api-generic.js",node:{"react-server":"./dist/keystatic-core-api-generic.node.react-server.js",default:"./dist/keystatic-core-api-generic.node.js"},"react-server":"./dist/keystatic-core-api-generic.react-server.js",worker:"./dist/keystatic-core-api-generic.worker.js",default:"./dist/keystatic-core-api-generic.js"},"./reader":{types:"./dist/keystatic-core-reader.js",node:{"react-server":"./dist/keystatic-core-reader.node.react-server.js",default:"./dist/keystatic-core-reader.node.js"},"react-server":"./dist/keystatic-core-reader.react-server.js",worker:"./dist/keystatic-core-reader.worker.js",default:"./dist/keystatic-core-reader.js"},"./reader/github":{types:"./dist/keystatic-core-reader-github.js",node:{"react-server":"./dist/keystatic-core-reader-github.node.react-server.js",default:"./dist/keystatic-core-reader-github.node.js"},"react-server":"./dist/keystatic-core-reader-github.react-server.js",worker:"./dist/keystatic-core-reader-github.worker.js",default:"./dist/keystatic-core-reader-github.js"},"./content-components":{types:"./dist/keystatic-core-content-components.js",node:{"react-server":"./dist/keystatic-core-content-components.node.react-server.js",default:"./dist/keystatic-core-content-components.node.js"},"react-server":"./dist/keystatic-core-content-components.react-server.js",worker:"./dist/keystatic-core-content-components.worker.js",default:"./dist/keystatic-core-content-components.js"},"./component-blocks":{types:"./dist/keystatic-core-component-blocks.js",node:{"react-server":"./dist/keystatic-core-component-blocks.node.react-server.js",default:"./dist/keystatic-core-component-blocks.node.js"},"react-server":"./dist/keystatic-core-component-blocks.react-server.js",worker:"./dist/keystatic-core-component-blocks.worker.js",default:"./dist/keystatic-core-component-blocks.js"},"./package.json":"./package.json"},files:["dist"],scripts:{setup:"ts-gql build && tsx scripts/l10n.cts && tsx scripts/build-prism.cts",build:"pnpm run setup && next build",dev:"next dev",start:"next start"},dependencies:{"@babel/runtime":"^7.18.3","@braintree/sanitize-url":"^6.0.2","@emotion/css":"^11.9.0","@emotion/weak-memoize":"^0.3.0","@floating-ui/react":"^0.24.0","@internationalized/string":"^3.2.3","@keystar/ui":"workspace:^","@markdoc/markdoc":"^0.4.0","@react-aria/focus":"^3.18.1","@react-aria/i18n":"^3.12.1","@react-aria/interactions":"^3.22.1","@react-aria/label":"^3.7.11","@react-aria/overlays":"^3.23.2","@react-aria/selection":"^3.19.3","@react-aria/utils":"^3.25.1","@react-aria/visually-hidden":"^3.8.15","@react-stately/collections":"^3.10.9","@react-stately/list":"^3.10.8","@react-stately/overlays":"^3.6.10","@react-stately/utils":"^3.10.3","@react-types/shared":"^3.24.1","@sindresorhus/slugify":"^1.1.2","@toeverything/y-indexeddb":"^0.10.0-canary.9","@ts-gql/tag":"^0.7.3","@types/react":"^18.2.8","@urql/core":"^5.0.4","@urql/exchange-auth":"^2.2.0","@urql/exchange-graphcache":"^7.1.2","@urql/exchange-persisted":"^4.3.0",cookie:"^1.0.0",emery:"^1.4.1","escape-string-regexp":"^4.0.0","fast-deep-equal":"^3.1.3",graphql:"^16.6.0","idb-keyval":"^6.2.1",ignore:"^5.2.4","is-hotkey":"^0.2.0","js-yaml":"^4.1.0",lib0:"^0.2.88","lru-cache":"^10.2.0","match-sorter":"^6.3.1","mdast-util-from-markdown":"^2.0.0","mdast-util-gfm-autolink-literal":"^2.0.0","mdast-util-gfm-strikethrough":"^2.0.0","mdast-util-gfm-table":"^2.0.0","mdast-util-mdx":"^3.0.0","mdast-util-to-markdown":"^2.1.0","micromark-extension-gfm-autolink-literal":"^2.0.0","micromark-extension-gfm-strikethrough":"^2.0.0","micromark-extension-gfm-table":"^2.0.0","micromark-extension-mdxjs":"^3.0.0",minimatch:"^9.0.3",partysocket:"^0.0.22","prosemirror-commands":"^1.5.1","prosemirror-history":"^1.3.0","prosemirror-keymap":"^1.2.1","prosemirror-model":"^1.19.0","prosemirror-state":"^1.4.2","prosemirror-tables":"^1.3.4","prosemirror-transform":"^1.7.1","prosemirror-view":"^1.30.2","scroll-into-view-if-needed":"^3.0.3",slate:"^0.91.4","slate-history":"^0.86.0","slate-react":"^0.91.9",superstruct:"^1.0.4","unist-util-visit":"^5.0.0",urql:"^4.1.0","y-prosemirror":"^1.2.2","y-protocols":"^1.0.6",yjs:"^13.6.11"},devDependencies:{"@internationalized/string-compiler":"^3.2.4","@jest/expect":"^29.7.0","@jest/globals":"^29.7.0","@testing-library/user-event":"^14.4.3","@ts-gql/compiler":"^0.16.7","@ts-gql/eslint-plugin":"^0.9.1","@ts-gql/next":"^17.0.1","@types/is-hotkey":"^0.1.7","@types/js-yaml":"^4.0.5","@types/mdast":"^4.0.3","@types/node":"16.11.13","@types/prismjs":"^1.26.0","@types/react-dom":"^18.0.11","@types/signal-exit":"^3.0.1",eslint:"^8.18.0","fast-glob":"^3.2.12","jest-diff":"^29.0.1",outdent:"^0.8.0","pretty-format":"^29.0.1",prismjs:"^1.29.0",react:"^18.2.0","react-dom":"^18.2.0","react-element-to-jsx-string":"^15.0.0","resize-observer-polyfill":"^1.5.1","signal-exit":"^3.0.7","slate-hyperscript":"^0.77.0",tsx:"^4.8.2",typescript:"^5.5.3"},peerDependencies:{react:"^18.2.0","react-dom":"^18.2.0"},preconstruct:{entrypoints:["index.ts","api/generic.ts","api/utils.ts","reader/index.ts","reader/github.ts","renderer.tsx","ui.tsx","component-blocks/index.tsx","content-components.ts"]},"ts-gql":{schema:"./github.graphql",mode:"no-transform",addTypename:!1,scalars:{GitObjectID:"string"}},imports:{"#react-cache-in-react-server":{"react-server":"./src/reader/react-server-cache.ts",default:"./src/reader/noop-cache.ts"},"#sha1":{node:"./src/sha1/node.ts",default:"./src/sha1/webcrypto.ts"},"#webcrypto":{node:"./src/api/webcrypto/node.ts",default:"./src/api/webcrypto/default.ts"},"#api-handler":{node:"./src/api/api-node.ts",default:"./src/api/api-noop.ts"},"#ui":{node:"./src/app/ui-empty.tsx",worker:"./src/app/ui-empty.tsx","react-server":"./src/app/ui-empty.tsx",default:"./src/app/ui.tsx"},"#field-ui/*":{node:"./src/form/fields/empty-field-ui.tsx",worker:"./src/form/fields/empty-field-ui.tsx","react-server":"./src/form/fields/empty-field-ui.tsx",default:"./src/form/fields/*/ui.tsx"},"#component-block-primitives":{node:"./src/form/fields/document/DocumentEditor/primitives/blank-for-react-server.tsx",worker:"./src/form/fields/document/DocumentEditor/primitives/blank-for-react-server.tsx","react-server":"./src/form/fields/document/DocumentEditor/primitives/blank-for-react-server.tsx",default:"./src/form/fields/document/DocumentEditor/primitives/index.tsx"},"#cloud-image-preview":{node:"./src/component-blocks/blank-for-react-server.tsx",worker:"./src/component-blocks/blank-for-react-server.tsx","react-server":"./src/component-blocks/blank-for-react-server.tsx",default:"./src/component-blocks/cloud-image-preview.tsx"},"#markdoc":"./src/markdoc.js","#base64":"./src/base64.ts","#react-compiler-runtime":"./src/react-compiler-runtime.ts"}};function en(t,e){return{...e,kind:"object",fields:t}}const dB={seconds:60,minutes:60,hours:24,days:7,weeks:4,months:12,years:1/0};function fB(t,e,n){let r=(t.getTime()-e.getTime())/1e3;for(const[i,s]of Object.entries(dB)){if(Math.abs(r)<s)return n.format(Math.round(r),i);r/=s}return"unknown"}function hB(t){const e=q(10),{locale:n}=ro();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>new Date,e[0]=r):r=e[0];const[i]=C.useState(r);let s,o;if(e[1]!==n||e[2]!==t.date||e[3]!==i){const u=new Intl.RelativeTimeFormat(n);u.format(t.date.getTime()-i.getTime(),"second"),o=fB(t.date,i,u),e[1]=n,e[2]=t.date,e[3]=i,e[4]=o}else o=e[4];s=o;const l=s;let a;e[5]!==t.date?(a=t.date.toISOString(),e[5]=t.date,e[6]=a):a=e[6];let c;return e[7]!==a||e[8]!==l?(c=h.jsx("time",{dateTime:a,children:l}),e[7]=a,e[8]=l,e[9]=c):c=e[9],c}function pB(t,e){qi.info(h.jsxs(Y,{children:["Restored draft from ",h.jsx(hB,{date:t}),"."," ",e&&h.jsx(Y,{color:"accent",children:"Other changes have been made to this entry since the draft. You may want to discard the draft changes."})]}),{timeout:8e3})}let _g;function ip(){return _g||(_g=Qh("keystatic","items")),_g}function T0(t,e){return rA(t,e,ip())}function N0(t){return zL(t,ip())}function j0(t){return nA(t,ip())}async function gB(){await oy(ip())}function xA(t,e){return t.collections[e]}function _0(t){return t.storage.kind!=="local"?t.storage.branchPrefix:void 0}function bi(t){return t.storage.kind==="github"}function Pa(t){return t.storage.kind==="local"}function cy(t){var e;if(t.storage.kind!=="cloud")return!1;if(!((e=t.cloud)!==null&&e!==void 0&&e.project)||!t.cloud.project.includes("/"))throw new Error("Keystatic is set to `storage: { kind: 'cloud' }` but `cloud.project` isn't set.\nconfig({\n  storage: { kind: 'cloud' },\n  cloud: { project: 'team/project' },\n})");return!0}function mB(t){var e;if(!((e=t.cloud)!==null&&e!==void 0&&e.project))return;const[n,r]=t.cloud.project.split("/");return{team:n,project:r}}function yB(t){return`${t.owner}/${t.name}`}function ru(t){return`https://github.com/${yB(t)}`}function _t(t,e){const n=e[t.slugField],r=t.schema[t.slugField];if(r.kind!=="form"||r.formKind!=="slug")throw new Error("slugField is not a slug field");return r.serializeWithSlug(n).slug}function iu(t,e,n){var r,i;const s=t.collections[e],o=en(s.schema),l=Ir(t,e),a=$u(l),c=E0(t,e),u=C0(t,e),d=(r=(i=Ki(n,u))===null||i===void 0?void 0:i.children)!==null&&r!==void 0?r:new Map,f=[],p=[...rp(o)],g=dA(t,e),m=new Map(d);if(c==="**"){const y=(x,v)=>{for(const[w,S]of x)S.children?(m.set(`${v}${w}`,S),y(S.children,`${v}${w}/`)):m.set(`${v}${w}`,S)};y(d,"")}for(const[y,x]of m)if(l.dataLocation==="index"){var b;const v=Ki(n,$n(t,e,y));if(!(v!=null&&(b=v.children)!==null&&b!==void 0&&b.has("index"+a)))continue;f.push({key:Ac([v.entry.path,...p.map(w=>`${w}/${y}`)],n),slug:y,sha:v.children.get("index"+a).entry.sha})}else{if(g){const w=Ki(n,$n(t,e,y)+a);if(!w||w.children)continue;f.push({key:Ac([x.entry.path,$n(t,e,y),...p.map(S=>`${S}/${y}`)],n),slug:y,sha:w.entry.sha})}if(x.children||!y.endsWith(a))continue;const v=y.slice(0,-a.length);f.push({key:Ac([x.entry.path,$n(t,e,v),...p.map(w=>`${w}/${v}`)],n),slug:v,sha:x.entry.sha})}return f}const ls="https://api.keystatic.cloud",vA=bA.version,so={"x-keystatic-version":vA},bB=new TextEncoder;async function Bu(t,e){var n;if(!((n=e.cloud)!==null&&n!==void 0&&n.project))throw new Error("Not a cloud config");const r=Fo(crypto.getRandomValues(new Uint8Array(32))),i=Fo(new Uint8Array(await crypto.subtle.digest("SHA-256",bB.encode(r)))),s=Fo(crypto.getRandomValues(new Uint8Array(32)));localStorage.setItem("keystatic-cloud-state",JSON.stringify({state:s,from:t,code_verifier:r}));const o=new URL(`${ls}/oauth/authorize`);o.searchParams.set("state",s),o.searchParams.set("client_id",e.cloud.project),o.searchParams.set("redirect_uri",`${window.location.origin}/keystatic/cloud/oauth/callback`),o.searchParams.set("response_type","code"),o.searchParams.set("code_challenge_method","S256"),o.searchParams.set("code_challenge",i),o.searchParams.set("keystatic_version",bA.version),window.location.href=o.toString()}function O0(t,e,n){const r=q(8);let i;r[0]!==t||r[1]!==e||r[2]!==n?(i=()=>{t&&e===t.state&&pB(t.savedAt,n!==t.treeKey)},r[0]=t,r[1]=e,r[2]=n,r[3]=i):i=r[3];const s=FO(i);let o,l;r[4]!==t||r[5]!==s?(o=()=>{t&&s()},l=[t,s],r[4]=t,r[5]=s,r[6]=o,r[7]=l):(o=r[6],l=r[7]),C.useEffect(o,l)}const xB=Fh({token:He(),project:He(),validUntil:gE(Dh(),fa(),t=>new Date(t))});function uy(t){if(typeof document>"u")return null;if(t.storage.kind==="github"){const n=RI.parse(document.cookie)["keystatic-gh-access-token"];return n?{accessToken:n}:null}return t.storage.kind==="cloud"?zu(t):null}function zu(t){var e;if(!((e=t.cloud)!==null&&e!==void 0&&e.project))return null;const n=localStorage.getItem("keystatic-cloud-access-token");let r;try{r=xB.create(JSON.parse(n))}catch{return null}return!r||r.validUntil<new Date||r.project!==t.cloud.project?null:{accessToken:r.token}}let md;async function el(t){const e=uy(t);return t.storage.kind==="github"&&!e?(md||(md=(async()=>{try{if((await fetch("/api/keystatic/github/refresh-token",{method:"POST"})).status===200){const i=RI.parse(document.cookie)["keystatic-gh-access-token"];if(i)return{accessToken:i}}}catch{}finally{md=void 0}return null})()),md):e}const vB=Ht`
  fragment SidebarFooter_viewer on User {
    id
    name
    login
    avatarUrl
    databaseId
  }
`,kA=C.createContext(void 0);function wA(){return C.useContext(kA)}function Vu(t){if(typeof t=="string"){const[e,n]=t.split("/");return{owner:e,name:n}}return t}function tl(t){return typeof t=="string"?t:`${t.owner}/${t.name}`}function kB(t){if(typeof t=="string"&&!t.includes("/"))throw new Error(`Invalid repo config: ${t}. It must be in the form owner/name`);if(typeof t=="object"){if(!t.owner&&!t.name)throw new Error("Invalid repo config: owner and name are missing");if(!t.owner)throw new Error("Invalid repo config: owner is missing");if(!t.name)throw new Error("Invalid repo config: name is missing")}}function dy(t,e){const n=Xs(e.storage);if(!n)return t;const r=[];for(const i of t.entries.values())i.path.startsWith(n)&&r.push({...i,path:i.path.slice(n.length)});return{entries:new Map(r.map(i=>[i.path,i])),tree:A0(r)}}let Og;function sp(){return Og||(Og=Qh("keystatic-trees","trees")),Og}let Rg;function su(){return Rg||(Rg=Qh("keystatic-blobs","blobs")),Rg}function SA(t,e){return rA(t,e,su())}async function wB(t){const e=await nA(t,su());if(e instanceof Uint8Array)return e}let Ld;const CA=EF(Fh({path:He(),mode:He(),sha:He()}));function EA(){if(Ld)return Ld;const t=new Map;return UL(sp()).then(e=>{for(const[n,r]of e){if(typeof n!="string")continue;let i;try{i=CA.create(r)}catch{continue}t.set(n,i)}return Ld=t,t})}function fy(t,e,n=""){const r=new Map,i=e.get(t);if(i){for(const s of i){const o=(n===""?"":n+"/")+s.path;if(s.mode==="040000"){const l=fy(s.sha,e,o);if(l){r.set(s.path,l);continue}return}r.set(s.path,{entry:{mode:s.mode,path:o,sha:s.sha,type:s.mode==="120000"?"symlink":"blob"}})}return{entry:{mode:"040000",path:n,sha:t,type:"tree"},children:r}}}function SB(t){const e=EA();return e instanceof Map?fy(t,e):e.then(n=>fy(t,n))}async function CB(t){const e=new Map,n=[];for(const[a,c]of await EA()){if(typeof a!="string"){n.push(a);continue}let u;try{u=CA.create(c)}catch{n.push(a);continue}e.set(a,u)}const r=await VL(su()),i=new Set(r),s=new Set(t);for(const a of s){if(i.has(a)){i.delete(a);continue}const c=e.get(a);if(c){for(const u of c)s.add(u.sha);e.delete(a);continue}}const o=[...e.keys(),...n];await Promise.all([Av([...i],su()),Av([...e.keys(),...n],sp())]);for(const a of o){var l;(l=Ld)===null||l===void 0||l.delete(a)}}function EB(t,e){const n=[];return IA(t,e,n),BL(n,sp())}function IA(t,e,n){const r=[];for(const[i,s]of e)r.push({path:i.replace(/.*\//,""),mode:s.entry.mode,sha:s.entry.sha}),s.children&&IA(s.entry.sha,s.children,n);n.push([t,r])}async function IB(){await Promise.all([oy(su()),oy(sp())])}const ws=0,AA=3,Ul=1,hy=2,py=4,$a=[];$a[ws]=(t,e,n,r)=>{le(t,ws);const i=jI(e,t,n.doc,n);r&&i===qh&&!n.synced&&(n.synced=!0)};$a[AA]=(t,e,n)=>{le(t,Ul),yt(t,hc(n.awareness,Array.from(n.awareness.getStates().keys())))};$a[Ul]=(t,e,n)=>{R4(n.awareness,$t(e),n)};$a[hy]=(t,e,n)=>{s$(e,n.doc,NB)};$a[py]=(t,e,n,r)=>{const i=Br(e);le(t,ws);const s=n.getSubDoc(i);if(s){const o=jI(e,t,s,n);r&&o===qh&&s.emit("sync",[!0])}};const AB=1200,TB=2500,Mv=3e4,NB=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),gy=(t,e,n)=>{const r=Hn(e),i=mt(),s=ye(r),o=$a[s];return o?o(i,r,t,n,s):console.error("Unable to compute message"),i},TA=(t,e)=>{if(t.shouldConnect&&t.ws===null){const n=new e(t.url);n.binaryType="arraybuffer",t.ws=n,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1;let r={kind:"authenticating",queue:[]};n.onmessage=i=>{t.wsLastMessageReceived=Ks();const s=new Uint8Array(i.data);if(r.kind==="authenticating"){const o=Hn(s);if(Hc(o)===hy&&Hc(o)===2){const c=r.queue;r={kind:"authed"},t.onConnect(n);for(const u of c){const d=gy(t,u,!0);Sf(d)>1&&n.send(Qe(d))}return}r.queue.push(s)}else{const o=gy(t,s,!0);Sf(o)>1&&n.send(Qe(o))}},n.onclose=()=>{t.ws=null,t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,g0(t.awareness,Array.from(t.awareness.getStates().keys()).filter(i=>i!==t.doc.clientID),t),t.onStatus({status:"disconnected"})):t.wsUnsuccessfulReconnects++,setTimeout(TA,ai(UF(t.wsUnsuccessfulReconnects+1)*AB,TB),t)},n.onopen=async()=>{t.wsLastMessageReceived=Ks();const i=mt();le(i,hy),le(i,0),ci(i,await t.authToken()),n.send(Qe(i))},t.onStatus({status:"connecting"})}},yd=(t,e)=>{if(t.ws&&t.wsconnected){var n;(n=t.ws)===null||n===void 0||n.send(e)}t.bcconnected&&t.mux(()=>{Ol(t.bcChannel,e)})};class jB{#s;#o;#c;#h;constructor(e){var n,r,i;this.bcChannel=e.url,this.url=e.url,this.doc=e.doc,this.#s=(n=e.WebSocketPolyfill)!==null&&n!==void 0?n:WebSocket,this.awareness=e.awareness,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.wsUnsuccessfulReconnects=0,this.mux=_I(),this.#o=!1,this.authToken=e.authToken,this.ws=null,this.wsLastMessageReceived=0,this.onStatus=(r=e.onStatus)!==null&&r!==void 0?r:()=>{},this.onSynced=(i=e.onSynced)!==null&&i!==void 0?i:()=>{},this.shouldConnect=!1,this.subdocs=new Map,this.#c=null,e.resyncInterval!==void 0&&e.resyncInterval>0&&(this.#c=setInterval(()=>{if(this.ws){const s=mt();le(s,ws),ud(s,e.doc),this.ws.send(Qe(s))}},e.resyncInterval)),this.doc.on("subdocs",({added:s,removed:o,loaded:l})=>{s.forEach(a=>{this.subdocs.set(a.guid,a)}),o.forEach(a=>{a.off("update",this.#p(a)),this.subdocs.delete(a.guid)}),l.forEach(a=>{this.waitForConnection(()=>{const c=mt();le(c,py),ci(c,a.guid),ud(c,a),this.send(Qe(c),()=>{a.on("update",this.#p(a))})},1e3)})}),this.doc.on("update",this.#r),typeof window<"u"&&window.addEventListener("beforeunload",this.#I),e.awareness.on("update",this.#i),this.#h=setInterval(()=>{if(this.wsconnected&&Mv<Ks()-this.wsLastMessageReceived){var s;(s=this.ws)===null||s===void 0||s.close()}},Mv/10)}onConnect(e){this.wsconnecting=!1,this.wsconnected=!0,this.wsUnsuccessfulReconnects=0,this.onStatus({status:"connected"});const n=mt();if(le(n,ws),ud(n,this.doc),e.send(Qe(n)),this.awareness.getLocalState()!==null){const r=mt();le(r,Ul),yt(r,hc(this.awareness,[this.doc.clientID])),e.send(Qe(r))}}#E=e=>{this.mux(()=>{const n=gy(this,new Uint8Array(e),!1);Sf(n)>1&&Ol(this.bcChannel,Qe(n))})};#I=()=>{g0(this.awareness,[this.doc.clientID],"window unload")};waitForConnection=(e,n)=>{const r=this.ws;r?.readyState===1?e(r):setTimeout(()=>{this.waitForConnection(e,n)},n)};#i=({added:e,updated:n,removed:r})=>{const i=e.concat(n).concat(r),s=mt();le(s,Ul),yt(s,hc(this.awareness,i)),yd(this,Qe(s))};send=(e,n)=>{this.waitForConnection(r=>{r.send(e),typeof n<"u"&&n()},1e3)};get synced(){return this.#o}getSubDoc(e){return this.subdocs.get(e)}set synced(e){this.#o!==e&&(this.#o=e,this.onSynced(e),this.doc.emit("sync",[e]))}#p=OI(e=>n=>{const r=mt();le(r,py),ci(r,e.guid),uv(r,n),yd(this,Qe(r))});#r=(e,n)=>{if(n!==this){const r=mt();le(r,ws),uv(r,e),yd(this,Qe(r))}};destroy(){this.#c!==null&&clearInterval(this.#c),clearInterval(this.#h),this.disconnect(),typeof window<"u"&&window.removeEventListener("beforeunload",this.#I),this.awareness.off("update",this.#i),this.doc.off("update",this.#r)}connectBc(){this.bcconnected||(e$(this.bcChannel,this.#E),this.bcconnected=!0),this.mux(()=>{const e=mt();le(e,ws),ud(e,this.doc),Ol(this.bcChannel,Qe(e));const n=mt();le(n,ws),TI(n,this.doc),Ol(this.bcChannel,Qe(n));const r=mt();le(r,AA),Ol(this.bcChannel,Qe(r));const i=mt();le(i,Ul),yt(i,hc(this.awareness,[this.doc.clientID])),Ol(this.bcChannel,Qe(i))})}disconnectBc(){const e=mt();le(e,Ul),yt(e,hc(this.awareness,[this.doc.clientID],new Map)),yd(this,Qe(e)),this.bcconnected&&(t$(this.bcChannel,this.#E),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(TA(this,this.#s),this.connectBc())}}const R0=C.createContext(null),NA=0,jA=1,_A=2,OA=4,_B=5;function OB(t){const e=Hn(t);switch(ye(e)){case NA:return{kind:"sync"};case OA:return{kind:"sync-subdoc"};case jA:{const r=$t(e),i=[];{const s=Hn(r),o=ye(s);for(let l=0;l<o;l++){const a=ye(s);let c=ye(s);const u=JSON.parse(Br(s));i.push({clientID:a,clock:c,state:u})}}return{kind:"awareness",states:i}}case _A:return{kind:"auth"}}}function RB(t){const e=Hn(t);switch(ye(e)){case NA:return{kind:"sync"};case OA:return{kind:"sync-subdoc"};case jA:{const r=$t(e),i=[];{const s=Hn(r),o=ye(s);for(let l=0;l<o;l++){const a=ye(s);let c=ye(s);const u=JSON.parse(Br(s));i.push({clientID:a,clock:c,state:u})}}return{kind:"awareness",states:i}}case _A:return{kind:"auth"}}}function RA(){const t=C.useContext(R0);if(!t)throw new Error("CollabProvider not found");if(t==="loading")throw new Error("CollabProvider is loading");return t}function op(){return C.useContext(R0)}const Fv=!1,Bd=new Map,DA=C.createContext(Bd);function MA(){return C.useContext(DA)}const Dg=new WeakMap;function DB(t){var e;const n=ft(),r=Uu(),i=(e=t.config.cloud)===null||e===void 0?void 0:e.project,s=`ks-multiplayer-${i}`,o=r===null?localStorage.getItem(s)==="true":r.team.multiplayer,l=C.useMemo(()=>{if(!o)return;const d=new Wn,f=d.getMap("data"),p=new O4(d),g=Z4(d,`keystatic-2-${i}`),m=new jB({doc:d,url:`wss://live.keystatic.cloud/${i}?v=${vA}`,WebSocketPolyfill:class extends YL{constructor(b){super(b),this.addEventListener("message",y=>{y.data instanceof ArrayBuffer&&Fv&&console.log("recv",RB(new Uint8Array(y.data)))})}send(b){b instanceof Uint8Array&&Fv&&console.log("send",OB(b));const y=1e6;if(b instanceof Uint8Array&&b.byteLength>y){const x=Math.ceil(b.byteLength/y),v=mt();le(v,_B),le(v,x),super.send(Qe(v));for(let w=0;w<x;w++){const S=w*y,k=Math.min((w+1)*y,b.byteLength);super.send(b.slice(S,k))}return}super.send(b)}},awareness:p,authToken:async()=>el(t.config).then(b=>{var y;return(y=b?.accessToken)!==null&&y!==void 0?y:""})});return{doc:d,awareness:p,provider:m,data:f,idb:g}},[o,i,t.config]),a=bn();C.useEffect(()=>{l?.awareness.setLocalStateField("branch",a),l?.awareness.setLocalStateField("location",n.params.slice(2).join("/"))},[a,n.params,l?.awareness]);const c=!!a;C.useEffect(()=>{if(c&&l){l.idb.connect();let d=!1;const f=l.idb.subscribeStatusChange(()=>{(l.idb.status.type==="synced"||l.idb.status.type==="error")&&(f(),l.provider.connect(),d=!0)});return()=>{l.idb.disconnect(),d?l.provider.disconnect():f()}}},[l,c]),C.useEffect(()=>{if(r===null)return;const d=`ks-multiplayer-${i}`;r.team.multiplayer?localStorage.setItem(d,"true"):localStorage.removeItem(d)},[r,i]);const u=C.useSyncExternalStore(C.useCallback(d=>{const f=l?.awareness;if(!f)return()=>{};const p=()=>{Dg.set(f,new Map(f.getStates())),d()};return f.on("change",p),()=>{Dg.set(f,new Map(f.getStates())),f.off("change",p)}},[l]),()=>{var d;return l!=null&&l.awareness&&(d=Dg.get(l.awareness))!==null&&d!==void 0?d:Bd});return h.jsx(DA.Provider,{value:u??Bd,children:h.jsx(R0.Provider,{value:l===void 0?r===void 0?"loading":null:l,children:t.children})})}function MB(t){const e=q(4);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(te,{justifyContent:"center",children:h.jsx(nt,{children:"Git repo not initialised"})}),e[0]=n):n=e[0];const r=`https://github.com/${t.repo}`;let i;return e[1]!==r||e[2]!==t.repo?(i=h.jsx(te,{alignItems:"center",justifyContent:"center",margin:"xxlarge",children:h.jsxs(te,{backgroundColor:"surface",padding:"large",border:"color.alias.borderIdle",borderRadius:"medium",direction:"column",justifyContent:"center",gap:"xlarge",maxWidth:"scale.4600",children:[n,h.jsxs(Y,{children:["The Keystatic GitHub App is installed in the GitHub repository"," ",h.jsx(aa,{href:r,children:t.repo})," ","but the Git repo is not initialised. Please initialise the Git repo before using Keystatic."]})]})}),e[1]=r,e[2]=t.repo,e[3]=i):i=e[3],i}function FB(t){if(Ns.has(t))return Ns.get(t);const e=fetch("/api/keystatic/tree",{headers:{"no-cors":"1"}}).then(n=>n.json()).then(async n=>xa(n));return Ns.set(t,e),e}function FA(){return C.useContext(PA)}const PA=C.createContext(()=>{throw new Error("SetTreeShaContext not set")});function PB(t){const[e,n]=C.useState("initial"),r=dr(C.useCallback(()=>FB(e),[e])),i=C.useMemo(()=>({unscopedDefault:r,scoped:{default:r,current:r,merged:mA({default:r,current:r})}}),[r]),s=C.useMemo(()=>i.scoped.merged.kind!=="loaded"?{collections:new Map,singletons:new Set}:HA(t.config,i.scoped.merged.data),[i,t.config]);return h.jsx(PA.Provider,{value:n,children:h.jsx(M0.Provider,{value:s,children:h.jsx(ap.Provider,{value:i,children:t.children})})})}const $B=li({user:li({id:He(),name:He(),email:He(),avatarUrl:qb(He())}),project:li({name:He()}),team:Fh({name:He(),slug:He(),images:Tx(),multiplayer:Tx()})}),D0=C.createContext(null);function Uu(){const t=C.useContext(D0);return t==="unauthorized"?null:t}function LB(){return C.useContext(D0)}function BB(t){const e=dr(C.useCallback(async()=>{var n,r;if(!((n=t.config.cloud)!==null&&n!==void 0&&n.project))throw new Error("no cloud project set");const i=(r=zu(t.config))===null||r===void 0?void 0:r.accessToken;if(!i)return"unauthorized";const s=await fetch(`${ls}/v1/info`,{headers:{...so,Authorization:`Bearer ${i}`}});return s.status===401?"unauthorized":$B.create(await s.json())},[t.config]));return h.jsx(D0.Provider,{value:e.kind==="loaded"?e.data:null,children:t.children})}const lp=C.createContext(null);function zB(t){var e,n,r,i;const s=t.config.storage.kind==="github"?Vu(t.config.storage.repo):{name:"repo-name",owner:"repo-owner"},[o]=iy({query:t.config.storage.kind==="github"?qf:my,variables:s}),[l,a]=C.useState(null),[c]=iy({query:Ht`
      query FetchMoreRefs($owner: String!, $name: String!, $after: String) {
        repository(owner: $owner, name: $name) {
          __typename
          id
          refs(refPrefix: "refs/heads/", first: 100, after: $after) {
            __typename
            nodes {
              ...Ref_base
            }
            pageInfo {
              hasNextPage
              endCursor
            }
          }
        }
      }
      ${F0}
    `,pause:!((e=o.data)!==null&&e!==void 0&&(e=e.repository)!==null&&e!==void 0&&(e=e.refs)!==null&&e!==void 0&&e.pageInfo.hasNextPage),variables:{...s,after:l??((n=o.data)===null||n===void 0||(n=n.repository)===null||n===void 0||(n=n.refs)===null||n===void 0?void 0:n.pageInfo.endCursor)}}),u=(r=c.data)===null||r===void 0||(r=r.repository)===null||r===void 0||(r=r.refs)===null||r===void 0?void 0:r.pageInfo;return u!=null&&u.hasNextPage&&u.endCursor!==l&&u.endCursor&&a(u.endCursor),(i=o.data)!==null&&i!==void 0&&(i=i.repository)!==null&&i!==void 0&&i.owner&&!o.data.repository.defaultBranchRef&&!o.fetching&&!o.error?h.jsx(MB,{repo:`${o.data.repository.owner.login}/${o.data.repository.name}`}):h.jsx(lp.Provider,{value:o,children:h.jsx(kA.Provider,{value:o.data&&"viewer"in o.data?o.data.viewer:void 0,children:t.children})})}const Pv=new Set(["WRITE","ADMIN","MAINTAIN"]);function VB(t){var e,n,r,i,s,o,l,a,c,u,d,f,p;const g=ft(),{data:m,error:b}=C.useContext(lp);let y=m?.repository;if(y&&"viewerPermission"in y&&y.viewerPermission&&!Pv.has(y.viewerPermission)&&"forks"in y){var x,v;y=(x=(v=y.forks)===null||v===void 0||(v=v.nodes)===null||v===void 0?void 0:v[0])!==null&&x!==void 0?x:y}const w=(e=y)===null||e===void 0||(e=e.refs)===null||e===void 0||(e=e.nodes)===null||e===void 0?void 0:e.find(M=>{var P;return M?.name===((P=y)===null||P===void 0||(P=P.defaultBranchRef)===null||P===void 0?void 0:P.name)}),S=(n=y)===null||n===void 0||(n=n.refs)===null||n===void 0||(n=n.nodes)===null||n===void 0?void 0:n.find(M=>M?.name===t.currentBranch);C.useEffect(()=>{var M;(M=y)!==null&&M!==void 0&&(M=M.refs)!==null&&M!==void 0&&M.nodes&&CB(y.refs.nodes.map(P=>{var B;return(P==null||(B=P.target)===null||B===void 0?void 0:B.__typename)==="Commit"?P.target.tree.oid:void 0}).filter(uR))},[(r=y)===null||r===void 0?void 0:r.id]);const k=(i=w?.target.tree.oid)!==null&&i!==void 0?i:null,E=(s=S?.target.tree.oid)!==null&&s!==void 0?s:null,T=$v(k,t.config),N=$v(E,t.config),I=C.useMemo(()=>{const M=Dv(T,B=>dy(B,t.config)),P=Dv(N,B=>dy(B,t.config));return{unscopedDefault:N,scoped:{default:M,current:P,merged:mA({default:M,current:P})}}},[N,T,t.config]),A=C.useMemo(()=>I.scoped.merged.kind!=="loaded"?{collections:new Map,singletons:new Set}:HA(t.config,I.scoped.merged.data),[I,t.config]);C.useEffect(()=>{var M,P;(b==null||(M=b.response)===null||M===void 0?void 0:M.status)===401&&(bi(t.config)?window.location.href=`/api/keystatic/github/login?from=${g.params.map(encodeURIComponent).join("/")}`:Bu(g.params.map(encodeURIComponent).join("/"),t.config)),!((P=y)!==null&&P!==void 0&&P.id)&&b!==null&&b!==void 0&&b.graphQLErrors.some(B=>{var z,U;return(B==null||(z=B.originalError)===null||z===void 0?void 0:z.type)==="NOT_FOUND"||(B==null||(U=B.originalError)===null||U===void 0?void 0:U.type)==="FORBIDDEN"})&&(window.location.href=`/api/keystatic/github/repo-not-found?from=${g.params.map(encodeURIComponent).join("/")}`)},[b,g,(o=y)===null||o===void 0?void 0:o.id,t.config]);const O=C.useMemo(()=>{var M;return new Map((M=y)===null||M===void 0||(M=M.refs)===null||M===void 0||(M=M.nodes)===null||M===void 0?void 0:M.flatMap(P=>{var B;return(P==null||(B=P.target)===null||B===void 0?void 0:B.__typename)!=="Commit"?[]:[[P.name,{id:P.id,commitSha:P.target.oid,treeSha:P.target.tree.oid}]]}))},[(l=y)===null||l===void 0||(l=l.refs)===null||l===void 0?void 0:l.nodes]),_=!!y&&(t.config.storage.kind==="cloud"||"viewerPermission"in y&&!!((a=y)!==null&&a!==void 0&&a.viewerPermission)&&Pv.has(y.viewerPermission)),F=C.useMemo(()=>{var M;return!(m!=null&&m.repository)||!((M=y)!==null&&M!==void 0&&(M=M.defaultBranchRef)!==null&&M!==void 0&&M.name)?null:{id:y.id,defaultBranch:y.defaultBranchRef.name,hasWritePermission:_,isPrivate:y.isPrivate,name:y.name,owner:y.owner.login,upstream:{name:y.name,owner:y.owner.login}}},[m?.repository,_,(c=y)===null||c===void 0||(c=c.defaultBranchRef)===null||c===void 0?void 0:c.name,(u=y)===null||u===void 0?void 0:u.id,(d=y)===null||d===void 0?void 0:d.isPrivate,(f=y)===null||f===void 0?void 0:f.name,(p=y)===null||p===void 0?void 0:p.owner.login]);return h.jsx($A.Provider,{value:b,children:h.jsx(LA.Provider,{value:t.currentBranch,children:h.jsx(BA.Provider,{value:O,children:h.jsx(zA.Provider,{value:F,children:h.jsx(M0.Provider,{value:A,children:h.jsx(ap.Provider,{value:I,children:t.config.storage.kind==="cloud"?h.jsx(DB,{config:t.config,children:t.children}):t.children})})})})})})}const $A=C.createContext(void 0),LA=C.createContext("");function bn(){return C.useContext(LA)}const BA=C.createContext(new Map);function La(){return C.useContext(BA)}const zA=C.createContext(null);function jr(){return C.useContext(zA)}const M0=C.createContext({collections:new Map,singletons:new Set}),ap=C.createContext({unscopedDefault:{kind:"loading",promise:xr},scoped:{current:{kind:"loading",promise:xr},default:{kind:"loading",promise:xr},merged:{kind:"loading",promise:xr}}});function cp(){return C.useContext(ap).scoped}function VA(){return C.useContext(ap).unscopedDefault}function UB(){return C.useContext(M0)}function ml(){var t,e;const n=La(),r=bn();return(t=(e=n.get(r))===null||e===void 0?void 0:e.commitSha)!==null&&t!==void 0?t:""}const F0=Ht`
  fragment Ref_base on Ref {
    id
    name
    target {
      __typename
      id
      oid
      ... on Commit {
        tree {
          id
          oid
        }
      }
    }
  }
`,UA=Ht`
  fragment Repo_base on Repository {
    id
    isPrivate
    owner {
      id
      login
    }
    name
    defaultBranchRef {
      id
      name
    }
    refs(refPrefix: "refs/heads/", first: 100) {
      nodes {
        ...Ref_base
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
  ${F0}
`,my=Ht`
  query CloudAppShell($name: String!, $owner: String!) {
    repository(owner: $owner, name: $name) {
      id
      ...Repo_base
    }
  }
  ${UA}
`,qB=Ht`
  fragment Repo_ghDirect on Repository {
    id
    ...Repo_base
    viewerPermission
  }
  ${UA}
`,HB=Ht`
  fragment Repo_primary on Repository {
    id
    ...Repo_ghDirect
    forks(affiliations: [OWNER], first: 1) {
      nodes {
        ...Repo_ghDirect
      }
    }
  }
  ${qB}
`,qf=Ht`
  query GitHubAppShell($name: String!, $owner: String!) {
    repository(owner: $owner, name: $name) {
      id
      ...Repo_primary
    }
    viewer {
      ...SidebarFooter_viewer
    }
  }
  ${HB}
  ${vB}
`,Ns=new ep({max:40});async function xa(t){const e={entries:new Map(t.map(r=>[r.path,r])),tree:A0(t)},n=await Lu(e.tree);return Ns.set(n,e),e}function qA(t,e){const n=Ns.get(t);if(n)return n;const r=SB(t);if(r&&!(r instanceof Promise)){const s=Uf(r.children),o={entries:new Map(s.map(l=>[l.path,l])),tree:r.children};return Ns.set(t,o),o}const i=(async()=>{const s=await r;if(s){const c=Uf(s.children),u={entries:new Map(c.map(d=>[d.path,d])),tree:s.children};return Ns.set(t,u),u}const o=await el(e);if(!o)throw new Error("Not authorized");const{tree:l}=await fetch(e.storage.kind==="github"?`https://api.github.com/repos/${tl(e.storage.repo)}/git/trees/${t}?recursive=1`:`${ls}/v1/github/trees/${t}`,{headers:{Authorization:`Bearer ${o.accessToken}`,...e.storage.kind==="cloud"?so:{}}}).then(c=>c.json()),a=l.map(({url:c,size:u,...d})=>d);return await EB(t,A0(a)),xa(a)})();return Ns.set(t,i),i}function $v(t,e){return dr(C.useCallback(()=>t?qA(t,e):xr,[t,e]))}function HA(t,e){var n,r;return{collections:new Map(Object.keys((n=t.collections)!==null&&n!==void 0?n:{}).map(i=>{const s=new Map(iu(t,i,e.current.tree).map(u=>[u.slug,u.key])),o=new Map(iu(t,i,e.default.tree).map(u=>[u.slug,u.key])),l=new Set,a=new Set;for(const[u,d]of s){const f=o.get(u);if(f===void 0){a.add(u);continue}d!==f&&l.add(u)}const c=new Set([...o.keys()].filter(u=>!s.has(u)));return[i,{removed:c,added:a,changed:l,totalCount:s.size}]})),singletons:new Set(Object.keys((r=t.singletons)!==null&&r!==void 0?r:{}).filter(i=>{var s,o;const l=Pu(t,i);return((s=Ki(e.current.tree,l))===null||s===void 0?void 0:s.entry.sha)!==((o=Ki(e.default.tree,l))===null||o===void 0?void 0:o.entry.sha)}))}}const WA=C.createContext(null);function Nt(){const t=C.useContext(WA);if(!t)throw new Error("ConfigContext.Provider not found");return t}const KA=C.createContext({basePath:"/keystatic"});function GA(){const t=C.useContext(KA);if(!t)throw new Error("AppStateContext.Provider not found");return t}const YA=C.createContext("mobile"),WB=YA.Provider;function P0(){return C.useContext(YA)}function KB(t){const e=["mobile","tablet","desktop","wide"],n=P0(),r="above"in t?e.indexOf(t.above)+1:0,i="below"in t?e.indexOf(t.below)-1:e.length-1;return e.slice(r,i+1).includes(n)}function GB(t){const e=q(5),[n,r]=C.useState("mobile");let i;e[0]!==t.current?(i=()=>{r(l=>{const a=t.current;return a?a.offsetWidth>=Ad.wide?"wide":a.offsetWidth>=Ad.desktop?"desktop":a.offsetWidth>=Ad.tablet?"tablet":"mobile":l})},e[0]=t.current,e[1]=i):i=e[1];const s=i;let o;return e[2]!==t||e[3]!==s?(o={ref:t,onResize:s},e[2]=t,e[3]=s,e[4]=o):o=e[4],MS(o),n}function $0(t){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(Ee.toDOMRange(t,t.selection))),Ee.focus(t)}const up=W({marginBlock:"0.75em","&:first-child":{marginBlockStart:0},"&:last-child":{marginBlockEnd:0}}),YB=wi.createContext(!1);YB.Provider;function L0(t,e){const[n,r]=C.useState({element:e,elementWithChanges:e});n.element!==e&&r({element:e,elementWithChanges:e});const i=C.useRef(e);C.useEffect(()=>{i.current=e});const s=C.useCallback(o=>{const l=i.current,a=typeof o=="function"?o(l):o;L.setNodes(t,a,{at:Ee.findPath(t,l)}),r({element:l,elementWithChanges:{...l,...a}})},[t]);return[n.elementWithChanges,s]}function Ln(t){const e=C.useRef(t),n=C.useCallback((...r)=>e.current(...r),[]);return C.useEffect(()=>{e.current=t}),n}function pr(t,e){var n;let r;const i=V.above(t,{match:o=>o.type==="heading"||o.type==="paragraph"});i&&We.string(i[0])===""&&(r=V.pathRef(t,i[1])),L.insertNodes(t,e);let s=(n=r)===null||n===void 0?void 0:n.unref();s&&(L.removeNodes(t,{at:s}),Ee.focus(t))}const JA=["paragraph","code","heading","ordered-list","unordered-list","divider","image"],ZA=[...JA,"table"],JB=[...ZA,"blockquote"],Mg=[...JB,"component-block"];function On(t){return{kind:"blocks",allowedChildren:new Set(t.allowedChildren),blockToWrapInlinesIn:t.allowedChildren[0],invalidPositionHandleMode:t.invalidPositionHandleMode}}function uo(t){return{kind:"inlines",invalidPositionHandleMode:t.invalidPositionHandleMode}}const Po={editor:On({allowedChildren:[...Mg,"layout"],invalidPositionHandleMode:"move"}),layout:On({allowedChildren:["layout-area"],invalidPositionHandleMode:"move"}),"layout-area":On({allowedChildren:Mg,invalidPositionHandleMode:"unwrap"}),blockquote:On({allowedChildren:ZA,invalidPositionHandleMode:"move"}),paragraph:uo({invalidPositionHandleMode:"unwrap"}),code:uo({invalidPositionHandleMode:"move"}),divider:uo({invalidPositionHandleMode:"move"}),heading:uo({invalidPositionHandleMode:"unwrap"}),"component-block":On({allowedChildren:["component-block-prop","component-inline-prop"],invalidPositionHandleMode:"move"}),"component-inline-prop":uo({invalidPositionHandleMode:"unwrap"}),"component-block-prop":On({allowedChildren:Mg,invalidPositionHandleMode:"unwrap"}),"ordered-list":On({allowedChildren:["list-item"],invalidPositionHandleMode:"move"}),"unordered-list":On({allowedChildren:["list-item"],invalidPositionHandleMode:"move"}),"list-item":On({allowedChildren:["list-item-content","ordered-list","unordered-list"],invalidPositionHandleMode:"unwrap"}),"list-item-content":uo({invalidPositionHandleMode:"unwrap"}),image:uo({invalidPositionHandleMode:"move"}),table:On({invalidPositionHandleMode:"move",allowedChildren:["table-head","table-body"]}),"table-body":On({invalidPositionHandleMode:"move",allowedChildren:["table-row"]}),"table-row":On({invalidPositionHandleMode:"move",allowedChildren:["table-cell"]}),"table-cell":On({invalidPositionHandleMode:"move",allowedChildren:JA}),"table-head":On({invalidPositionHandleMode:"move",allowedChildren:["table-row"]})},ZB=new Set(Object.entries(Po).filter(([,t])=>t.kind==="inlines").map(([t])=>t));function XB(t){return t.type!==void 0&&ZB.has(t.type)}const QB=new Set(Object.keys(Po).filter(t=>t!=="editor"));function Ge(t){return QB.has(t.type)}function ez(t,e){var n,r,i,s,o,l,a;const c=(n=e.formatting)===null||n===void 0?void 0:n.inlineMarks,u=Object.fromEntries(Object.keys(t.formatting.inlineMarks).map(f=>{const p=f;return[p,c==="inherit"||c?.[p]==="inherit"?t.formatting.inlineMarks[p]:!1]})),d=(r=e.formatting)===null||r===void 0?void 0:r.headingLevels;return{formatting:{inlineMarks:u,softBreaks:((i=e.formatting)===null||i===void 0?void 0:i.softBreaks)==="inherit"&&t.formatting.softBreaks,alignment:{center:t.formatting.alignment.center&&((s=e.formatting)===null||s===void 0?void 0:s.alignment)==="inherit",end:t.formatting.alignment.end&&((o=e.formatting)===null||o===void 0?void 0:o.alignment)==="inherit"},blockTypes:((l=e.formatting)===null||l===void 0?void 0:l.blockTypes)==="inherit"?t.formatting.blockTypes:{blockquote:!1,code:!1},headings:d==="inherit"?t.formatting.headings:{levels:d?t.formatting.headings.levels.filter(f=>d.includes(f)):[],schema:t.formatting.headings.schema},listTypes:((a=e.formatting)===null||a===void 0?void 0:a.listTypes)==="inherit"?t.formatting.listTypes:{ordered:!1,unordered:!1}},dividers:e.dividers==="inherit"?t.dividers:!1,images:e.images==="inherit"&&t.images,layouts:[],links:e.links==="inherit"&&t.links,tables:e.tables==="inherit"&&t.tables}}function XA(t,e){var n,r,i,s,o,l;const a=(n=e.formatting)===null||n===void 0?void 0:n.inlineMarks,c=a==="inherit"?"inherit":Object.fromEntries(Object.keys(t.formatting.inlineMarks).map(f=>[f,!!(a||{})[f]]));if(e.kind==="inline"){var u;return{kind:"inline",inlineMarks:c,documentFeatures:{links:e.links==="inherit"},softBreaks:((u=e.formatting)===null||u===void 0?void 0:u.softBreaks)==="inherit"}}const d=(r=e.formatting)===null||r===void 0?void 0:r.headingLevels;return{kind:"block",inlineMarks:c,softBreaks:((i=e.formatting)===null||i===void 0?void 0:i.softBreaks)==="inherit",documentFeatures:{layouts:[],dividers:e.dividers==="inherit"?t.dividers:!1,formatting:{alignment:((s=e.formatting)===null||s===void 0?void 0:s.alignment)==="inherit"?t.formatting.alignment:{center:!1,end:!1},blockTypes:((o=e.formatting)===null||o===void 0?void 0:o.blockTypes)==="inherit"?t.formatting.blockTypes:{blockquote:!1,code:!1},headings:d==="inherit"?t.formatting.headings:{levels:d?t.formatting.headings.levels.filter(f=>d.includes(f)):[],schema:t.formatting.headings.schema},listTypes:((l=e.formatting)===null||l===void 0?void 0:l.listTypes)==="inherit"?t.formatting.listTypes:{ordered:!1,unordered:!1}},links:e.links==="inherit",images:e.images==="inherit"?t.images:!1,tables:e.tables==="inherit"},componentBlocks:e.componentBlocks==="inherit"}}function gc(t,e,n){if(t.length===0)return n;if(!(n.kind==="child"||n.kind==="form")){if(n.kind==="conditional"){const r=t.shift();if(r==="discriminant")return gc(t,e.discriminant,n.discriminant);if(r==="value"){const i=n.values[e.discriminant];return gc(t,e.value,i)}return}if(n.kind==="object"){const r=t.shift();return gc(t,e[r],n.fields[r])}if(n.kind==="array"){const r=t.shift();return gc(t,e[r],n.element)}rn(n)}}function B0(t,e,n){return gc([...t],e,{kind:"object",fields:n})}function tz(t,e,n){const r=[],i=[...e];let s=t,o=n;for(;i.length;){r.push(s);const l=i.shift();if(s.kind==="array")s=s.element,o=o[l];else if(s.kind==="conditional")s=s.values[n.discriminant],o=o.value;else if(s.kind==="object")o=o[l],s=s.fields[l];else{if(s.kind==="child"||s.kind==="form")throw new Error(`unexpected prop "${l}"`);rn(s)}}return r}function nz(t,e,n){const r=B0(t,n,e);return r?.kind==="child"&&(r.options.kind==="block"&&r.options.editIn!=="modal"||r.options.kind==="inline")?r.options.placeholder:""}function z0(t){return Rt.isElement(t)?{...t,children:t.children.map(z0)}:{...t}}const QA=["bold","italic","underline","strikethrough","code","superscript","subscript","keyboard"],ii=(t,e)=>{const[n]=V.nodes(t,{match:r=>r.type===e});return!!n};function eT(t){L.unwrapNodes(t,{match:e=>e.type==="heading"||e.type==="blockquote"||e.type==="code"}),L.unsetNodes(t,QA,{match:Bt.isText})}function ou(t,e,n,r=()=>!0){const i=De.isPath(e)?e:e[1],s=De.isPath(e)?We.get(t,i):e[0];if(Ge(s)){for(let o=s.children.length-1;o>=0;o--)if(r(s.children[o],o)){const l=[...i,o];L.moveNodes(t,{at:l,to:n})}}}function Tc(t,e,{distance:n=1}={}){const r=V.point(t,e,{edge:"end"}),i=V.end(t,[]),s={anchor:r,focus:i};let o=0,l;for(const a of V.positions(t,{at:s})){if(o>n)break;We.get(t,a.path).text.length!==a.offset&&(o!==0&&(l=a),o++)}return l}function Vt(...t){if(t.length===1){const n=t[0];return r=>r.type===n}const e=new Set(t);return n=>typeof n.type=="string"&&e.has(n.type)}function qu(t,e,n){const r=V.above(t,{match:Vt("component-block-prop","component-inline-prop")});if(r){const i=r[0].propPath,s=V.parent(t,r[1]);if(s[0].type==="component-block"){const o=s[0].component,l=n[o];if(l&&i){const a=B0(i,s[0].props,l.schema);if(a?.kind==="child")return XA(e,a.options)}}}}const tT=C.createContext(null);function nT(){const t=C.useContext(tT);if(!t)throw new Error("useBlockPopoverContext must be used within a BlockPopoverTrigger");return t}const rz=Vt("code","component-block","image","layout","link","table","heading"),rT=C.createContext(void 0);function V0(){return C.useContext(rT)}function iz(t){const e=V.above(t.editor,{match:rz});return h.jsx(rT.Provider,{value:e?.[0],children:t.children})}const yl=({children:t,element:e})=>{const[n,r]=t,i=V0(),s=C.useRef(null),o=xb({isOpen:i===e}),l=C.useMemo(()=>({state:o,triggerRef:s}),[o,s]);return h.jsxs(tT.Provider,{value:l,children:[C.cloneElement(n,{ref:s}),r]})};function bl(t){const{state:e}=nT();let n=C.useRef(null);return h.jsx(dR,{isOpen:e.isOpen,nodeRef:n,children:h.jsx(sz,{wrapperRef:n,...t})})}const sz=({children:t,placement:e="bottom"})=>{let n=C.useRef(null),{state:r,triggerRef:i}=nT(),{placement:s,popoverProps:o}=oz({isNonModal:!0,isKeyboardDismissDisabled:!1,placement:e,triggerRef:i,popoverRef:n},r);return h.jsx("div",{ref:n,...o,"data-open":r.isOpen,"data-placement":s,contentEditable:!1,className:W({backgroundColor:j.color.background.surface,borderRadius:j.size.radius.medium,border:`${j.size.border.regular} solid ${j.color.border.emphasis}`,boxSizing:"content-box",minHeight:j.size.element.regular,minWidth:j.size.element.regular,opacity:0,outline:0,pointerEvents:"auto",position:"absolute",filter:`drop-shadow(0 1px 4px ${j.color.shadow.regular})`,willChange:"filter",userSelect:"none",'&[data-placement="top"]':{marginBottom:j.size.space.regular,transform:`translateY(${j.size.space.regular})`},'&[data-placement="bottom"]':{marginTop:j.size.space.regular,transform:`translateY(calc(${j.size.space.regular} * -1))`},'&[data-open="true"]':{opacity:1,transform:"translateX(0) translateY(0)",transition:vr(["opacity","transform"],{easing:"easeOut"})}}),children:typeof t=="function"?t(r.close):t})};function oz(t,e){var n;let{triggerRef:r,popoverRef:i,isNonModal:s,isKeyboardDismissDisabled:o,...l}=t,[a,c]=C.useState(!1),{overlayProps:u,underlayProps:d}=PO({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!s,isKeyboardDismissDisabled:!1},i);const f=8;C.useEffect(()=>{if(e.isOpen){const x=()=>{var v,w;const S=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);let k=(v=i.current)===null||v===void 0?void 0:v.getBoundingClientRect(),E=(w=r.current)===null||w===void 0?void 0:w.getBoundingClientRect();k&&E&&c(E.bottom+k.height+f*2>S&&E.top<S)};return x(),window.addEventListener("scroll",x),()=>{x(),window.removeEventListener("scroll",x)}}},[i,r,e.isOpen]);let{overlayProps:p,arrowProps:g,placement:m,updatePosition:b}=$O({...l,containerPadding:f,shouldFlip:!1,targetRef:r,overlayRef:i,isOpen:e.isOpen,onClose:void 0}),y=lz((n=r.current)===null||n===void 0?void 0:n.getBoundingClientRect());return vb(()=>{if(y){var x;const v=(x=r.current)===null||x===void 0?void 0:x.getBoundingClientRect();v&&(y.height!==v.height||y.width!==v.width||y.x!==v.x||y.y!==v.y)&&b()}},[y,r,b]),p.style&&(p.style.zIndex=1),a&&(p.style={...p.style,maxHeight:null,position:"fixed",top:null,bottom:f}),{arrowProps:g,placement:m,popoverProps:Cr(u,p),underlayProps:d,updatePosition:b}}function lz(t){const e=C.useRef();return C.useEffect(()=>{e.current=t}),e.current}const U0=C.forwardRef(function({className:e,...n},r){return h.jsx("div",{...n,ref:r,className:[W({userSelect:"none",whiteSpace:"initial"}),e].join(" "),contentEditable:!1})});function az(t){let e=t.toLowerCase().trim();return e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),e=e.replace(/[^a-z0-9\s-]/g," ").trim(),e=e.replace(/[\s-]+/g,"-"),e}const cz=li({src:He(),width:fa(),height:fa()});function uz(t,e){if(t.size>1e7)throw new Error("Images must be smaller than 10MB");const n=zu(e);if(!n)throw new Error("You must be signed in to upload images");const r=/(.+)\.(png|jpe?g|gif|webp)$/.exec(t.name);if(!r)throw new Error("Invalid image type, only PNG, JPEG, GIF, and WebP are supported");const i=az(r[1]),s=r[2],o=`${i}.${s}`,l=new File([t],o,{type:`image/${o==="jpg"?"jpeg":o}`}),a=new FormData;return a.set("image",l,o),(async()=>{const c=await fetch(`${ls}/v1/image`,{method:"PUT",headers:{Authorization:`Bearer ${n.accessToken}`,...so},body:a});if(!c.ok)throw new Error(`Failed to upload image: ${await c.text()}`);const u=await c.json();let d;try{d=cz.create(u)}catch{throw new Error("Unexpected response from cloud")}return d})()}function dz(t){try{const r=JSON.parse(t);if(typeof r=="object"&&r!==null&&"src"in r&&typeof r.src=="string")return{src:r.src,alt:"alt"in r&&typeof r.alt=="string"?r.alt:"",height:"height"in r&&typeof r.height=="number"&&Number.isInteger(r.height)?r.height:void 0,width:"width"in r&&typeof r.width=="number"&&Number.isInteger(r.width)?r.width:void 0}}catch{}const e=/^\s*!\[(.*)\]\(([a-z0-9_\-/:.]+)\)\s*$/,n=t.match(e);return n?{src:n[2],alt:n[1]}:{src:t,alt:""}}function fz(t){const e=q(4);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={},e[0]=n):n=e[0];const[r,i]=C.useState(n);let s,o;return e[1]!==t?(s=()=>{if(!t||!xz(t)){i({});return}let l;return l=!0,iT(t).then(a=>{l&&i(a)}),()=>{l=!1}},o=[t],e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),C.useEffect(s,o),r}function iT(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{e({width:r.width,height:r.height})},r.onerror=()=>{n()},r.src=t})}const hz=li({src:He(),alt:He(),width:fa(),height:fa()});async function pz(t,e){const n=zu(e);if(n){const r=await fetch(`${ls}/v1/image?${new URLSearchParams({url:t})}`,{headers:{Authorization:`Bearer ${n.accessToken}`,...so}});if(r.ok){const i=await r.json();try{return hz.create(i)}catch{}}}return iT(t).then(r=>({src:t,alt:"",...r}))}function gz(t){const e=q(42),n=fz(t.src),[r,i]=C.useState(!0),s=`Revert to original (${n.width} × ${n.height})`,o=n.width===t.image.width&&n.height===t.image.height;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={maximumFractionDigits:0},e[0]=l):l=e[0];let a;e[1]!==r||e[2]!==t?(a=I=>{r?t.onChange({width:I,height:Math.round(I/Bv(t.image))}):t.onChange({width:I})},e[1]=r,e[2]=t,e[3]=a):a=e[3];let c;e[4]!==t.image.width||e[5]!==a?(c=h.jsx(df,{label:"Width",width:"scale.1600",formatOptions:l,value:t.image.width,onChange:a}),e[4]=t.image.width,e[5]=a,e[6]=c):c=e[6];let u;e[7]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{i(I=>!I)},e[7]=u):u=e[7];const d=r?TF:NF;let f;e[8]!==d?(f=h.jsx(X,{src:d}),e[8]=d,e[9]=f):f=e[9];let p;e[10]!==r||e[11]!==f?(p=h.jsx(VS,{isSelected:r,"aria-label":"Constrain proportions",prominence:"low",onPress:u,children:f}),e[10]=r,e[11]=f,e[12]=p):p=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(he,{children:"Constrain proportions"}),e[13]=g):g=e[13];let m;e[14]!==p?(m=h.jsxs(fe,{children:[p,g]}),e[14]=p,e[15]=m):m=e[15];let b;e[16]===Symbol.for("react.memo_cache_sentinel")?(b={maximumFractionDigits:0},e[16]=b):b=e[16];let y;e[17]!==r||e[18]!==t?(y=I=>{r?t.onChange({height:I,width:Math.round(I*Bv(t.image))}):t.onChange({height:I})},e[17]=r,e[18]=t,e[19]=y):y=e[19];let x;e[20]!==t.image.height||e[21]!==y?(x=h.jsx(df,{label:"Height",width:"scale.1600",formatOptions:b,value:t.image.height,onChange:y}),e[20]=t.image.height,e[21]=y,e[22]=x):x=e[22];const v=o||!n.width||!n.height;let w;e[23]!==t||e[24]!==n.height||e[25]!==n.width?(w=()=>{t.onChange({height:n.height,width:n.width})},e[23]=t,e[24]=n.height,e[25]=n.width,e[26]=w):w=e[26];let S;e[27]===Symbol.for("react.memo_cache_sentinel")?(S=h.jsx(X,{src:jF}),e[27]=S):S=e[27];let k;e[28]!==s||e[29]!==v||e[30]!==w?(k=h.jsx(ae,{"aria-label":s,isDisabled:v,onPress:w,children:S}),e[28]=s,e[29]=v,e[30]=w,e[31]=k):k=e[31];let E;e[32]!==s?(E=h.jsx(he,{maxWidth:"100%",children:s}),e[32]=s,e[33]=E):E=e[33];let T;e[34]!==k||e[35]!==E?(T=h.jsxs(fe,{children:[k,E]}),e[34]=k,e[35]=E,e[36]=T):T=e[36];let N;return e[37]!==c||e[38]!==m||e[39]!==x||e[40]!==T?(N=h.jsxs(zr,{gap:"regular",alignItems:"end",children:[c,m,x,T]}),e[37]=c,e[38]=m,e[39]=x,e[40]=T,e[41]=N):N=e[41],N}const Lv={src:"",alt:""},mz=["jpeg","jpg","png","gif","webp"],yz=mz.map(t=>`image/${t}`);function bz(t){var e;const n=q(12);let r;if(n[0]!==t){const{onUploaded:d,...f}=t;r=f,n[0]=t,n[1]=r}else r=n[1];const i=Nt(),[s,o]=C.useState(!1);if(!((e=i.cloud)!==null&&e!==void 0&&e.project))return null;let l;n[2]!==i||n[3]!==t?(l=async d=>{const f=Array.from(d||[]);if(f[0]){o(!0);try{const p=await uz(f[0],i);t.onUploaded({...p,alt:""}),o(!1)}catch(p){const g=p;o(!1),qi.critical(g.message)}}},n[2]=i,n[3]=t,n[4]=l):l=n[4];const a=s?"Uploading…":"Upload";let c;n[5]!==s||n[6]!==r||n[7]!==a?(c=h.jsx(ae,{isDisabled:s,...r,children:a}),n[5]=s,n[6]=r,n[7]=a,n[8]=c):c=n[8];let u;return n[9]!==l||n[10]!==c?(u=h.jsx(fR,{acceptedFileTypes:yz,onSelect:l,children:c}),n[9]=l,n[10]=c,n[11]=u):u=n[11],u}function xz(t){try{return new URL(t),!0}catch{return!1}}function sT(){const t=Nt(),e=mB(t);return e?`https://keystatic.cloud/teams/${e.team}/project/${e.project}/images`:"https://keystatic.cloud/"}function Bv(t){return!t.width||!t.height?1:t.width/t.height}class Ce extends Error{constructor(e){super(e),this.name="FieldDataError"}}function Hr(t,e,n){if(t===null&&e!==null&&e!==void 0&&e.isRequired)throw new Ce(`${n} is required`)}function Gn(t){return{kind:"form",Input:t.Input,defaultValue:t.defaultValue,parse:t.parse,serialize:t.serialize,validate:t.validate,reader:{parse(e){return t.validate(t.parse(e))}},label:t.label}}function nl(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}function oT([t,e],n,r,i){const s=Object.keys(t).filter(o=>o!=="text"&&o!=="insertMenu"&&r[o]!==!0);if(s.length)return L.unsetNodes(n,s,{at:e}),!0;if(!i&&t.text.includes(`
`)){const[l]=V.parent(n,e);if(l.type!=="code"){for(const a of V.positions(n,{at:e}))if(We.get(n,a.path).text[a.offset]===`
`)return L.delete(n,{at:a}),!0}}return!1}function lT([t,e],n,r){return t.type==="link"&&!r?(L.insertText(n,` (${t.href})`,{at:V.end(n,e)}),L.unwrapNodes(n,{at:e}),!0):!1}function aT([t,e],n,{formatting:r,dividers:i,layouts:s,links:o,images:l,tables:a}){return t.type==="heading"&&(!r.headings.levels.length||!r.headings.levels.includes(t.level))||t.type==="ordered-list"&&!r.listTypes.ordered||t.type==="unordered-list"&&!r.listTypes.unordered||t.type==="code"&&!r.blockTypes.code||t.type==="blockquote"&&!r.blockTypes.blockquote||t.type==="image"&&!l||t.type==="table"&&!a||t.type==="layout"&&(s.length===0||!s.some(c=>nl(c,t.layout)))?(L.unwrapNodes(n,{at:e}),!0):(t.type==="paragraph"||t.type==="heading")&&(!r.alignment.center&&t.textAlign==="center"||!r.alignment.end&&t.textAlign==="end"||"textAlign"in t&&t.textAlign!=="center"&&t.textAlign!=="end")?(L.unsetNodes(n,"textAlign",{at:e}),!0):t.type==="divider"&&!i?(L.removeNodes(n,{at:e}),!0):lT([t,e],n,o)}function vz(t,e){const{normalizeNode:n}=e;return e.normalizeNode=([r,i])=>{Bt.isText(r)?oT([r,i],e,t.formatting.inlineMarks,t.formatting.softBreaks):Rt.isElement(r)&&aT([r,i],e,t),n([r,i])},e}function kz(t){const e=op(),n=Uu(),r=ft(),i=MA(),s=C.useMemo(()=>{if(!e||e==="loading"||!n)return[];const o=[];for(const[l,a]of i)l===e.awareness.clientID||!a.user||r.href!==`/keystatic/branch/${a.branch}/${a.location}`||!Array.isArray(a.path)||!nl(a.path,t.path)||o.push(a.user);return o},[e,n,i,r.href,t.path]);return h.jsxs("div",{"data-ks-path":JSON.stringify(t.path),onFocus:o=>{o.target.closest("[data-ks-path]")===o.currentTarget&&e&&e!=="loading"&&e.awareness.setLocalStateField("path",t.path)},children:[!!s.length&&h.jsx("div",{className:W({position:"relative",width:"100%",height:0}),children:h.jsx("div",{className:W({position:"absolute",top:0,right:0,display:"flex",gap:"0.5em"}),children:s.map((o,l)=>h.jsx(tp,{size:"xsmall",src:o.avatarUrl,name:o.name},l))})}),t.children]})}function Hf(t){const e=q(9),n=C.useContext(lu),r=Nt();let i,s;e[0]!==n||e[1]!==t.part?(s=n.concat(t.part),e[0]=n,e[1]=t.part,e[2]=s):s=e[2],i=s;const o=i;let l;e[3]!==o||e[4]!==t.children?(l=h.jsx(lu.Provider,{value:o,children:t.children}),e[3]=o,e[4]=t.children,e[5]=l):l=e[5];const a=l;if(r.storage.kind==="cloud"){let c;return e[6]!==o||e[7]!==a?(c=h.jsx(kz,{path:o,children:a}),e[6]=o,e[7]=a,e[8]=c):c=e[8],c}return a}const q0=C.createContext(void 0),cT=q0.Provider,lu=C.createContext([]),uT=lu.Provider;function va(t,e,n,r,i,s){if(t.length<e)return e===1?`${r} must not be empty`:`${r} must be at least ${e} characters long`;if(t.length>n)return`${r} must be no longer than ${n} characters`;if(s&&!s.regex.test(t))return s.message||`${r} must match the pattern ${s.regex}`;if(i){if(t==="")return`${r} must not be empty`;if(t==="..")return`${r} must not be ..`;if(t===".")return`${r} must not be .`;if(i.glob==="**"){const o=t.split("/");if(o.some(l=>l===".."))return`${r} must not contain ..`;if(o.some(l=>l==="."))return`${r} must not be .`}if((i.glob==="*"?/[\\/]/:/[\\]/).test(t))return`${r} must not contain slashes`;if(/^\s|\s$/.test(t))return`${r} must not start or end with spaces`;if(i.slugs.has(t))return`${r} must be unique`}}function wz(t){const e=q(15),n=t.multiline?HS:gt,[r,i]=C.useState(!1),s=C.useContext(q0),o=C.useContext(lu);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>i(!0),e[0]=l):l=e[0];const a=t.min>0;let c;e[1]!==t||e[2]!==r||e[3]!==o||e[4]!==s?(c=t.forceValidation||r?va(t.value,t.min,t.max,t.label,o.length===1&&s?.field===o[0]?s:void 0,t.pattern):void 0,e[1]=t,e[2]=r,e[3]=o,e[4]=s,e[5]=c):c=e[5];let u;return e[6]!==n||e[7]!==t.label||e[8]!==t.description||e[9]!==t.autoFocus||e[10]!==t.value||e[11]!==t.onChange||e[12]!==a||e[13]!==c?(u=h.jsx(n,{label:t.label,description:t.description,autoFocus:t.autoFocus,value:t.value,onChange:t.onChange,onBlur:l,isRequired:a,errorMessage:c}),e[6]=n,e[7]=t.label,e[8]=t.description,e[9]=t.autoFocus,e[10]=t.value,e[11]=t.onChange,e[12]=a,e[13]=c,e[14]=u):u=e[14],u}function Fg(t){if(t===void 0)return"";if(typeof t!="string")throw new Ce("Must be a string");return t}const Sz=new Set;function au({label:t,defaultValue:e="",validation:{length:{max:n=1/0,min:r=0}={},pattern:i,isRequired:s}={},description:o,multiline:l=!1}){r=Math.max(s?1:0,r);function a(c,u){const d=va(c,r,n,t,u,i);if(d!==void 0)throw new Ce(d);return c}return{kind:"form",formKind:"slug",label:t,Input(c){return h.jsx(wz,{label:t,description:o,min:r,max:n,multiline:l,pattern:i,...c})},defaultValue(){return typeof e=="string"?e:e()},parse(c,u){return u?.slug!==void 0?u.slug:Fg(c)},serialize(c){return{value:c===""?void 0:c}},serializeWithSlug(c){return{slug:c,value:void 0}},reader:{parse(c){const u=Fg(c);return a(u,void 0)},parseWithSlug(c,u){return a(Fg(u.slug),{glob:u.glob,slugs:Sz}),null}},validate(c,u){return a(c,u?.slugField)}}}const cu=C.forwardRef(function(e,n){const r=$e(20);let i,s,o;r[0]!==e?({children:o,tone:i,...s}=e,r[0]=e,r[1]=i,r[2]=s,r[3]=o):(i=r[1],s=r[2],o=r[3]);const l=i===void 0?"neutral":i,a=Si(s),c=l==="neutral"?"surfaceSecondary":l,u=l==="neutral"?void 0:l;let d,f;r[4]!==u?(f={icon:{color:u},text:{trim:!1,color:u,weight:"medium"}},r[4]=u,r[5]=f):f=r[5],d=f;const p=d;let g;r[6]!==s?(g=pi(s,{labelable:!0}),r[6]=s,r[7]=g):g=r[7];let m;r[8]!==o?(m=rs(o)?h.jsx(Y,{children:o}):o,r[8]=o,r[9]=m):m=r[9];let b;r[10]!==p||r[11]!==m?(b=h.jsx(Ci,{slots:p,children:m}),r[10]=p,r[11]=m,r[12]=b):b=r[12];let y;return r[13]!==a.className||r[14]!==a.style||r[15]!==n||r[16]!==g||r[17]!==c||r[18]!==b?(y=h.jsx(te,{UNSAFE_className:a.className,UNSAFE_style:a.style,ref:n,...g,backgroundColor:c,borderRadius:"full",height:"element.small",minWidth:0,paddingX:"regular",alignItems:"center",flexShrink:0,gap:"small",inline:!0,children:b}),r[13]=a.className,r[14]=a.style,r[15]=n,r[16]=g,r[17]=c,r[18]=b,r[19]=y):y=r[19],y}),yy=j.size.space.large,dT=j.size.space.regular,by=j.size.space.small,H0=j.size.space.medium,xy=`calc(${by} + ${dT} + ${H0})`,Cz=C.forwardRef(function(e,n){const r=$e(19);let i,s;r[0]!==e?({children:s,...i}=e,r[0]=e,r[1]=i,r[2]=s):(i=r[1],s=r[2]);const o=Ea(n),l=Si(i),a=Ez(),c=Iz(o);let u,d;r[3]!==c?(u=()=>{c&&c.scrollIntoView({block:"center"})},d=[c],r[3]=c,r[4]=u,r[5]=d):(u=r[4],d=r[5]),C.useEffect(u,d);let f,p;r[6]!==a?(p={divider:{"aria-hidden":!0,elementType:"li",size:"medium",UNSAFE_className:a}},r[6]=a,r[7]=p):p=r[7],f=p;const g=f;let m;r[8]!==i?(m=pi(i,{labelable:!0}),r[8]=i,r[9]=m):m=r[9];let b;r[10]!==g||r[11]!==s?(b=h.jsx(te,{direction:"column",elementType:"ul",flex:"1 0 0",children:h.jsx(Ci,{slots:g,children:s})}),r[10]=g,r[11]=s,r[12]=b):b=r[12];let y;return r[13]!==o||r[14]!==l.className||r[15]!==l.style||r[16]!==m||r[17]!==b?(y=h.jsx(te,{elementType:"nav",ref:o,direction:"column",UNSAFE_className:l.className,UNSAFE_style:l.style,...m,children:b}),r[13]=o,r[14]=l.className,r[15]=l.style,r[16]=m,r[17]=b,r[18]=y):y=r[18],y});function Ez(){return W({marginBlock:yy,marginInlineStart:xy,width:`calc(40% - ${xy} - ${H0})`,minWidth:80,maxWidth:240})}function Iz(t){const e=$e(4),[n,r]=C.useState(null);let i;e[0]!==t.current?(i=()=>{const o=t.current&&t.current.querySelector("[aria-current]");o&&r(o)},e[0]=t.current,e[1]=i):i=e[1];let s;return e[2]!==t?(s=[t],e[2]=t,e[3]=s):s=e[3],vb(i,s),n}const fT=C.forwardRef(function(e,n){const r=$e(31);let i,s,o,l;r[0]!==e?({"aria-current":o,children:s,href:l,...i}=e,r[0]=e,r[1]=i,r[2]=s,r[3]=o,r[4]=l):(i=r[1],s=r[2],o=r[3],l=r[4]);const a=Az(),c=Ea(n),{linkProps:u}=FS(e,c);let d,f;r[5]!==a.text?(f={color:"inherit",UNSAFE_className:a.text},r[5]=a.text,r[6]=f):f=r[6];const p=f;let g;r[7]!==p?(g={text:p},r[7]=p,r[8]=g):g=r[8],d=g;const m=d;let b;r[9]!==a.anchor?(b=Ye(a.anchor),r[9]=a.anchor,r[10]=b):b=r[10];let y;r[11]!==i?(y=pi(i),r[11]=i,r[12]=y):y=r[12];let x;r[13]!==a.content?(x=Ye(a.content),r[13]=a.content,r[14]=x):x=r[14];let v;r[15]!==s?(v=rs(s)?h.jsx(Y,{children:s}):s,r[15]=s,r[16]=v):v=r[16];let w;r[17]!==m||r[18]!==v?(w=h.jsx(Ci,{slots:m,children:v}),r[17]=m,r[18]=v,r[19]=w):w=r[19];let S;r[20]!==x||r[21]!==w?(S=h.jsx("div",{className:x,children:w}),r[20]=x,r[21]=w,r[22]=S):S=r[22];let k;return r[23]!==c||r[24]!==o||r[25]!==l||r[26]!==b||r[27]!==u||r[28]!==y||r[29]!==S?(k=h.jsx("li",{children:h.jsx(Ei,{children:h.jsx("a",{ref:c,"aria-current":o,href:l,className:b,...u,...y,children:S})})}),r[23]=c,r[24]=o,r[25]=l,r[26]=b,r[27]=u,r[28]=y,r[29]=S,r[30]=k):k=r[30],k});function Az(){const t=j.color.alias.focusRing,e=j.size.alias.focusRing,n=W({color:j.color.foreground.neutral,display:"flex",gap:dT,paddingBlock:j.size.space.xsmall,outline:0,"&::before":{borderRadius:by,content:'""',insetInlineStart:j.size.space.xsmall,marginBlock:j.size.space.xsmall,position:"relative",width:by},"&:hover":{color:j.color.foreground.neutralEmphasis},"&[aria-current]:not([aria-current=false])":{color:j.color.foreground.neutralEmphasis,"&::before":{backgroundColor:j.color.background.accentEmphasis}}}),r=W({alignItems:"center",borderRadius:j.size.radius.regular,display:"flex",flex:1,flexShrink:0,gap:j.size.space.regular,minHeight:j.size.element.regular,minWidth:0,paddingInline:j.size.space.medium,paddingBlock:j.size.space.small,position:"relative","&::after":{borderRadius:j.size.radius.regular,content:'""',insetBlock:1,insetInline:-1,margin:1,position:"absolute",transition:vr(["box-shadow","margin"],{easing:"easeOut"})},[`.${n}[data-focus=visible] &::after`]:{boxShadow:`0 0 0 ${e} ${t}`,margin:0},[`.${n}[aria-current]:not([aria-current=false]) &`]:{backgroundColor:j.color.alias.backgroundHovered},[`.${n}:hover &`]:{backgroundColor:j.color.alias.backgroundHovered},[`.${n}:active &`]:{backgroundColor:j.color.alias.backgroundPressed}}),i=W({fontWeight:j.typography.fontWeight.regular,[`.${n}[aria-current]:not([aria-current=false]) &`]:{fontWeight:j.typography.fontWeight.medium}});return{anchor:n,content:r,text:i}}function Tz(t){const e=$e(21);let n,r,i,s;e[0]!==t?({children:s,id:n,title:i,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s):(n=e[1],r=e[2],i=e[3],s=e[4]);const o=LO(n),l=Nz(),a=jz();let c;e[5]!==l?(c=Ye(l),e[5]=l,e[6]=c):c=e[6];let u;e[7]!==r?(u=pi(r),e[7]=r,e[8]=u):u=e[8];let d;e[9]!==o||e[10]!==a||e[11]!==i?(d=h.jsx(Y,{elementType:"h3",id:o,UNSAFE_className:a,children:i}),e[9]=o,e[10]=a,e[11]=i,e[12]=d):d=e[12];let f;e[13]!==o||e[14]!==s?(f=h.jsx(zt,{elementType:"ul",flexShrink:0,"aria-labelledby":o,children:s}),e[13]=o,e[14]=s,e[15]=f):f=e[15];let p;return e[16]!==c||e[17]!==u||e[18]!==d||e[19]!==f?(p=h.jsxs("li",{className:c,...u,children:[d,f]}),e[16]=c,e[17]=u,e[18]=d,e[19]=f,e[20]=p):p=e[20],p}function Nz(){return W({"&:not(:first-child)":{marginBlockStart:yy},"&:not(:last-child)":{marginBlockEnd:yy}})}function jz(){return W({color:j.color.foreground.neutralSecondary,fontSize:j.typography.text.small.size,fontWeight:j.typography.fontWeight.medium,paddingBlock:j.size.space.regular,paddingInlineEnd:H0,paddingInlineStart:xy,textTransform:"uppercase"})}const _z=C.forwardRef(function(e,n){const r=$e(13),{children:i,role:s,tone:o}=e,l=o===void 0?"neutral":o,a=Si(e);!i&&!e["aria-label"]&&console.warn("If no children are provided, an aria-label must be specified"),!s&&(e["aria-label"]||e["aria-labelledby"])&&console.warn("A labelled StatusLight must have a role.");let c;r[0]!==e?(c=pi(e,{labelable:!0}),r[0]=e,r[1]=c):c=r[1];let u;r[2]!==a.className?(u=Ye(W({alignItems:"center",color:j.color.foreground.neutral,display:"flex",gap:j.size.space.regular,height:j.size.element.small,"&::before":{content:'""',backgroundColor:j.color.foreground.neutralTertiary,borderRadius:j.size.radius.full,height:j.size.scale[100],width:j.size.scale[100]},"&[data-tone=neutral]":{color:j.color.foreground.neutralSecondary},"&[data-tone=accent]::before":{backgroundColor:j.color.background.accentEmphasis},"&[data-tone=caution]::before":{backgroundColor:j.color.background.cautionEmphasis},"&[data-tone=critical]::before":{backgroundColor:j.color.background.criticalEmphasis},"&[data-tone=pending]::before":{backgroundColor:j.color.background.pendingEmphasis},"&[data-tone=positive]::before":{backgroundColor:j.color.background.positiveEmphasis}}),a.className),r[2]=a.className,r[3]=u):u=r[3];let d;r[4]!==i?(d=rs(i)?h.jsx(Y,{color:"inherit",children:i}):i,r[4]=i,r[5]=d):d=r[5];let f;return r[6]!==c||r[7]!==a||r[8]!==n||r[9]!==l||r[10]!==u||r[11]!==d?(f=h.jsx("div",{...c,...a,ref:n,"data-tone":l,className:u,children:d}),r[6]=c,r[7]=a,r[8]=n,r[9]=l,r[10]=u,r[11]=d,r[12]=f):f=r[12],f}),Oz=h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"}),Wf=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:18,cy:18,r:3}),h.jsx("circle",{cx:6,cy:6,r:3}),h.jsx("path",{d:"M13 6h3a2 2 0 0 1 2 2v7M6 9v12"})]}),hT=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M6 3v12M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),h.jsx("path",{d:"M15 6a9 9 0 0 0-9 9M18 15v6M21 18h-6"})]}),Rz=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:12,cy:18,r:3}),h.jsx("circle",{cx:6,cy:6,r:3}),h.jsx("circle",{cx:18,cy:6,r:3}),h.jsx("path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9M12 12v3"})]}),Dz=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:20,height:14,x:2,y:3,rx:2}),h.jsx("path",{d:"M8 21h8M12 17v4"})]}),pT=h.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}),gT=h.jsxs(h.Fragment,{children:[h.jsx("circle",{cx:12,cy:12,r:4}),h.jsx("path",{d:"M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"})]}),Mz=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:12,cy:7,r:4})]}),mT=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M6 3v12"}),h.jsx("circle",{cx:18,cy:6,r:3}),h.jsx("circle",{cx:6,cy:18,r:3}),h.jsx("path",{d:"M18 9a9 9 0 0 1-9 9"})]}),yT=wi.createContext(null);function Fz(){const t=wi.useContext(yT);if(!t)throw new Error("useRadioProvider must be used within a RadioGroupProvider");return t}const Pg=new Eh("Radio",["indicator"]);function zv(t){const e=$e(46);let n,r,i;e[0]!==t?({children:i,autoFocus:r,...n}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=i):(n=e[1],r=e[2],i=e[3]);const s=Si(n),o=C.useRef(null),l=Fz(),{state:a}=l;let c;e[4]!==t||e[5]!==l?(c={...t,...l},e[4]=t,e[5]=l,e[6]=c):c=e[6];const{inputProps:u}=BO(c,a,o);let d,f,p,g,m,b,y,x,v;if(e[7]!==s.className||e[8]!==s.style||e[9]!==r||e[10]!==u||e[11]!==o){if(b=W({position:"absolute",zIndex:1,inset:0,opacity:1e-4}),e[21]!==s.className){const I=W({alignItems:"flex-start",display:"inline-flex",gap:j.size.space.regular,position:"relative",userSelect:"none"});let A,O;e[24]===Symbol.for("react.memo_cache_sentinel")?(O={text:{color:"inherit"},description:{color:"neutralTertiary"}},e[24]=O):O=e[24],A=O,y=A,x=Ye(s.className,I),e[21]=s.className,e[22]=y,e[23]=x}else y=e[22],x=e[23];v=s.style,g=Ei,m=r,d=u,f=o,p=Ye(b),e[7]=s.className,e[8]=s.style,e[9]=r,e[10]=u,e[11]=o,e[12]=d,e[13]=f,e[14]=p,e[15]=g,e[16]=m,e[17]=b,e[18]=y,e[19]=x,e[20]=v}else d=e[12],f=e[13],p=e[14],g=e[15],m=e[16],b=e[17],y=e[18],x=e[19],v=e[20];let w;e[25]!==d||e[26]!==f||e[27]!==p?(w=h.jsx("input",{...d,ref:f,className:p}),e[25]=d,e[26]=f,e[27]=p,e[28]=w):w=e[28];let S;e[29]!==g||e[30]!==m||e[31]!==w?(S=h.jsx(g,{autoFocus:m,children:w}),e[29]=g,e[30]=m,e[31]=w,e[32]=S):S=e[32];let k;e[33]!==b?(k=h.jsx(Pz,{inputClassName:b}),e[33]=b,e[34]=k):k=e[34];let E;e[35]!==i?(E=i&&h.jsx($z,{children:rs(i)?h.jsx(Y,{children:i}):i}),e[35]=i,e[36]=E):E=e[36];let T;e[37]!==y||e[38]!==E?(T=h.jsx(Ci,{slots:y,children:E}),e[37]=y,e[38]=E,e[39]=T):T=e[39];let N;return e[40]!==x||e[41]!==v||e[42]!==S||e[43]!==k||e[44]!==T?(N=h.jsxs("label",{className:x,style:v,children:[S,k,T]}),e[40]=x,e[41]=v,e[42]=S,e[43]=k,e[44]=T,e[45]=N):N=e[45],N}let zd=j.size.element.xsmall;const Pz=t=>{let{inputClassName:e}=t;return h.jsx("span",{className:Ye(W({backgroundColor:j.color.background.canvas,borderRadius:j.size.radius.full,color:j.color.foreground.onEmphasis,display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center",position:"relative",height:zd,width:zd,[Pg.selector("indicator")]:{opacity:0,transform:"scale(0) translate3d(0, 0, 0)",transition:vr(["opacity","transform"]),willChange:"opacity, transform"},"::after":{borderRadius:j.size.radius.full,content:'""',inset:0,margin:0,position:"absolute",transition:vr(["box-shadow","margin"],{easing:"easeOut"})},[`.${e}[data-focus=visible] + &::after`]:{boxShadow:`0 0 0 ${j.size.alias.focusRing} ${j.color.alias.focusRing}`,margin:`calc(${j.size.alias.focusRingGap} * -1)`},"&::before":{border:`${j.size.border.medium} solid ${j.color.scale.slate8}`,borderRadius:"inherit",content:'""',inset:0,margin:0,position:"absolute",transition:vr(["border-color","border-width"],{duration:"regular"})},[`.${e}:disabled + &`]:{color:j.color.alias.foregroundDisabled,"&::before":{backgroundColor:j.color.alias.borderDisabled,borderColor:j.color.alias.borderDisabled}},[`.${e}:enabled:hover + &::before`]:{borderColor:j.color.scale.slate9},[`.${e}:enabled:active + &::before`]:{borderColor:j.color.scale.slate10},[`.${e}:checked + &`]:{"&::before":{borderWidth:`calc(${zd} / 2)`},[Pg.selector("indicator")]:{opacity:1,transform:"scale(1)"}},[`.${e}:enabled:checked + &::before`]:{borderColor:j.color.scale.indigo9},[`.${e}:enabled:checked:hover + &::before`]:{borderColor:j.color.scale.indigo10},[`.${e}:enabled:checked:active + &::before`]:{borderColor:j.color.scale.indigo11}})),children:h.jsx("span",{className:Pg.element("indicator"),children:h.jsx("svg",{className:gR,fill:"currentColor",height:12,viewBox:"0 0 24 24",width:12,children:h.jsx("circle",{cx:"12",cy:"12",r:"6"})})})})},$z=t=>{const e=$e(3);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=Ye(W({color:j.color.alias.foregroundIdle,display:"grid",paddingTop:`calc((${zd} - ${j.typography.text.regular.capheight}) / 2)`,gap:j.size.space.large,'input[type="radio"]:hover ~ &':{color:j.color.alias.foregroundHovered},'input[type="radio"]:disabled ~ &':{color:j.color.alias.foregroundDisabled}})),e[0]=n):n=e[0];let r;return e[1]!==t?(r=h.jsx("div",{className:n,...t}),e[1]=t,e[2]=r):r=e[2],r},Lz=C.forwardRef(function(e,n){const r=$e(22);e=WS(e);let i;r[0]!==e?(i=hR(e),r[0]=e,r[1]=i):i=r[1],e=i;const{validationState:s,children:o,orientation:l}=e,a=l===void 0?"vertical":l,c=zO(e),{radioGroupProps:u,labelProps:d,descriptionProps:f,errorMessageProps:p}=VO(e,c);let g;r[2]!==a?(g=Ar({orientation:a}),r[2]=a,r[3]=g):g=r[3];let m;r[4]===Symbol.for("react.memo_cache_sentinel")?(m=Ye(W({display:"flex",gap:j.size.space.large,'&[data-orientation="vertical"]':{flexDirection:"column"}})),r[4]=m):m=r[4];let b;r[5]!==s||r[6]!==c?(b={validationState:s,state:c},r[5]=s,r[6]=c,r[7]=b):b=r[7];let y;r[8]!==b||r[9]!==o?(y=h.jsx(yT.Provider,{value:b,children:o}),r[8]=b,r[9]=o,r[10]=y):y=r[10];let x;r[11]!==u||r[12]!==g||r[13]!==y?(x=h.jsx("div",{...u,...g,className:m,children:y}),r[11]=u,r[12]=g,r[13]=y,r[14]=x):x=r[14];let v;return r[15]!==e||r[16]!==n||r[17]!==d||r[18]!==f||r[19]!==p||r[20]!==x?(v=h.jsx(pR,{...e,ref:n,labelProps:d,labelElementType:"span",descriptionProps:f,errorMessageProps:p,children:x}),r[15]=e,r[16]=n,r[17]=d,r[18]=f,r[19]=p,r[20]=x,r[21]=v):v=r[21],v}),Hu=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h.jsx("path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z"})]}),dp=h.jsx("path",{d:"M15 3h6v6M10 14 21 3M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),bT=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),h.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),xT=h.jsx("path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71M5.17 11.75l-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71M8 2v3M2 8h3M16 19v3M19 16h3"}),Bz=h.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"}),zz=h.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3M21 8h-3a2 2 0 0 1-2-2V3M3 16h3a2 2 0 0 1 2 2v3M16 21v-3a2 2 0 0 1 2-2h3"}),Vz=h.jsx("path",{d:"m4 5 8 8M12 5l-8 8M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07"}),Uz=h.jsx("path",{d:"m4 19 8-8M12 19l-8-8M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06"}),qz=h.jsx("path",{d:"M4 7V4h16v3M9 20h6M12 4v16"}),Hz=h.jsx("path",{d:"M6 4v6a6 6 0 0 0 12 0V4M4 20h16"}),Wz=h.jsx("path",{d:"M21 6H3M15 12H3M17 18H3"}),Kz=h.jsx("path",{d:"M21 6H3M21 12H9M21 18H7"}),Gz=h.jsx("path",{d:"M21 6H3M17 12H7M19 18H5"});var Xa={exports:{}},Vv;function Yz(){if(Vv)return Xa.exports;Vv=1;var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},e=Object.keys(t).join("|"),n=new RegExp(e,"g"),r=new RegExp(e,"");function i(l){return t[l]}var s=function(l){return l.replace(n,i)},o=function(l){return!!l.match(r)};return Xa.exports=s,Xa.exports.has=o,Xa.exports.remove=s,Xa.exports}var Jz=Yz();const Zz=Ib(Jz);/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2020 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const vn={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},Xz=(t,e)=>String(t.rankedValue).localeCompare(String(e.rankedValue));function fp(t,e,n){n===void 0&&(n={});const{keys:r,threshold:i=vn.MATCHES,baseSort:s=Xz,sorter:o=c=>c.sort((u,d)=>n5(u,d,s))}=n,l=t.reduce(a,[]);return o(l).map(c=>{let{item:u}=c;return u});function a(c,u,d){const f=Qz(u,r,e,n),{rank:p,keyThreshold:g=i}=f;return p>=g&&c.push({...f,item:u,index:d}),c}}fp.rankings=vn;function Qz(t,e,n,r){if(!e){const s=t;return{rankedValue:s,rank:Uv(s,n,r),keyIndex:-1,keyThreshold:r.threshold}}return s5(t,e).reduce((s,o,l)=>{let{rank:a,rankedValue:c,keyIndex:u,keyThreshold:d}=s,{itemValue:f,attributes:p}=o,g=Uv(f,n,r),m=c;const{minRanking:b,maxRanking:y,threshold:x}=p;return g<b&&g>=vn.MATCHES?g=b:g>y&&(g=y),g>a&&(a=g,u=l,d=x,m=f),{rankedValue:m,rank:a,keyIndex:u,keyThreshold:d}},{rankedValue:t,rank:vn.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold})}function Uv(t,e,n){return t=qv(t,n),e=qv(e,n),e.length>t.length?vn.NO_MATCH:t===e?vn.CASE_SENSITIVE_EQUAL:(t=t.toLowerCase(),e=e.toLowerCase(),t===e?vn.EQUAL:t.startsWith(e)?vn.STARTS_WITH:t.includes(` ${e}`)?vn.WORD_STARTS_WITH:t.includes(e)?vn.CONTAINS:e.length===1?vn.NO_MATCH:e5(t).includes(e)?vn.ACRONYM:t5(t,e))}function e5(t){let e="";return t.split(" ").forEach(r=>{r.split("-").forEach(s=>{e+=s.substr(0,1)})}),e}function t5(t,e){let n=0,r=0;function i(a,c,u){for(let d=u,f=c.length;d<f;d++)if(c[d]===a)return n+=1,d+1;return-1}function s(a){const c=1/a,u=n/e.length;return vn.MATCHES+u*c}const o=i(e[0],t,0);if(o<0)return vn.NO_MATCH;r=o;for(let a=1,c=e.length;a<c;a++){const u=e[a];if(r=i(u,t,r),!(r>-1))return vn.NO_MATCH}const l=r-o;return s(l)}function n5(t,e,n){const{rank:s,keyIndex:o}=t,{rank:l,keyIndex:a}=e;return s===l?o===a?n(t,e):o<a?-1:1:s>l?-1:1}function qv(t,e){let{keepDiacritics:n}=e;return t=`${t}`,n||(t=Zz(t)),t}function r5(t,e){typeof e=="object"&&(e=e.key);let n;if(typeof e=="function")n=e(t);else if(t==null)n=null;else if(Object.hasOwnProperty.call(t,e))n=t[e];else{if(e.includes("."))return i5(e,t);n=null}return n==null?[]:Array.isArray(n)?n:[String(n)]}function i5(t,e){const n=t.split(".");let r=[e];for(let i=0,s=n.length;i<s;i++){const o=n[i];let l=[];for(let a=0,c=r.length;a<c;a++){const u=r[a];if(u!=null)if(Object.hasOwnProperty.call(u,o)){const d=u[o];d!=null&&l.push(d)}else o==="*"&&(l=l.concat(u))}r=l}return Array.isArray(r[0])?[].concat(...r):r}function s5(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r],o=o5(s),l=r5(t,s);for(let a=0,c=l.length;a<c;a++)n.push({itemValue:l[a],attributes:o})}return n}const Hv={maxRanking:1/0,minRanking:-1/0};function o5(t){return typeof t=="string"?Hv:{...Hv,...t}}const l5=h.jsx("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),a5=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:18,height:18,x:3,y:3,rx:2}),h.jsx("path",{d:"M12 3v18"})]}),vT=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),h.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4M12 12v6M15 15l-3-3-3 3"})]}),Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},uu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let vy=null;const Bi=function(t,e,n){let r=vy||(vy=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},c5=function(){vy=null},rl=function(t,e,n,r){return n&&(Wv(t,e,n,r,-1)||Wv(t,e,n,r,1))},u5=/^(img|br|input|textarea|hr)$/i;function Wv(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:br(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Wu(t)||u5.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?br(t):0}else return!1}}function br(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function d5(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=br(t)}else if(t.parentNode&&!Wu(t))e=Zt(t),t=t.parentNode;else return null}}function f5(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Wu(t))e=Zt(t)+1,t=t.parentNode;else return null}}function h5(t,e,n){for(let r=e==0,i=e==br(t);r||i;){if(t==n)return!0;let s=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==br(t)}}function Wu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const hp=function(t){return t.focusNode&&rl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function wo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function p5(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function g5(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(br(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(br(r.startContainer),r.startOffset)}}}const xi=typeof navigator<"u"?navigator:null,Kv=typeof document<"u"?document:null,oo=xi&&xi.userAgent||"",ky=/Edge\/(\d+)/.exec(oo),kT=/MSIE \d/.exec(oo),wy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oo),qn=!!(kT||wy||ky),$s=kT?document.documentMode:wy?+wy[1]:ky?+ky[1]:0,Wr=!qn&&/gecko\/(\d+)/i.test(oo);Wr&&+(/Firefox\/(\d+)/.exec(oo)||[0,0])[1];const Sy=!qn&&/Chrome\/(\d+)/.exec(oo),cn=!!Sy,wT=Sy?+Sy[1]:0,In=!qn&&!!xi&&/Apple Computer/.test(xi.vendor),ka=In&&(/Mobile\/\w+/.test(oo)||!!xi&&xi.maxTouchPoints>2),gr=ka||(xi?/Mac/.test(xi.platform):!1),m5=xi?/Win/.test(xi.platform):!1,Dr=/Android \d/.test(oo),Ku=!!Kv&&"webkitFontSmoothing"in Kv.documentElement.style,y5=Ku?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function b5(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Pi(t,e){return typeof t=="number"?t:t[e]}function x5(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Gv(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=uu(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,c=a?b5(s):x5(l),u=0,d=0;if(e.top<c.top+Pi(r,"top")?d=-(c.top-e.top+Pi(i,"top")):e.bottom>c.bottom-Pi(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Pi(i,"top")-c.top:e.bottom-c.bottom+Pi(i,"bottom")),e.left<c.left+Pi(r,"left")?u=-(c.left-e.left+Pi(i,"left")):e.right>c.right-Pi(r,"right")&&(u=e.right-c.right+Pi(i,"right")),u||d)if(a)s.defaultView.scrollBy(u,d);else{let f=l.scrollLeft,p=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let g=l.scrollLeft-f,m=l.scrollTop-p;e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function v5(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:ST(t.dom)}}function ST(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=uu(r));return e}function k5({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;CT(n,r==0?0:r-e)}function CT(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let El=null;function w5(t){if(t.setActive)return t.setActive();if(El)return t.focus(El);let e=ST(t);t.focus(El==null?{get preventScroll(){return El={preventScroll:!0},!0}}:void 0),El||(El=!1,CT(e,0))}function ET(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Bi(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let g=f[p];if(g.top<=o&&g.bottom>=l){o=Math.max(g.bottom,o),l=Math.min(g.top,l);let m=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?S5(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:ET(n,i)}function S5(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ys(r,1);if(s.top!=s.bottom&&W0(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function W0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function C5(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function E5(t,e,n){let{node:r,offset:i}=ET(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function I5(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function IT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(W0(e,c))return IT(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function A5(t,e){let n=t.dom.ownerDocument,r,i=0,s=g5(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!W0(e,c)||(o=IT(t.dom,e,c),!o))return null}if(In)for(let c=o;r&&c;c=uu(c))c.draggable&&(r=void 0);if(o=C5(o,e),r){if(Wr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Ku&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=I5(t,r,i,e))}l==null&&(l=E5(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Yv(t){return t.top<t.bottom||t.left<t.right}function ys(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Yv(r))return r}return Array.prototype.find.call(n,Yv)||t.getBoundingClientRect()}const T5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function AT(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Ku||Wr;if(r.nodeType==3)if(o&&(T5.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=ys(Bi(r,i,i),n);if(Wr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ys(Bi(r,i-1,i-1),-1);if(c.top==a.top){let u=ys(Bi(r,i,i+1),-1);if(u.top!=a.top)return Qa(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Qa(ys(Bi(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==br(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return $g(a.getBoundingClientRect(),!1)}if(s==null&&i<br(r)){let a=r.childNodes[i];if(a.nodeType==1)return $g(a.getBoundingClientRect(),!0)}return $g(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==br(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Bi(a,br(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Qa(ys(c,1),!1)}if(s==null&&i<br(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Bi(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return Qa(ys(c,-1),!0)}return Qa(ys(r.nodeType==3?Bi(r):r,-n),n>=0)}function Qa(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function $g(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function TT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function N5(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return TT(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=AT(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Bi(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const j5=/[\u0590-\u08ac]/;function _5(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!j5.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:TT(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:m}=t.domSelectionRange(),b=g&&!p.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==m;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),b}):r.pos==r.start()||r.pos==r.end()}let Jv=null,Zv=null,Xv=!1;function O5(t,e,n){return Jv==e&&Zv==n?Xv:(Jv=e,Zv=n,Xv=n=="up"||n=="down"?N5(t,e,n):_5(t,e,n))}const wr=0,Qv=1,Io=2,vi=3;class Gu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=wr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof jT){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof NT&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Zt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Zt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Zt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Zt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let p=0,g=0;p<this.children.length;p++){let m=this.children[p],b=g+m.size;if(s>g&&o<b)return m.setSelection(e-g-m.border,n-g-m.border,r,i);g=b}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Wr||In)&&e==n){let{node:p,offset:g}=l;if(p.nodeType==3){if(d=!!(g&&p.nodeValue[g-1]==`
`),d&&g==p.nodeValue.length)for(let m=p,b;m;m=m.parentNode){if(b=m.nextSibling){b.nodeName=="BR"&&(l=a={node:b.parentNode,offset:Zt(b)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=p.childNodes[g-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Wr&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&In)&&rl(l.node,l.offset,u.anchorNode,u.anchorOffset)&&rl(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let g=l;l=a,a=g}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Io:Qv,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=vi:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Io:vi}r=o}this.dirty=Io}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Io:Qv;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class NT extends Gu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==wr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class R5 extends Gu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class il extends Gu{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=pl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new il(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&vi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=vi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=wr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wr}}slice(e,n,r){let i=il.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Ey(s,n,o,r)),e>0&&(s=Ey(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ls extends Gu{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=pl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=RT(u,r,n),c?a=new D5(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new pp(e,n,r,i,u,f,s):new Ls(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>G.empty)}return e}matchesNode(e,n,r){return this.dirty==wr&&e.eq(this.node)&&Kf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new F5(this,o&&o.node,e);L5(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?Ke.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,f)=>{a.syncToMarks(c.marks,r,e);let p;a.findNodeMatch(c,u,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,d,p,e)||a.updateNextNode(c,u,d,e,f,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Io)&&(o&&this.protectLocalComposition(e,o),_T(this.contentDOM,this.children,e),ka&&B5(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _e)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=z5(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new R5(this,s,n,i);e.input.compositionNodes.push(o),this.children=Ey(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==vi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=wr}updateOuterDeco(e){if(Kf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=OT(this.dom,this.nodeDOM,Cy(this.outerDeco,this.node,n),Cy(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ek(t,e,n,r,i){RT(r,e,t);let s=new Ls(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class pp extends Ls{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==vi||this.dirty!=wr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=wr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new pp(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class jT extends Gu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==wr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class D5 extends Ls{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==vi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _T(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=tk(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof il){let a=r?r.previousSibling:t.lastChild;_T(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=tk(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Nc=function(t){t&&(this.nodeName=t)};Nc.prototype=Object.create(null);const Ao=[new Nc];function Cy(t,e,n){if(t.length==0)return Ao;let r=n?Ao[0]:new Nc,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Nc(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new Nc(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function OT(t,e,n,r){if(n==Ao&&r==Ao)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Ao[0]),i=a}M5(i,l||Ao[0],o)}return i}function M5(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function RT(t,e,n){return OT(t,t,Ao,Cy(e,n,t.nodeType!=1))}function Kf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function tk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class F5{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=P5(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=wr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=il.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==vi&&o.dom==o.contentDOM&&(o.dirty=Io),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Ls){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,d,f=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=vi&&Kf(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Io,d.updateChildren(i,o+1),d.dirty=wr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Kf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Ls.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Ls.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new NT(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof il;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof pp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((In||cn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new jT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function P5(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof il)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function $5(t,e){return t.type.side-e.type.side}function L5(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(u?(d||(d=[u])).push(b):u=b)}if(u)if(d){d.sort($5);for(let b=0;b<d.length;b++)n(d[b],c,!!a)}else n(u,c,!!a);let f,p;if(a)p=-1,f=a,a=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let b=0;b<l.length;b++)l[b].to<=s&&l.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let g=s+f.nodeSize;if(f.isText){let b=g;o<i.length&&i[o].from<b&&(b=i[o].from);for(let y=0;y<l.length;y++)l[y].to<b&&(b=l[y].to);b<g&&(a=f.cut(b-s),f=f.cut(0,b-s),g=b,p=-1)}else for(;o<i.length&&i[o].to<g;)o++;let m=f.isInline&&!f.isLeaf?l.filter(b=>!b.inline):l.slice();r(f,m,e.forChild(s,f),p),s=g}}function B5(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function z5(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Ey(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function K0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(hp(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&de.isSelectable(d)&&i.parent&&!(d.isInline&&h5(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new de(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let p=0;p<n.rangeCount;p++){let g=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=G0(t,u,l,d)}return c}function DT(t){return t.editable?t.hasFocus():FT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gi(t,e=!1){let n=t.state.selection;if(MT(t,n),!!DT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&cn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&rl(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)U5(t);else{let{anchor:r,head:i}=n,s,o;nk&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(s=rk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=rk(t,n.to))),t.docView.setSelection(r,i,t,e),nk&&(s&&ik(s),o&&ik(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&V5(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const nk=In||cn&&wT<63;function rk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(In&&i&&i.contentEditable=="false")return Lg(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Lg(i);if(s)return Lg(s)}}function Lg(t){return t.contentEditable="true",In&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ik(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function V5(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!DT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function U5(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Zt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&qn&&$s<=11&&(r.disabled=!0,r.disabled=!1)}function MT(t,e){if(e instanceof de){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(sk(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else sk(t)}function sk(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function G0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_e.between(e,n,r)}function ok(t){return t.editable&&!t.hasFocus()?!1:FT(t)}function FT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function q5(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return rl(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Iy(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Te.findFrom(s,e)}function bs(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function lk(t,e,n){let r=t.state.selection;if(r instanceof _e)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return bs(t,new _e(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Iy(t.state,e);return i&&i instanceof de?bs(t,i):!1}else if(!(gr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?de.isSelectable(s)?bs(t,new de(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Ku?bs(t,new _e(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof de&&r.node.isInline)return bs(t,new _e(e>0?r.$to:r.$from));{let i=Iy(t.state,e);return i?bs(t,i):!1}}}function Gf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Il(t,e){return e<0?H5(t):W5(t)}function H5(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Wr&&n.nodeType==1&&r<Gf(n)&&jc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(jc(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(PT(n))break;{let l=n.previousSibling;for(;l&&jc(l,-1);)i=n.parentNode,s=Zt(l),l=l.previousSibling;if(l)n=l,r=Gf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Ay(t,n,r):i&&Ay(t,i,s)}function W5(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Gf(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(jc(l,1))s=n,o=++r;else break}else{if(PT(n))break;{let l=n.nextSibling;for(;l&&jc(l,1);)s=l.parentNode,o=Zt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Gf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Ay(t,s,o)}function PT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function K5(t,e){for(;t&&e==t.childNodes.length&&!Wu(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function G5(t,e){for(;t&&!e&&!Wu(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Ay(t,e,n){if(e.nodeType!=3){let s,o;(o=K5(e,n))?(e=o,n=0):(s=G5(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(hp(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Gi(t)},50)}function ak(t,e){let n=t.state.doc.resolve(e);if(!(cn||m5)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function ck(t,e,n){let r=t.state.selection;if(r instanceof _e&&!r.empty||n.indexOf("s")>-1||gr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Iy(t.state,e);if(o&&o instanceof de)return bs(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Un?Te.near(o,e):Te.findFrom(o,e);return l?bs(t,l):!1}return!1}function uk(t,e){if(!(t.state.selection instanceof _e))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function dk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Y5(t){if(!In||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;dk(t,r,"true"),setTimeout(()=>dk(t,r,"false"),20)}return!1}function J5(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Z5(t,e){let n=e.keyCode,r=J5(e);if(n==8||gr&&n==72&&r=="c")return uk(t,-1)||Il(t,-1);if(n==46&&!e.shiftKey||gr&&n==68&&r=="c")return uk(t,1)||Il(t,1);if(n==13||n==27)return!0;if(n==37||gr&&n==66&&r=="c"){let i=n==37?ak(t,t.state.selection.from)=="ltr"?-1:1:-1;return lk(t,i,r)||Il(t,i)}else if(n==39||gr&&n==70&&r=="c"){let i=n==39?ak(t,t.state.selection.from)=="ltr"?1:-1:1;return lk(t,i,r)||Il(t,i)}else{if(n==38||gr&&n==80&&r=="c")return ck(t,-1,r)||Il(t,-1);if(n==40||gr&&n==78&&r=="c")return Y5(t)||ck(t,1,r)||Il(t,1);if(r==(gr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function $T(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||pl.fromSchema(t.state.schema),l=qT(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=UT[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let g=l.createElement(u[p]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function LT(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new Q(G.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Q.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:p}=t.state,g=pl.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let b=o.appendChild(document.createElement("p"));m&&b.appendChild(g.serializeNode(p.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=t6(n),Ku&&n6(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||_b.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!X5.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=r6(fk(l,+u[1],+u[2]),u[4]);else if(l=Q.maxOpen(Q5(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let p=l.content.firstChild;d<l.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=fk(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const X5=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Q5(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&zT(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=VT(o[o.length-1],s.length));let u=BT(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return G.from(o)}return t}function BT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,G.from(t));return t}function zT(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=zT(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(G.from(BT(n,t,i+1))))}}function VT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,VT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(G.empty,!0);return t.copy(n.append(r))}function Ty(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Ty(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(G.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function fk(t,e,n){return e<t.openStart&&(t=new Q(Ty(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Q(Ty(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const UT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let hk=null;function qT(){return hk||(hk=document.implementation.createHTMLDocument("title"))}let Bg=null;function e6(t){let e=window.trustedTypes;return e?(Bg||(Bg=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Bg.createHTML(t)):t}function t6(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=qT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&UT[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=e6(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function n6(t){let e=t.querySelectorAll(cn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function r6(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=G.from(a.create(r[l+1],i)),s++,o++}return new Q(i,s,o)}const An={},Tn={},i6={touchstart:!0,touchmove:!0};class s6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function o6(t){for(let e in An){let n=An[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{a6(t,r)&&!Y0(t,r)&&(t.editable||!(r.type in Tn))&&n(t,r)},i6[e]?{passive:!0}:void 0)}In&&t.dom.addEventListener("input",()=>null),Ny(t)}function js(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function l6(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ny(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Y0(t,r))})}function Y0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function a6(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function c6(t,e){!Y0(t,e)&&An[e.type]&&(t.editable||!(e.type in Tn))&&An[e.type](t,e)}Tn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!WT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Dr&&cn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ka&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,wo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Z5(t,n)?n.preventDefault():js(t,"key")};Tn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Tn.keypress=(t,e)=>{let n=e;if(WT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||gr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _e)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function gp(t){return{left:t.clientX,top:t.clientY}}function u6(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function J0(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ia(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function d6(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&de.isSelectable(r)?(ia(t,new de(n)),!0):!1}function f6(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof de&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(de.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ia(t,de.create(t.state.doc,i)),!0):!1}function h6(t,e,n,r,i){return J0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?f6(t,n):d6(t,n))}function p6(t,e,n,r){return J0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function g6(t,e,n,r){return J0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||m6(t,n,r)}function m6(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ia(t,_e.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ia(t,_e.create(r,l+1,l+1+o.content.size));else if(de.isSelectable(o))ia(t,de.create(r,l));else continue;return!0}}function Z0(t){return Yf(t)}const HT=gr?"metaKey":"ctrlKey";An.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Z0(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&u6(n,t.input.lastClick)&&!n[HT]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(gp(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new y6(t,o,n,!!r)):(s=="doubleClick"?p6:g6)(t,o.pos,o.inside,n)?n.preventDefault():js(t,"pointer"))};class y6{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[HT],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof de&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),js(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(gp(e))),this.updateAllowDefault(e),this.allowDefault||!n?js(this.view,"pointer"):h6(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||In&&this.mightDrag&&!this.mightDrag.node.isAtom||cn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ia(this.view,Te.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):js(this.view,"pointer")}move(e){this.updateAllowDefault(e),js(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}An.touchstart=t=>{t.input.lastTouch=Date.now(),Z0(t),js(t,"pointer")};An.touchmove=t=>{t.input.lastTouch=Date.now(),js(t,"pointer")};An.contextmenu=t=>Z0(t);function WT(t,e){return t.composing?!0:In&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const b6=Dr?5e3:-1;Tn.compositionstart=Tn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _e&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Yf(t,!0),t.markCursor=null;else if(Yf(t,!e.selection.empty),Wr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}KT(t,b6)};Tn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,KT(t,20))};function KT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Yf(t),e))}function GT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=v6());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function x6(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=d5(e.focusNode,e.focusOffset),r=f5(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function v6(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Yf(t,e=!1){if(!(Dr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),GT(t),e||t.docView&&t.docView.dirty){let n=K0(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function k6(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const du=qn&&$s<15||ka&&y5<604;An.copy=Tn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=du?null:n.clipboardData,o=r.content(),{dom:l,text:a}=$T(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):k6(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function w6(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function S6(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?fu(t,r.value,null,i,e):fu(t,r.textContent,r.innerHTML,i,e)},50)}function fu(t,e,n,r,i){let s=LT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||Q.empty)))return!0;if(!s)return!1;let o=w6(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function YT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Tn.paste=(t,e)=>{let n=e;if(t.composing&&!Dr)return;let r=du?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&fu(t,YT(r),r.getData("text/html"),i,n)?n.preventDefault():S6(t,n)};class JT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const ZT=gr?"altKey":"ctrlKey";An.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(gp(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof de?i.to-1:i.to))){if(r&&r.mightDrag)o=de.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=de.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=$T(t,l);(!n.dataTransfer.files.length||!cn||wT>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(du?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",du||n.dataTransfer.setData("text/plain",c),t.dragging=new JT(u,!n[ZT],o)};An.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Tn.dragover=Tn.dragenter=(t,e)=>e.preventDefault();Tn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(gp(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",g=>{o=g(o,t)}):o=LT(t,YT(n.dataTransfer),du?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[ZT]);if(t.someProp("handleDrop",g=>g(t,n,o||Q.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?kf(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&de.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new de(p));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,b,y,x)=>g=x),c.setSelection(G0(t,p,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};An.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gi(t)},20))};An.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};An.beforeinput=(t,e)=>{if(cn&&Dr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,wo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Tn)An[t]=Tn[t];function hu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Jf{constructor(e,n){this.toDOM=e,this.spec=n||$o,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new It(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Jf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&hu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Bs{constructor(e,n){this.attrs=e,this.spec=n||$o}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new It(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Bs&&hu(this.attrs,e.attrs)&&hu(this.spec,e.spec)}static is(e){return e.type instanceof Bs}destroy(){}}class X0{constructor(e,n){this.attrs=e,this.spec=n||$o}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new It(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof X0&&hu(this.attrs,e.attrs)&&hu(this.spec,e.spec)}destroy(){}}class It{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new It(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new It(e,e,new Jf(n,r))}static inline(e,n,r,i){return new It(e,n,new Bs(r,i))}static node(e,n,r,i){return new It(e,n,new X0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Bs}get widget(){return this.type instanceof Jf}}const Dl=[],$o={};class tt{constructor(e,n){this.local=e.length?e:Dl,this.children=n.length?n:Dl}static create(e,n){return n.length?Zf(n,e,0,$o):sn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==sn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||$o)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?C6(this.children,o||[],e,n,r,i,s):o?new tt(o.sort(Lo),Dl):sn}add(e,n){return n.length?this==sn?tt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=QT(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Zf(u,l,c+1,$o)),s+=3}});let o=XT(s?eN(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new tt(o.length?this.local.concat(o).sort(Lo):this.local,i||this.children)}remove(e){return e.length==0||this==sn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=sn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new tt(i,r):sn}forChild(e,n){if(this==sn)return this;if(n.isLeaf)return tt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Bs){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new tt(i.sort(Lo),Dl);return r?new Ss([l,r]):l}return r||sn}eq(e){if(this==e)return!0;if(!(e instanceof tt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Q0(this.localsInner(e))}localsInner(e){if(this==sn)return Dl;if(e.inlineContent||!this.local.some(Bs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Bs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}tt.empty=new tt([],[]);tt.removeOverlap=Q0;const sn=tt.empty;class Ss{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,$o));return Ss.from(r)}forChild(e,n){if(n.isLeaf)return tt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=sn&&(s instanceof Ss?r=r.concat(s.members):r.push(s))}return Ss.from(r)}eq(e){if(!(e instanceof Ss)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Q0(r?n:n.sort(Lo)):Dl}static from(e){switch(e.length){case 0:return sn;case 1:return e[0];default:return new Ss(e.every(n=>n instanceof tt)?e:e.reduce((n,r)=>n.concat(r instanceof tt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function C6(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,g,m)=>{let b=m-g-(p-f);for(let y=0;y<l.length;y+=3){let x=l[y+1];if(x<0||f>x+u-d)continue;let v=l[y]+u-d;p>=v?l[y+1]=f<=v?-2:-1:f>=u&&b&&(l[y]+=b,l[y+1]+=b)}d+=b}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[c+1]+s,-1),p=f-i,{index:g,offset:m}=r.content.findIndex(d),b=r.maybeChild(g);if(b&&m==d&&m+b.nodeSize==p){let y=l[c+2].mapInner(n,b,u+1,t[c]+s+1,o);y!=sn?(l[c]=d,l[c+1]=p,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=E6(l,t,e,n,i,s,o),u=Zf(c,r,0,o);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new tt(e.sort(Lo),l)}function XT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new It(i.from+e,i.to+e,i.type))}return n}function E6(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function QT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function eN(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Zf(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=QT(t,l,a+n);if(c){s=!0;let u=Zf(c,l,n+a+1,r);u!=sn&&i.push(a,a+l.nodeSize,u)}});let o=XT(s?eN(t):t,-n).sort(Lo);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new tt(o,i):sn}function Lo(t,e){return t.from-e.from||t.to-e.to}function Q0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),pk(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),pk(e,i,r.copy(s.from,r.to)));break}}}return e}function pk(t,e,n){for(;e<t.length&&Lo(n,t[e])>0;)e++;t.splice(e,0,n)}function zg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=sn&&e.push(r)}),t.cursorWrapper&&e.push(tt.create(t.state.doc,[t.cursorWrapper.deco])),Ss.from(e)}const I6={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},A6=qn&&$s<=11;class T6{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class N6{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new T6,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qn&&$s<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),A6&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,I6)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ok(this.view)){if(this.suppressingSelectionUpdates)return Gi(this.view);if(qn&&$s<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&rl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=uu(s))n.add(s);for(let s=e.anchorNode;s;s=uu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ok(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Wr&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||O6(e,d)!=p)&&f.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&hp(r)&&(c=K0(e))&&c.eq(Te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gi(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),j6(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(qn&&$s<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Zt(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Zt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gk=new WeakMap,mk=!1;function j6(t){if(!gk.has(t)&&(gk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Wr,mk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mk=!0}}function yk(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return rl(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function _6(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return yk(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?yk(t,n):null}function O6(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function R6(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],hp(a)||c.push({node:a.focusNode,offset:a.focusOffset})),cn&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let y=r.childNodes[b-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||_b.fromSchema(t.state.schema),p=d.resolve(o),g=null,m=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:D6,context:p});if(c&&c[0].pos!=null){let b=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=b),g={anchor:b+o,head:y+o}}return{doc:m,sel:g,from:o,to:l}}function D6(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(In&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||In&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const M6=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function F6(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=K0(t,N);if(I&&!t.state.selection.eq(I)){if(cn&&Dr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",O=>O(t,wo(13,"Enter"))))return;let A=t.state.tr.setSelection(I);N=="pointer"?A.setMeta("pointer",!0):N=="key"&&A.scrollIntoView(),s&&A.setMeta("composition",s),t.dispatch(A)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=R6(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let g=L6(d.content,c.doc.content,c.from,f,p);if(g&&t.input.domChangeCount++,(ka&&t.input.lastIOSEnter>Date.now()-225||Dr)&&i.some(N=>N.nodeType==1&&!M6.test(N.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",N=>N(t,wo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof _e&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let N=bk(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let I=t.state.tr.setSelection(N);s&&I.setMeta("composition",s),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof _e&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),qn&&$s<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let m=c.doc.resolveNoCache(g.start-c.from),b=c.doc.resolveNoCache(g.endB-c.from),y=u.resolve(g.start),x=m.sameParent(b)&&m.parent.inlineContent&&y.end()>=g.endA,v;if((ka&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!x&&m.pos<c.doc.content.size&&!m.sameParent(b)&&(v=Te.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==b.pos)&&t.someProp("handleKeyDown",N=>N(t,wo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&$6(u,g.start,g.endA,m,b)&&t.someProp("handleKeyDown",N=>N(t,wo(8,"Backspace")))){Dr&&cn&&t.domObserver.suppressSelectionUpdates();return}cn&&Dr&&g.endB==g.start&&(t.input.lastAndroidDelete=Date.now()),Dr&&!x&&m.start()!=b.start()&&b.parentOffset==0&&m.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,b=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,wo(13,"Enter"))})},20));let w=g.start,S=g.endA,k,E,T;if(x){if(m.pos==b.pos)qn&&$s<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gi(t),20)),k=t.state.tr.delete(w,S),E=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(T=P6(m.parent.content.cut(m.parentOffset,b.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start()))))k=t.state.tr,T.type=="add"?k.addMark(w,S,T.mark):k.removeMark(w,S,T.mark);else if(m.parent.child(m.index()).isText&&m.index()==b.index()-(b.textOffset?0:1)){let N=m.parent.textBetween(m.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",I=>I(t,w,S,N)))return;k=t.state.tr.insertText(N,w,S)}}if(k||(k=t.state.tr.replace(w,S,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let N=bk(t,k.doc,c.sel);N&&!(cn&&Dr&&t.composing&&N.empty&&(g.start!=g.endB||t.input.lastAndroidDelete<Date.now()-100)&&(N.head==w||N.head==k.mapping.map(S)-1)||qn&&N.empty&&N.head==w)&&k.setSelection(N)}E&&k.ensureMarks(E),s&&k.setMeta("composition",s),t.dispatch(k.scrollIntoView())}function bk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:G0(t,e.resolve(n.anchor),e.resolve(n.head))}function P6(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(G.from(c).eq(t))return{mark:l,type:o}}function $6(t,e,n,r,i){if(n-e<=i.pos-r.pos||Vg(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Vg(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Vg(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Vg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function L6(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&xk(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&xk(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function xk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class B6{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new s6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Ck),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=wk(this),kk(this),this.nodeViews=Sk(this),this.docView=ek(this.state.doc,vk(this),zg(this),this.dom,this),this.domObserver=new N6(this,(r,i,s,o)=>F6(this,r,i,s,o)),this.domObserver.start(),o6(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ny(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ck),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(GT(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=Sk(this);V6(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ny(this),this.editable=wk(this),kk(this);let a=zg(this),c=vk(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&v5(this);if(o){this.domObserver.stop();let p=d&&(qn||cn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&z6(i.selection,e.selection);if(d){let g=cn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=x6(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ek(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&q5(this))?Gi(this,p):(MT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&k5(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof de){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Gv(this,n.getBoundingClientRect(),e)}else Gv(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new JT(e.slice,e.move,i<0?void 0:de.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(qn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&w5(this.dom),Gi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return A5(this,e)}coordsAtPos(e,n=1){return AT(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return O5(this,n||this.state,e)}pasteHTML(e,n){return fu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return fu(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(l6(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,c5())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return c6(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?In&&this.root.nodeType===11&&p5(this.dom.ownerDocument)==this.dom&&_6(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function vk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[It.node(0,t.state.doc.content.size,e)]}function kk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:It.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function wk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function z6(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Sk(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function V6(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Ck(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const U6=/[\uD800-\uDBFF]/,q6=/[\uDC00-\uDFFF]/,H6=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&U6.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&q6.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},W6=H6,at=new Kr("y-sync"),Bo=new Kr("y-undo"),mc=new Kr("yjs-cursor"),Xf=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!_a(e.ds,t.id),K6=[{light:"#ecd44433",dark:"#ecd444"}],G6=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Qi();t.forEach(i=>r.add(i)),e=e.filter(i=>!r.has(i))}t.set(n,MP(e))}return t.get(n)},Y6=(t,{colors:e=K6,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:s}={})=>{let o=!1;const l=new Z6(t,s),a=new At({props:{editable:c=>{const u=at.getState(c);return u.snapshot==null&&u.prevSnapshot==null}},key:at,state:{init:(c,u)=>({type:t,doc:t.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,u)=>{const d=c.getMeta(at);if(d!==void 0){u=Object.assign({},u);for(const f in d)u[f]=d[f]}return u.addToHistory=c.getMeta("addToHistory")!==!1,u.isChangeOrigin=d!==void 0&&!!d.isChangeOrigin,u.isUndoRedoOperation=d!==void 0&&!!d.isChangeOrigin&&!!d.isUndoRedoOperation,l.prosemirrorView!==null&&d!==void 0&&(d.snapshot!=null||d.prevSnapshot!=null)&&Qb(0,()=>{l.prosemirrorView!=null&&(d.restore==null?l._renderSnapshot(d.snapshot,d.prevSnapshot,u):(l._renderSnapshot(d.snapshot,d.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))}),u}},view:c=>(l.initView(c),s==null&&l._forceRerender(),i(),{update:()=>{const u=a.getState(c.state);if(u.snapshot==null&&u.prevSnapshot==null&&(o||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(o=!0,u.addToHistory===!1&&!u.isChangeOrigin){const d=Bo.getState(c.state),f=d&&d.undoManager;f&&f.stopCapturing()}l.mux(()=>{u.doc.transact(d=>{d.meta.set("addToHistory",u.addToHistory),l._prosemirrorChanged(c.state.doc)},at)})}},destroy:()=>{l.destroy()}})});return a},J6=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null){const r=gu(n.doc,n.type,e.anchor,n.mapping),i=gu(n.doc,n.type,e.head,n.mapping);r!==null&&i!==null&&(t=t.setSelection(_e.create(t.doc,r,i)))}},jy=(t,e)=>({anchor:th(e.selection.anchor,t.type,t.mapping),head:th(e.selection.head,t.type,t.mapping)});class Z6{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=_I(),this.mapping=n,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=jy(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(Xb&&this._domSelectionInView===null&&(Qb(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const i=n.getBoundingClientRect(),s=e3.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||s.clientWidth||0)&&i.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=WE($E(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(at,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>Vd(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Q(G.from(e),0,0));n.setMeta(at,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(i=>Vd(i,this.prosemirrorView.state.schema,this.mapping)).filter(i=>i!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Q(G.from(n),0,0));if(e){const i=ai(Vr(e.anchor,0),r.doc.content.size),s=ai(Vr(e.head,0),r.doc.content.size);r.setSelection(_e.create(r.doc,i,s))}this.prosemirrorView.dispatch(r.setMeta(at,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let i=this.doc;e||(e=pg(this.doc)),(e instanceof Uint8Array||n instanceof Uint8Array)&&((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&ur(),i=new Wn({gc:!1}),Ef(i,n),n=pg(i),Ef(i,e),e=pg(i)),this.mapping.clear(),this.mux(()=>{i.transact(s=>{const o=r.permanentUserData;o&&o.dss.forEach(u=>{Gs(s,u,d=>{})});const l=(u,d)=>{const f=u==="added"?o.getUserByClientId(d.client):o.getUserByDeletedId(d);return{user:f,type:u,color:G6(r.colorMapping,r.colors,f)}},a=iI(this.type,new l0(n.ds,e.sv)).map(u=>!u._item.deleted||Xf(u._item,e)||Xf(u._item,n)?Vd(u,this.prosemirrorView.state.schema,new Map,e,n,l):null).filter(u=>u!==null),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Q(G.from(a),0,0));this.prosemirrorView.dispatch(c.setMeta(at,{isChangeOrigin:!0}))},at)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=at.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const i=(l,a)=>this.mapping.delete(a);Gs(n,n.deleteSet,l=>{if(l.constructor===st){const a=l.content.type;a&&this.mapping.delete(a)}}),n.changed.forEach(i),n.changedParentTypes.forEach(i);const s=this.type.toArray().map(l=>tN(l,this.prosemirrorView.state.schema,this.mapping)).filter(l=>l!==null);let o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Q(G.from(s),0,0));J6(o,this.beforeTransactionSelection,this),o=o.setMeta(at,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof ZE}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{eh(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=jy(this,this.prosemirrorView.state)},at)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const tN=(t,e,n,r,i,s)=>{const o=n.get(t);if(o===void 0){if(t instanceof wn)return Vd(t,e,n,r,i,s);throw Lr()}return o},Vd=(t,e,n,r,i,s)=>{const o=[],l=a=>{if(a.constructor===wn){const c=tN(a,e,n,r,i,s);c!==null&&o.push(c)}else{const c=a._item.right?.content.type;c instanceof Ys&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(a.applyDelta([{retain:a.length},...c.toDelta()]),c.doc.transact(d=>{c._item.delete(d)}));const u=X6(a,e,n,r,i,s);u!==null&&u.forEach(d=>{d!==null&&o.push(d)})}};r===void 0||i===void 0?t.toArray().forEach(l):iI(t,new l0(i.ds,r.sv)).forEach(l);try{const a=t.getAttributes(r);r!==void 0&&(Xf(t._item,r)?Xf(t._item,i)||(a.ychange=s?s("added",t._item.id):{type:"added"}):a.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,a,o);return n.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},at),n.delete(t),null}},X6=(t,e,n,r,i,s)=>{const o=[],l=t.toDelta(r,i,s);try{for(let a=0;a<l.length;a++){const c=l[a],u=[];for(const d in c.attributes)u.push(e.mark(d,c.attributes[d]));o.push(e.text(c.insert,u))}}catch{return t.doc.transact(c=>{t._item.delete(c)},at),null}return o},Q6=(t,e)=>{const n=new ir,r=t.map(i=>({insert:i.text,attributes:rN(i.marks)}));return n.applyDelta(r),e.set(n,t),n},e8=(t,e)=>{const n=new wn(t.type.name);for(const r in t.attrs){const i=t.attrs[r];i!==null&&r!=="ychange"&&n.setAttribute(r,i)}return n.insert(0,mp(t).map(r=>_y(r,e))),e.set(n,t),n},_y=(t,e)=>t instanceof Array?Q6(t,e):e8(t,e),Ek=t=>typeof t=="object"&&t!==null,e1=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]!==null);let r=n.length===Object.keys(e).filter(i=>e[i]!==null).length;for(let i=0;i<n.length&&r;i++){const s=n[i],o=t[s],l=e[s];r=s==="ychange"||o===l||Ek(o)&&Ek(l)&&e1(o,l)}return r},mp=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.isText){const s=[];for(let o=e[r];r<e.length&&o.isText;o=e[++r])s.push(o);r--,n.push(s)}else n.push(i)}return n},nN=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,i)=>r.insert===e[i].text&&Yb(r.attributes||{}).length===e[i].marks.length&&e[i].marks.every(s=>e1(r.attributes[s.type.name]||{},s.attrs)))},pu=(t,e)=>{if(t instanceof wn&&!(e instanceof Array)&&Oy(t,e)){const n=mp(e);return t._length===n.length&&e1(t.getAttributes(),e.attrs)&&t.toArray().every((r,i)=>pu(r,n[i]))}return t instanceof ir&&e instanceof Array&&nN(t,e)},Qf=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),Ik=(t,e,n)=>{const r=t.toArray(),i=mp(e),s=i.length,o=r.length,l=ai(o,s);let a=0,c=0,u=!1;for(;a<l;a++){const d=r[a],f=i[a];if(Qf(n.get(d),f))u=!0;else if(!pu(d,f))break}for(;a+c<l;c++){const d=r[o-c-1],f=i[s-c-1];if(Qf(n.get(d),f))u=!0;else if(!pu(d,f))break}return{equalityFactor:a+c,foundMappedChild:u}},t8=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Ur?e+=n.content.str:n.content instanceof Tt&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},n8=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=t8(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,rN(c.marks))})),{insert:o,remove:l,index:a}=W6(i,s.map(c=>c.insert).join(""));t.delete(a,l),t.insert(a,o),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},rN=t=>{const e={};return t.forEach(n=>{n.type.name!=="ychange"&&(e[n.type.name]=n.attrs)}),e},eh=(t,e,n,r)=>{if(e instanceof wn&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof wn){const d=e.getAttributes(),f=n.attrs;for(const p in f)f[p]!==null?d[p]!==f[p]&&p!=="ychange"&&e.setAttribute(p,f[p]):e.removeAttribute(p);for(const p in d)f[p]===void 0&&e.removeAttribute(p)}const i=mp(n),s=i.length,o=e.toArray(),l=o.length,a=ai(s,l);let c=0,u=0;for(;c<a;c++){const d=o[c],f=i[c];if(!Qf(r.get(d),f))if(pu(d,f))r.set(d,f);else break}for(;u+c+1<a;u++){const d=o[l-u-1],f=i[s-u-1];if(!Qf(r.get(d),f))if(pu(d,f))r.set(d,f);else break}t.transact(()=>{for(;l-c-u>0&&s-c-u>0;){const f=o[c],p=i[c],g=o[l-u-1],m=i[s-u-1];if(f instanceof ir&&p instanceof Array)nN(f,p)||n8(f,p,r),c+=1;else{let b=f instanceof wn&&Oy(f,p),y=g instanceof wn&&Oy(g,m);if(b&&y){const x=Ik(f,p,r),v=Ik(g,m,r);x.foundMappedChild&&!v.foundMappedChild?y=!1:!x.foundMappedChild&&v.foundMappedChild||x.equalityFactor<v.equalityFactor?b=!1:y=!1}b?(eh(t,f,p,r),c+=1):y?(eh(t,g,m,r),u+=1):(r.delete(e.get(c)),e.delete(c,1),e.insert(c,[_y(p,r)]),c+=1)}}const d=l-c-u;if(l===1&&s===0&&o[0]instanceof ir?(r.delete(o[0]),o[0].delete(0,o[0].length)):d>0&&(e.slice(c,c+d).forEach(f=>r.delete(f)),e.delete(c,d)),c+u<s){const f=[];for(let p=c;p<s-u;p++)f.push(_y(i[p],r));e.insert(c,f)}},at)},Oy=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let _c=null;const r8=()=>{const t=_c;_c=null,t.forEach((e,n)=>{const r=n.state.tr,i=at.getState(n.state);i&&i.binding&&!i.binding.isDestroyed&&(e.forEach((s,o)=>{r.setMeta(o,s)}),n.dispatch(r))})},i8=(t,e,n)=>{_c||(_c=new Map,Qb(0,r8)),Gr(_c,t,Cn).set(e,n)},th=(t,e,n)=>{if(t===0)return hg(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof ir){if(r._length>=t)return hg(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<i)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&i>1)return new Jc(r._item===null?null:r._item.id,r._item===null?Gc(r):null,null);if(t-=i,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Jc(r._item===null?null:r._item.id,r._item===null?Gc(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw ur();if(t===0&&r.constructor!==ir&&r!==e)return s8(r._item.parent,r._item)}return hg(e,e._length,-1)},s8=(t,e)=>{let n=null,r=null;return t._item===null?r=Gc(t):n=Ne(t._item.id.client,t._item.id.clock),new Jc(n,r,e.id)},gu=(t,e,n,r)=>{const i=N3(n,t);if(i===null||i.type!==e&&!Yc(e,i.type._item))return null;let s=i.type,o=0;if(s.constructor===ir)o=i.index;else if(s._item===null||!s._item.deleted){let l=s._first,a=0;for(;a<s._length&&a<i.index&&l!==null;){if(!l.deleted){const c=l.content.type;a++,c instanceof ir?o+=c._length:o+=r.get(c).nodeSize}l=l.right}o+=1}for(;s!==e&&s._item!==null;){const l=s._item.parent;if(l._item===null||!l._item.deleted){o+=1;let a=l._first;for(;a!==null;){const c=a.content.type;if(c===s)break;a.deleted||(c instanceof ir?o+=c._length:o+=r.get(c).nodeSize),a=a.right}}s=l}return o-1};function yp(t,e){const n=e||new Js,r=n.doc?n.doc:{transact:i=>i(void 0)};return eh(r,n,t,new Map),n}function o8(t,e){const n=l8(e);return nr.fromJSON(t,n)}function l8(t){const e=t.toArray();function n(r){let i;if(!r.nodeName)i=r.toDelta().map(o=>{const l={type:"text",text:o.insert};return o.attributes&&(l.marks=Object.keys(o.attributes).map(a=>{const c=o.attributes[a],u={type:a};return Object.keys(c)&&(u.attrs=c),u})),l});else{i={type:r.nodeName};const s=r.getAttributes();Object.keys(s).length&&(i.attrs=s);const o=r.toArray();o.length&&(i.content=o.map(n).flat())}return i}return{type:"doc",content:e.map(n)}}const a8=(t,e,n)=>t!==e,c8=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),i=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},u8=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),d8=/^#[0-9a-fA-F]{6}$/,Ak=(t,e,n,r,i)=>{const s=at.getState(t),o=s.doc,l=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?tt.create(t.doc,[]):(e.getStates().forEach((a,c)=>{if(n(o.clientID,c,a)&&a.cursor!=null){const u=a.user||{};u.color==null?u.color="#ffa500":d8.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${c}`);let d=gu(o,s.type,Ec(a.cursor.anchor),s.binding.mapping),f=gu(o,s.type,Ec(a.cursor.head),s.binding.mapping);if(d!==null&&f!==null){const p=Vr(t.doc.content.size-1,0);d=ai(d,p),f=ai(f,p),l.push(It.widget(f,()=>r(u),{key:c+"",side:10}));const g=ai(d,f),m=Vr(d,f);l.push(It.inline(g,m,i(u),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),tt.create(t.doc,l))},f8=(t,{awarenessStateFilter:e=a8,cursorBuilder:n=c8,selectionBuilder:r=u8,getSelection:i=o=>o.selection}={},s="cursor")=>new At({key:mc,state:{init(o,l){return Ak(l,t,e,n,r)},apply(o,l,a,c){const u=at.getState(c),d=o.getMeta(mc);return u&&u.isChangeOrigin||d&&d.awarenessUpdated?Ak(c,t,e,n,r):l.map(o.mapping,o.doc)}},props:{decorations:o=>mc.getState(o)},view:o=>{const l=()=>{o.docView&&i8(o,mc,{awarenessUpdated:!0})},a=()=>{const c=at.getState(o.state),u=t.getLocalState()||{};if(o.hasFocus()){const d=i(o.state),f=th(d.anchor,c.type,c.binding.mapping),p=th(d.head,c.type,c.binding.mapping);(u.cursor==null||!Wx(Ec(u.cursor.anchor),f)||!Wx(Ec(u.cursor.head),p))&&t.setLocalStateField(s,{anchor:f,head:p})}else u.cursor!=null&&gu(c.doc,c.type,Ec(u.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",l),o.dom.addEventListener("focusin",a),o.dom.addEventListener("focusout",a),{update:a,destroy:()=>{o.dom.removeEventListener("focusin",a),o.dom.removeEventListener("focusout",a),t.off("change",l),t.setLocalStateField(s,null)}}}}),h8=t=>{const e=Bo.getState(t).undoManager;if(e!=null)return e.undo(),!0},Tk=t=>{const e=Bo.getState(t).undoManager;if(e!=null)return e.redo(),!0},p8=new Set(["paragraph"]),g8=(t,e)=>!(t instanceof st)||!(t.content instanceof Yr)||!(t.content.type instanceof Ys||t.content.type instanceof wn&&e.has(t.content.type.nodeName))||t.content.type._length===0,m8=({protectedNodes:t=p8,trackedOrigins:e=[],undoManager:n=null}={})=>new At({key:Bo,state:{init:(r,i)=>{const s=at.getState(i),o=n||new ZE(s.type,{trackedOrigins:new Set([at].concat(e)),deleteFilter:l=>g8(l,t),captureTransaction:l=>l.meta.get("addToHistory")!==!1});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(r,i,s,o)=>{const l=at.getState(o).binding,a=i.undoManager,c=a.undoStack.length>0,u=a.redoStack.length>0;return l?{undoManager:a,prevSel:jy(l,s),hasUndoOps:c,hasRedoOps:u}:c!==i.hasUndoOps||u!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}):i}},view:r=>{const i=at.getState(r.state),s=Bo.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:o})=>{const l=i.binding;l&&o.meta.set(l,Bo.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:o})=>{const l=i.binding;l&&(l.beforeTransactionSelection=o.meta.get(l)||l.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}}),iN=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:18,height:18,x:3,y:3,rx:2,ry:2}),h.jsx("path",{d:"M3 9h18M3 15h18M9 9v12M15 9v12"})]}),Nk=t=>typeof t=="object"&&t!=null&&t.nodeType===1,jk=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",Ug=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return jk(n.overflowY,e)||jk(n.overflowX,e)||(r=>{const i=(s=>{if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},bd=(t,e,n,r,i,s,o,l)=>s<t&&o>e||s>t&&o<e?0:s<=t&&l<=n||o>=e&&l>=n?s-t-r:o>e&&l<n||s<t&&l>n?o-e+i:0,y8=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},_k=(t,e)=>{var n,r,i,s;if(typeof document>"u")return[];const{scrollMode:o,block:l,inline:a,boundary:c,skipOverflowHiddenElements:u}=e,d=typeof c=="function"?c:P=>P!==c;if(!Nk(t))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,p=[];let g=t;for(;Nk(g)&&d(g);){if(g=y8(g),g===f){p.push(g);break}g!=null&&g===document.body&&Ug(g)&&!Ug(document.documentElement)||g!=null&&Ug(g,u)&&p.push(g)}const m=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,b=(s=(i=window.visualViewport)==null?void 0:i.height)!=null?s:innerHeight,{scrollX:y,scrollY:x}=window,{height:v,width:w,top:S,right:k,bottom:E,left:T}=t.getBoundingClientRect(),{top:N,right:I,bottom:A,left:O}=(P=>{const B=window.getComputedStyle(P);return{top:parseFloat(B.scrollMarginTop)||0,right:parseFloat(B.scrollMarginRight)||0,bottom:parseFloat(B.scrollMarginBottom)||0,left:parseFloat(B.scrollMarginLeft)||0}})(t);let _=l==="start"||l==="nearest"?S-N:l==="end"?E+A:S+v/2-N+A,F=a==="center"?T+w/2-O+I:a==="end"?k+I:T-O;const M=[];for(let P=0;P<p.length;P++){const B=p[P],{height:z,width:U,top:R,right:J,bottom:Z,left:D}=B.getBoundingClientRect();if(o==="if-needed"&&S>=0&&T>=0&&E<=b&&k<=m&&S>=R&&E<=Z&&T>=D&&k<=J)return M;const ie=getComputedStyle(B),oe=parseInt(ie.borderLeftWidth,10),re=parseInt(ie.borderTopWidth,10),me=parseInt(ie.borderRightWidth,10),ee=parseInt(ie.borderBottomWidth,10);let we=0,ve=0;const Ae="offsetWidth"in B?B.offsetWidth-B.clientWidth-oe-me:0,Oe="offsetHeight"in B?B.offsetHeight-B.clientHeight-re-ee:0,ze="offsetWidth"in B?B.offsetWidth===0?0:U/B.offsetWidth:0,Me="offsetHeight"in B?B.offsetHeight===0?0:z/B.offsetHeight:0;if(f===B)we=l==="start"?_:l==="end"?_-b:l==="nearest"?bd(x,x+b,b,re,ee,x+_,x+_+v,v):_-b/2,ve=a==="start"?F:a==="center"?F-m/2:a==="end"?F-m:bd(y,y+m,m,oe,me,y+F,y+F+w,w),we=Math.max(0,we+x),ve=Math.max(0,ve+y);else{we=l==="start"?_-R-re:l==="end"?_-Z+ee+Oe:l==="nearest"?bd(R,Z,z,re,ee+Oe,_,_+v,v):_-(R+z/2)+Oe/2,ve=a==="start"?F-D-oe:a==="center"?F-(D+U/2)+Ae/2:a==="end"?F-J+me+Ae:bd(D,J,U,oe,me+Ae,F,F+w,w);const{scrollLeft:Le,scrollTop:be}=B;we=Me===0?0:Math.max(0,Math.min(be+we/Me,B.scrollHeight-z/Me+Oe)),ve=ze===0?0:Math.max(0,Math.min(Le+ve/ze,B.scrollWidth-U/ze+Ae)),_+=be-we,F+=Le-ve}M.push({el:B,top:we,left:ve})}return M},b8=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function x8(t,e){if(!t.isConnected||!(i=>{let s=i;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(t))return;const n=(i=>{const s=window.getComputedStyle(i);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(_k(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:s,left:o}of _k(t,b8(e))){const l=s-n.top+n.bottom,a=o-n.left+n.right;i.scroll({top:l,left:a,behavior:r})}}var v8={isHistory(t){return mR(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Im.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Im.isOperationList(t.undos[0].operations))}},qg=new WeakMap,Hg=new WeakMap,ql={isHistoryEditor(t){return v8.isHistory(t.history)&&V.isEditor(t)},isMerging(t){return Hg.get(t)},isSaving(t){return qg.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var n=ql.isMerging(t);Hg.set(t,!1),e(),Hg.set(t,n)},withoutSaving(t,e){var n=ql.isSaving(t);qg.set(t,!1),e(),qg.set(t,n)}},k8=t=>{var e=t,{apply:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:r}=e,{redos:i}=r;if(i.length>0){var s=i[i.length-1];s.selectionBefore&&L.setSelection(e,s.selectionBefore),ql.withoutSaving(e,()=>{V.withoutNormalizing(e,()=>{for(var o of s.operations)e.apply(o)})}),r.redos.pop(),r.undos.push(s)}},e.undo=()=>{var{history:r}=e,{undos:i}=r;if(i.length>0){var s=i[i.length-1];ql.withoutSaving(e,()=>{V.withoutNormalizing(e,()=>{var o=s.operations.map(Im.inverse).reverse();for(var l of o)e.apply(l);s.selectionBefore&&L.setSelection(e,s.selectionBefore)})}),r.redos.push(s),r.undos.pop()}},e.apply=r=>{var{operations:i,history:s}=e,{undos:o}=s,l=o[o.length-1],a=l&&l.operations[l.operations.length-1],c=ql.isSaving(e),u=ql.isMerging(e);if(c==null&&(c=S8(r)),c){if(u==null&&(l==null?u=!1:i.length!==0?u=!0:u=w8(r,a)),l&&u)l.operations.push(r);else{var d={operations:[r],selectionBefore:e.selection};o.push(d)}for(;o.length>100;)o.shift();s.redos=[]}n(r)},e},w8=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&De.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&De.equals(t.path,e.path)),S8=(t,e)=>t.type!=="set_selection";const C8={};function t1(t,e){const n=C8,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sN(t,r,i)}function sN(t,e,n){if(E8(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ok(t.children,e,n)}return Array.isArray(t)?Ok(t,e,n):""}function Ok(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=sN(t[i],e,n);return r.join("")}function E8(t){return!!(t&&typeof t=="object")}const Rk=document.createElement("i");function n1(t){const e="&"+t+";";Rk.innerHTML=e;const n=Rk.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function lr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function mr(t,e){return t.length>0?(lr(t,t.length,0,e),t):e}const Dk={}.hasOwnProperty;function I8(t){const e={};let n=-1;for(;++n<t.length;)A8(e,t[n]);return e}function A8(t,e){let n;for(n in e){const i=(Dk.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Dk.call(i,o)||(i[o]=[]);const l=s[o];T8(i[o],Array.isArray(l)?l:l?[l]:[])}}}function T8(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);lr(t,0,0,r)}function oN(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function sa(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kn=lo(/[A-Za-z]/),Bn=lo(/[\dA-Za-z]/),N8=lo(/[#-'*+\--9=?A-Z^-~]/);function nh(t){return t!==null&&(t<32||t===127)}const Ry=lo(/\d/),j8=lo(/[\dA-Fa-f]/),_8=lo(/[!-/:-@[-`{-~]/);function xe(t){return t!==null&&t<-2}function pt(t){return t!==null&&(t<0||t===32)}function Pe(t){return t===-2||t===-1||t===32}const bp=lo(/\p{P}|\p{S}/u),sl=lo(/\s/);function lo(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function qe(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(a){return Pe(a)?(t.enter(n),l(a)):e(a)}function l(a){return Pe(a)&&s++<i?(t.consume(a),l):(t.exit(n),e(a))}}const O8={tokenize:R8};function R8(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),qe(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const a=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return xe(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const D8={tokenize:M8},Mk={tokenize:F8};function M8(t){const e=this,n=[];let r=0,i,s,o;return l;function l(v){if(r<n.length){const w=n[r];return e.containerState=w[1],t.attempt(w[0].continuation,a,c)(v)}return c(v)}function a(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const w=e.events.length;let S=w,k;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){k=e.events[S][1].end;break}y(r);let E=w;for(;E<e.events.length;)e.events[E][1].end={...k},E++;return lr(e.events,S+1,0,e.events.slice(w)),e.events.length=E,c(v)}return l(v)}function c(v){if(r===n.length){if(!i)return f(v);if(i.currentConstruct&&i.currentConstruct.concrete)return g(v);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Mk,u,d)(v)}function u(v){return i&&x(),y(r),f(v)}function d(v){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,g(v)}function f(v){return e.containerState={},t.attempt(Mk,p,g)(v)}function p(v){return r++,n.push([e.currentConstruct,e.containerState]),f(v)}function g(v){if(v===null){i&&x(),y(0),t.consume(v);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(v)}function m(v){if(v===null){b(t.exit("chunkFlow"),!0),y(0),t.consume(v);return}return xe(v)?(t.consume(v),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(v),m)}function b(v,w){const S=e.sliceStream(v);if(w&&S.push(null),v.previous=s,s&&(s.next=v),s=v,i.defineSkip(v.start),i.write(S),e.parser.lazy[v.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const E=e.events.length;let T=E,N,I;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(N){I=e.events[T][1].end;break}N=!0}for(y(r),k=E;k<e.events.length;)e.events[k][1].end={...I},k++;lr(e.events,T+1,0,e.events.slice(E)),e.events.length=k}}function y(v){let w=n.length;for(;w-- >v;){const S=n[w];e.containerState=S[1],S[0].exit.call(e,t)}n.length=v}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function F8(t,e,n){return qe(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wa(t){if(t===null||pt(t)||sl(t))return 1;if(bp(t))return 2}function xp(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Dy={name:"attention",resolveAll:P8,tokenize:$8};function P8(t,e){let n=-1,r,i,s,o,l,a,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;a=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},f={...t[n][1].start};Fk(d,-a),Fk(f,a),o={type:a>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},l={type:a>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:a>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:a>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[r][1].end={...o.start},t[n][1].start={...l.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=mr(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=mr(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=mr(c,xp(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=mr(c,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=mr(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,lr(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function $8(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=wa(r);let s;return o;function o(a){return s=a,t.enter("attentionSequence"),l(a)}function l(a){if(a===s)return t.consume(a),l;const c=t.exit("attentionSequence"),u=wa(a),d=!u||u===2&&i||n.includes(a),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?d:d&&(i||!f)),c._close=!!(s===42?f:f&&(u||!d)),e(a)}}function Fk(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const L8={name:"autolink",tokenize:B8};function B8(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return kn(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||Bn(p)?(r=1,l(p)):c(p)}function l(p){return p===58?(t.consume(p),r=0,a):(p===43||p===45||p===46||Bn(p))&&r++<32?(t.consume(p),l):(r=0,c(p))}function a(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||nh(p)?n(p):(t.consume(p),a)}function c(p){return p===64?(t.consume(p),u):N8(p)?(t.consume(p),c):n(p)}function u(p){return Bn(p)?d(p):n(p)}function d(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||Bn(p))&&r++<63){const g=p===45?f:d;return t.consume(p),g}return n(p)}}const vp={partial:!0,tokenize:z8};function z8(t,e,n){return r;function r(s){return Pe(s)?qe(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||xe(s)?e(s):n(s)}}const lN={continuation:{tokenize:U8},exit:q8,name:"blockQuote",tokenize:V8};function V8(t,e,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Pe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function U8(t,e,n){const r=this;return i;function i(o){return Pe(o)?qe(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(lN,e,n)(o)}}function q8(t){t.exit("blockQuote")}const aN={name:"characterEscape",tokenize:H8};function H8(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return _8(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const cN={name:"characterReference",tokenize:W8};function W8(t,e,n){const r=this;let i=0,s,o;return l;function l(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),a}function a(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Bn,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=j8,u):(t.enter("characterReferenceValue"),s=7,o=Ry,u(d))}function u(d){if(d===59&&i){const f=t.exit("characterReferenceValue");return o===Bn&&!n1(r.sliceSerialize(f))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),u):n(d)}}const Pk={partial:!0,tokenize:G8},$k={concrete:!0,name:"codeFenced",tokenize:K8};function K8(t,e,n){const r=this,i={partial:!0,tokenize:S};let s=0,o=0,l;return a;function a(k){return c(k)}function c(k){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=k,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(k)}function u(k){return k===l?(o++,t.consume(k),u):o<3?n(k):(t.exit("codeFencedFenceSequence"),Pe(k)?qe(t,d,"whitespace")(k):d(k))}function d(k){return k===null||xe(k)?(t.exit("codeFencedFence"),r.interrupt?e(k):t.check(Pk,m,w)(k)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(k))}function f(k){return k===null||xe(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(k)):Pe(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),qe(t,p,"whitespace")(k)):k===96&&k===l?n(k):(t.consume(k),f)}function p(k){return k===null||xe(k)?d(k):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||xe(k)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(k)):k===96&&k===l?n(k):(t.consume(k),g)}function m(k){return t.attempt(i,w,b)(k)}function b(k){return t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),y}function y(k){return s>0&&Pe(k)?qe(t,x,"linePrefix",s+1)(k):x(k)}function x(k){return k===null||xe(k)?t.check(Pk,m,w)(k):(t.enter("codeFlowValue"),v(k))}function v(k){return k===null||xe(k)?(t.exit("codeFlowValue"),x(k)):(t.consume(k),v)}function w(k){return t.exit("codeFenced"),e(k)}function S(k,E,T){let N=0;return I;function I(M){return k.enter("lineEnding"),k.consume(M),k.exit("lineEnding"),A}function A(M){return k.enter("codeFencedFence"),Pe(M)?qe(k,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):O(M)}function O(M){return M===l?(k.enter("codeFencedFenceSequence"),_(M)):T(M)}function _(M){return M===l?(N++,k.consume(M),_):N>=o?(k.exit("codeFencedFenceSequence"),Pe(M)?qe(k,F,"whitespace")(M):F(M)):T(M)}function F(M){return M===null||xe(M)?(k.exit("codeFencedFence"),E(M)):T(M)}}}function G8(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Wg={name:"codeIndented",tokenize:J8},Y8={partial:!0,tokenize:Z8};function J8(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),qe(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?a(c):xe(c)?t.attempt(Y8,o,a)(c):(t.enter("codeFlowValue"),l(c))}function l(c){return c===null||xe(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),l)}function a(c){return t.exit("codeIndented"),e(c)}}function Z8(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):xe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):qe(t,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):xe(o)?i(o):n(o)}}const X8={name:"codeText",previous:e7,resolve:Q8,tokenize:t7};function Q8(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function e7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function t7(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),l(d)}function l(d){return d===96?(t.consume(d),r++,l):(t.exit("codeTextSequence"),a(d))}function a(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),a):d===96?(s=t.enter("codeTextSequence"),i=0,u(d)):xe(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),a):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||xe(d)?(t.exit("codeTextData"),a(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",c(d))}}class n7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ec(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ec(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ec(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ec(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ec(this.left,n.reverse())}}}function ec(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function uN(t){const e={};let n=-1,r,i,s,o,l,a,c;const u=new n7(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(a=r[1]._tokenizer.events,s=0,s<a.length&&a[s][1].type==="lineEndingBlank"&&(s+=2),s<a.length&&a[s][1].type==="content"))for(;++s<a.length&&a[s][1].type!=="content";)a[s][1].type==="chunkText"&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,r7(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return lr(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function r7(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),l=o.events,a=[],c={};let u,d,f=-1,p=n,g=0,m=0;const b=[m];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(m=f+1,b.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),f=b.length;f--;){const y=l.slice(b[f],b[f+1]),x=s.pop();a.push([x,x+y.length-1]),t.splice(x,2,y)}for(a.reverse(),f=-1;++f<a.length;)c[g+a[f][0]]=g+a[f][1],g+=a[f][1]-a[f][0]-1;return c}const i7={resolve:o7,tokenize:l7},s7={partial:!0,tokenize:a7};function o7(t){return uN(t),t}function l7(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):xe(l)?t.check(s7,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function a7(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),qe(t,s,"linePrefix")}function s(o){if(o===null||xe(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function dN(t,e,n,r,i,s,o,l,a){const c=a||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),f):y===null||y===32||y===41||nh(y)?n(y):(t.enter(r),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(t.exit("chunkString"),t.exit(l),f(y)):y===null||y===60||xe(y)?n(y):(t.consume(y),y===92?g:p)}function g(y){return y===60||y===62||y===92?(t.consume(y),p):p(y)}function m(y){return!u&&(y===null||y===41||pt(y))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(r),e(y)):u<c&&y===40?(t.consume(y),u++,m):y===41?(t.consume(y),u--,m):y===null||y===32||y===40||nh(y)?n(y):(t.consume(y),y===92?b:m)}function b(y){return y===40||y===41||y===92?(t.consume(y),m):m(y)}}function fN(t,e,n,r,i,s){const o=this;let l=0,a;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return l>999||p===null||p===91||p===93&&!a||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):xe(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||xe(p)||l++>999?(t.exit("chunkString"),u(p)):(t.consume(p),a||(a=!Pe(p)),p===92?f:d)}function f(p){return p===91||p===92||p===93?(t.consume(p),l++,d):d(p)}}function hN(t,e,n,r,i,s){let o;return l;function l(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,a):n(f)}function a(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),a(o)):f===null?n(f):xe(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),qe(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||xe(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?d:u)}function d(f){return f===o||f===92?(t.consume(f),u):u(f)}}function Oc(t,e){let n;return r;function r(i){return xe(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Pe(i)?qe(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const c7={name:"definition",tokenize:d7},u7={partial:!0,tokenize:f7};function d7(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return fN.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=sa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),a):n(p)}function a(p){return pt(p)?Oc(t,c)(p):c(p)}function c(p){return dN(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(u7,d,d)(p)}function d(p){return Pe(p)?qe(t,f,"whitespace")(p):f(p)}function f(p){return p===null||xe(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function f7(t,e,n){return r;function r(l){return pt(l)?Oc(t,i)(l):n(l)}function i(l){return hN(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Pe(l)?qe(t,o,"whitespace")(l):o(l)}function o(l){return l===null||xe(l)?e(l):n(l)}}const h7={name:"hardBreakEscape",tokenize:p7};function p7(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return xe(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const g7={name:"headingAtx",resolve:m7,tokenize:y7};function m7(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},lr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function y7(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||pt(u)?(t.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),a(u)):u===null||xe(u)?(t.exit("atxHeading"),e(u)):Pe(u)?qe(t,l,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function a(u){return u===35?(t.consume(u),a):(t.exit("atxHeadingSequence"),l(u))}function c(u){return u===null||u===35||pt(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),c)}}const b7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lk=["pre","script","style","textarea"],x7={concrete:!0,name:"htmlFlow",resolveTo:w7,tokenize:S7},v7={partial:!0,tokenize:E7},k7={partial:!0,tokenize:C7};function w7(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function S7(t,e,n){const r=this;let i,s,o,l,a;return c;function c(D){return u(D)}function u(D){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(D),d}function d(D){return D===33?(t.consume(D),f):D===47?(t.consume(D),s=!0,m):D===63?(t.consume(D),i=3,r.interrupt?e:R):kn(D)?(t.consume(D),o=String.fromCharCode(D),b):n(D)}function f(D){return D===45?(t.consume(D),i=2,p):D===91?(t.consume(D),i=5,l=0,g):kn(D)?(t.consume(D),i=4,r.interrupt?e:R):n(D)}function p(D){return D===45?(t.consume(D),r.interrupt?e:R):n(D)}function g(D){const ie="CDATA[";return D===ie.charCodeAt(l++)?(t.consume(D),l===ie.length?r.interrupt?e:O:g):n(D)}function m(D){return kn(D)?(t.consume(D),o=String.fromCharCode(D),b):n(D)}function b(D){if(D===null||D===47||D===62||pt(D)){const ie=D===47,oe=o.toLowerCase();return!ie&&!s&&Lk.includes(oe)?(i=1,r.interrupt?e(D):O(D)):b7.includes(o.toLowerCase())?(i=6,ie?(t.consume(D),y):r.interrupt?e(D):O(D)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):s?x(D):v(D))}return D===45||Bn(D)?(t.consume(D),o+=String.fromCharCode(D),b):n(D)}function y(D){return D===62?(t.consume(D),r.interrupt?e:O):n(D)}function x(D){return Pe(D)?(t.consume(D),x):I(D)}function v(D){return D===47?(t.consume(D),I):D===58||D===95||kn(D)?(t.consume(D),w):Pe(D)?(t.consume(D),v):I(D)}function w(D){return D===45||D===46||D===58||D===95||Bn(D)?(t.consume(D),w):S(D)}function S(D){return D===61?(t.consume(D),k):Pe(D)?(t.consume(D),S):v(D)}function k(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),a=D,E):Pe(D)?(t.consume(D),k):T(D)}function E(D){return D===a?(t.consume(D),a=null,N):D===null||xe(D)?n(D):(t.consume(D),E)}function T(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||pt(D)?S(D):(t.consume(D),T)}function N(D){return D===47||D===62||Pe(D)?v(D):n(D)}function I(D){return D===62?(t.consume(D),A):n(D)}function A(D){return D===null||xe(D)?O(D):Pe(D)?(t.consume(D),A):n(D)}function O(D){return D===45&&i===2?(t.consume(D),P):D===60&&i===1?(t.consume(D),B):D===62&&i===4?(t.consume(D),J):D===63&&i===3?(t.consume(D),R):D===93&&i===5?(t.consume(D),U):xe(D)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(v7,Z,_)(D)):D===null||xe(D)?(t.exit("htmlFlowData"),_(D)):(t.consume(D),O)}function _(D){return t.check(k7,F,Z)(D)}function F(D){return t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),M}function M(D){return D===null||xe(D)?_(D):(t.enter("htmlFlowData"),O(D))}function P(D){return D===45?(t.consume(D),R):O(D)}function B(D){return D===47?(t.consume(D),o="",z):O(D)}function z(D){if(D===62){const ie=o.toLowerCase();return Lk.includes(ie)?(t.consume(D),J):O(D)}return kn(D)&&o.length<8?(t.consume(D),o+=String.fromCharCode(D),z):O(D)}function U(D){return D===93?(t.consume(D),R):O(D)}function R(D){return D===62?(t.consume(D),J):D===45&&i===2?(t.consume(D),R):O(D)}function J(D){return D===null||xe(D)?(t.exit("htmlFlowData"),Z(D)):(t.consume(D),J)}function Z(D){return t.exit("htmlFlow"),e(D)}}function C7(t,e,n){const r=this;return i;function i(o){return xe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function E7(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(vp,e,n)}}const I7={name:"htmlText",tokenize:A7};function A7(t,e,n){const r=this;let i,s,o;return l;function l(R){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(R),a}function a(R){return R===33?(t.consume(R),c):R===47?(t.consume(R),S):R===63?(t.consume(R),v):kn(R)?(t.consume(R),T):n(R)}function c(R){return R===45?(t.consume(R),u):R===91?(t.consume(R),s=0,g):kn(R)?(t.consume(R),x):n(R)}function u(R){return R===45?(t.consume(R),p):n(R)}function d(R){return R===null?n(R):R===45?(t.consume(R),f):xe(R)?(o=d,B(R)):(t.consume(R),d)}function f(R){return R===45?(t.consume(R),p):d(R)}function p(R){return R===62?P(R):R===45?f(R):d(R)}function g(R){const J="CDATA[";return R===J.charCodeAt(s++)?(t.consume(R),s===J.length?m:g):n(R)}function m(R){return R===null?n(R):R===93?(t.consume(R),b):xe(R)?(o=m,B(R)):(t.consume(R),m)}function b(R){return R===93?(t.consume(R),y):m(R)}function y(R){return R===62?P(R):R===93?(t.consume(R),y):m(R)}function x(R){return R===null||R===62?P(R):xe(R)?(o=x,B(R)):(t.consume(R),x)}function v(R){return R===null?n(R):R===63?(t.consume(R),w):xe(R)?(o=v,B(R)):(t.consume(R),v)}function w(R){return R===62?P(R):v(R)}function S(R){return kn(R)?(t.consume(R),k):n(R)}function k(R){return R===45||Bn(R)?(t.consume(R),k):E(R)}function E(R){return xe(R)?(o=E,B(R)):Pe(R)?(t.consume(R),E):P(R)}function T(R){return R===45||Bn(R)?(t.consume(R),T):R===47||R===62||pt(R)?N(R):n(R)}function N(R){return R===47?(t.consume(R),P):R===58||R===95||kn(R)?(t.consume(R),I):xe(R)?(o=N,B(R)):Pe(R)?(t.consume(R),N):P(R)}function I(R){return R===45||R===46||R===58||R===95||Bn(R)?(t.consume(R),I):A(R)}function A(R){return R===61?(t.consume(R),O):xe(R)?(o=A,B(R)):Pe(R)?(t.consume(R),A):N(R)}function O(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),i=R,_):xe(R)?(o=O,B(R)):Pe(R)?(t.consume(R),O):(t.consume(R),F)}function _(R){return R===i?(t.consume(R),i=void 0,M):R===null?n(R):xe(R)?(o=_,B(R)):(t.consume(R),_)}function F(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||pt(R)?N(R):(t.consume(R),F)}function M(R){return R===47||R===62||pt(R)?N(R):n(R)}function P(R){return R===62?(t.consume(R),t.exit("htmlTextData"),t.exit("htmlText"),e):n(R)}function B(R){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),z}function z(R){return Pe(R)?qe(t,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):U(R)}function U(R){return t.enter("htmlTextData"),o(R)}}const r1={name:"labelEnd",resolveAll:_7,resolveTo:O7,tokenize:R7},T7={tokenize:D7},N7={tokenize:M7},j7={tokenize:F7};function _7(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&lr(t,0,t.length,n),t}function O7(t,e){let n=t.length,r=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const a={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",a,e],["enter",c,e]],l=mr(l,t.slice(s+1,s+r+3)),l=mr(l,[["enter",u,e]]),l=mr(l,xp(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),l=mr(l,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),l=mr(l,t.slice(o+1)),l=mr(l,[["exit",a,e]]),lr(t,s,t.length,l),t}function R7(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(sa(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),a):n(f)}function a(f){return f===40?t.attempt(T7,u,o?u:d)(f):f===91?t.attempt(N7,u,o?c:d)(f):o?u(f):d(f)}function c(f){return t.attempt(j7,u,d)(f)}function u(f){return e(f)}function d(f){return s._balanced=!0,n(f)}}function D7(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return pt(d)?Oc(t,s)(d):s(d)}function s(d){return d===41?u(d):dN(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return pt(d)?Oc(t,a)(d):u(d)}function l(d){return n(d)}function a(d){return d===34||d===39||d===40?hN(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return pt(d)?Oc(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function M7(t,e,n){const r=this;return i;function i(l){return fN.call(r,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(sa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function F7(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const P7={name:"labelStartImage",resolveAll:r1.resolveAll,tokenize:$7};function $7(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const L7={name:"labelStartLink",resolveAll:r1.resolveAll,tokenize:B7};function B7(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Kg={name:"lineEnding",tokenize:z7};function z7(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),qe(t,e,"linePrefix")}}const Ud={name:"thematicBreak",tokenize:V7};function V7(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,l(c)}function l(c){return c===i?(t.enter("thematicBreakSequence"),a(c)):r>=3&&(c===null||xe(c))?(t.exit("thematicBreak"),e(c)):n(c)}function a(c){return c===i?(t.consume(c),r++,a):(t.exit("thematicBreakSequence"),Pe(c)?qe(t,l,"whitespace")(c):l(c))}}const Rn={continuation:{tokenize:W7},exit:G7,name:"list",tokenize:H7},U7={partial:!0,tokenize:Y7},q7={partial:!0,tokenize:K7};function H7(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Ry(p)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Ud,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(p)}return n(p)}function a(p){return Ry(p)&&++o<10?(t.consume(p),a):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(vp,r.interrupt?n:u,t.attempt(U7,f,d))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function d(p){return Pe(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function W7(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(vp,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,qe(t,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Pe(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(q7,e,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,qe(t,t.attempt(Rn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function K7(t,e,n){const r=this;return qe(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function G7(t){t.exit(this.containerState.type)}function Y7(t,e,n){const r=this;return qe(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Pe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Bk={name:"setextUnderline",resolveTo:J7,tokenize:Z7};function J7(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function Z7(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===i?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),Pe(c)?qe(t,a,"lineSuffix")(c):a(c))}function a(c){return c===null||xe(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const X7={tokenize:Q7};function Q7(t){const e=this,n=t.attempt(vp,r,t.attempt(this.parser.constructs.flowInitial,i,qe(t,t.attempt(this.parser.constructs.flow,i,t.attempt(i7,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const e9={resolveAll:gN()},t9=pN("string"),n9=pN("text");function pN(t){return{resolveAll:gN(t==="text"?r9:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(u){return c(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),a}function a(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),a)}function c(u){if(u===null)return!0;const d=i[u];let f=-1;if(d)for(;++f<d.length;){const p=d[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function gN(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function r9(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,l=0,a;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)a=!0,l++;else if(c!==-1){s++;break}}if(l){const c={type:n===t.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const i9={42:Rn,43:Rn,45:Rn,48:Rn,49:Rn,50:Rn,51:Rn,52:Rn,53:Rn,54:Rn,55:Rn,56:Rn,57:Rn,62:lN},s9={91:c7},o9={[-2]:Wg,[-1]:Wg,32:Wg},l9={35:g7,42:Ud,45:[Bk,Ud],60:x7,61:Bk,95:Ud,96:$k,126:$k},a9={38:cN,92:aN},c9={[-5]:Kg,[-4]:Kg,[-3]:Kg,33:P7,38:cN,42:Dy,60:[L8,I7],91:L7,92:[h7,aN],93:r1,95:Dy,96:X8},u9={null:[Dy,e9]},d9={null:[42,95]},f9={null:[]},h9=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:d9,contentInitial:s9,disable:f9,document:i9,flow:l9,flowInitial:o9,insideSpan:u9,string:a9,text:c9},Symbol.toStringTag,{value:"Module"}));function p9(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const a={attempt:E(S),check:E(k),consume:x,enter:v,exit:w,interrupt:E(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:g,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:d};let u=e.tokenize.call(c,a);return e.resolveAll&&s.push(e),c;function d(A){return o=mr(o,A),b(),o[o.length-1]!==null?[]:(T(e,0),c.events=xp(s,c.events,c),c.events)}function f(A,O){return m9(p(A),O)}function p(A){return g9(o,A)}function g(){const{_bufferIndex:A,_index:O,line:_,column:F,offset:M}=r;return{_bufferIndex:A,_index:O,line:_,column:F,offset:M}}function m(A){i[A.line]=A.column,I()}function b(){let A;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(A){u=u(A)}function x(A){xe(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,I()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=A}function v(A,O){const _=O||{};return _.type=A,_.start=g(),c.events.push(["enter",_,c]),l.push(_),_}function w(A){const O=l.pop();return O.end=g(),c.events.push(["exit",O,c]),O}function S(A,O){T(A,O.from)}function k(A,O){O.restore()}function E(A,O){return _;function _(F,M,P){let B,z,U,R;return Array.isArray(F)?Z(F):"tokenize"in F?Z([F]):J(F);function J(re){return me;function me(ee){const we=ee!==null&&re[ee],ve=ee!==null&&re.null,Ae=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return Z(Ae)(ee)}}function Z(re){return B=re,z=0,re.length===0?P:D(re[z])}function D(re){return me;function me(ee){return R=N(),U=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?oe():re.tokenize.call(O?Object.assign(Object.create(c),O):c,a,ie,oe)(ee)}}function ie(re){return A(U,R),M}function oe(re){return R.restore(),++z<B.length?D(B[z]):P}}}function T(A,O){A.resolveAll&&!s.includes(A)&&s.push(A),A.resolve&&lr(c.events,O,c.events.length-O,A.resolve(c.events.slice(O),c)),A.resolveTo&&(c.events=A.resolveTo(c.events,c))}function N(){const A=g(),O=c.previous,_=c.currentConstruct,F=c.events.length,M=Array.from(l);return{from:F,restore:P};function P(){r=A,c.previous=O,c.currentConstruct=_,c.events.length=F,l=M,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function g9(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function m9(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function y9(t){const r={constructs:I8([h9,...(t||{}).extensions||[]]),content:i(O8),defined:[],document:i(D8),flow:i(X7),lazy:{},string:i(t9),text:i(n9)};return r;function i(s){return o;function o(l){return p9(r,s,l)}}}function b9(t){for(;!uN(t););return t}const zk=/[\0\t\n\r]/g;function x9(){let t=1,e="",n=!0,r;return i;function i(s,o,l){const a=[];let c,u,d,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(zk.lastIndex=d,c=zk.exec(s),f=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(f),!c){e=s.slice(d);break}if(p===10&&d===f&&r)a.push(-3),r=void 0;else switch(r&&(a.push(-5),r=void 0),d<f&&(a.push(s.slice(d,f)),t+=f-d),p){case 0:{a.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,a.push(-2);t++<u;)a.push(-1);break}case 10:{a.push(-4),t=1;break}default:r=!0,t=1}d=f+1}return l&&(r&&a.push(-5),e&&a.push(e),a.push(null)),a}}const v9=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mN(t){return t.replace(v9,k9)}function k9(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return oN(n.slice(s?2:1),s?16:10)}return n1(n)||t}function qd(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Vk(t.position):"start"in t||"end"in t?Vk(t):"line"in t||"column"in t?My(t):""}function My(t){return Uk(t&&t.line)+":"+Uk(t&&t.column)}function Vk(t){return My(t&&t.start)+"-"+My(t&&t.end)}function Uk(t){return t&&typeof t=="number"?t:1}const yN={}.hasOwnProperty;function bN(t,e,n){return typeof e!="string"&&(n=e,e=void 0),w9(n)(b9(y9(n).document().write(x9()(t,e,!0))))}function w9(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ot),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(Le),blockQuote:s(ve),characterEscape:N,characterReference:N,codeFenced:s(Ae),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ae,o),codeText:s(Oe,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Me),hardBreakEscape:s(be),hardBreakTrailing:s(be),htmlFlow:s(rt,o),htmlFlowData:N,htmlText:s(rt,o),htmlTextData:N,image:s(jt),label:o,link:s(ot),listItem:s(se),listItemValue:f,listOrdered:s(Ft,d),listUnordered:s(Ft),paragraph:s(pe),reference:D,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Le),strong:s(Ze),thematicBreak:s(cs)},exit:{atxHeading:a(),atxHeadingSequence:S,autolink:a(),autolinkEmail:we,autolinkProtocol:ee,blockQuote:a(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:re,characterReference:me,codeFenced:a(b),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:I,codeIndented:a(y),codeText:a(M),codeTextData:I,data:I,definition:a(),definitionDestinationString:w,definitionLabelString:x,definitionTitleString:v,emphasis:a(),hardBreakEscape:a(O),hardBreakTrailing:a(O),htmlFlow:a(_),htmlFlowData:I,htmlText:a(F),htmlTextData:I,image:a(B),label:U,labelText:z,lineEnding:A,link:a(P),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:ie,resourceDestinationString:R,resourceTitleString:J,resource:Z,setextHeading:a(T),setextHeadingLineSequence:E,setextHeadingText:k,strong:a(),thematicBreak:a()}};xN(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(H){let ne={type:"root",children:[]};const Ie={stack:[ne],tokenStack:[],config:e,enter:l,exit:c,buffer:o,resume:u,data:n},Fe=[];let Xe=-1;for(;++Xe<H.length;)if(H[Xe][1].type==="listOrdered"||H[Xe][1].type==="listUnordered")if(H[Xe][0]==="enter")Fe.push(Xe);else{const Yn=Fe.pop();Xe=i(H,Yn,Xe)}for(Xe=-1;++Xe<H.length;){const Yn=e[H[Xe][0]];yN.call(Yn,H[Xe][1].type)&&Yn[H[Xe][1].type].call(Object.assign({sliceSerialize:H[Xe][2].sliceSerialize},Ie),H[Xe][1])}if(Ie.tokenStack.length>0){const Yn=Ie.tokenStack[Ie.tokenStack.length-1];(Yn[1]||qk).call(Ie,void 0,Yn[0])}for(ne.position={start:ds(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:ds(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},Xe=-1;++Xe<e.transforms.length;)ne=e.transforms[Xe](ne)||ne;return ne}function i(H,ne,Ie){let Fe=ne-1,Xe=-1,Yn=!1,ao,Ri,Wa,Ka;for(;++Fe<=Ie;){const Jn=H[Fe];switch(Jn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Jn[0]==="enter"?Xe++:Xe--,Ka=void 0;break}case"lineEndingBlank":{Jn[0]==="enter"&&(ao&&!Ka&&!Xe&&!Wa&&(Wa=Fe),Ka=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ka=void 0}if(!Xe&&Jn[0]==="enter"&&Jn[1].type==="listItemPrefix"||Xe===-1&&Jn[0]==="exit"&&(Jn[1].type==="listUnordered"||Jn[1].type==="listOrdered")){if(ao){let Sl=Fe;for(Ri=void 0;Sl--;){const Di=H[Sl];if(Di[1].type==="lineEnding"||Di[1].type==="lineEndingBlank"){if(Di[0]==="exit")continue;Ri&&(H[Ri][1].type="lineEndingBlank",Yn=!0),Di[1].type="lineEnding",Ri=Sl}else if(!(Di[1].type==="linePrefix"||Di[1].type==="blockQuotePrefix"||Di[1].type==="blockQuotePrefixWhitespace"||Di[1].type==="blockQuoteMarker"||Di[1].type==="listItemIndent"))break}Wa&&(!Ri||Wa<Ri)&&(ao._spread=!0),ao.end=Object.assign({},Ri?H[Ri][1].start:Jn[1].end),H.splice(Ri||Fe,0,["exit",ao,Jn[2]]),Fe++,Ie++}if(Jn[1].type==="listItemPrefix"){const Sl={type:"listItem",_spread:!1,start:Object.assign({},Jn[1].start),end:void 0};ao=Sl,H.splice(Fe,0,["enter",Sl,Jn[2]]),Fe++,Ie++,Wa=void 0,Ka=!0}}}return H[ne][1]._spread=Yn,Ie}function s(H,ne){return Ie;function Ie(Fe){l.call(this,H(Fe),Fe),ne&&ne.call(this,Fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(H,ne,Ie){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([ne,Ie||void 0]),H.position={start:ds(ne.start),end:void 0}}function a(H){return ne;function ne(Ie){H&&H.call(this,Ie),c.call(this,Ie)}}function c(H,ne){const Ie=this.stack.pop(),Fe=this.tokenStack.pop();if(Fe)Fe[0].type!==H.type&&(ne?ne.call(this,H,Fe[0]):(Fe[1]||qk).call(this,H,Fe[0]));else throw new Error("Cannot close `"+H.type+"` ("+qd({start:H.start,end:H.end})+"): it’s not open");Ie.position.end=ds(H.end)}function u(){return t1(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(H){if(this.data.expectingFirstListItemValue){const ne=this.stack[this.stack.length-2];ne.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function p(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.lang=H}function g(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.meta=H}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.value=H.replace(/(\r?\n|\r)$/g,"")}function x(H){const ne=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=ne,Ie.identifier=sa(this.sliceSerialize(H)).toLowerCase()}function v(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.title=H}function w(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.url=H}function S(H){const ne=this.stack[this.stack.length-1];if(!ne.depth){const Ie=this.sliceSerialize(H).length;ne.depth=Ie}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function E(H){const ne=this.stack[this.stack.length-1];ne.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function N(H){const Ie=this.stack[this.stack.length-1].children;let Fe=Ie[Ie.length-1];(!Fe||Fe.type!=="text")&&(Fe=kt(),Fe.position={start:ds(H.start),end:void 0},Ie.push(Fe)),this.stack.push(Fe)}function I(H){const ne=this.stack.pop();ne.value+=this.sliceSerialize(H),ne.position.end=ds(H.end)}function A(H){const ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ie=ne.children[ne.children.length-1];Ie.position.end=ds(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ne.type)&&(N.call(this,H),I.call(this,H))}function O(){this.data.atHardBreak=!0}function _(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.value=H}function F(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.value=H}function M(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.value=H}function P(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const ne=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=ne,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function B(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const ne=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=ne,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function z(H){const ne=this.sliceSerialize(H),Ie=this.stack[this.stack.length-2];Ie.label=mN(ne),Ie.identifier=sa(ne).toLowerCase()}function U(){const H=this.stack[this.stack.length-1],ne=this.resume(),Ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ie.type==="link"){const Fe=H.children;Ie.children=Fe}else Ie.alt=ne}function R(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.url=H}function J(){const H=this.resume(),ne=this.stack[this.stack.length-1];ne.title=H}function Z(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function ie(H){const ne=this.resume(),Ie=this.stack[this.stack.length-1];Ie.label=ne,Ie.identifier=sa(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function oe(H){this.data.characterReferenceType=H.type}function re(H){const ne=this.sliceSerialize(H),Ie=this.data.characterReferenceType;let Fe;Ie?(Fe=oN(ne,Ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Fe=n1(ne);const Xe=this.stack[this.stack.length-1];Xe.value+=Fe}function me(H){const ne=this.stack.pop();ne.position.end=ds(H.end)}function ee(H){I.call(this,H);const ne=this.stack[this.stack.length-1];ne.url=this.sliceSerialize(H)}function we(H){I.call(this,H);const ne=this.stack[this.stack.length-1];ne.url="mailto:"+this.sliceSerialize(H)}function ve(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function Oe(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function Le(){return{type:"heading",depth:0,children:[]}}function be(){return{type:"break"}}function rt(){return{type:"html",value:""}}function jt(){return{type:"image",title:null,url:"",alt:null}}function ot(){return{type:"link",title:null,url:"",children:[]}}function Ft(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function se(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function pe(){return{type:"paragraph",children:[]}}function Ze(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function cs(){return{type:"thematicBreak"}}}function ds(t){return{line:t.line,column:t.column,offset:t.offset}}function xN(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?xN(t,r):S9(t,r)}}function S9(t,e){let n;for(n in e)if(yN.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function qk(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+qd({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+qd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+qd({start:e.start,end:e.end})+") is still open")}function Hk(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function Gte(){}function C9(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const kp=function(t){if(t==null)return T9;if(typeof t=="function")return wp(t);if(typeof t=="object")return Array.isArray(t)?E9(t):I9(t);if(typeof t=="string")return A9(t);throw new Error("Expected function, string, or object as test")};function E9(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=kp(t[n]);return wp(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function I9(t){const e=t;return wp(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function A9(t){return wp(e);function e(n){return n&&n.type===t}}function wp(t){return e;function e(n,r,i){return!!(N9(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function T9(){return!0}function N9(t){return t!==null&&typeof t=="object"&&"type"in t}const vN=[],j9=!0,Fy=!1,_9="skip";function kN(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=kp(i),o=r?-1:1;l(t,void 0,[])();function l(a,c,u){const d=a&&typeof a=="object"?a:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=vN,g,m,b;if((!e||s(a,c,u[u.length-1]||void 0))&&(p=O9(n(a,u)),p[0]===Fy))return p;if("children"in a&&a.children){const y=a;if(y.children&&p[0]!==_9)for(m=(r?y.children.length:-1)+o,b=u.concat(y);m>-1&&m<y.children.length;){const x=y.children[m];if(g=l(x,m,b)(),g[0]===Fy)return g;m=typeof g[1]=="number"?g[1]:m+o}}return p}}}function O9(t){return Array.isArray(t)?t:typeof t=="number"?[j9,t]:t==null?vN:[t]}function R9(t,e,n){const i=kp((n||{}).ignore||[]),s=D9(e);let o=-1;for(;++o<s.length;)kN(t,"text",l);function l(c,u){let d=-1,f;for(;++d<u.length;){const p=u[d],g=f?f.children:void 0;if(i(p,g?g.indexOf(p):void 0,f))return;f=p}if(f)return a(c,u)}function a(c,u){const d=u[u.length-1],f=s[o][0],p=s[o][1];let g=0;const b=d.children.indexOf(c);let y=!1,x=[];f.lastIndex=0;let v=f.exec(c.value);for(;v;){const w=v.index,S={index:v.index,input:v.input,stack:[...u,c]};let k=p(...v,S);if(typeof k=="string"&&(k=k.length>0?{type:"text",value:k}:void 0),k===!1?f.lastIndex=w+1:(g!==w&&x.push({type:"text",value:c.value.slice(g,w)}),Array.isArray(k)?x.push(...k):k&&x.push(k),g=w+v[0].length,y=!0),!f.global)break;v=f.exec(c.value)}return y?(g<c.value.length&&x.push({type:"text",value:c.value.slice(g)}),d.children.splice(b,1,...x)):x=[c],b+x.length}}function D9(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([M9(i[0]),F9(i[1])])}return e}function M9(t){return typeof t=="string"?new RegExp(C9(t),"g"):t}function F9(t){return typeof t=="function"?t:function(){return t}}const Gg="phrasing",Yg=["autolink","link","image","label"];function wN(){return{transforms:[V9],enter:{literalAutolink:P9,literalAutolinkEmail:Jg,literalAutolinkHttp:Jg,literalAutolinkWww:Jg},exit:{literalAutolink:z9,literalAutolinkEmail:B9,literalAutolinkHttp:$9,literalAutolinkWww:L9}}}function SN(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Gg,notInConstruct:Yg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Gg,notInConstruct:Yg},{character:":",before:"[ps]",after:"\\/",inConstruct:Gg,notInConstruct:Yg}]}}function P9(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Jg(t){this.config.enter.autolinkProtocol.call(this,t)}function $9(t){this.config.exit.autolinkProtocol.call(this,t)}function L9(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function B9(t){this.config.exit.autolinkEmail.call(this,t)}function z9(t){this.exit(t)}function V9(t){R9(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,U9],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,q9]],{ignore:["link","linkReference"]})}function U9(t,e,n,r,i){let s="";if(!CN(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!H9(n)))return!1;const o=W9(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function q9(t,e,n,r){return!CN(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function H9(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function W9(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Hk(t,"(");let s=Hk(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function CN(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||sl(n)||bp(n))&&(!e||n!==47)}const K9={tokenize:X9,partial:!0},EN={tokenize:Q9,partial:!0},IN={tokenize:eV,partial:!0},AN={tokenize:tV,partial:!0},G9={tokenize:nV,partial:!0},TN={name:"wwwAutolink",tokenize:J9,previous:_N},NN={name:"protocolAutolink",tokenize:Z9,previous:ON},as={name:"emailAutolink",tokenize:Y9,previous:RN},Ti={};function jN(){return{text:Ti}}let fo=48;for(;fo<123;)Ti[fo]=as,fo++,fo===58?fo=65:fo===91&&(fo=97);Ti[43]=as;Ti[45]=as;Ti[46]=as;Ti[95]=as;Ti[72]=[as,NN];Ti[104]=[as,NN];Ti[87]=[as,TN];Ti[119]=[as,TN];function Y9(t,e,n){const r=this;let i,s;return o;function o(d){return!Py(d)||!RN.call(r,r.previous)||i1(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(d))}function l(d){return Py(d)?(t.consume(d),l):d===64?(t.consume(d),a):n(d)}function a(d){return d===46?t.check(G9,u,c)(d):d===45||d===95||Bn(d)?(s=!0,t.consume(d),a):u(d)}function c(d){return t.consume(d),i=!0,a}function u(d){return s&&i&&kn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function J9(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!_N.call(r,r.previous)||i1(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(K9,t.attempt(EN,t.attempt(IN,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Z9(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&ON.call(r,r.previous)&&!i1(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),l):n(d)}function l(d){if(kn(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),l;if(d===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(d),a}return n(d)}function a(d){return d===47?(t.consume(d),s?c:(s=!0,a)):n(d)}function c(d){return d===null||nh(d)||pt(d)||sl(d)||bp(d)?n(d):t.attempt(EN,t.attempt(IN,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function X9(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Q9(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(AN,a,l)(c):c===null||pt(c)||sl(c)||c!==45&&bp(c)?a(c):(s=!0,t.consume(c),o)}function l(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function a(c){return i||r||!s?n(c):e(c)}}function eV(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(AN,e,s)(o):o===null||pt(o)||sl(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function tV(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||pt(l)||sl(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||pt(l)||sl(l)?e(l):r(l)}function s(l){return kn(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),r):kn(l)?(t.consume(l),o):n(l)}}function nV(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Bn(s)?n(s):e(s)}}function _N(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||pt(t)}function ON(t){return!kn(t)}function RN(t){return!(t===47||Py(t))}function Py(t){return t===43||t===45||t===46||t===95||Bn(t)}function i1(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const rV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];FN.peek=oV;function DN(){return{canContainEols:["delete"],enter:{strikethrough:iV},exit:{strikethrough:sV}}}function MN(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:rV}],handlers:{delete:FN}}}function iV(t){this.enter({type:"delete",children:[]},t)}function sV(t){this.exit(t)}function FN(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function oV(){return"~"}function PN(t){let n={}.singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let c=a;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[a][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[a][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[a][1].start)},f=[["enter",u,l],["enter",o[c][1],l],["exit",o[c][1],l],["enter",d,l]],p=l.parser.constructs.insideSpan.null;p&&lr(f,f.length,0,xp(p,o.slice(c+1,a),l)),lr(f,f.length,0,[["exit",d,l],["enter",o[a][1],l],["exit",o[a][1],l],["exit",u,l]]),lr(o,c-1,a-c+3,f),a=c+f.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function s(o,l,a){const c=this.previous,u=this.events;let d=0;return f;function f(g){return c===126&&u[u.length-1][1].type!=="characterEscape"?a(g):(o.enter("strikethroughSequenceTemporary"),p(g))}function p(g){const m=wa(c);if(g===126)return d>1?a(g):(o.consume(g),d++,p);if(d<2&&!n)return a(g);const b=o.exit("strikethroughSequenceTemporary"),y=wa(g);return b._open=!y||y===2&&!!m,b._close=!m||m===2&&!!y,l(g)}}}var Qs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lV=typeof navigator<"u"&&/Mac/.test(navigator.platform),aV=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xt=0;Xt<10;Xt++)Qs[48+Xt]=Qs[96+Xt]=String(Xt);for(var Xt=1;Xt<=24;Xt++)Qs[Xt+111]="F"+Xt;for(var Xt=65;Xt<=90;Xt++)Qs[Xt]=String.fromCharCode(Xt+32),rh[Xt]=String.fromCharCode(Xt);for(var Zg in Qs)rh.hasOwnProperty(Zg)||(rh[Zg]=Qs[Zg]);function cV(t){var e=lV&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||aV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?rh:Qs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const uV=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function dV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))uV?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function fV(t){let e=Object.create(null);for(let n in t)e[dV(n)]=t[n];return e}function Xg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function hV(t){return new At({props:{handleKeyDown:s1(t)}})}function s1(t){let e=fV(t);return function(n,r){let i=cV(r),s,o=e[Xg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Xg(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Qs[r.keyCode])&&s!=i){let l=e[Xg(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var $y,Ly;if(typeof WeakMap<"u"){let t=new WeakMap;$y=e=>t.get(e),Ly=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;$y=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},Ly=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Qt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==n;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:l,top:a,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const l=(t+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(t){return $y(t)||Ly(t,pV(t))}};function pV(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=gV(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let g=0;;g++){for(;i<r.length&&r[i]!=0;)i++;if(g==d.childCount)break;const m=d.child(g),{colspan:b,rowspan:y,colwidth:x}=m.attrs;for(let v=0;v<y;v++){if(v+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:y-v});break}const w=i+v*e;for(let S=0;S<b;S++){r[w+S]==0?r[w+S]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:b-S});const k=x&&x[S];if(k){const E=(w+S)%e*2,T=o[E];T==null||T!=k&&o[E+1]==1?(o[E]=k,o[E+1]=1):T==k&&o[E+1]++}}}i+=b,u+=m.nodeSize}const f=(c+1)*e;let p=0;for(;i<f;)r[i++]==0&&p++;p&&(s||(s=[])).push({type:"missing",row:c,n:p}),u++}const l=new Qt(e,n,r,s);let a=!1;for(let c=0;!a&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(a=!0);return a&&mV(l,o,t),l}function gV(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const l=t.child(o);for(let a=0;a<l.childCount;a++){const c=l.child(a);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function mV(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null;const a=o.attrs;for(let c=0;c<a.colspan;c++){const u=(i+c)%t.width,d=e[u*2];d!=null&&(!a.colwidth||a.colwidth[c]!=d)&&((l||(l=yV(a)))[c]=d)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function yV(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Kn(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Cs=new Kr("selectingCells");function Sp(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function xl(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function $N(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Sp(e.$head)||bV(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function bV(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Wk(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function o1(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function LN(t,e,n){const r=t.node(-1),i=Qt.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function ol(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function xV(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function vV(t,e,n){const r=Kn(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Ut=class Li extends Te{constructor(e,n=e){const r=e.node(-1),i=Qt.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),l=e.node(0),a=i.cellsInRect(o).filter(u=>u!=n.pos-s);a.unshift(n.pos-s);const c=a.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const f=s+u+1;return new KC(l.resolve(f),l.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(Wk(r)&&Wk(i)&&o1(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Li.rowSelection(r,i):s&&this.isColSelection()?Li.colSelection(r,i):new Li(r,i)}return _e.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Qt.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let a=i.top;a<i.bottom;a++){const c=[];for(let u=a*n.width+i.left,d=i.left;d<i.right;d++,u++){const f=n.map[u];if(s[f])continue;s[f]=!0;const p=n.findCell(f);let g=e.nodeAt(f);if(!g)throw RangeError(`No cell with offset ${f} found`);const m=i.left-p.left,b=p.right-i.right;if(m>0||b>0){let y=g.attrs;if(m>0&&(y=ol(y,0,m)),b>0&&(y=ol(y,y.colspan-b,b)),p.left<i.left){if(g=g.type.createAndFill(y),!g)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else g=g.type.create(y,g.content)}if(p.top<i.top||p.bottom>i.bottom){const y={...g.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?g=g.type.createAndFill(y):g=g.type.create(y,g.content)}c.push(g)}o.push(e.child(a).copy(G.from(c)))}const l=this.isColSelection()&&this.isRowSelection()?e:o;return new Q(G.from(l),1,1)}replace(e,n=Q.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:l,$to:a}=i[o],c=e.mapping.slice(r);e.replace(c.map(l.pos),c.map(a.pos),o?Q.empty:n)}const s=Te.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Q(G.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Qt.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Qt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),a=e.node(0);return o.top<=l.top?(o.top>0&&(e=a.resolve(s+i.map[o.left])),l.bottom<i.height&&(n=a.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=a.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=a.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Li(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Qt.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(e){return e instanceof Li&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Qt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),a=e.node(0);return o.left<=l.left?(o.left>0&&(e=a.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(n=a.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=a.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=a.resolve(s+i.map[i.width*(o.top+1)-1]))),new Li(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Li(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Li(e.resolve(n),e.resolve(r))}getBookmark(){return new kV(this.$anchorCell.pos,this.$headCell.pos)}};Ut.prototype.visible=!1;Te.jsonID("cell",Ut);var kV=class BN{constructor(e,n){this.anchor=e,this.head=n}map(e){return new BN(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&o1(n,r)?new Ut(n,r):Te.near(r,1)}};function wV(t){if(!(t.selection instanceof Ut))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(It.node(r,r+n.nodeSize,{class:"selectedCell"}))}),tt.create(t.doc,e)}function SV({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function CV({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function EV(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof de&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Ut.create(i,r.from);else if(o=="row"){const l=i.resolve(r.from+1);s=Ut.rowSelection(l,l)}else if(!n){const l=Qt.get(r.node),a=r.from+1,c=a+l.map[l.width*l.height-1];s=Ut.create(i,a+1,c)}}else r instanceof _e&&SV(r)?s=_e.create(i,r.from):r instanceof _e&&CV(r)&&(s=_e.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var IV=new Kr("fix-tables");function zN(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){const a=e.child(o);for(let c=l,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==a){l=c+1,n+=a.nodeSize;continue e}r(a,n),l<i&&t.child(l).sameMarkup(a)?zN(t.child(l),a,n+1,r):a.nodesBetween(0,a.content.size,r,n+1),n+=a.nodeSize}}function AV(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=TV(t,i,s,n))};return e?e.doc!=t.doc&&zN(e.doc,t.doc,0,r):t.doc.descendants(r),n}function TV(t,e,n,r){const i=Qt.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let a=0;a<i.height;a++)s.push(0);for(let a=0;a<i.problems.length;a++){const c=i.problems[a];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)s[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,ol(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let o,l;for(let a=0;a<s.length;a++)s[a]&&(o==null&&(o=a),l=a);for(let a=0,c=n+1;a<i.height;a++){const u=e.child(a),d=c+u.nodeSize,f=s[a];if(f>0){let p="cell";u.firstChild&&(p=u.firstChild.type.spec.tableRole);const g=[];for(let b=0;b<f;b++){const y=Kn(t.schema)[p].createAndFill();y&&g.push(y)}const m=(a==0||o==a-1)&&l==a?c+1:d-1;r.insert(r.mapping.map(m),g)}c=d}return r.setMeta(IV,{fixTables:!0})}function Ba(t){const e=t.selection,n=$N(t),r=n.node(-1),i=n.start(-1),s=Qt.get(r);return{...e instanceof Ut?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function NV(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;vV(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){const a=e.map[l],c=r.nodeAt(a);t.setNodeMarkup(t.mapping.map(n+a),null,xV(c.attrs,i-e.colCount(a))),o+=c.attrs.rowspan-1}else{const a=s==null?Kn(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),a.createAndFill())}}return t}function jV(t,e){if(!xl(t))return!1;if(e){const n=Ba(t);e(NV(t.tr,n,n.right))}return!0}function _V(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const l=o*e.width+i,a=e.map[l],c=n.nodeAt(a),u=c.attrs;if(i>0&&e.map[l-1]==a||i<e.width-1&&e.map[l+1]==a)t.setNodeMarkup(t.mapping.slice(s).map(r+a),null,ol(u,i-e.colCount(a)));else{const d=t.mapping.slice(s).map(r+a);t.delete(d,d+c.nodeSize)}o+=u.rowspan}}function OV(t,e){if(!xl(t))return!1;if(e){const n=Ba(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;_V(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Qt.get(s)}e(r)}return!0}function RV(t,e,n){var r;const i=Kn(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function DV(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let c=0;c<i;c++)o+=r.child(c).nodeSize;const l=[];let a=i>0?-1:0;RV(e,r,i+a)&&(a=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],f=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{const d=a==null?Kn(r.type.schema).cell:(s=r.nodeAt(e.map[u+a*e.width]))==null?void 0:s.type,f=d?.createAndFill();f&&l.push(f)}return t.insert(o,Kn(r.type.schema).row.create(null,l)),t}function MV(t,e){if(!xl(t))return!1;if(e){const n=Ba(t);e(DV(t.tr,n,n.bottom))}return!0}function FV(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,l=t.mapping.maps.length;t.delete(s+r,o+r);const a=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!a.has(d)){if(a.add(d),i>0&&d==e.map[u-e.width]){const f=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(l).map(d+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const f=n.nodeAt(d),p=f.attrs,g=f.type.create({...p,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(l).map(r+m),g),c+=p.colspan-1}}}}function PV(t,e){if(!xl(t))return!1;if(e){const n=Ba(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;FV(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Qt.get(n.table)}e(r)}return!0}function $V(t){return function(e,n){if(!xl(e))return!1;if(n){const r=Kn(e.schema),i=Ba(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(a=>i.table.nodeAt(a));for(let a=0;a<o.length;a++)l[a].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[a],r.cell,l[a].attrs);if(s.steps.length==0)for(let a=0;a<o.length;a++)s.setNodeMarkup(i.tableStart+o[a],r.header_cell,l[a].attrs);n(s)}return!0}}function Kk(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Cp(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?$V(t):function(n,r){if(!xl(n))return!1;if(r){const i=Kn(n.schema),s=Ba(n),o=n.tr,l=Kk("row",s,i),a=Kk("column",s,i),u=(t==="column"?l:t==="row"?a:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,f=t=="column"?a?i.cell:i.header_cell:t=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(p=>{const g=p+s.tableStart,m=o.doc.nodeAt(g);m&&o.setNodeMarkup(g,f,m.attrs)}),r(o)}return!0}}Cp("row",{useDeprecatedLogic:!0});Cp("column",{useDeprecatedLogic:!0});Cp("cell",{useDeprecatedLogic:!0});function xd(t,e){const n=t.selection;if(!(n instanceof Ut))return!1;if(e){const r=t.tr,i=Kn(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Q(i,0,0))}),r.docChanged&&e(r)}return!0}function LV(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let a=0;a<e.childCount;a++){let c=e.child(a).content;const u=a?0:Math.max(0,n-1),d=a<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=By(Kn(o).row,new Q(c,u,d)).content),l.push(c)}else if(s=="cell"||s=="header_cell")l.push(n||r?By(Kn(o).row,new Q(e,n,r)).content:e);else return null;return BV(o,l)}function BV(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:l,colspan:a}=s.child(o).attrs;for(let c=i;c<i+l;c++)n[c]=(n[c]||0)+a}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(G.empty),n[i]<r){const s=Kn(t).cell.createAndFill(),o=[];for(let l=n[i];l<r;l++)o.push(s);e[i]=e[i].append(G.from(o))}return{height:e.length,width:r,rows:e}}function By(t,e){const n=t.createAndFill();return new WC(n).replace(0,n.content.size,e).doc}function zV({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let l=0;l<n.length;l++){const a=n[l],c=[];for(let u=s[l]||0,d=0;u<r;d++){let f=a.child(d%a.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(ol(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let p=1;p<f.attrs.rowspan;p++)s[l+p]=(s[l+p]||0)+f.attrs.colspan}o.push(G.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,l=0;o<i;o++,l++){const a=[],c=n[l%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),a.push(d)}s.push(G.from(a))}n=s,e=i}return{width:t,height:e,rows:n}}function VV(t,e,n,r,i,s,o){const l=t.doc.type.schema,a=Kn(l);let c,u;if(i>e.width)for(let d=0,f=0;d<e.height;d++){const p=n.child(d);f+=p.nodeSize;const g=[];let m;p.lastChild==null||p.lastChild.type==a.cell?m=c||(c=a.cell.createAndFill()):m=u||(u=a.header_cell.createAndFill());for(let b=e.width;b<i;b++)g.push(m);t.insert(t.mapping.slice(o).map(f-1+r),g)}if(s>e.height){const d=[];for(let g=0,m=(e.height-1)*e.width;g<Math.max(e.width,i);g++){const b=g>=e.width?!1:n.nodeAt(e.map[m+g]).type==a.header_cell;d.push(b?u||(u=a.header_cell.createAndFill()):c||(c=a.cell.createAndFill()))}const f=a.row.create(null,G.from(d)),p=[];for(let g=e.height;g<s;g++)p.push(f);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),p)}return!!(c||u)}function Gk(t,e,n,r,i,s,o,l){if(o==0||o==e.height)return!1;let a=!1;for(let c=i;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){a=!0;const f=n.nodeAt(d),{top:p,left:g}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(l).map(d+r),null,{...f.attrs,rowspan:o-p}),t.insert(t.mapping.slice(l).map(e.positionAt(o,g,n)),f.type.createAndFill({...f.attrs,rowspan:p+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return a}function Yk(t,e,n,r,i,s,o,l){if(o==0||o==e.width)return!1;let a=!1;for(let c=i;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){a=!0;const f=n.nodeAt(d),p=e.colCount(d),g=t.mapping.slice(l).map(d+r);t.setNodeMarkup(g,null,ol(f.attrs,o-p,f.attrs.colspan-(o-p))),t.insert(g+f.nodeSize,f.type.createAndFill(ol(f.attrs,0,o-p))),c+=f.attrs.rowspan-1}}return a}function Jk(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Qt.get(s);const{top:l,left:a}=r,c=a+i.width,u=l+i.height,d=t.tr;let f=0;function p(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=Qt.get(s),f=d.mapping.maps.length}VV(d,o,s,n,c,u,f)&&p(),Gk(d,o,s,n,a,c,l,f)&&p(),Gk(d,o,s,n,a,c,u,f)&&p(),Yk(d,o,s,n,l,u,a,f)&&p(),Yk(d,o,s,n,l,u,c,f)&&p();for(let g=l;g<u;g++){const m=o.positionAt(g,a,s),b=o.positionAt(g,c,s);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(b+n),new Q(i.rows[g-l],0,0))}p(),d.setSelection(new Ut(d.doc.resolve(n+o.positionAt(l,a,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(d)}var UV=s1({ArrowLeft:vd("horiz",-1),ArrowRight:vd("horiz",1),ArrowUp:vd("vert",-1),ArrowDown:vd("vert",1),"Shift-ArrowLeft":kd("horiz",-1),"Shift-ArrowRight":kd("horiz",1),"Shift-ArrowUp":kd("vert",-1),"Shift-ArrowDown":kd("vert",1),Backspace:xd,"Mod-Backspace":xd,Delete:xd,"Mod-Delete":xd});function Hd(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function vd(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Ut)return Hd(n,r,Te.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=VN(i,t,e);if(o==null)return!1;if(t=="horiz")return Hd(n,r,Te.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(o),a=LN(l,t,e);let c;return a?c=Te.near(a,1):e<0?c=Te.near(n.doc.resolve(l.before(-1)),-1):c=Te.near(n.doc.resolve(l.after(-1)),1),Hd(n,r,c)}}}function kd(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof Ut)o=s;else{const a=VN(i,t,e);if(a==null)return!1;o=new Ut(n.doc.resolve(a))}const l=LN(o.$headCell,t,e);return l?Hd(n,r,new Ut(o.$anchorCell,l)):!1}}function qV(t,e){const n=t.state.doc,r=Sp(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ut(r))),!0):!1}function HV(t,e,n){if(!xl(t.state))return!1;let r=LV(n);const i=t.state.selection;if(i instanceof Ut){r||(r={width:1,height:1,rows:[G.from(By(Kn(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=Qt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=zV(r,l.right-l.left,l.bottom-l.top),Jk(t.state,t.dispatch,o,l,r),!0}else if(r){const s=$N(t.state),o=s.start(-1);return Jk(t.state,t.dispatch,o,Qt.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function WV(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=Zk(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Ut)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Sp(t.state.selection.$anchor))!=null&&((n=Qg(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(a,c){let u=Qg(t,c);const d=Cs.getState(t.state)==null;if(!u||!o1(a,u))if(d)u=a;else return;const f=new Ut(a,u);if(d||!t.state.selection.eq(f)){const p=t.state.tr.setSelection(f);d&&p.setMeta(Cs,a.pos),t.dispatch(p)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",l),Cs.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Cs,-1))}function l(a){const c=a,u=Cs.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(Zk(t,c.target)!=r&&(d=Qg(t,e),!d))return o();d&&s(d,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",l)}function VN(t,e,n){if(!(t.state.selection instanceof _e))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(i),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?l:null}}return null}function Zk(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Qg(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Sp(t.state.doc.resolve(n.pos)):null}new Kr("tableColumnResizing");function KV({allowTableNodeSelection:t=!1}={}){return new At({key:Cs,state:{init(){return null},apply(e,n){const r=e.getMeta(Cs);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:wV,handleDOMEvents:{mousedown:WV},createSelectionBetween(e){return Cs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:qV,handleKeyDown:UV,handlePaste:HV},appendTransaction(e,n,r){return EV(r,AV(r,n),t)}})}var ih=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<ih&&this.leafAppend(e)||this.length<ih&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new GV(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};qt.from=function(e){return e instanceof qt?e:e&&e.length?new UN(e):qt.empty};var UN=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ih)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ih)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(qt);qt.empty=new UN([]);var GV=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qt);const YV=500;class Mr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new ri(d.map));let p=d.step.map(i.slice(s)),g;p&&o.maybeStep(p).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],c.push(new ri(g,void 0,void 0,c.length+u.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new Mr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new ri(e.mapping.maps[u],d,n),p;(p=a&&a.merge(f))&&(f=p,u?s.pop():l=l.slice(0,l.length-1)),s.push(f),n&&(o++,n=void 0),i||(a=f)}let c=o-r.depth;return c>ZV&&(l=JV(l,c),o-=c),new Mr(l.append(s),o)}remapping(e,n){let r=new Xl;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Mr(this.items.append(e.map(n=>new ri(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let p=s.getMirror(--a);if(p==null)return;o=Math.min(o,p);let g=s.maps[p];if(f.step){let m=e.steps[p].invert(e.docs[p]),b=f.selection&&f.selection.map(s.slice(a+1,p));b&&l++,r.push(new ri(g,m,b))}else r.push(new ri(g))},i);let c=[];for(let f=n;f<o;f++)c.push(new ri(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new Mr(u,l);return d.emptyItemCount()>YV&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new ri(c.invert(),a,u),f,p=i.length-1;(f=i.length&&i[p].merge(d))?i[p]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new Mr(qt.from(i.reverse()),s)}}Mr.empty=new Mr(qt.empty,0);function JV(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ri{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ri(n.getMap().invert(),n,this.selection)}}}class xs{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ZV=20;function XV(t,e,n,r){let i=n.getMeta(zo),s;if(i)return i.historyState;n.getMeta(qN)&&(t=new xs(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(zo))return o.getMeta(zo).redo?new xs(t.done.addTransform(n,void 0,r,Wd(e)),t.undone,Xk(n.mapping.maps),t.prevTime,t.prevComposition):new xs(t.done,t.undone.addTransform(n,void 0,r,Wd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!QV(n,t.prevRanges)),c=o?em(t.prevRanges,n.mapping):Xk(n.mapping.maps);return new xs(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Wd(e)),Mr.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new xs(t.done.rebased(n,s),t.undone.rebased(n,s),em(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new xs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),em(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function QV(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Xk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function em(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function eU(t,e,n){let r=Wd(e),i=zo.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new xs(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(zo,{redo:n,historyState:a})}let tm=!1,Qk=null;function Wd(t){let e=t.plugins;if(Qk!=e){tm=!1,Qk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){tm=!0;break}}return tm}function tU(t){return t.setMeta(qN,!0)}const zo=new Kr("history"),qN=new Kr("closeHistory");function nU(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new At({key:zo,state:{init(){return new xs(Mr.empty,Mr.empty,null,0,-1)},apply(e,n,r){return XV(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?WN:r=="historyRedo"?zy:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function HN(t,e){return(n,r)=>{let i=zo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=eU(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const WN=HN(!1,!0),zy=HN(!0,!0);var rU=yR();const yc=Ib(rU),ew={}.hasOwnProperty;function iU(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const l=r.handlers;if(i&&ew.call(i,t)){const a=String(i[t]);o=ew.call(l,a)?l[a]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const sU={}.hasOwnProperty;function KN(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)KN(t,e.extensions[n]);for(r in e)if(sU.call(e,r))switch(r){case"extensions":break;case"unsafe":{tw(t[r],e[r]);break}case"join":{tw(t[r],e[r]);break}case"handlers":{oU(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function tw(t,e){e&&t.push(...e)}function oU(t,e){e&&Object.assign(t,e)}function lU(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),aU);return i(),o}function aU(t,e,n){return">"+(n?"":" ")+t}function GN(t,e){return nw(t,e.inConstruct,!0)&&!nw(t,e.notInConstruct,!1)}function nw(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function rw(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&GN(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function cU(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function Vy(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function uU(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function dU(t,e,n,r){const i=uU(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Vy(t,n)){const d=n.enter("codeIndented"),f=n.indentLines(s,fU);return d(),f}const l=n.createTracker(r),a=i.repeat(Math.max(cU(s,i)+1,3)),c=n.enter("codeFenced");let u=l.move(a);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=l.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...l.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...l.current()})),d()}return u+=l.move(`
`),s&&(u+=l.move(s+`
`)),u+=l.move(a),c(),u}function fU(t,e,n){return(n?"":"    ")+t}function l1(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function hU(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const a=n.createTracker(r);let c=a.move("[");return c+=a.move(n.safe(n.associationId(t),{before:c,after:"]",...a.current()})),c+=a.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+i),c+=a.move(n.safe(t.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),o(),c}function pU(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function eo(t){return"&#x"+t.toString(16).toUpperCase()+";"}function sh(t,e,n){const r=wa(t),i=wa(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}YN.peek=gU;function YN(t,e,n,r){const i=pU(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let a=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const c=a.charCodeAt(0),u=sh(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(a=eo(c)+a.slice(1));const d=a.charCodeAt(a.length-1),f=sh(r.after.charCodeAt(0),d,i);f.inside&&(a=a.slice(0,-1)+eo(d));const p=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+a+p}function gU(t,e,n){return n.options.emphasis||"*"}function JN(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),kN(t,s,l,i);function l(a,c){const u=c[c.length-1],d=u?u.children.indexOf(a):void 0;return o(a,d,u)}}function ZN(t,e){let n=!1;return JN(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Fy}),!!((!t.depth||t.depth<3)&&t1(t)&&(e.options.setext||n))}function mU(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(ZN(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),a=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=eo(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),a(),l(),c}XN.peek=yU;function XN(t){return t.value||""}function yU(){return"<"}QN.peek=bU;function QN(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const a=n.createTracker(r);let c=a.move("![");return c+=a.move(n.safe(t.alt,{before:c,after:"]",...a.current()})),c+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+i),c+=a.move(n.safe(t.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),c+=a.move(")"),o(),c}function bU(){return"!"}ej.peek=xU;function ej(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let a=l.move("![");const c=n.safe(t.alt,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?a+=l.move(d+"]"):i==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function xU(){return"!"}tj.peek=vU;function tj(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let a;if(o.atBreak)for(;a=l.exec(r);){let c=a.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(a.index+1)}}return i+r+i}function vU(){return"`"}function nj(t,e){const n=t1(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}rj.peek=kU;function rj(t,e,n,r){const i=l1(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,a;if(nj(t,n)){const u=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=u,d}l=n.enter("link"),a=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(a=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),a()),c+=o.move(")"),l(),c}function kU(t,e,n){return nj(t,n)?"<":"["}ij.peek=wU;function ij(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let a=l.move("[");const c=n.containerPhrasing(t,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?a+=l.move(d+"]"):i==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function wU(){return"["}function a1(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function SU(t){const e=a1(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function CU(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function sj(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function EU(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?CU(n):a1(n);const l=t.ordered?o==="."?")":".":SU(n);let a=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(a=!0),sj(n)===o&&u){let d=-1;for(;++d<t.children.length;){const f=t.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=l),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function IU(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function AU(t,e,n,r){const i=IU(n);let s=n.bulletCurrent||a1(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const a=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,l.current()),u);return a(),c;function u(d,f,p){return f?(p?"":" ".repeat(o))+d:(p?s:s+" ".repeat(o-s.length))+d}}function TU(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const NU=kp(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function jU(t,e,n,r){return(t.children.some(function(o){return NU(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function _U(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}oj.peek=OU;function oj(t,e,n,r){const i=_U(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let a=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const c=a.charCodeAt(0),u=sh(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(a=eo(c)+a.slice(1));const d=a.charCodeAt(a.length-1),f=sh(r.after.charCodeAt(0),d,i);f.inside&&(a=a.slice(0,-1)+eo(d));const p=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+a+p}function OU(t,e,n){return n.options.strong||"*"}function RU(t,e,n,r){return n.safe(t.value,r)}function DU(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function MU(t,e,n){const r=(sj(n)+(n.options.ruleSpaces?" ":"")).repeat(DU(n));return n.options.ruleSpaces?r.slice(0,-1):r}const lj={blockquote:lU,break:rw,code:dU,definition:hU,emphasis:YN,hardBreak:rw,heading:mU,html:XN,image:QN,imageReference:ej,inlineCode:tj,link:rj,linkReference:ij,list:EU,listItem:AU,paragraph:TU,root:jU,strong:oj,text:RU,thematicBreak:MU},FU=[PU];function PU(t,e,n,r){if(e.type==="code"&&Vy(e,r)&&(t.type==="list"||t.type===e.type&&Vy(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&ZN(e,r))?void 0:n.spread?1:0}const ho=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],$U=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:ho},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:ho},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:ho},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:ho},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:ho},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:ho},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:ho},{atBreak:!0,character:"~"}];function LU(t){return t.label||!t.identifier?t.label||"":mN(t.identifier)}function BU(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function zU(t,e,n){const r=e.indexStack,i=t.children||[],s=[];let o=-1,l=n.before,a;r.push(-1);let c=e.createTracker(n);for(;++o<i.length;){const u=i[o];let d;if(r[r.length-1]=o,o+1<i.length){let g=e.handle.handlers[i[o+1].type];g&&g.peek&&(g=g.peek),d=g?g(i[o+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else d=n.after;s.length>0&&(l==="\r"||l===`
`)&&u.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",c=e.createTracker(n),c.move(s.join("")));let f=e.handle(u,t,e,{...c.current(),after:d,before:l});a&&a===f.slice(0,1)&&(f=eo(a.charCodeAt(0))+f.slice(1));const p=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,a=void 0,p&&(s.length>0&&p.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+eo(l.charCodeAt(0))),p.after&&(a=d)),c.move(f),s.push(f),l=f.slice(-1)}return r.pop(),s.join("")}function VU(t,e,n){const r=e.indexStack,i=t.children||[],s=e.createTracker(n),o=[];let l=-1;for(r.push(-1);++l<i.length;){const a=i[l];r[r.length-1]=l,o.push(s.move(e.handle(a,t,e,{before:`
`,after:`
`,...s.current()}))),a.type!=="list"&&(e.bulletLastUsed=void 0),l<i.length-1&&o.push(s.move(UU(a,i[l+1],t,e)))}return r.pop(),o.join("")}function UU(t,e,n,r){let i=r.join.length;for(;i--;){const s=r.join[i](t,e,n,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const qU=/\r?\n|\r/g;function HU(t,e){const n=[];let r=0,i=0,s;for(;s=qU.exec(t);)o(t.slice(r,s.index)),n.push(s[0]),r=s.index+s[0].length,i++;return o(t.slice(r)),n.join("");function o(l){n.push(e(l,i,!l))}}function WU(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],s=[],o={};let l=-1;for(;++l<t.unsafe.length;){const u=t.unsafe[l];if(!GN(t.stack,u))continue;const d=t.compilePattern(u);let f;for(;f=d.exec(r);){const p="before"in u||!!u.atBreak,g="after"in u,m=f.index+(p?f[1].length:0);i.includes(m)?(o[m].before&&!p&&(o[m].before=!1),o[m].after&&!g&&(o[m].after=!1)):(i.push(m),o[m]={before:p,after:g})}}i.sort(KU);let a=n.before?n.before.length:0;const c=r.length-(n.after?n.after.length:0);for(l=-1;++l<i.length;){const u=i[l];u<a||u>=c||u+1<c&&i[l+1]===u+1&&o[u].after&&!o[u+1].before&&!o[u+1].after||i[l-1]===u-1&&o[u].before&&!o[u-1].before&&!o[u-1].after||(a!==u&&s.push(iw(r.slice(a,u),"\\")),a=u,/[!-/:-@[-`{-~]/.test(r.charAt(u))&&(!n.encode||!n.encode.includes(r.charAt(u)))?s.push("\\"):(s.push(eo(r.charCodeAt(u))),a++))}return s.push(iw(r.slice(a,c),n.after)),s.join("")}function KU(t,e){return t-e}function iw(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],s=t+e;let o=-1,l=0,a;for(;a=n.exec(s);)r.push(a.index);for(;++o<r.length;)l!==r[o]&&i.push(t.slice(l,r[o])),i.push("\\"),l=r[o];return i.push(t.slice(l)),i.join("")}function GU(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,s=n.column||1;return{move:a,current:o,shift:l};function o(){return{now:{line:i,column:s},lineShift:r}}function l(c){r+=c}function a(c){const u=c||"",d=u.split(/\r?\n|\r/g),f=d[d.length-1];return i+=d.length-1,s=d.length===1?s+f.length:1+f.length+r,u}}function aj(t,e){const n=e||{},r={associationId:LU,containerPhrasing:XU,containerFlow:QU,createTracker:GU,compilePattern:BU,enter:s,handlers:{...lj},handle:void 0,indentLines:HU,indexStack:[],join:[...FU],options:{},safe:eq,stack:[],unsafe:[...$U]};KN(r,n),r.options.tightDefinitions&&r.join.push(ZU),r.handle=iU("type",{invalid:YU,unknown:JU,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return r.stack.push(o),l;function l(){r.stack.pop()}}}function YU(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function JU(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function ZU(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function XU(t,e){return zU(t,this,e)}function QU(t,e){return VU(t,this,e)}function eq(t,e){return WU(this,t,e)}function tq(t){return t.length}function nq(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||tq,s=[],o=[],l=[],a=[];let c=0,u=-1;for(;++u<t.length;){const m=[],b=[];let y=-1;for(t[u].length>c&&(c=t[u].length);++y<t[u].length;){const x=rq(t[u][y]);if(n.alignDelimiters!==!1){const v=i(x);b[y]=v,(a[y]===void 0||v>a[y])&&(a[y]=v)}m.push(x)}o[u]=m,l[u]=b}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)s[d]=sw(r[d]);else{const m=sw(r);for(;++d<c;)s[d]=m}d=-1;const f=[],p=[];for(;++d<c;){const m=s[d];let b="",y="";m===99?(b=":",y=":"):m===108?b=":":m===114&&(y=":");let x=n.alignDelimiters===!1?1:Math.max(1,a[d]-b.length-y.length);const v=b+"-".repeat(x)+y;n.alignDelimiters!==!1&&(x=b.length+x+y.length,x>a[d]&&(a[d]=x),p[d]=x),f[d]=v}o.splice(1,0,f),l.splice(1,0,p),u=-1;const g=[];for(;++u<o.length;){const m=o[u],b=l[u];d=-1;const y=[];for(;++d<c;){const x=m[d]||"";let v="",w="";if(n.alignDelimiters!==!1){const S=a[d]-(b[d]||0),k=s[d];k===114?v=" ".repeat(S):k===99?S%2?(v=" ".repeat(S/2+.5),w=" ".repeat(S/2-.5)):(v=" ".repeat(S/2),w=v):w=" ".repeat(S)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&x==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(v),y.push(x),n.alignDelimiters!==!1&&y.push(w),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function rq(t){return t==null?"":String(t)}function sw(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function iq(){return{enter:{table:sq,tableData:ow,tableHeader:ow,tableRow:lq},exit:{codeText:aq,table:oq,tableData:nm,tableHeader:nm,tableRow:nm}}}function sq(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function oq(t){this.exit(t),this.data.inTable=void 0}function lq(t){this.enter({type:"tableRow",children:[]},t)}function nm(t){this.exit(t)}function ow(t){this.enter({type:"tableCell",children:[]},t)}function aq(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,cq));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function cq(t,e){return e==="|"?e:t}function cj(t){const e={},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:a,tableRow:l}};function o(p,g,m,b){return c(u(p,m,b),p.align)}function l(p,g,m,b){const y=d(p,m,b),x=c([y]);return x.slice(0,x.indexOf(`
`))}function a(p,g,m,b){const y=m.enter("tableCell"),x=m.enter("phrasing"),v=m.containerPhrasing(p,{...b,before:s,after:s});return x(),y(),v}function c(p,g){return nq(p,{align:g,alignDelimiters:r,padding:n,stringLength:i})}function u(p,g,m){const b=p.children;let y=-1;const x=[],v=g.enter("table");for(;++y<b.length;)x[y]=d(b[y],g,m);return v(),x}function d(p,g,m){const b=p.children;let y=-1;const x=[],v=g.enter("tableRow");for(;++y<b.length;)x[y]=a(b[y],p,g,m);return v(),x}function f(p,g,m){let b=lj.inlineCode(p,g,m);return m.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}class uq{constructor(){this.map=[]}add(e,n,r){dq(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push([...e]),e.length=0;let i=r.pop();for(;i;)e.push(...i),i=r.pop();this.map.length=0}}function dq(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function fq(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function hq(){return{flow:{null:{name:"table",tokenize:pq,resolveAll:gq}}}}function pq(t,e,n){const r=this;let i=0,s=0,o;return l;function l(I){let A=r.events.length-1;for(;A>-1;){const F=r.events[A][1].type;if(F==="lineEnding"||F==="linePrefix")A--;else break}const O=A>-1?r.events[A][1].type:null,_=O==="tableHead"||O==="tableRow"?k:a;return _===k&&r.parser.lazy[r.now().line]?n(I):_(I)}function a(I){return t.enter("tableHead"),t.enter("tableRow"),c(I)}function c(I){return I===124||(o=!0,s+=1),u(I)}function u(I){return I===null?n(I):xe(I)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),p):n(I):Pe(I)?qe(t,u,"whitespace")(I):(s+=1,o&&(o=!1,i+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(I)))}function d(I){return I===null||I===124||pt(I)?(t.exit("data"),u(I)):(t.consume(I),I===92?f:d)}function f(I){return I===92||I===124?(t.consume(I),d):d(I)}function p(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(t.enter("tableDelimiterRow"),o=!1,Pe(I)?qe(t,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):g(I))}function g(I){return I===45||I===58?b(I):I===124?(o=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),m):S(I)}function m(I){return Pe(I)?qe(t,b,"whitespace")(I):b(I)}function b(I){return I===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),y):I===45?(s+=1,y(I)):I===null||xe(I)?w(I):S(I)}function y(I){return I===45?(t.enter("tableDelimiterFiller"),x(I)):S(I)}function x(I){return I===45?(t.consume(I),x):I===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),v):(t.exit("tableDelimiterFiller"),v(I))}function v(I){return Pe(I)?qe(t,w,"whitespace")(I):w(I)}function w(I){return I===124?g(I):I===null||xe(I)?!o||i!==s?S(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):S(I)}function S(I){return n(I)}function k(I){return t.enter("tableRow"),E(I)}function E(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),E):I===null||xe(I)?(t.exit("tableRow"),e(I)):Pe(I)?qe(t,E,"whitespace")(I):(t.enter("data"),T(I))}function T(I){return I===null||I===124||pt(I)?(t.exit("data"),E(I)):(t.consume(I),I===92?N:T)}function N(I){return I===92||I===124?(t.consume(I),T):T(I)}}function gq(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,a=0,c,u,d;const f=new uq;for(;++n<t.length;){const p=t[n],g=p[1];p[0]==="enter"?g.type==="tableHead"?(l=!1,a!==0&&(lw(f,e,a,c,u),u=void 0,a=0),c={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(n,0,[["enter",c,e]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(n,0,[["enter",u,e]])),i=g.type==="tableDelimiterRow"?2:u?3:1):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=wd(f,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=wd(f,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,a=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(a=n,s[1]!==0?(o[0]=o[1],d=wd(f,e,s,i,n,d)):o[1]!==0&&(d=wd(f,e,o,i,n,d)),i=0):i&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(a!==0&&lw(f,e,a,c,u),f.consume(e.events),n=-1;++n<e.events.length;){const p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=fq(e.events,n))}return t}function wd(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Ml(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const a=Ml(e.events,n[1]);if(s={type:o,start:Object.assign({},a),end:Object.assign({},a)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Ml(e.events,n[2]),u=Ml(e.events,n[3]),d={type:l,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const f=e.events[n[2]],p=e.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,m=n[3]-n[2]-1;t.add(g,m,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},Ml(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function lw(t,e,n,r,i){const s=[],o=Ml(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Ml(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const et={"ar-AE":{branchName:"اسم الفرع",add:"يضيف",basedOn:"مرتكز على",branches:"الفروع",clear:"مسح",cancel:"يلغي",collection:"مجموعة",collections:"المجموعات",createPullRequest:"إنشاء طلب سحب",create:"يخلق",currentBranch:"الفرع الحالي",dashboard:"لوحة القيادة",defaultBranch:"الفرع الافتراضي",delete:"يمسح",edit:"يحرر",deleteBranch:"حذف الفرع",loading:"جارٍ التحميل",newBranch:"فرع جديد",pullRequests:"طلبات السحب",save:"يحفظ",otherBranches:"الفروع الأخرى",search:"بحث",singleton:"سينجلتون",theCurrentlyCheckedOutBranch:"الفرع المعاد حاليا. اختر هذا إذا كنت بحاجة إلى البناء على العمل الحالي من الفرع الحالي.",singletons:"الفردي",theDefaultBranchInYourRepository:"الفرع الافتراضي في المستودع الخاص بك. اختر هذا لبدء شيء جديد لا يعتمد على فرعك الحالي.",viewPullRequests:"عرض طلبات السحب"},"da-DK":{add:"Tilføje",basedOn:"Baseret på",branchName:"Afdelingsnavn",branches:"Grene",cancel:"Afbestille",collection:"Kollektion",collections:"Samlinger",clear:"Ryd",create:"skab",createPullRequest:"Opret pull-anmodning",currentBranch:"Nuværende filial",dashboard:"Dashboard",defaultBranch:"Standard gren",delete:"Slet",deleteBranch:"Slet filial",edit:"Redigere",loading:"Indlæser",newBranch:"Ny filial",otherBranches:"Andre grene",save:"Gemme",search:"Søg",pullRequests:"Træk anmodninger",singleton:"Singleton",singletons:"Singletoner",theCurrentlyCheckedOutBranch:"Den aktuelt tjekkede filial. Vælg dette, hvis du skal bygge videre på eksisterende arbejde fra den nuværende filial.",theDefaultBranchInYourRepository:"Standardgrenen i dit lager. Vælg dette for at starte på noget nyt, der ikke er afhængigt af din nuværende filial.",viewPullRequests:"Se pull-anmodninger"},"bg-BG":{add:"Добавете",basedOn:"Базиран на",branchName:"Име на клон",branches:"Клонове",cancel:"Отказ",clear:"Изчисти",collection:"колекция",collections:"Колекции",create:"Създавайте",dashboard:"Табло",currentBranch:"Текущ клон",createPullRequest:"Създайте заявка за изтегляне",defaultBranch:"Клон по подразбиране",delete:"Изтрий",deleteBranch:"Изтриване на клон",edit:"редактиране",newBranch:"Нов клон",loading:"Зареждане",otherBranches:"Други клонове",pullRequests:"Заявки за изтегляне",save:"Запазване",singleton:"Сингълтън",singletons:"Единични",search:"Търсене",theCurrentlyCheckedOutBranch:"Текущо провереният клон. Изберете това, ако трябва да надграждате върху съществуваща работа от текущия клон.",theDefaultBranchInYourRepository:"Клонът по подразбиране във вашето хранилище. Изберете това, за да започнете с нещо ново, което не зависи от текущия ви клон.",viewPullRequests:"Преглед на заявките за изтегляне"},"cs-CZ":{add:"Přidat",basedOn:"Na základě",cancel:"zrušení",branchName:"Jméno pobočky",branches:"Větve",clear:"Vymazat",collection:"Sbírka",create:"Vytvořit",collections:"Sbírky",createPullRequest:"Vytvořit požadavek na stažení",currentBranch:"Současná pobočka",defaultBranch:"Výchozí větev",dashboard:"Přístrojová deska",delete:"Vymazat",deleteBranch:"Smazat větev",edit:"Upravit",loading:"Načítání",newBranch:"Nová pobočka",pullRequests:"Vytáhněte požadavky",save:"Uložit",otherBranches:"Ostatní pobočky",search:"Hledat",singleton:"Jedináček",singletons:"Singletons",theCurrentlyCheckedOutBranch:"Aktuálně odhlášená pobočka. Tuto možnost vyberte, pokud potřebujete navázat na stávající práci z aktuální pobočky.",theDefaultBranchInYourRepository:"Výchozí větev ve vašem úložišti. Zvolte tuto možnost, chcete-li začít s něčím novým, co není závislé na vaší aktuální větvi.",viewPullRequests:"Zobrazit žádosti o stažení"},"de-DE":{basedOn:"Bezogen auf",branchName:"Zweigname",add:"Hinzufügen",branches:"Zweig",clear:"Löschen",cancel:"Abbrechen",collections:"Sammlungen",collection:"Sammlung",create:"Erstellen",currentBranch:"Aktueller Zweig",createPullRequest:"Pull-Request erstellen",dashboard:"Dashboard",defaultBranch:"Standardzweig",delete:"Löschen",deleteBranch:"Zweig löschen",edit:"Bearbeiten",loading:"Wird geladen",newBranch:"Neuer Zweig",otherBranches:"Andere Zweige",pullRequests:"Pull-Requests",save:"Speichern",search:"Suchen",singletons:"Einzelne",singleton:"Einzeln",theCurrentlyCheckedOutBranch:"Der aktuell ausgecheckte Zweig. Wählen Sie diese Option, wenn Sie auf vorhandener Arbeit aus dem aktuellen Zweig aufbauen müssen.",theDefaultBranchInYourRepository:"Der Standard-Branch in Ihrem Repository. Wählen Sie dies, um etwas Neues zu starten, das nicht von Ihrem aktuellen Zweig abhängt.",viewPullRequests:"Pull-Requests anzeigen"},"el-GR":{add:"Προσθήκη",basedOn:"Βασισμένο στο",branchName:"Όνομα υποκαταστήματος",branches:"Κλαδια δεντρου",clear:"Καθαρισμός",cancel:"Ματαίωση",collections:"Συλλογές",collection:"Συλλογή",create:"Δημιουργώ",createPullRequest:"Δημιουργία αιτήματος έλξης",dashboard:"Ταμπλό",currentBranch:"Τρέχον υποκατάστημα",defaultBranch:"Προεπιλεγμένος κλάδος",delete:"Διαγράφω",deleteBranch:"Διαγραφή υποκαταστήματος",edit:"Επεξεργασία",loading:"Φόρτωση",newBranch:"Νέο υποκατάστημα",otherBranches:"Άλλα υποκαταστήματα",pullRequests:"Τραβήξτε αιτήματα",save:"Αποθηκεύσετε",singleton:"Μοναδικό χαρτί",singletons:"Singletons",search:"Αναζήτηση",theCurrentlyCheckedOutBranch:"Το υποκατάστημα που ελέγχεται αυτήν τη στιγμή. Επιλέξτε αυτό εάν χρειάζεται να βασιστείτε σε υπάρχουσες εργασίες από τον τρέχοντα κλάδο.",theDefaultBranchInYourRepository:"Ο προεπιλεγμένος κλάδος στο αποθετήριο σας. Επιλέξτε αυτό για να ξεκινήσετε κάτι νέο που δεν εξαρτάται από το τρέχον υποκατάστημά σας.",viewPullRequests:"Προβολή αιτημάτων έλξης"},"en-US":{add:"Add",basedOn:"Based on",branchName:"Branch name",cancel:"Cancel",clear:"Clear",branches:"Branches",collection:"Collection",collections:"Collections",create:"Create",createPullRequest:"Create pull request",currentBranch:"Current branch",dashboard:"Dashboard",defaultBranch:"Default branch",delete:"Delete",loading:"Loading",edit:"Edit",deleteBranch:"Delete branch",newBranch:"New branch…",otherBranches:"Other branches",pullRequests:"Pull requests",save:"Save",search:"Search",singletons:"Singletons",singleton:"Singleton",theCurrentlyCheckedOutBranch:"The currently checked out branch. Choose this if you need to build on existing work from the current branch.",theDefaultBranchInYourRepository:"The default branch in your repository. Choose this to start something new that's not dependent on your current branch.",viewPullRequests:"View pull requests"},"es-ES":{add:"Agregar",basedOn:"Residencia en",branchName:"Nombre de la sucursal",branches:"Sucursales",clear:"Borrar",collection:"Colección",collections:"Colecciones",cancel:"Cancelar",create:"Crear",createPullRequest:"Crear solicitud de extracción",currentBranch:"Rama actual",dashboard:"Panel",delete:"Borrar",defaultBranch:"Rama predeterminada",deleteBranch:"Eliminar rama",edit:"Editar",newBranch:"Nueva sucursal",loading:"Cargando",otherBranches:"Otras sucursales",pullRequests:"Solicitudes de extracción",save:"Ahorrar",search:"Buscar",singleton:"Semifallo",theCurrentlyCheckedOutBranch:"La sucursal actualmente desprotegida. Elija esto si necesita desarrollar el trabajo existente de la rama actual.",singletons:"Solteros",theDefaultBranchInYourRepository:"La rama predeterminada en su repositorio. Elija esto para comenzar algo nuevo que no dependa de su sucursal actual.",viewPullRequests:"Ver solicitudes de extracción"},"et-EE":{basedOn:"Põhineb",add:"Lisama",branchName:"Filiaali nimi",branches:"Filiaalid",cancel:"Tühista",clear:"Puhasta",collection:"Kollektsioon",collections:"Kollektsioonid",create:"Loo",createPullRequest:"Loo tõmbamistaotlus",defaultBranch:"Vaikeharu",currentBranch:"Praegune filiaal",dashboard:"Armatuurlaud",edit:"Muuda",delete:"Kustuta",loading:"Laadimine",otherBranches:"Muud oksad",pullRequests:"Tõmbetaotlused",newBranch:"Uus filiaal",save:"Salvesta",search:"Otsi",singleton:"üksikud",theCurrentlyCheckedOutBranch:"Praegu välja registreeritud filiaal. Valige see, kui peate kasutama praeguse haru olemasolevaid töid.",viewPullRequests:"Vaadake tõmbamistaotlusi",singletons:"Üksikud",theDefaultBranchInYourRepository:"Vaikeharu teie hoidlas. Valige see, et alustada midagi uut, mis ei sõltu teie praegusest harust.",deleteBranch:"Kustuta haru"},"he-IL":{basedOn:"מבוסס על",branchName:"שם הסניף",add:"לְהוֹסִיף",branches:"ענפים",collection:"אוסף",clear:"נקי",cancel:"לְבַטֵל",collections:"אוספים",currentBranch:"סניף נוכחי",create:"לִיצוֹר",createPullRequest:"צור בקשת משיכה",dashboard:"לוּחַ מַחווָנִים",delete:"לִמְחוֹק",defaultBranch:"סניף ברירת מחדל",loading:"טוען",deleteBranch:"מחק סניף",edit:"לַעֲרוֹך",newBranch:"סניף חדש",otherBranches:"סניפים אחרים",pullRequests:"משוך בקשות",save:"להציל",search:"חפש",singleton:"קְלָף בּוֹדֵד",singletons:"רווקים",theCurrentlyCheckedOutBranch:"הסניף שנקבע כעת. בחר באפשרות זו אם אתה צריך לבנות על עבודה קיימת מהסניף הנוכחי.",theDefaultBranchInYourRepository:"סניף ברירת המחדל במאגר שלך. בחר באפשרות זו כדי להתחיל משהו חדש שאינו תלוי בסניף הנוכחי שלך.",viewPullRequests:"הצג בקשות משיכה"},"fr-FR":{basedOn:"Basé sur",add:"Ajouter",branches:"Branches",branchName:"Nom de la filiale",clear:"Effacer",collection:"Collection",cancel:"Annuler",collections:"Collections",createPullRequest:"Créer une demande d'extraction",create:"Créer",currentBranch:"Succursale actuelle",dashboard:"Tableau de bord",defaultBranch:"Branche par défaut",delete:"Supprimer",deleteBranch:"Supprimer la branche",edit:"Modifier",loading:"Chargement en cours",newBranch:"Nouvelle branche",pullRequests:"Demandes d'extraction",save:"Sauvegarder",search:"Rechercher",otherBranches:"Autres succursales",singletons:"Singletons",singleton:"Singleton",theCurrentlyCheckedOutBranch:"La branche actuellement extraite. Choisissez cette option si vous devez vous appuyer sur le travail existant de la branche actuelle.",theDefaultBranchInYourRepository:"La branche par défaut de votre référentiel. Choisissez ceci pour commencer quelque chose de nouveau qui ne dépend pas de votre branche actuelle.",viewPullRequests:"Afficher les demandes d'extraction"},"hr-HR":{branchName:"Naziv podružnice",add:"Dodati",basedOn:"Na temelju",branches:"Podružnice",clear:"Izbriši",cancel:"Otkazati",collection:"Kolekcija",collections:"Zbirke",create:"Stvoriti",createPullRequest:"Kreirajte zahtjev za povlačenjem",currentBranch:"Trenutna grana",defaultBranch:"Zadana grana",dashboard:"Nadzorna ploča",deleteBranch:"Izbriši granu",delete:"Izbrisati",edit:"Uredi",newBranch:"Nova grana",loading:"Učitavam",save:"Uštedjeti",pullRequests:"Zahtjevi za povlačenjem",otherBranches:"Ostale grane",singleton:"samac",search:"Traži",theCurrentlyCheckedOutBranch:"Trenutno odjavljena poslovnica. Odaberite ovo ako trebate graditi na postojećem radu iz trenutne grane.",singletons:"Samci",viewPullRequests:"Pregledajte zahtjeve za povlačenjem",theDefaultBranchInYourRepository:"Zadana grana u vašem spremištu. Odaberite ovo da započnete nešto novo što ne ovisi o vašoj trenutnoj grani."},"fi-FI":{add:"Lisätä",basedOn:"Perustuen",branchName:"Sivukonttorin nimi",cancel:"Tühista",clear:"Kirkas",collection:"Kokoelma",create:"Luoda",collections:"Kokoelmat",createPullRequest:"Luo vetopyyntö",currentBranch:"Nykyinen haara",dashboard:"Kojelauta",defaultBranch:"Oletushaara",deleteBranch:"Poista haara",edit:"Muokata",delete:"Poistaa",loading:"Ladataan",otherBranches:"Muut haarat",newBranch:"Uusi haara",pullRequests:"Vedä pyyntöjä",save:"Tallentaa",singleton:"Singleton",search:"Hae",singletons:"Singletons",viewPullRequests:"Näytä vetopyynnöt",theCurrentlyCheckedOutBranch:"Tällä hetkellä uloskirjautunut sivuliike. Valitse tämä, jos haluat rakentaa nykyisen haaran olemassa olevaan työhön.",theDefaultBranchInYourRepository:"Oletushaara arkistossasi. Valitse tämä aloittaaksesi jotain uutta, joka ei ole riippuvainen nykyisestä haarastasi.",branches:"Oksat"},"hu-HU":{basedOn:"Alapján",add:"Hozzáadás",branches:"Ágak",cancel:"Megszünteti",branchName:"Fiók neve",clear:"Törlés",collection:"Gyűjtemény",create:"Teremt",createPullRequest:"Lehívási kérelem létrehozása",collections:"Gyűjtemények",currentBranch:"Jelenlegi ág",dashboard:"Irányítópult",defaultBranch:"Alapértelmezett ág",deleteBranch:"Elágazás törlése",edit:"Szerkesztés",loading:"Betöltés folyamatban",delete:"Töröl",otherBranches:"Egyéb ágak",newBranch:"Új ág",save:"Megment",pullRequests:"Lehívási kérések",search:"Keresés",singleton:"szingli",singletons:"Singletons",theCurrentlyCheckedOutBranch:"A jelenleg kivett fiók. Válassza ezt, ha az aktuális ág meglévő munkájára kell építenie.",viewPullRequests:"Lehívási kérelmek megtekintése",theDefaultBranchInYourRepository:"Az alapértelmezett ág az adattárban. Válassza ezt, ha valami újat szeretne indítani, amely nem függ az aktuális ágtól."},"ja-JP":{add:"追加",branchName:"支店名",basedOn:"に基づく",branches:"支店",clear:"クリア",create:"作成",collections:"コレクション",cancel:"キャンセル",collection:"コレクション",currentBranch:"現在のブランチ",createPullRequest:"プルリクエストを作成",dashboard:"ダッシュボード",defaultBranch:"デフォルトのブランチ",delete:"消去",edit:"編集",loading:"読み込み中",deleteBranch:"ブランチを削除",pullRequests:"プルリクエスト",newBranch:"新しい支店",otherBranches:"その他の支店",save:"保存",search:"検索",singletons:"シングルトン",singleton:"シングルトン",theCurrentlyCheckedOutBranch:"現在チェックアウトされているブランチ。 現在のブランチの既存の作業に基づいて構築する必要がある場合は、これを選択してください。",theDefaultBranchInYourRepository:"リポジトリのデフォルト ブランチ。 これを選択して、現在のブランチに依存しない新しい何かを開始します。",viewPullRequests:"プル リクエストを表示"},"it-IT":{basedOn:"Basato su",add:"Aggiungere",branchName:"Nome ramo",clear:"Cancella",collection:"Collezione",branches:"Rami",cancel:"Annulla",collections:"Collezioni",currentBranch:"Ramo attuale",createPullRequest:"Crea richiesta pull",dashboard:"Pannello di controllo",delete:"Eliminare",deleteBranch:"Elimina ramo",defaultBranch:"Ramo predefinito",edit:"Modificare",newBranch:"Nuova filiale",loading:"Caricamento in corso",otherBranches:"Altri rami",pullRequests:"Richieste pull",save:"Salva",search:"Cerca",singleton:"Singleton",theCurrentlyCheckedOutBranch:"La filiale attualmente verificata. Scegli questa opzione se devi basarti su un lavoro esistente dal ramo corrente.",singletons:"Singletons",theDefaultBranchInYourRepository:"Il ramo predefinito nel tuo repository. Scegli questa opzione per iniziare qualcosa di nuovo che non dipenda dal tuo ramo attuale.",viewPullRequests:"Visualizza le richieste pull",create:"Creare"},"nl-NL":{basedOn:"Gebaseerd op",add:"Toevoegen",branches:"Takken",branchName:"Filiaal naam",clear:"Helder",cancel:"Annuleren",collections:"Collecties",collection:"Verzameling",create:"Creëren",createPullRequest:"Pull-aanvraag maken",currentBranch:"Huidige tak",dashboard:"Dashboard",deleteBranch:"Filiaal verwijderen",defaultBranch:"Standaard filiaal",delete:"Verwijderen",edit:"Bewerking",loading:"Laden",newBranch:"Nieuwe tak",pullRequests:"Trek verzoeken",otherBranches:"Andere takken",search:"Zoeken",save:"Redden",singleton:"eenling",singletons:"Eenlingen",theCurrentlyCheckedOutBranch:"Het momenteel uitgecheckte filiaal. Kies dit als u moet voortbouwen op bestaand werk van de huidige branch.",theDefaultBranchInYourRepository:"De standaard branch in uw repository. Kies dit om iets nieuws te starten dat niet afhankelijk is van uw huidige branche.",viewPullRequests:"Bekijk pull-aanvragen"},"nb-NO":{add:"Legg til",basedOn:"Basert på",branches:"Grener",cancel:"Avbryt",branchName:"Filialnavn",clear:"Tøm",collections:"Samlinger",create:"Skape",collection:"Samling",createPullRequest:"Opprett pull-forespørsel",defaultBranch:"Standard gren",dashboard:"Dashbord",currentBranch:"Nåværende gren",delete:"Slett",deleteBranch:"Slett filial",loading:"Laster inn",edit:"Redigere",newBranch:"Ny gren",pullRequests:"Trekk forespørsler",otherBranches:"Andre grener",search:"Søk",save:"Lagre",singleton:"Singleton",singletons:"Singletoner",theCurrentlyCheckedOutBranch:"Den utsjekkede grenen. Velg dette hvis du skal bygge på eksisterende arbeid fra gjeldende gren.",viewPullRequests:"Se pull-forespørsler",theDefaultBranchInYourRepository:"Standardgrenen i depotet ditt. Velg dette for å starte noe nytt som ikke er avhengig av din nåværende filial."},"ko-KR":{basedOn:"기반으로",cancel:"취소",add:"추가하다",branchName:"지점명",branches:"가지",clear:"지우기",collections:"컬렉션",collection:"수집",create:"만들다",createPullRequest:"풀 요청 생성",dashboard:"계기반",currentBranch:"현재 지점",defaultBranch:"기본 분기",delete:"삭제",deleteBranch:"분기 삭제",edit:"편집하다",otherBranches:"기타 지점",loading:"로드 중",pullRequests:"풀 리퀘스트",save:"구하다",search:"검색",singleton:"하나씩 일어나는 것",singletons:"싱글톤",theCurrentlyCheckedOutBranch:"현재 체크아웃된 브랜치. 현재 브랜치의 기존 작업을 기반으로 빌드해야 하는 경우 이 옵션을 선택하세요.",theDefaultBranchInYourRepository:"리포지토리의 기본 브랜치입니다. 현재 분기에 의존하지 않는 새로운 것을 시작하려면 이것을 선택하십시오.",viewPullRequests:"풀 요청 보기",newBranch:"새 지점"},"lv-LV":{add:"Pievienot",basedOn:"Balstoties uz",branchName:"Filiāles nosaukums",branches:"Nozares",clear:"Notīrīt",collection:"Kolekcija",cancel:"Atcelt",create:"Izveidot",collections:"Kolekcijas",createPullRequest:"Izveidot izvilkšanas pieprasījumu",dashboard:"Mērinstrumentu panelis",currentBranch:"Pašreizējā filiāle",defaultBranch:"Noklusējuma filiāle",delete:"Dzēst",deleteBranch:"Dzēst filiāli",edit:"Rediģēt",loading:"Notiek ielāde",otherBranches:"Citas filiāles",newBranch:"Jauna filiāle",pullRequests:"Izvilkšanas pieprasījumi",save:"Saglabāt",singleton:"Singleton",search:"Meklēt",singletons:"Vientuļi",theCurrentlyCheckedOutBranch:"Pašlaik izrakstītā filiāle. Izvēlieties šo, ja vēlaties izmantot esošo darbu no pašreizējās filiāles.",viewPullRequests:"Skatīt izvilkšanas pieprasījumus",theDefaultBranchInYourRepository:"Noklusējuma filiāle jūsu repozitorijā. Izvēlieties šo, lai sāktu kaut ko jaunu, kas nav atkarīgs no jūsu pašreizējās filiāles."},"pt-BR":{add:"Adicionar",branchName:"Nome da filial",branches:"Galhos",basedOn:"Baseado em",cancel:"Cancelar",clear:"Limpar",collection:"Coleção",collections:"Coleções",create:"Criar",createPullRequest:"Criar solicitação pull",currentBranch:"filial atual",dashboard:"Painel",defaultBranch:"ramo padrão",delete:"Excluir",deleteBranch:"Excluir ramificação",loading:"Carregando",newBranch:"Nova filial",edit:"Editar",otherBranches:"Outros ramos",pullRequests:"Requisições pull",save:"Guardar",singleton:"solteiro",search:"Pesquisar",singletons:"Solteiros",theCurrentlyCheckedOutBranch:"A ramificação atualmente com check-out. Escolha esta opção se precisar criar um trabalho existente na ramificação atual.",theDefaultBranchInYourRepository:"A ramificação padrão em seu repositório. Escolha isso para iniciar algo novo que não dependa de sua ramificação atual.",viewPullRequests:"Ver solicitações pull"},"lt-LT":{basedOn:"Remiantis",add:"Papildyti",branchName:"Filialo pavadinimas",clear:"Skaidrus",branches:"Filialai",cancel:"Atšaukti",create:"Sukurti",collections:"Kolekcijos",collection:"Kolekcija",currentBranch:"Dabartinis filialas",createPullRequest:"Sukurti ištraukimo užklausą",dashboard:"Prietaisų skydelis",defaultBranch:"Numatytoji šaka",deleteBranch:"Ištrinti šaką",delete:"Ištrinti",loading:"Įkeliama",newBranch:"Naujas filialas",otherBranches:"Kitos šakos",edit:"Redaguoti",pullRequests:"Ištraukti užklausas",save:"Sutaupyti",search:"Ieškoti",singletons:"Vienišiai",singleton:"vienvietis",theDefaultBranchInYourRepository:"Numatytoji šaka jūsų saugykloje. Pasirinkite tai, kad pradėtumėte ką nors naujo, nepriklausančio nuo dabartinės šakos.",theCurrentlyCheckedOutBranch:"Šiuo metu išregistruotas filialas. Pasirinkite tai, jei reikia remtis esamu darbu iš dabartinės šakos.",viewPullRequests:"Peržiūrėkite ištraukimo užklausas"},"pl-PL":{basedOn:"Oparte na",add:"Dodać",branchName:"Nazwa filii",cancel:"Anulować",branches:"Gałęzie",clear:"Wyczyść",collections:"Kolekcje",create:"Tworzyć",collection:"Kolekcja",createPullRequest:"Utwórz żądanie ściągnięcia",dashboard:"Panel",defaultBranch:"Oddział domyślny",currentBranch:"Obecny oddział",delete:"Usuwać",deleteBranch:"Usuń oddział",edit:"Edytować",newBranch:"Nowa gałąź",loading:"Trwa ładowanie",otherBranches:"Inne gałęzie",pullRequests:"Żądania ściągnięcia",save:"Ratować",search:"Szukaj",singleton:"singel",singletons:"Singletony",theCurrentlyCheckedOutBranch:"Aktualnie wyewidencjonowana gałąź. Wybierz tę opcję, jeśli chcesz oprzeć się na istniejącej pracy z bieżącej gałęzi.",theDefaultBranchInYourRepository:"Domyślna gałąź w twoim repozytorium. Wybierz tę opcję, aby rozpocząć coś nowego, co nie jest zależne od bieżącej gałęzi.",viewPullRequests:"Wyświetl żądania ściągnięcia"},"pt-PT":{add:"Adicionar",basedOn:"Baseado em",branchName:"Nome da filial",cancel:"Cancelar",branches:"Galhos",clear:"Limpar",collection:"Coleção",create:"Criar",collections:"Coleções",createPullRequest:"Criar solicitação pull",currentBranch:"filial atual",dashboard:"Painel",delete:"Excluir",defaultBranch:"ramo padrão",deleteBranch:"Excluir ramificação",edit:"Editar",loading:"A carregar",newBranch:"Nova filial",otherBranches:"Outros ramos",pullRequests:"Requisições pull",singleton:"solteiro",search:"Procurar",singletons:"Solteiros",save:"Guardar",theDefaultBranchInYourRepository:"A ramificação padrão em seu repositório. Escolha isso para iniciar algo novo que não dependa de sua ramificação atual.",theCurrentlyCheckedOutBranch:"A ramificação atualmente com check-out. Escolha esta opção se precisar criar um trabalho existente na ramificação atual.",viewPullRequests:"Ver solicitações pull"},"ru-RU":{add:"Добавить",basedOn:"На основе",branches:"Ветви",branchName:"Название ветви",cancel:"Отмена",clear:"Очистить",collection:"Коллекция",create:"Создать",createPullRequest:"Создать пул-реквест",collections:"Коллекции",currentBranch:"Текущая ветвь",dashboard:"Панель приборов",defaultBranch:"Ветвь по умолчанию",deleteBranch:"Удалить ветвь",delete:"Удалить",edit:"Редактировать",loading:"Загрузка",newBranch:"Новая ветвь",pullRequests:"Пул-реквесты",save:"Сохранить",otherBranches:"Другие ветви",search:"Поиск",singleton:"Синглтон",singletons:"Синглтоны",theCurrentlyCheckedOutBranch:"Текущая проверенная ветвь. Выберите это, если вам нужно опираться на существующую работу из текущей ветви.",theDefaultBranchInYourRepository:"Ветвь по умолчанию в вашем репозитории. Выберите это, чтобы начать что-то новое, не зависящее от вашей текущей ветви.",viewPullRequests:"Посмотреть пул-реквесты"},"ro-RO":{add:"Adăuga",basedOn:"Bazat pe",branchName:"Numele sucursalei",branches:"Ramuri",cancel:"Anulare",clear:"Golire",collections:"Colecții",collection:"Colectie",create:"Crea",createPullRequest:"Creați cerere de tragere",currentBranch:"Filiala actuală",dashboard:"Bord",defaultBranch:"Ramura implicită",delete:"Șterge",deleteBranch:"Ștergeți ramura",edit:"Editați",loading:"Se încarcă",newBranch:"Filiala noua",otherBranches:"Alte ramuri",save:"Salvați",pullRequests:"Solicitări de tragere",singleton:"Singleton",search:"Căutare",singletons:"Singletons",theDefaultBranchInYourRepository:"Ramura implicită din depozitul dvs. Alegeți acest lucru pentru a începe ceva nou, care nu depinde de ramura dvs. actuală.",theCurrentlyCheckedOutBranch:"Sucursala verificată în prezent. Alegeți acest lucru dacă trebuie să vă bazați pe munca existentă din ramura curentă.",viewPullRequests:"Vizualizați solicitările de extragere"},"sk-SK":{add:"Pridať",basedOn:"Založené na",branchName:"Meno pobočky",cancel:"Zrušiť",branches:"Pobočky",collection:"Zbierka",clear:"Vymazať",collections:"zbierky",create:"Vytvorte",currentBranch:"Aktuálna pobočka",createPullRequest:"Vytvorte požiadavku na stiahnutie",dashboard:"Dashboard",defaultBranch:"Predvolená vetva",delete:"Odstrániť",deleteBranch:"Odstrániť vetvu",edit:"Upraviť",newBranch:"Nová pobočka",loading:"Načítava sa",otherBranches:"Ostatné pobočky",pullRequests:"Vytiahnite žiadosti",search:"Vyhľadávať",save:"Uložiť",singletons:"Singletons",singleton:"Singleton",theCurrentlyCheckedOutBranch:"Aktuálne odhlásená pobočka. Túto možnosť vyberte, ak potrebujete stavať na existujúcej práci z aktuálnej pobočky.",theDefaultBranchInYourRepository:"Predvolená vetva vo vašom úložisku. Zvoľte túto možnosť, ak chcete začať niečo nové, čo nezávisí od vašej aktuálnej pobočky.",viewPullRequests:"Zobraziť požiadavky na stiahnutie"},"sl-SI":{add:"Dodaj",basedOn:"Temelji na",branchName:"Ime podružnice",branches:"Podružnice",clear:"Jasen",cancel:"Prekliči",collection:"Zbirka",collections:"Zbirke",create:"Ustvari",createPullRequest:"Ustvari zahtevo za vleko",currentBranch:"Trenutna veja",dashboard:"Nadzorna plošča",delete:"Izbriši",deleteBranch:"Izbriši vejo",defaultBranch:"Privzeta veja",edit:"Uredi",loading:"Nalaganje",newBranch:"Nova podružnica",otherBranches:"Druge veje",pullRequests:"Zahteve za vlečenje",save:"Shrani",search:"Iskanje",singleton:"Singleton",singletons:"Samski",theDefaultBranchInYourRepository:"Privzeta veja v vašem skladišču. Izberite to, da začnete nekaj novega, kar ni odvisno od vaše trenutne veje.",theCurrentlyCheckedOutBranch:"Trenutno odjavljena podružnica. To izberite, če morate graditi na obstoječem delu iz trenutne veje.",viewPullRequests:"Oglejte si zahteve za vlečenje"},"sr-SP":{basedOn:"На бази",add:"Додати",branchName:"Назив огранка",branches:"Огранци",cancel:"Поништити, отказати",collection:"Цоллецтион",collections:"Збирке",clear:"Izbriši",create:"Креирај",createPullRequest:"Креирајте захтев за повлачење",currentBranch:"Тренутна грана",dashboard:"Командна табла",defaultBranch:"Подразумевана грана",delete:"Избриши",deleteBranch:"Обриши грану",edit:"Уредити",otherBranches:"Остале гране",loading:"Učitavam",newBranch:"Нова грана",pullRequests:"Захтеви за повлачење",search:"Pretraga",save:"сачувати",singleton:"Синглетон",theCurrentlyCheckedOutBranch:"Тренутно одјављена филијала. Изаберите ово ако треба да надоградите постојећи рад из тренутне гране.",singletons:"Синглетонс",theDefaultBranchInYourRepository:"Подразумевана грана у вашем спремишту. Изаберите ово да започнете нешто ново што не зависи од ваше тренутне гране.",viewPullRequests:"Прегледајте захтеве за повлачењем"},"sv-SE":{add:"Lägg till",branchName:"Filialens namn",basedOn:"Baserat på",branches:"Grenar",cancel:"Поништити, отказати",clear:"Rensa",collection:"Samling",collections:"Samlingar",create:"Skapa",currentBranch:"Nuvarande gren",dashboard:"instrumentbräda",createPullRequest:"Skapa pull-förfrågan",defaultBranch:"Standardgren",delete:"Radera",deleteBranch:"Ta bort gren",edit:"Redigera",loading:"Läser in",newBranch:"Ny gren",otherBranches:"Andra grenar",pullRequests:"Dra förfrågningar",save:"Spara",search:"Sök",singleton:"Singleton",singletons:"Singlar",theCurrentlyCheckedOutBranch:"Den utcheckade filialen. Välj detta om du behöver bygga på befintligt arbete från den aktuella grenen.",theDefaultBranchInYourRepository:"Standardgrenen i ditt arkiv. Välj detta för att starta något nytt som inte är beroende av din nuvarande filial.",viewPullRequests:"Visa pull-förfrågningar"},"uk-UA":{add:"Додати",basedOn:"На основі",branchName:"Назва гілки",cancel:"Скасувати",branches:"Гілки",clear:"Очистити",collections:"Колекції",collection:"Колекція",createPullRequest:"Створити запит на злиття змін",create:"Створити",currentBranch:"Поточна гілка",dashboard:"Дашборд",defaultBranch:"Типова гілка",delete:"Видалити",deleteBranch:"Видалити гілку",edit:"Редагувати",otherBranches:"Інші гілки",newBranch:"Нова гілка",loading:"Завантаження",search:"Пошук",pullRequests:"Запити на злиття",save:"Зберегти",singletons:"Одиночки",theCurrentlyCheckedOutBranch:"Поточна обрана гілка. Виберіть це, якщо вам потрібно продовжити роботу на основі поточної гілки.",singleton:"Одиночка",theDefaultBranchInYourRepository:"Типова гілка у вашому репозиторії. Виберіть це, щоб почати щось нове, що не залежить від вашої поточної гілки.",viewPullRequests:"Перегляд запитів на злиття"},"tr-TR":{add:"Avbryt",branchName:"şube adı",basedOn:"Dayalı",branches:"Şubeler",cancel:"iptal etmek",collection:"Toplamak",clear:"Temizle",create:"Yaratmak",collections:"Koleksiyonlar",createPullRequest:"Çekme isteği oluştur",dashboard:"Gösterge Paneli",currentBranch:"Mevcut şube",defaultBranch:"varsayılan dal",deleteBranch:"Şubeyi sil",edit:"Düzenlemek",delete:"Silmek",newBranch:"Yeni dal",loading:"Yükleniyor",otherBranches:"Diğer şubeler",pullRequests:"Çekme istekleri",save:"Kaydetmek",search:"Ara",singleton:"Tekil",singletons:"Singleton'lar",theCurrentlyCheckedOutBranch:"Şu anda kontrol edilen şube. Geçerli daldaki mevcut işi geliştirmeniz gerekiyorsa bunu seçin.",theDefaultBranchInYourRepository:"Deponuzdaki varsayılan şube. Mevcut şubenize bağlı olmayan yeni bir şey başlatmak için bunu seçin.",viewPullRequests:"Çekme isteklerini görüntüle"},"zh-CN":{add:"添加",basedOn:"基于",branchName:"分店名称",branches:"分支机构",clear:"透明",cancel:"取消",create:"创造",collections:"收藏品",collection:"收藏",currentBranch:"当前分支",createPullRequest:"创建拉取请求",dashboard:"仪表板",defaultBranch:"默认分支",delete:"删除",deleteBranch:"删除分支",loading:"正在加载",edit:"编辑",newBranch:"新分行",otherBranches:"其他分行",pullRequests:"拉取请求",search:"搜索",singleton:"单例",save:"节省",singletons:"单例",theCurrentlyCheckedOutBranch:"当前签出的分支。 如果您需要在当前分支的现有工作的基础上构建，请选择此项。",theDefaultBranchInYourRepository:"存储库中的默认分支。 选择此选项可开始一些不依赖于当前分支的新操作。",viewPullRequests:"查看拉取请求"},"zh-TW":{add:"添加",basedOn:"基於",branches:"分支機構",branchName:"分店名稱",cancel:"取消",clear:"清除",collection:"收藏",collections:"收藏品",create:"創造",createPullRequest:"創建拉取請求",dashboard:"儀表板",currentBranch:"當前分支",defaultBranch:"默認分支",delete:"刪除",deleteBranch:"刪除分支",edit:"編輯",loading:"正在載入",otherBranches:"其他分行",newBranch:"新分行",pullRequests:"拉取請求",save:"節省",search:"搜尋",singleton:"單例",singletons:"單例",theCurrentlyCheckedOutBranch:"當前簽出的分支。 如果您需要在當前分支的現有工作的基礎上構建，請選擇此項。",theDefaultBranchInYourRepository:"存儲庫中的默認分支。 選擇此選項可開始一些不依賴於當前分支的新操作。",viewPullRequests:"查看拉取請求"}},mq="keystatic-side-panel",yq="keystatic-main-panel",bq=t=>{const e=q(2);let n;return e[0]!==t?(n=h.jsx(zt,{height:"100%",minHeight:0,minWidth:0,...t}),e[0]=t,e[1]=n):n=e[1],n},Kd=t=>{const e=q(7);let n,r;e[0]!==t?({isDisabled:n,...r}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const i=n?void 0:!0;let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=W({"&[data-scrollable]":{overflowY:"auto",WebkitOverflowScrolling:"touch"}}),e[3]=s):s=e[3];let o;return e[4]!==i||e[5]!==r?(o=h.jsx(bq,{"data-scrollable":i,UNSAFE_className:s,...r}),e[4]=i,e[5]=r,e[6]=o):o=e[6],o},xq="---";function Yte(t){return t}function Jte(t){return t}function uj(){var t;let{basePath:e}=GA(),n=Nt(),r=Be(et),i=UB();const s=Object.keys(n.collections||{}),o=Object.keys(n.singletons||{}),l=((t=n.ui)===null||t===void 0?void 0:t.navigation)||{...!!s.length&&{[r.format("collections")]:s},...!!o.length&&{[r.format("singletons")]:o}},a={basePath:e,changeMap:i,config:n};return Array.isArray(l)?l.map(c=>aw(c,a)):Object.entries(l).map(([c,u])=>({title:c,children:u.map(d=>aw(d,a))}))}function aw(t,e){let{basePath:n,changeMap:r,config:i}=e;if(t===xq)return{isDivider:!0};if(i.collections&&t in i.collections){const s=`${n}/collection/${encodeURIComponent(t)}`,o=r.collections.get(t),l=o?o.changed.size+o.added.size+o.removed.size:0,a=i.collections[t].label;return{key:t,href:s,label:a,changed:l,entryCount:o?.totalCount}}if(i.singletons&&t in i.singletons){const s=`${n}/singleton/${encodeURIComponent(t)}`,o=r.singletons.has(t),l=i.singletons[t].label;return{key:t,href:s,label:l,changed:o}}throw new Error(`Unknown navigation key: "${t}".`)}function ll(t,e){const{singular:n,plural:r=n+"s",inclusive:i=!0}=e,s=t===1?n:r;return i?`${t} ${s}`:s}function vq(){var t,e;const n=q(9),{colorScheme:r}=_R(),i=Nt(),s=hl("(prefers-color-scheme: dark)");let o;n[0]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(kq,{}),n[0]=o):o=n[0];let l=o,a="Keystatic";if((t=i.ui)!==null&&t!==void 0&&(t=t.brand)!==null&&t!==void 0&&t.mark){const u=i.ui.brand.mark,d=r==="auto"?s?"dark":"light":r;let f;n[1]!==u||n[2]!==d?(f=h.jsx(u,{colorScheme:d}),n[1]=u,n[2]=d,n[3]=f):f=n[3],l=f}if("repo"in i.storage){let u;n[4]!==i.storage.repo?(u=tl(i.storage.repo),n[4]=i.storage.repo,n[5]=u):u=n[5],a=u}i.cloud&&(a=i.cloud.project),(e=i.ui)!==null&&e!==void 0&&(e=e.brand)!==null&&e!==void 0&&e.name&&(a=i.ui.brand.name);let c;return n[6]!==l||n[7]!==a?(c={brandMark:l,brandName:a},n[6]=l,n[7]=a,n[8]=c):c=n[8],c}function kq(){const t=q(4);let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx("path",{d:"M18 8L14 24L12 32L30 14L18 8Z",fill:"currentColor"}),n=h.jsx("path",{d:"M2 18L20 0L18 8L2 18Z",fill:"currentColor"}),t[0]=e,t[1]=n):(e=t[0],n=t[1]);let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx("path",{d:"M18 8L2 18L14 24L18 8Z",fill:"url(#brand-mark-gradient)"}),t[2]=r):r=t[2];let i;return t[3]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsxs("svg",{width:24,height:24,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e,n,r,h.jsx("defs",{children:h.jsxs("linearGradient",{id:"brand-mark-gradient",x1:"2",y1:"18",x2:"20",y2:"14",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"currentColor",stopOpacity:"0.2"}),h.jsx("stop",{offset:"1",stopColor:"currentColor"})]})})]}),t[3]=i):i=t[3],i}function wq(){const t=La(),e=jr(),n=bn(),r=Be(et),i=ft(),s=Nt(),o=_0(s),l=C.useMemo(()=>{const c=[];if(e){c.push({name:e.defaultBranch,description:r.format("defaultBranch")});for(let u of t.keys())u!==e.defaultBranch&&c.push({name:u})}return c},[t,e,r]),a=C.useMemo(()=>l.filter(c=>c.name===e?.defaultBranch||!o||c.name.startsWith(o)||c.name===n),[l,e,o,n]);return h.jsx(Tu,{"aria-label":r.format("currentBranch"),defaultItems:a,loadingState:a.length===0?"loading":void 0,selectedKey:n,onSelectionChange:c=>{typeof c=="string"&&i.push(i.href.replace(/\/branch\/[^/]+/,"/branch/"+encodeURIComponent(c)))},menuTrigger:"focus",flex:!0,children:c=>h.jsxs(Je,{textValue:c.name,children:[h.jsx(X,{src:mT}),h.jsx(Y,{truncate:!0,children:c.name}),"description"in c&&h.jsx(Y,{slot:"description",children:c.description})]},c.name)})}function dj(t){const e=q(51),n=Nt(),r=jr(),i=La(),s=bn(),o=r?.defaultBranch===s,l=Be(et),[a,c]=fj(),{error:u,fetching:d}=a,[f,p]=C.useState(""),[g,m]=C.useState(r.defaultBranch);let b;e[0]!==n?(b=_0(n),e[0]=n,e[1]=b):b=e[1];const y=b;let x;e[2]!==y?(x=y?{UNSAFE_className:W({"& input":{paddingInlineStart:j.size.space.xsmall}}),startElement:h.jsx(te,{alignItems:"center",paddingStart:"regular",justifyContent:"center",pointerEvents:"none",children:h.jsx(Y,{color:"neutralSecondary",children:y})})}:{},e[2]=y,e[3]=x):x=e[3];const v=x;let w;e[4]===Symbol.for("react.memo_cache_sentinel")?(w={display:"contents"},e[4]=w):w=e[4];let S;e[5]!==y||e[6]!==f||e[7]!==c||e[8]!==i||e[9]!==g||e[10]!==r||e[11]!==t?(S=async z=>{var U;if(z.target!==z.currentTarget)return;z.preventDefault();const R=(y??"")+f,J=`refs/heads/${R}`;(U=(await c({input:{name:J,oid:i.get(g).commitSha,repositoryId:r.id}})).data)!==null&&U!==void 0&&(U=U.createRef)!==null&&U!==void 0&&U.__typename&&t.onCreate(R)},e[5]=y,e[6]=f,e[7]=c,e[8]=i,e[9]=g,e[10]=r,e[11]=t,e[12]=S):S=e[12];let k;e[13]!==l?(k=l.format("newBranch"),e[13]=l,e[14]=k):k=e[14];let E;e[15]!==k?(E=h.jsx(nt,{children:k}),e[15]=k,e[16]=E):E=e[16];let T;e[17]!==o||e[18]!==l||e[19]!==u||e[20]!==f||e[21]!==v||e[22]!==r||e[23]!==s||e[24]!==g?(T=h.jsx(gn,{children:o?h.jsx(gt,{value:f,onChange:p,label:l.format("branchName"),autoFocus:!0,errorMessage:Uy(u),...v}):h.jsxs(ff,{gap:"xlarge",children:[h.jsx(gt,{label:l.format("branchName"),value:f,onChange:p,autoFocus:!0,errorMessage:Uy(u),...v}),h.jsxs(Lz,{label:l.format("basedOn"),value:g,onChange:m,children:[h.jsxs(zv,{value:r.defaultBranch,children:[h.jsxs(Y,{children:[r.defaultBranch,h.jsx(Y,{visuallyHidden:!0,children:"."})]}),h.jsx(Y,{slot:"description",children:l.format("theDefaultBranchInYourRepository")})]}),h.jsxs(zv,{value:s,children:[h.jsxs(Y,{children:[s,h.jsx(Y,{visuallyHidden:!0,children:"."})]}),h.jsx(Y,{slot:"description",children:l.format("theCurrentlyCheckedOutBranch")})]})]})]})}),e[17]=o,e[18]=l,e[19]=u,e[20]=f,e[21]=v,e[22]=r,e[23]=s,e[24]=g,e[25]=T):T=e[25];let N;e[26]===Symbol.for("react.memo_cache_sentinel")?(N={justifyContent:"flex-end"},e[26]=N):N=e[26];let I;e[27]!==d?(I=d&&h.jsx(Tr,{"aria-labelledby":"create-branch-submit-button",isIndeterminate:!0,size:"small"}),e[27]=d,e[28]=I):I=e[28];let A;e[29]!==I?(A=h.jsx(TR,{UNSAFE_style:N,children:I}),e[29]=I,e[30]=A):A=e[30];let O;e[31]!==l?(O=l.format("cancel"),e[31]=l,e[32]=O):O=e[32];let _;e[33]!==t.onDismiss||e[34]!==d||e[35]!==O?(_=h.jsx(Re,{onPress:t.onDismiss,isDisabled:d,children:O}),e[33]=t.onDismiss,e[34]=d,e[35]=O,e[36]=_):_=e[36];let F;e[37]!==l?(F=l.format("create"),e[37]=l,e[38]=F):F=e[38];let M;e[39]!==d||e[40]!==F?(M=h.jsx(Re,{isDisabled:d,prominence:"high",type:"submit",id:"create-branch-submit-button",children:F}),e[39]=d,e[40]=F,e[41]=M):M=e[41];let P;e[42]!==_||e[43]!==M?(P=h.jsxs(mn,{children:[_,M]}),e[42]=_,e[43]=M,e[44]=P):P=e[44];let B;return e[45]!==S||e[46]!==E||e[47]!==T||e[48]!==A||e[49]!==P?(B=h.jsx(nn,{size:"small",children:h.jsxs("form",{style:w,onSubmit:S,children:[E,T,A,P]})}),e[45]=S,e[46]=E,e[47]=T,e[48]=A,e[49]=P,e[50]=B):B=e[50],B}const Sq=[" ","~","^",":","*","?","[","..","@{","\\"],Cq=[".","/"],Eq=[".","/",".lock"];function Uy(t){if(t){if(t.message.includes("is not a valid ref name")){let e=t.message.match(/"([^"]+)"/),n=e?e[1].replace("refs/heads/",""):"";for(let i of Cq)if(n.startsWith(i))return`Cannot start with "${i}"`;for(let i of Eq)if(n.endsWith(i))return`Cannot end with "${i}"`;let r=Sq.filter(i=>n.includes(i));if(r.length>0){let i={style:"long",type:"conjunction"},s=new Intl.ListFormat("en-US",i),o=r.map(l=>`"${l}"`);return`Some characters are not allowed: ${s.format(o)}`}return"Invalid branch name"}return t.message}}function fj(){return Zh(Ht`
      mutation CreateBranch($input: CreateRefInput!) {
        createRef(input: $input) {
          __typename
          ref {
            ...Ref_base
          }
        }
      }
      ${F0}
    `)}const hj=C.createContext({theme:"auto",setTheme:()=>{throw new Error("ThemeContext was not initialized.")}}),Iq=hj.Provider,cw="keystatic-color-scheme";function Aq(){const t=q(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{const l=localStorage.getItem(cw);return l==="light"||l==="dark"?l:"auto"},t[0]=e):e=t[0];const[n,r]=C.useState(e);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=l=>{localStorage.setItem(cw,l),r(l)},t[1]=i):i=t[1];const s=i;let o;return t[2]!==n?(o={theme:n,setTheme:s},t[2]=n,t[3]=o):o=t[3],o}function Tq(){return C.useContext(hj)}const c1=t=>{let{attributes:e,children:n,draggable:r=!1}=t;return h.jsx("div",{draggable:r,className:up,...e,children:n})},Ep=()=>h.jsx(Ds,{orientation:"vertical",flexShrink:0}),pj={light:{icon:gT,label:"Light"},dark:{icon:pT,label:"Dark"},auto:{icon:Dz,label:"System"}},Nq=Object.entries(pj).map(([t,{icon:e,label:n}])=>({id:t,icon:e,label:n}));function gj(){const t=q(13),{theme:e,setTheme:n}=Tq(),r=hl("(prefers-color-scheme: dark)");let i=pj[e].icon;e==="auto"&&(i=r?pT:gT);let s;t[0]!==i?(s=h.jsx(ae,{"aria-label":"theme",prominence:"low",children:h.jsx(X,{src:i})}),t[0]=i,t[1]=s):s=t[1];let o;t[2]!==n?(o=d=>{const[f]=d;return n(f)},t[2]=n,t[3]=o):o=t[3];let l;t[4]!==e?(l=[e],t[4]=e,t[5]=l):l=t[5];let a;t[6]===Symbol.for("react.memo_cache_sentinel")?(a=d=>h.jsxs(Je,{textValue:d.label,children:[h.jsx(X,{src:d.icon}),h.jsx(Y,{children:d.label})]}),t[6]=a):a=t[6];let c;t[7]!==o||t[8]!==l?(c=h.jsx(Ai,{items:Nq,onSelectionChange:o,disallowEmptySelection:!0,selectedKeys:l,selectionMode:"single",children:a}),t[7]=o,t[8]=l,t[9]=c):c=t[9];let u;return t[10]!==s||t[11]!==c?(u=h.jsxs(Ii,{align:"end",children:[s,c]}),t[10]=s,t[11]=c,t[12]=u):u=t[12],u}function jq(){const t=q(5),e=Nt(),n=Dq(),r=ft();if(!n)return null;if(n==="unauthorized"){let s;return t[0]!==r.params||t[1]!==e?(s=h.jsx(ae,{onPress:()=>{Bu(r.params.map(encodeURIComponent).join("/"),e)},flex:!0,children:"Sign into Cloud"}),t[0]=r.params,t[1]=e,t[2]=s):s=t[2],s}let i;return t[3]!==n?(i=h.jsx(_q,{...n}),t[3]=n,t[4]=i):i=t[4],i}function _q(t){const e=q(16),n=Nt(),r=Uu(),i=sT();let s;const o=n.storage.kind==="github"?"/api/keystatic/github/logout":void 0;let l;if(e[0]!==o||e[1]!==n.cloud||e[2]!==r||e[3]!==i){var a;l=[{key:"logout",label:"Log out",href:o,icon:Oz}],(a=n.cloud)!==null&&a!==void 0&&a.project&&l.unshift({key:"manage",label:"Account",icon:Mz,href:"https://keystatic.cloud/account",target:"_blank",rel:"noopener noreferrer"}),r!=null&&r.team.images&&l.unshift({key:"image-library",label:"Image library",icon:Iu,href:i,target:"_blank",rel:"noopener noreferrer"}),e[0]=o,e[1]=n.cloud,e[2]=r,e[3]=i,e[4]=l}else l=e[4];s=l;const c=s;if(!t)return null;let u;e[5]!==t?(u=h.jsx(Oq,{...t}),e[5]=t,e[6]=u):u=e[6];let d;e[7]!==n?(d=async m=>{switch(await Promise.all([IB(),gB()]),m){case"logout":switch(n.storage.kind){case"cloud":case"local":{var b;const y=(b=zu(n))===null||b===void 0?void 0:b.accessToken;y&&await fetch(`${ls}/oauth/revoke`,{method:"POST",body:new URLSearchParams({token:y}).toString(),headers:{"Content-Type":"application/x-www-form-urlencoded",...so}}),localStorage.removeItem("keystatic-cloud-access-token"),window.location.reload()}}}},e[7]=n,e[8]=d):d=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=m=>h.jsxs(Je,{textValue:m.label,href:m.href,rel:m.rel,target:m.target,children:[h.jsx(X,{src:m.icon}),h.jsx(Y,{children:m.label})]},m.key),e[9]=f):f=e[9];let p;e[10]!==c||e[11]!==d?(p=h.jsx(h.Fragment,{children:h.jsx(Ai,{items:c,minWidth:"scale.2400",onAction:d,children:f})}),e[10]=c,e[11]=d,e[12]=p):p=e[12];let g;return e[13]!==u||e[14]!==p?(g=h.jsxs(Ii,{children:[u,p]}),e[13]=u,e[14]=p,e[15]=g):g=e[15],g}const Oq=C.forwardRef(function(e,n){var r;const i=q(24);let s,o,l,a;i[0]!==e?({avatarUrl:o,login:l,name:s,...a}=e,i[0]=e,i[1]=s,i[2]=o,i[3]=l,i[4]=a):(s=i[1],o=i[2],l=i[3],a=i[4]);let c;i[5]===Symbol.for("react.memo_cache_sentinel")?(c=W({justifyContent:"start",textAlign:"start"}),i[5]=c):c=i[5];const u=(r=s)!==null&&r!==void 0?r:void 0;let d;i[6]!==o||i[7]!==u?(d=h.jsx(tp,{src:o,name:u,size:"small"}),i[6]=o,i[7]=u,i[8]=d):d=i[8];let f;i[9]!==s?(f=h.jsx(Y,{size:"small",weight:"semibold",color:"neutralEmphasis",children:s}),i[9]=s,i[10]=f):f=i[10];let p;i[11]!==s||i[12]!==l?(p=s===l?null:h.jsx(Y,{size:"small",color:"neutralTertiary",children:l}),i[11]=s,i[12]=l,i[13]=p):p=i[13];let g;i[14]!==f||i[15]!==p?(g=h.jsx(RR,{children:h.jsxs(te,{direction:"column",gap:"small",children:[f,p]})}),i[14]=f,i[15]=p,i[16]=g):g=i[16];let m;i[17]!==d||i[18]!==g?(m=h.jsxs(te,{alignItems:"center",gap:"regular",children:[d,g]}),i[17]=d,i[18]=g,i[19]=m):m=i[19];let b;return i[20]!==a||i[21]!==n||i[22]!==m?(b=h.jsx(ae,{...a,ref:n,"aria-label":"User menu",prominence:"low",flexGrow:1,UNSAFE_className:c,children:m}),i[20]=a,i[21]=n,i[22]=m,i[23]=b):b=i[23],b});function mj(){var t,e,n;const r=q(9),i=La(),s=jr(),o=bn();let l;if(r[0]!==i||r[1]!==o){var a;l=(a=i.get(o))===null||a===void 0?void 0:a.id,r[0]=i,r[1]=o,r[2]=l}else l=r[2];const c=l;let u;r[3]===Symbol.for("react.memo_cache_sentinel")?(u=Ht`
      query PullRequestForBranch($refId: ID!) {
        node(id: $refId) {
          __typename
          id
          ... on Ref {
            associatedPullRequests(states: [OPEN], first: 1) {
              nodes {
                id
                number
              }
            }
          }
        }
      }
    `,r[3]=u):u=r[3];const d=!c||o===s?.defaultBranch;let f;r[4]!==c?(f={refId:c},r[4]=c,r[5]=f):f=r[5];let p;r[6]!==d||r[7]!==f?(p={query:u,pause:d,variables:f},r[6]=d,r[7]=f,r[8]=p):p=r[8];const[g]=iy(p);return(t=g.data)!==null&&t!==void 0&&t.node&&g.data.node.__typename==="Ref"?(e=(n=g.data.node.associatedPullRequests)===null||n===void 0||(n=n.nodes)===null||n===void 0||(n=n[0])===null||n===void 0?void 0:n.number)!==null&&e!==void 0?e:!1:void 0}function Rq(){const t=q(84),e=La(),n=bn(),r=jr(),i=mj(),s=Be(et);let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=_=>!_,t[0]=o):o=t[0];const[l,a]=C.useReducer(o,!1);let c;t[1]===Symbol.for("react.memo_cache_sentinel")?(c=_=>!_,t[1]=c):c=t[1];const[u,d]=C.useReducer(c,!1);let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=Ht`
      mutation DeleteBranch($refId: ID!) {
        deleteRef(input: { refId: $refId }) {
          __typename
        }
      }
    `,t[2]=f):f=t[2];const[,p]=Zh(f);let g,m;t[3]!==r?(m=r?ru(r.upstream):"",t[3]=r,t[4]=m):m=t[4];const b=m,y=n===r?.defaultBranch;let x;if(t[5]!==s||t[6]!==b||t[7]!==y||t[8]!==i||t[9]!==n||t[10]!==r){x=[];let _;t[12]!==s?(_=s.format("newBranch"),t[12]=s,t[13]=_):_=t[13];let F;t[14]!==_?(F={key:"new-branch",icon:hT,label:_},t[14]=_,t[15]=F):F=t[15];let M,P,B;if(t[16]!==F||t[17]!==b||t[18]!==y||t[19]!==i||t[20]!==n||t[21]!==s||t[22]!==r){M=[F],P=[];let z;if(t[26]!==b?(z={key:"repo",icon:Th,href:b,target:"_blank",rel:"noopener noreferrer",label:"Github repo"},t[26]=b,t[27]=z):z=t[27],B=[z],!y&&i!==void 0)if(i===!1){const J=`${b}/pull/new/${n}`;let Z;t[28]!==s?(Z=s.format("createPullRequest"),t[28]=s,t[29]=Z):Z=t[29];let D;t[30]!==J||t[31]!==Z?(D={key:"create-pull-request",icon:Wf,href:J,target:"_blank",rel:"noopener noreferrer",label:Z},t[30]=J,t[31]=Z,t[32]=D):D=t[32],P.push(D);let ie;t[33]!==s?(ie=s.format("deleteBranch"),t[33]=s,t[34]=ie):ie=t[34];let oe;t[35]!==ie?(oe={key:"delete-branch",icon:un,label:ie},t[35]=ie,t[36]=oe):oe=t[36],M.push(oe)}else{const J=`${b}/pull/${i}`,Z=`Pull Request #${i}`;let D;t[37]!==J||t[38]!==Z?(D={key:"view-pull-request",icon:Wf,href:J,target:"_blank",rel:"noopener noreferrer",label:Z},t[37]=J,t[38]=Z,t[39]=D):D=t[39],P.push(D)}let U;t[40]!==r?(U=r?ru(r):"",t[40]=r,t[41]=U):U=t[41];const R=U;if(R!==b){let J;t[42]!==R?(J={key:"fork",icon:Rz,href:R,target:"_blank",rel:"noopener noreferrer",label:"View fork"},t[42]=R,t[43]=J):J=t[43],B.push(J)}t[16]=F,t[17]=b,t[18]=y,t[19]=i,t[20]=n,t[21]=s,t[22]=r,t[23]=M,t[24]=P,t[25]=B}else M=t[23],P=t[24],B=t[25];if(M.length){let z;t[44]!==s?(z=s.format("branches"),t[44]=s,t[45]=z):z=t[45];let U;t[46]!==z||t[47]!==M?(U={key:"branch-section",label:z,children:M},t[46]=z,t[47]=M,t[48]=U):U=t[48],x.push(U)}if(P.length){let z;t[49]!==s?(z=s.format("pullRequests"),t[49]=s,t[50]=z):z=t[50];let U;t[51]!==z||t[52]!==P?(U={key:"pr-section",label:z,children:P},t[51]=z,t[52]=P,t[53]=U):U=t[53],x.push(U)}if(B.length){let z;t[54]!==B?(z={key:"repo-section",label:"Repository",children:B},t[54]=B,t[55]=z):z=t[55],x.push(z)}t[5]=s,t[6]=b,t[7]=y,t[8]=i,t[9]=n,t[10]=r,t[11]=x}else x=t[11];g=x;const v=g,w=ft();let S;t[56]!==a||t[57]!==d?(S=_=>{e:switch(_){case"new-branch":{a();break e}case"delete-branch":d()}},t[56]=a,t[57]=d,t[58]=S):S=t[58];let k;t[59]===Symbol.for("react.memo_cache_sentinel")?(k=_=>h.jsx(ZO,{items:_.children,"aria-label":_.label,children:F=>h.jsxs(Je,{textValue:F.label,href:F.href,rel:F.rel,target:F.target,children:[h.jsx(X,{src:F.icon}),h.jsx(Y,{children:F.label})]},F.key)},_.key),t[59]=k):k=t[59];let E;t[60]!==v||t[61]!==S?(E=h.jsx(DR,{"aria-label":"git actions",align:"end",items:v,onAction:S,children:k}),t[60]=v,t[61]=S,t[62]=E):E=t[62];let T;t[63]!==l||t[64]!==a||t[65]!==w?(T=l&&h.jsx(dj,{onDismiss:a,onCreate:_=>{a(),w.push(w.href.replace(/\/branch\/[^/]+/,"/branch/"+encodeURIComponent(_)))}}),t[63]=l,t[64]=a,t[65]=w,t[66]=T):T=t[66];let N;t[67]!==a||t[68]!==T?(N=h.jsx(dt,{onDismiss:a,children:T}),t[67]=a,t[68]=T,t[69]=N):N=t[69];let I;t[70]!==u||t[71]!==r||t[72]!==p||t[73]!==e||t[74]!==n||t[75]!==w?(I=u&&h.jsxs(Am,{title:"Delete branch",tone:"critical",cancelLabel:"Cancel",primaryActionLabel:"Yes, delete",autoFocusButton:"cancel",onPrimaryAction:async()=>{r&&(await p({refId:e.get(n).id}),w.push(w.href.replace(/\/branch\/[^/]+/,"/branch/"+encodeURIComponent(r.defaultBranch))))},children:['Are you sure you want to delete the "',n,'" branch? This cannot be undone.']}),t[70]=u,t[71]=r,t[72]=p,t[73]=e,t[74]=n,t[75]=w,t[76]=I):I=t[76];let A;t[77]!==d||t[78]!==I?(A=h.jsx(dt,{onDismiss:d,children:I}),t[77]=d,t[78]=I,t[79]=A):A=t[79];let O;return t[80]!==E||t[81]!==N||t[82]!==A?(O=h.jsxs(h.Fragment,{children:[E,N,A]}),t[80]=E,t[81]=N,t[82]=A,t[83]=O):O=t[83],O}function Dq(){const t=q(8),e=Nt(),n=wA(),r=LB();if(r){if(r==="unauthorized")return r;let s;return t[0]!==r.user.avatarUrl||t[1]!==r.user.email||t[2]!==r.user.name?(s={avatarUrl:r.user.avatarUrl,login:r.user.email,name:r.user.name},t[0]=r.user.avatarUrl,t[1]=r.user.email,t[2]=r.user.name,t[3]=s):s=t[3],s}if(bi(e)&&n){var i;const s=(i=n.name)!==null&&i!==void 0?i:n.login;let o;return t[4]!==n.avatarUrl||t[5]!==n.login||t[6]!==s?(o={avatarUrl:n.avatarUrl,login:n.login,name:s},t[4]=n.avatarUrl,t[5]=n.login,t[6]=s,t[7]=o):o=t[7],o}}const yj=C.createContext(null);function u1(){const t=C.useContext(yj);if(!t)throw new Error("useSidebar must be within a SidebarProvider");return t}const Mq=NR(Ad);function Fq(t){const e=q(13),n=CR();let r;e[0]!==n?(r=n.includes("desktop"),e[0]=n,e[1]=r):r=e[1];let i;e[2]!==r?(i={defaultOpen:r},e[2]=r,e[3]=i):i=e[3];const s=xb(i),o=Mq.indexOf(n[0]),l=ER(o)||0;let a;e[4]!==l||e[5]!==o||e[6]!==s?(a=()=>{l<o&&o>=2?s.open():o<2&&s.close()},e[4]=l,e[5]=o,e[6]=s,e[7]=a):a=e[7];let c;e[8]!==n?(c=[n],e[8]=n,e[9]=c):c=e[9],BS(a,c);let u;return e[10]!==s||e[11]!==t.children?(u=h.jsx(yj.Provider,{value:s,children:t.children}),e[10]=s,e[11]=t.children,e[12]=u):u=e[12],u}function Pq(){const t=q(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=h.jsx(bj,{}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(vj,{}),t[1]=n):n=t[1];let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(kj,{}),t[2]=r):r=t[2];let i;return t[3]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsxs(fn,{backgroundColor:"surface",height:"100%",children:[e,n,r,h.jsx(xj,{})]}),t[3]=i):i=t[3],i}function bj(){const t=q(12),e=wj(),{brandMark:n,brandName:r}=vq();let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={mobile:"element.large",tablet:"element.xlarge"},t[0]=i):i=t[0];let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=W({color:j.color.foreground.neutralEmphasis,"& :first-child":{flexShrink:0}}),t[1]=s):s=t[1];let o;t[2]!==r?(o=h.jsx(Y,{color:"inherit",weight:"medium",truncate:!0,children:r}),t[2]=r,t[3]=o):o=t[3];let l;t[4]!==n||t[5]!==o?(l=h.jsxs(zr,{flex:!0,alignItems:"center",gap:"regular",UNSAFE_className:s,children:[n,o]}),t[4]=n,t[5]=o,t[6]=l):l=t[6];let a;t[7]!==e?(a=e&&h.jsx(gj,{}),t[7]=e,t[8]=a):a=t[8];let c;return t[9]!==l||t[10]!==a?(c=h.jsxs(zr,{alignItems:"center",gap:"regular",paddingY:"regular",paddingX:"medium",height:i,children:[l,a]}),t[9]=l,t[10]=a,t[11]=c):c=t[11],c}function xj(){const t=q(2);if(wj())return null;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(jq,{}),t[0]=n):n=t[0];let r;return t[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsxs(zr,{alignItems:"center",paddingY:"regular",paddingX:"medium",gap:"regular",children:[n,h.jsx(gj,{})]}),t[1]=r):r=t[1],r}function vj(){const t=q(2),e=Nt();if(Pa(e))return null;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(wq,{}),t[0]=n):n=t[0];let r;return t[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsxs(zr,{gap:"regular",paddingY:"regular",paddingX:"medium",children:[n,h.jsx(Rq,{})]}),t[1]=r):r=t[1],r}function $q(){const t=q(25),e=u1(),n=ft();let r;t[0]!==e?(r=()=>{e.close()},t[0]=e,t[1]=r):r=t[1];let i;t[2]!==n.href?(i=[n.href],t[2]=n.href,t[3]=i):i=t[3],BS(r,i);const s=C.useRef(null);let o;t[4]===Symbol.for("react.memo_cache_sentinel")?(o={isDismissable:!0},t[4]=o):o=t[4];const{modalProps:l,underlayProps:a}=YO(o,e,s);let c;t[5]!==a||t[6]!==e.isOpen?(c=h.jsx(jR,{...a,isOpen:e.isOpen,zIndex:10}),t[5]=a,t[6]=e.isOpen,t[7]=c):c=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=vr("transform",{easing:"easeIn",duration:"short"}),t[8]=u):u=t[8];let d;t[9]===Symbol.for("react.memo_cache_sentinel")?(d=[u,vr("visibility",{delay:"regular",duration:0,easing:"linear"})],t[9]=d):d=t[9];let f;t[10]===Symbol.for("react.memo_cache_sentinel")?(f=W({backgroundColor:j.color.background.surface,boxShadow:`${j.size.shadow.large} ${j.color.shadow.regular}`,display:"flex",flexDirection:"column",inset:0,insetInlineEnd:"auto",maxWidth:`calc(100% - ${j.size.element.medium})`,minWidth:j.size.scale[3e3],outline:0,pointerEvents:"none",position:"fixed",transform:"translateX(-100%)",visibility:"hidden",zIndex:10,transition:d.join(", "),"&[data-visible=true]":{transform:"translateX(0)",transition:vr("transform",{easing:"easeOut"}),pointerEvents:"auto",visibility:"visible"}}),t[10]=f):f=t[10];let p;t[11]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(bj,{}),t[11]=p):p=t[11];let g;t[12]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(vj,{}),t[12]=g):g=t[12];let m;t[13]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsx(kj,{}),t[13]=m):m=t[13];let b;t[14]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(xj,{}),t[14]=b):b=t[14];let y;t[15]!==e.close?(y=h.jsx(JO,{onDismiss:e.close}),t[15]=e.close,t[16]=y):y=t[16];let x;t[17]!==e.isOpen||t[18]!==s||t[19]!==l||t[20]!==y?(x=h.jsxs("div",{"data-visible":e.isOpen,id:mq,ref:s,...l,className:f,children:[p,g,m,b,y]}),t[17]=e.isOpen,t[18]=s,t[19]=l,t[20]=y,t[21]=x):x=t[21];let v;return t[22]!==c||t[23]!==x?(v=h.jsxs(h.Fragment,{children:[c,x]}),t[22]=c,t[23]=x,t[24]=v):v=t[24],v}function kj(){const t=q(15),{basePath:e}=GA(),n=Be(et),r=uj(),i=Sj();let s;t[0]!==i||t[1]!==e?(s=i(e,{exact:!0}),t[0]=i,t[1]=e,t[2]=s):s=t[2];let o;t[3]!==n?(o=n.format("dashboard"),t[3]=n,t[4]=o):o=t[4];let l;t[5]!==e||t[6]!==s||t[7]!==o?(l=h.jsx(fT,{href:e,"aria-current":s,children:o}),t[5]=e,t[6]=s,t[7]=o,t[8]=l):l=t[8];let a;if(t[9]!==r){let u;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=(d,f)=>h.jsx(Cj,{itemOrGroup:d},f),t[11]=u):u=t[11],a=r.map(u),t[9]=r,t[10]=a}else a=t[10];let c;return t[12]!==l||t[13]!==a?(c=h.jsx(OR,{flex:!0,paddingY:"large",paddingEnd:"medium",children:h.jsxs(Cz,{children:[l,a]})}),t[12]=l,t[13]=a,t[14]=c):c=t[14],c}function wj(){const t=q(2),e=Nt();let n;return t[0]!==e?(n=Pa(e)&&!e.cloud,t[0]=e,t[1]=n):n=t[1],n}function Sj(){const t=q(2),e=ft();let n;return t[0]!==e.pathname?(n=(r,i)=>{const{exact:s}=i===void 0?{}:i;return(s===void 0?!1:s)?r===e.pathname?"page":void 0:r===e.pathname||e.pathname.startsWith(`${r}/`)?"page":void 0},t[0]=e.pathname,t[1]=n):n=t[1],n}function Cj(t){const e=q(19),{itemOrGroup:n}=t,r=Sj();if(n.isDivider){let c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Ds,{}),e[0]=c):c=e[0],c}if(n.children){let c;if(e[1]!==n.children){let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=(f,p)=>h.jsx(Cj,{itemOrGroup:f},p),e[3]=d):d=e[3],c=n.children.map(d),e[1]=n.children,e[2]=c}else c=e[2];let u;return e[4]!==n.title||e[5]!==c?(u=h.jsx(Tz,{title:n.title,children:c}),e[4]=n.title,e[5]=c,e[6]=u):u=e[6],u}let i;e:{if(!n.changed){i=null;break e}let c;e[7]!==n.changed?(c=typeof n.changed=="number"?h.jsxs(cu,{tone:"accent",marginStart:"auto",children:[h.jsx(Y,{children:n.changed}),h.jsx(Y,{visuallyHidden:!0,children:ll(n.changed,{singular:"change",plural:"changes",inclusive:!1})})]}):h.jsx(_z,{tone:"accent",marginStart:"auto","aria-label":"Changed",role:"status"}),e[7]=n.changed,e[8]=c):c=e[8],i=c}const s=i;let o;e[9]!==r||e[10]!==n.href?(o=r(n.href),e[9]=r,e[10]=n.href,e[11]=o):o=e[11];let l;e[12]!==n.label?(l=h.jsx(Y,{truncate:!0,title:n.label,children:n.label}),e[12]=n.label,e[13]=l):l=e[13];let a;return e[14]!==n.href||e[15]!==o||e[16]!==l||e[17]!==s?(a=h.jsxs(fT,{href:n.href,"aria-current":o,children:[l,s]}),e[14]=n.href,e[15]=o,e[16]=l,e[17]=s,e[18]=a):a=e[18],a}const Ej=C.createContext({containerWidth:"medium"}),Yi=t=>{const e=q(7),{children:n,containerWidth:r}=t,i=r===void 0?"medium":r;let s;e[0]!==i?(s={containerWidth:i},e[0]=i,e[1]=s):s=e[1];let o;e[2]!==n?(o=h.jsx(te,{elementType:"main",direction:"column",id:yq,flex:!0,height:"100%",minHeight:0,minWidth:0,children:n}),e[2]=n,e[3]=o):o=e[3];let l;return e[4]!==s||e[5]!==o?(l=h.jsx(Ej.Provider,{value:s,children:o}),e[4]=s,e[5]=o,e[6]=l):l=e[6],l},za=t=>{const e=q(17),{children:n}=t,r=u1(),i=C.useRef(null),{direction:s}=ro();let o=r.isOpen?vR:kR;s==="rtl"&&(o=r.isOpen?wR:SR);let l,a,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={mobile:"small",tablet:"regular"},a={mobile:"element.large",tablet:"element.xlarge"},c={mobile:"medium",tablet:"xlarge",desktop:"xxlarge"},e[0]=l,e[1]=a,e[2]=c):(l=e[0],a=e[1],c=e[2]);let u;e[3]!==r.isOpen?(u=r.isOpen?{above:"tablet"}:void 0,e[3]=r.isOpen,e[4]=u):u=e[4];let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=W({marginInlineStart:`calc(${j.size.space.regular} * -1)`}),e[5]=d):d=e[5];let f;e[6]!==o?(f=h.jsx(X,{src:o}),e[6]=o,e[7]=f):f=e[7];let p;e[8]!==r.isOpen||e[9]!==r.toggle||e[10]!==u||e[11]!==i||e[12]!==f?(p=h.jsx(ae,{prominence:"low","aria-label":"Open app navigation","aria-pressed":r.isOpen,isHidden:u,onPress:r.toggle,ref:i,UNSAFE_className:d,children:f}),e[8]=r.isOpen,e[9]=r.toggle,e[10]=u,e[11]=i,e[12]=f,e[13]=p):p=e[13];let g;return e[14]!==p||e[15]!==n?(g=h.jsx(zt,{borderBottom:"muted",elementType:"header",flexShrink:0,children:h.jsxs(te,{alignItems:"center",gap:l,height:a,paddingX:c,children:[p,n]})}),e[14]=p,e[15]=n,e[16]=g):g=e[16],g},ui=t=>{const e=q(5),{children:n,isScrollable:r}=t,i=!r;let s;e[0]!==n?(s=h.jsx(Ij,{paddingY:"xxlarge",children:n}),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==i||e[3]!==s?(o=h.jsx(Kd,{isDisabled:i,children:s}),e[2]=i,e[3]=s,e[4]=o):o=e[4],o},Ij=t=>{const e=q(4),{containerWidth:n}=C.useContext(Ej),r=n==="none"?void 0:`container.${n}`;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={mobile:"medium",tablet:"xlarge",desktop:"xxlarge"},e[0]=i):i=e[0];let s;return e[1]!==r||e[2]!==t?(s=h.jsx(zt,{minHeight:0,minWidth:0,maxWidth:r,paddingX:i,...t}),e[1]=r,e[2]=t,e[3]=s):s=e[3],s},oh=12,Aj=C.createContext(oh),Lq=()=>C.useContext(Aj),Bq=Aj.Provider;function Tj(t,e,n){var r,i;if(((r=t.validation)===null||r===void 0||(r=r.length)===null||r===void 0?void 0:r.min)!==void 0&&e.length<t.validation.length.min)return new _s(new Ce(`Must have at least ${t.validation.length.min} element${t.validation.length.min===1?"":"s"}`),n,t);if(((i=t.validation)===null||i===void 0||(i=i.length)===null||i===void 0?void 0:i.max)!==void 0&&e.length>t.validation.length.max)return new _s(new Ce(`Must have at most ${t.validation.length.max} element${t.validation.length.max===1?"":"s"}}`),n,t)}const Gd=new WeakMap;let zq=0;function an(t){return Gd.has(t)||Gd.set(t,Array.from({length:t.length},al)),Gd.get(t)}function vl(t,e){Gd.set(t,e)}function al(){return(zq++).toString()}const lt=Vq;function Vq(t){switch(t.kind){case"form":return t.defaultValue();case"child":return t.options.kind==="block"?[{type:"paragraph",children:[{text:""}]}]:null;case"conditional":{const e=t.discriminant.defaultValue();return{discriminant:e,value:lt(t.values[e.toString()])}}case"object":{const e={};for(const n of Object.keys(t.fields))e[n]=lt(t.fields[n]);return e}case"array":return[]}rn(t)}function di(t,e){switch(t.kind){case"form":return e===void 0?t.defaultValue():e;case"child":return e??(t.options.kind==="block"?[{type:"paragraph",children:[{text:""}]}]:null);case"conditional":{const n=e===void 0?t.discriminant.defaultValue():e.discriminant;if(n===void 0)debugger;return{discriminant:n,value:di(t.values[n.toString()],e===void 0?void 0:e.value)}}case"object":{const n={};for(const r of Object.keys(t.fields))n[r]=di(t.fields[r],e===void 0?void 0:e[r]);return n}case"array":return(e??[]).map(n=>di(t.element,n.value))}rn(t)}function Fr(t,e,n){if(n===void 0)return e;switch(t.kind){case"form":return n;case"child":return n;case"conditional":return{discriminant:n.discriminant,value:n.discriminant===e.discriminant?Fr(t.values[n.discriminant.toString()],e.value,n.value):di(t.values[n.discriminant.toString()],n.value)};case"object":{const r={};for(const i of Object.keys(t.fields))r[i]=Fr(t.fields[i],e[i],n[i]);return r}case"array":{const r=e,i=n,s=new Set;for(const u of i)if(u.key!==void 0){if(s.has(u.key))throw new Error("Array elements must have unique keys");s.add(u.key)}const o=i.map(u=>{if(u.key!==void 0)return u.key;let d=al();for(;s.has(d);)d=al();return s.add(d),d}),l=an(r),a=new Map(r.map((u,d)=>[l[d],u])),c=i.map((u,d)=>{const f=o[d];return a.has(f)?Fr(t.element,a.get(f),u.value):di(t.element,u.value)});return vl(c,o),c}}rn(t)}class _s extends Error{constructor(e,n,r){super(`field error at ${n.join(".")}`,{cause:e}),this.path=n,this.schema=r,this.cause=e}}function uw(t){if(t!==null)return t}const Sd=Array.isArray;function To(t,e,n,r,i,s){let o=uw(e);if(t.kind==="form")try{return i(t,o,n,r)}catch(l){throw new _s(l,n,t)}if(t.kind==="child")return null;if(t.kind==="conditional"){if(o===void 0)return lt(t);try{if(typeof o!="object"||o===null||Sd(o)||o instanceof Date)throw new Ce("Must be an object");for(const a of Object.keys(o))if(a!=="discriminant"&&a!=="value")throw new Ce(`Must only contain keys "discriminant" and "value", not "${a}"`)}catch(a){throw new _s(a,n,t)}const l=To(t.discriminant,o.discriminant,n.concat("discriminant"),r.concat("discriminant"),i,s);return{discriminant:l,value:To(t.values[l],o.value,n.concat("value"),r.concat("value"),i,s)}}if(t.kind==="object"){o===void 0&&(o={});try{if(typeof o!="object"||o===null||Sd(o)||o instanceof Date)throw new Ce("Must be an object");const c=new Set(Object.keys(t.fields));for(const u of Object.keys(o))if(!c.has(u))throw new Ce(`Key on object value "${u}" is not allowed`)}catch(c){throw new _s(c,n,t)}const l={},a=[];for(const c of Object.keys(t.fields)){let u=o[c];try{const d=To(t.fields[c],u,n.concat(c),r.concat(c),i,s);l[c]=d}catch(d){a.push(d)}}if(a.length)throw new AggregateError(a);return l}if(t.kind==="array"){if(o===void 0)return[];try{if(!Sd(o))throw new Ce("Must be an array")}catch(a){throw new _s(a,n,t)}const l=[];try{if(s){const a=Tj(t,o,n);a!==void 0&&l.push(a)}return o.map((a,c)=>{try{let u=c.toString();if(t.slugField&&typeof a=="object"&&a!==null&&!Sd(a)&&!(a instanceof Date)){if(t.element.kind!=="object")throw new Error("slugField on array fields requires the an object field element");const d=t.element.fields[t.slugField];if(!d)throw new Error(`slugField "${t.slugField}" does not exist on object field`);if(d.kind!=="form")throw new Error(`slugField "${t.slugField}" is not a form field`);if(d.formKind!=="slug")throw new Error(`slugField "${t.slugField}" is not a slug field`);let f;try{f=d.parse(uw(a[t.slugField]),void 0)}catch(p){throw new AggregateError([p])}u=d.serializeWithSlug(f).slug}return To(t.element,a,n.concat(c),r.concat(u),i,s)}catch(u){l.push(u)}})}finally{if(l.length)throw new AggregateError(l)}}rn(t)}function Nj(t){return t instanceof AggregateError?t.errors.flatMap(Nj):[t]}function jj(t){return Nj(t).map(n=>n instanceof _s?`${n.path.join(".")}: ${n.cause instanceof Ce?n.cause.message:`Unexpected error: ${n.cause}`}`:`Unexpected error: ${n}`).join(`
`)}function _j(t){const e=jj(t);return new Error(`Field validation failed:
`+e)}function Jr(t,e,n){try{return Yd(t,e,n),!0}catch(r){return console.warn(_j(r)),!1}}function Yd(t,e,n,r=[]){switch(t.kind){case"child":return;case"form":{try{if(n&&r[r.length-1]===n?.field){t.validate(e,{slugField:{slugs:n.slugs,glob:n.glob}});return}t.validate(e,void 0)}catch(i){throw new _s(i,r,t)}return}case"conditional":{t.discriminant.validate(e.discriminant),Yd(t.values[e.discriminant],e.value,void 0,r.concat("value"));return}case"object":{const i=[];for(const[s,o]of Object.entries(t.fields))try{Yd(o,e[s],s===n?.field?n:void 0,r.concat(s))}catch(l){i.push(l)}if(i.length>0)throw new AggregateError(i);return}case"array":{let i;if(t.slugField!==void 0&&t.element.kind==="object"){const a=t.element.fields,{slugField:c}=t;i={slugField:c,slugs:e.map(u=>_t({schema:a,slugField:c},u))}}const s=[],o=e,l=Tj(t,e,r);l!==void 0&&s.push(l);for(const[a,c]of o.entries())try{Yd(t.element,c,i===void 0?void 0:{field:i.slugField,slugs:new Set(i.slugs.filter((u,d)=>a!==d)),glob:"*"},r.concat(a))}catch(u){s.push(u)}if(s.length>0)throw new AggregateError(s);return}}}const Uq=$c.below.tablet;function qq(t){const e=q(16),{field:n,fieldKey:r,span:i,forceValidation:s,firstFocusable:o,omitFieldAtPath:l}=t,a=`span ${i}`;let c;e[0]!==a?(c=W({gridColumn:a,[Uq]:{gridColumn:`span ${oh}`}}),e[0]=a,e[1]=c):c=e[1];const u=r===o;let d;e[2]!==s||e[3]!==u||e[4]!==l||e[5]!==n?(d=h.jsx(ch,{forceValidation:s,autoFocus:u,omitFieldAtPath:l,...n}),e[2]=s,e[3]=u,e[4]=l,e[5]=n,e[6]=d):d=e[6];let f;e[7]!==r||e[8]!==d?(f=h.jsx(Hf,{part:r,children:d}),e[7]=r,e[8]=d,e[9]=f):f=e[9];let p;e[10]!==c||e[11]!==f?(p=h.jsx("div",{className:c,children:f}),e[10]=c,e[11]=f,e[12]=p):p=e[12];let g;return e[13]!==i||e[14]!==p?(g=h.jsx(Bq,{value:i,children:p}),e[13]=i,e[14]=p,e[15]=g):g=e[15],g}function Hq(t){const e=q(33),{schema:n,autoFocus:r,fields:i,forceValidation:s,omitFieldAtPath:o}=t;Wq(n);let l;e[0]!==r||e[1]!==n?(l=r?Kq(n):void 0,e[0]=r,e[1]=n,e[2]=l):l=e[2];const a=l;let c;e:{if(!o){c=void 0;break e}let k;e[3]!==o?(k=o.slice(1),e[3]=o,e[4]=k):k=e[4],c=k}const u=c;let d;if(e[5]!==i||e[6]!==n.layout||e[7]!==s||e[8]!==a||e[9]!==o||e[10]!==u){let k;e[12]!==n.layout||e[13]!==s||e[14]!==a||e[15]!==o||e[16]!==u?(k=(E,T)=>{var N,I;const[A,O]=E,_=(N=(I=n.layout)===null||I===void 0?void 0:I[T])!==null&&N!==void 0?N:oh;return h.jsx(qq,{span:_,field:O,fieldKey:A,forceValidation:s,firstFocusable:a,...o?.[0]===A?{omitFieldAtPath:u}:{}},A)},e[12]=n.layout,e[13]=s,e[14]=a,e[15]=o,e[16]=u,e[17]=k):k=e[17],d=Object.entries(i).map(k),e[5]=i,e[6]=n.layout,e[7]=s,e[8]=a,e[9]=o,e[10]=u,e[11]=d}else d=e[11];let f;e[18]!==d?(f=h.jsx(ff,{columns:`repeat(${oh}, minmax(auto, 1fr))`,columnGap:"medium",rowGap:"xlarge",children:d}),e[18]=d,e[19]=f):f=e[19];const p=f,g=C.useId();if(!n.label)return p;const m=`${g}-label`,b=`${g}-description`,y=n.description?b:void 0;let x;e[20]!==m||e[21]!==n.label?(x=h.jsx(Y,{color:"neutralEmphasis",size:"medium",weight:"semibold",id:m,children:n.label}),e[20]=m,e[21]=n.label,e[22]=x):x=e[22];let v;e[23]!==n.description||e[24]!==b?(v=!!n.description&&h.jsx(Y,{id:b,size:"regular",color:"neutralSecondary",children:n.description}),e[23]=n.description,e[24]=b,e[25]=v):v=e[25];let w;e[26]===Symbol.for("react.memo_cache_sentinel")?(w=h.jsx("div",{}),e[26]=w):w=e[26];let S;return e[27]!==m||e[28]!==y||e[29]!==x||e[30]!==v||e[31]!==p?(S=h.jsxs(ff,{role:"group",gap:"medium",marginY:"xlarge","aria-labelledby":m,"aria-describedby":y,children:[x,v,w,p]}),e[27]=m,e[28]=y,e[29]=x,e[30]=v,e[31]=p,e[32]=S):S=e[32],S}function Wq(t){t.layout&&(Ue(t.layout.length===Object.keys(t.fields).length,'A column "span" is required for every field in the layout'),Ue(t.layout.every(e=>e>0),"The layout must not contain empty columns"),Ue(t.layout.every(e=>e<=12),"Fields may not span more than 12 columns"),Ue(t.layout.reduce((e,n)=>e+n,0)%12===0,"The layout must span exactly 12 columns"))}function Kq(t){for(const[e,n]of Object.entries(t.fields))if(Oj(n))return e}function Oj(t){if(t.kind==="array"||t.kind==="conditional"||t.kind==="form")return!0;if(t.kind==="child")return!1;if(t.kind==="object"){for(const e of Object.values(t.fields))if(Oj(e))return!0;return!1}rn(t)}function Gq(t){const e=q(18),{schema:n,autoFocus:r,discriminant:i,onChange:s,value:o,forceValidation:l,omitFieldAtPath:a}=t,c=n.discriminant;let u;e:{if(!a){u=void 0;break e}let x;e[0]!==a?(x=a.slice(1),e[0]=a,e[1]=x):x=e[1],u=x}const d=u;let f;const p=!!r;let g;e[2]!==c.Input||e[3]!==p||e[4]!==i||e[5]!==s||e[6]!==l?(g=h.jsx(Hf,{part:"discriminant",children:h.jsx(c.Input,{autoFocus:p,value:i,onChange:s,forceValidation:l})}),e[2]=c.Input,e[3]=p,e[4]=i,e[5]=s,e[6]=l,e[7]=g):g=e[7],f=g;let m;e[8]!==a||e[9]!==d?(m=a?.[0]==="value"?{omitFieldAtPath:d}:{},e[8]=a,e[9]=d,e[10]=m):m=e[10];let b;e[11]!==l||e[12]!==o||e[13]!==m?(b=h.jsx(Hf,{part:"value",children:h.jsx(ch,{forceValidation:l,...o,...m})}),e[11]=l,e[12]=o,e[13]=m,e[14]=b):b=e[14];let y;return e[15]!==f||e[16]!==b?(y=h.jsxs(te,{gap:"xlarge",direction:"column",children:[f,b]}),e[15]=f,e[16]=b,e[17]=y):y=e[17],y}function Yq(t,e,n){return t.has(e)||t.set(e,n(e)),t.get(e)}const Rj=new WeakMap;function Jq(t){let e={};return Rj.set(e,t),e}function d1(t){const e=Rj.get(t._);if(!e)throw new Error("expected child field data to exist");return e}function Ni(t,e,n){const r={form(c,u){return d=>u(()=>d)},array(c,u){return{rawOnChange:u,inner:new Map,onChange(d){u(f=>Fr(c,f,d))}}},child(c,u){return d=>u(()=>d)},conditional(c,u){return{onChange:(d,f)=>u(p=>Fr(c,p,{discriminant:d,value:f})),onChangeForValue:d=>u(f=>({discriminant:f.discriminant,value:d(f.value)}))}},object(c,u){return{onChange:d=>{u(f=>Fr(c,f,d))},innerOnChanges:Object.fromEntries(Object.keys(c.fields).map(d=>[d,f=>{u(p=>({...p,[d]:f(p[d])}))}]))}}},i={form(c,u,d){return{value:u,onChange:d,schema:c}},child(c,u,d,f){return{element:n(f),schema:c,_:Jq({value:u,onChange:d})}},object(c,u,d,f,p){const g={};for(const b of Object.keys(c.fields))g[b]=p(c.fields[b],u[b],d.innerOnChanges[b],b);return{fields:g,onChange:d.onChange,schema:c}},array(c,u,d,f,p){const g=u,m=an(g),b=new Set(an(u)),y={elements:g.map((x,v)=>{const w=m[v];b.delete(w);const S=Yq(d.inner,w,()=>{const E=N=>{d.rawOnChange(I=>{const A=an(I),O=A.indexOf(w),_=[...I];return _[O]=N(_[O]),vl(_,A),_})},T=p(c.element,x,E,w);return{element:T,elementWithKey:{...T,key:w},onChange:E}}),k=p(c.element,x,S.onChange,w);return S.element!==k&&(S.element=k,S.elementWithKey={...k,key:w}),S.elementWithKey}),schema:c,onChange:d.onChange};for(const x of b)d.inner.delete(x);return y},conditional(c,u,d,f,p){return{discriminant:u.discriminant,onChange:d.onChange,value:p(c.values[u.discriminant.toString()],u.value,d.onChangeForValue,"value"),schema:c}}};function s(c,u,d,f,p){return i[c.kind](c,u,d,f,p)}function o(c,u,d,f){const p=new Map,g=r[c.kind](c,d);return{value:u,inner:p,props:s(c,u,g,f,(b,y,x,v)=>{const w=o(b,y,x,f.concat(v));return p.set(v,w),w.props}),schema:c,cached:g}}function l(c,u,d,f,p){if(f.schema!==c)return Object.assign(f,o(c,u,d,p)),f.props;if(f.value===u)return f.props;f.value=u;const g=new Set(f.inner.keys());f.props=s(c,u,f.cached,p,(m,b,y,x)=>{if(g.delete(x),!f.inner.has(x)){const v=o(m,b,y,p.concat(x));return f.inner.set(x,v),v.props}return l(m,b,y,f.inner.get(x),p.concat(x))});for(const m of g)f.inner.delete(m);return f.props}let a;return c=>a===void 0?(a=o(t,c,e,[]),a.props):l(t,c,e,a,[])}const Zq={child(t){return d1(t).value},form(t){return t.value},array(t){const e=t.elements.map(n=>oa(n));return vl(e,t.elements.map(n=>n.key)),e},conditional(t){return{discriminant:t.discriminant,value:oa(t.value)}},object(t){return Object.fromEntries(Object.entries(t.fields).map(([e,n])=>[e,oa(n)]))}};function oa(t){return Zq[t.schema.kind](t)}const Xq={child(t){return t??void 0},form(t){return t},array(t,e){const n=an(t);return t.map((r,i)=>({key:n[i],value:zs(r,e.element)}))},conditional(t,e){return{discriminant:t.discriminant,value:zs(t.value,e.values[t.discriminant.toString()])}},object(t,e){return Object.fromEntries(Object.entries(e.fields).map(([n,r])=>[n,zs(t[n],r)]))}};function zs(t,e){return Xq[e.kind](t,e)}function cl(t,e){if(tc(e,"child")){const{onChange:n}=d1(e);n(t);return}if(tc(e,"form")||tc(e,"object")||tc(e,"array")){e.onChange(zs(t,e.schema));return}if(tc(e,"conditional")){const n=zs(t,e.schema);e.onChange(n.discriminant,n.value);return}rn(e)}function tc(t,e){return t.schema.kind===e}function Qq(t){var e,n;const r=q(51),i=(e=(n=t.schema.validation)===null||n===void 0||(n=n.length)===null||n===void 0?void 0:n.min)!==null&&e!==void 0?e:0,s=C.useId(),o=Be(et),l=Dj(t),a=!!l;let c;r[0]!==t.schema.description||r[1]!==t.schema.label||r[2]!==l||r[3]!==a?(c={description:t.schema.description,errorMessage:l,isInvalid:a,label:t.schema.label,labelElementType:"span"},r[0]=t.schema.description,r[1]=t.schema.label,r[2]=l,r[3]=a,r[4]=c):c=r[4];const{descriptionProps:u,errorMessageProps:d,fieldProps:f,labelProps:p}=PS(c);let g;r[5]===Symbol.for("react.memo_cache_sentinel")?(g={state:"closed"},r[5]=g):g=r[5];const[m,b]=C.useState(g),y=i>0;let x;r[6]!==y||r[7]!==p||r[8]!==t.schema.label?(x=h.jsx(Cu,{elementType:"span",isRequired:y,supplementRequiredState:!0,...p,children:t.schema.label}),r[6]=y,r[7]=p,r[8]=t.schema.label,r[9]=x):x=r[9];let v;r[10]!==t.schema.description||r[11]!==u?(v=t.schema.description&&h.jsx(Ah,{...u,children:t.schema.description}),r[10]=t.schema.description,r[11]=u,r[12]=v):v=r[12];let w;r[13]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{b({state:"new"})},r[13]=w):w=r[13];let S;r[14]!==o?(S=o.format("add"),r[14]=o,r[15]=S):S=r[15];let k;r[16]!==t.autoFocus||r[17]!==S?(k=h.jsx(ae,{autoFocus:t.autoFocus,onPress:w,alignSelf:"start",children:S}),r[16]=t.autoFocus,r[17]=S,r[18]=k):k=r[18];let E;r[19]===Symbol.for("react.memo_cache_sentinel")?(E=F=>{b({state:"edit",index:F})},r[19]=E):E=r[19];let T;r[20]!==t?(T=h.jsx(Mj,{...t,"aria-label":t.schema.label,onOpenItem:E}),r[20]=t,r[21]=T):T=r[21];let N;r[22]!==l||r[23]!==d?(N=l&&h.jsx(Eu,{...d,children:l}),r[22]=l,r[23]=d,r[24]=N):N=r[24];let I;r[25]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{b({state:"closed"})},r[25]=I):I=r[25];let A;e:{if(t.schema.element.kind==="child"){A=void 0;break e}if(m.state==="new"){let U;r[26]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{b({state:"closed"})},r[26]=U):U=r[26];let R;r[27]!==s||r[28]!==t?(R=h.jsx(eH,{formId:s,onClose:U,previewProps:t}),r[27]=s,r[28]=t,r[29]=R):R=r[29],A=R;break e}if(m.state!=="edit"){A=void 0;break e}let F;r[30]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(nt,{children:"Edit item"}),r[30]=F):F=r[30];let M;r[31]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{b({state:"closed"})},r[31]=M):M=r[31];let P;r[32]!==s||r[33]!==m.index||r[34]!==t?(P=h.jsx(tH,{formId:s,modalStateIndex:m.index,onClose:M,previewProps:t}),r[32]=s,r[33]=m.index,r[34]=t,r[35]=P):P=r[35];let B;r[36]!==s?(B=h.jsx(mn,{children:h.jsx(Re,{form:s,prominence:"high",type:"submit",children:"Done"})}),r[36]=s,r[37]=B):B=r[37];let z;r[38]!==P||r[39]!==B?(z=h.jsxs(nn,{children:[F,P,B]}),r[38]=P,r[39]=B,r[40]=z):z=r[40],A=z}let O;r[41]!==A?(O=h.jsx(dt,{onDismiss:I,children:A}),r[41]=A,r[42]=O):O=r[42];let _;return r[43]!==f||r[44]!==x||r[45]!==v||r[46]!==k||r[47]!==T||r[48]!==N||r[49]!==O?(_=h.jsxs(fn,{gap:"medium",role:"group",minWidth:0,...f,children:[x,v,k,T,N,O]}),r[43]=f,r[44]=x,r[45]=v,r[46]=k,r[47]=T,r[48]=N,r[49]=O,r[50]=_):_=r[50],_}function eH(t){const[e,n]=C.useState(!1),r=Be(et),i=C.useMemo(()=>{if(t.previewProps.schema.slugField===void 0||t.previewProps.schema.element.kind!=="object")return;const a=oa(t.previewProps),c=t.previewProps.schema.element.fields,u=t.previewProps.schema.slugField;return{slugs:new Set(a.map(f=>_t({schema:c,slugField:u},f))),field:u,glob:"*"}},[t.previewProps]),[s,o]=C.useState(()=>lt(t.previewProps.schema.element)),l=C.useMemo(()=>Ni(t.previewProps.schema.element,o,()=>{}),[t.previewProps.schema.element,o])(s);return h.jsxs(nn,{children:[h.jsx(nt,{children:"Add item"}),h.jsx(gn,{children:h.jsx(fn,{id:t.formId,elementType:"form",onSubmit:a=>{if(a.target===a.currentTarget){if(a.preventDefault(),!Jr(t.previewProps.schema.element,s,void 0)){n(!0);return}t.previewProps.onChange([...t.previewProps.elements.map(c=>({key:c.key})),{key:void 0,value:zs(s,t.previewProps.schema.element)}]),t.onClose()}},gap:"xxlarge",children:h.jsx(ji,{slugField:i,autoFocus:!0,...l,forceValidation:e})})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:()=>{t.onClose()},children:r.format("cancel")}),h.jsx(Re,{form:t.formId,prominence:"high",type:"submit",children:r.format("add")})]})]})}function tH(t){const e=q(23);let n;e:{if(t.previewProps.schema.slugField===void 0||t.previewProps.schema.element.kind!=="object"){n=void 0;break e}const a=t.previewProps;let c,u;if(e[0]!==a||e[1]!==t.previewProps.schema.element.fields||e[2]!==t.previewProps.schema.slugField||e[3]!==t.modalStateIndex){const p=oa(a),g=t.previewProps.schema.element.fields;u=t.previewProps.schema.slugField;let m;e[6]!==t.modalStateIndex?(m=(y,x)=>x!==t.modalStateIndex,e[6]=t.modalStateIndex,e[7]=m):m=e[7];let b;e[8]!==g||e[9]!==u?(b=y=>_t({schema:g,slugField:u},y),e[8]=g,e[9]=u,e[10]=b):b=e[10],c=new Set(p.filter(m).map(b)),e[0]=a,e[1]=t.previewProps.schema.element.fields,e[2]=t.previewProps.schema.slugField,e[3]=t.modalStateIndex,e[4]=c,e[5]=u}else c=e[4],u=e[5];const d=c;let f;e[11]!==d||e[12]!==u?(f={slugs:d,field:u,glob:"*"},e[11]=d,e[12]=u,e[13]=f):f=e[13],n=f}const r=n;let i;e[14]!==t?(i=a=>{a.target===a.currentTarget&&(a.preventDefault(),t.onClose())},e[14]=t,e[15]=i):i=e[15];const s=t.previewProps.elements[t.modalStateIndex];let o;e[16]!==r||e[17]!==s?(o=h.jsx(ji,{slugField:r,autoFocus:!0,...s}),e[16]=r,e[17]=s,e[18]=o):o=e[18];let l;return e[19]!==t.formId||e[20]!==i||e[21]!==o?(l=h.jsx(gn,{children:h.jsx(fn,{id:t.formId,elementType:"form",onSubmit:i,gap:"xxlarge",children:o})}),e[19]=t.formId,e[20]=i,e[21]=o,e[22]=l):l=e[22],l}function Dj(t){var e,n;const{elements:r,forceValidation:i,schema:s}=t,o=(e=s.validation)===null||e===void 0||(e=e.length)===null||e===void 0?void 0:e.min,l=(n=s.validation)===null||n===void 0||(n=n.length)===null||n===void 0?void 0:n.max;let a;e:{if(i){if(o&&r.length<o){a=`Must have at least ${ll(o,{singular:"item"})}.`;break e}else if(l&&r.length>l){a=`Must have at most ${ll(l,{singular:"item"})}.`;break e}}a=void 0}return a}function Mj(t){let e=(o,l)=>{const a=t.elements.findIndex(f=>f.key===l.key);if(a===-1)return;const c=t.elements.map(f=>({key:f.key})),u=l.dropPosition==="before"?a:a+1,d=o.map(f=>c.findIndex(p=>p.key===f));t.onChange(ZS(c,d,u))};const n=C.useMemo(()=>Math.random().toString(36),[]);let{dragAndDropHooks:r}=GS({getItems(o){return[...o].map(l=>(l=JSON.stringify(l),{[n]:l,"text/plain":l}))},getAllowedDropOperations(){return["move","cancel"]},async onDrop(o){if(o.target.type!=="root"&&o.target.dropPosition!=="on"){let l=[];for(let a of o.items)if(a.kind==="text"){let c;a.types.has(n)?(c=JSON.parse(await a.getText(n)),l.push(c)):a.types.has("text/plain")&&(c=await a.getText("text/plain"),l=c.split(`
`).map(u=>u.replaceAll('"',"")))}e(l,o.target)}},getDropOperation(o){return o.type==="root"||o.dropPosition==="on"?"cancel":"move"}});const i=Ln(o=>{t.onChange(t.elements.map(l=>({key:l.key})).filter(l=>l.key!==o))}),s=Be(et);return h.jsx(YS,{"aria-label":t["aria-label"],items:t.elements,dragAndDropHooks:r,height:t.elements.length?void 0:"scale.2000",selectionMode:"none",renderEmptyState:nH,onAction:o=>{const l=t.elements.findIndex(a=>a.key===o);l!==-1&&t.onOpenItem(l)},children:o=>{var l,a;const c=((l=(a=t.schema).itemLabel)===null||l===void 0?void 0:l.call(a,o))||`Item ${t.elements.indexOf(o)+1}`;return h.jsxs(Je,{textValue:c,children:[h.jsx(Y,{children:c}),h.jsxs(fe,{placement:"start",children:[h.jsx(ae,{onPress:()=>{i(o.key)},children:h.jsx(X,{src:un})}),h.jsx(he,{children:s.format("delete")})]})]},o.key)}})}function nH(){return h.jsxs(fn,{gap:"large",alignItems:"center",justifyContent:"center",height:"100%",padding:"regular",children:[h.jsx(Y,{elementType:"h3",align:"center",color:"neutralSecondary",size:"large",weight:"medium",children:"Empty list"}),h.jsx(Y,{align:"center",color:"neutralTertiary",children:"Add the first item to see it here."})]})}const rH=t=>t==="ordered-list"||t==="unordered-list",Vi=t=>rH(t.type);function iH(t){if(t.selection){const e=V.above(t,{match:Vt("list-item")}),n=V.above(t,{match:Vi});if(e&&n)return{isInside:!0,listItem:e,list:n}}return{isInside:!1}}function sH(t){const{insertBreak:e,normalizeNode:n,deleteBackward:r}=t;return t.deleteBackward=i=>{if(t.selection){const s=iH(t);if(s.isInside&&Dt.isCollapsed(t.selection)&&V.isStart(t,t.selection.anchor,s.list[1])){L.unwrapNodes(t,{match:Vi,split:!0});return}}r(i)},t.insertBreak=()=>{const[i]=V.nodes(t,{match:s=>s.type==="list-item",mode:"lowest"});if(i&&We.string(i[0])===""){L.unwrapNodes(t,{match:Vi,split:!0});return}e()},t.normalizeNode=i=>{const[s,o]=i;if(Rt.isElement(s)||V.isEditor(s)){const a=Vi(s);for(const[c,u]of We.children(t,o)){const d=u[u.length-1];if(Vi(c)){var l;if(((l=s.children[u[u.length-1]+1])===null||l===void 0?void 0:l.type)===c.type){const f=De.next(u);ou(t,f,[...u,c.children.length]),L.removeNodes(t,{at:f});return}if(a){const f=s.children[d-1];Rt.isElement(f)?L.moveNodes(t,{at:u,to:[...De.previous(u),f.children.length-1]}):L.unwrapNodes(t,{at:u});return}}if(s.type==="list-item"&&c.type!=="list-item-content"&&d===0&&Ge(c)){if(o[o.length-1]!==0){const f=We.get(t,De.previous(o));if(Rt.isElement(f)){L.moveNodes(t,{at:o,to:[...De.previous(o),f.children.length]});return}}L.unwrapNodes(t,{at:u});return}if(s.type==="list-item"&&c.type==="list-item-content"&&d!==0){L.splitNodes(t,{at:u});return}}}n(i)},t}const Fj=wi.createContext(null);function Zr(){const t=C.useContext(Fj);if(!t)throw new Error("ToolbarStateProvider must be used to use useToolbarState");return t}const oH=(t,e,n)=>{const r=qu(t,n,e)||{kind:"block",inlineMarks:"inherit",documentFeatures:{dividers:!0,formatting:{alignment:{center:!0,end:!0},blockTypes:{blockquote:!0,code:n.formatting.blockTypes.code},headings:n.formatting.headings,listTypes:{ordered:!0,unordered:!0}},layouts:n.layouts,links:!0,images:n.images,tables:!0},softBreaks:!0,componentBlocks:!0};let[i]=V.nodes(t,{match:d=>d.type!=="code"&&Ge(d)});const s=V.marks(t)||{},o=Object.fromEntries(QA.map(d=>[d,{isDisabled:r.inlineMarks!=="inherit"&&!r.inlineMarks[d]||!i,isSelected:!!s[d]}]));if(t.selection&&Dt.isExpanded(t.selection))for(const d of V.nodes(t,{match:Bt.isText}))for(const f of Object.keys(d[0]))f==="insertMenu"||f==="text"||f in o&&(o[f].isSelected=!0);let[l]=V.nodes(t,{match:Vt("heading")}),[a]=V.nodes(t,{match:Vi}),[c]=V.nodes(t,{match:Vt("paragraph","heading")});const u=Pj(t);return{marks:o,textStyles:{selected:l?l[0].level:"normal",allowedHeadingLevels:r.kind==="block"&&!a?r.documentFeatures.formatting.headings.levels:[]},code:{isSelected:ii(t,"code"),isDisabled:!(r.kind==="block"&&r.documentFeatures.formatting.blockTypes.code)},lists:{ordered:{isSelected:ii(t,"ordered-list")&&(u==="none"||u==="ordered-list"),isDisabled:!(r.kind==="block"&&r.documentFeatures.formatting.listTypes.ordered&&!l)},unordered:{isSelected:ii(t,"unordered-list")&&(u==="none"||u==="unordered-list"),isDisabled:!(r.kind==="block"&&r.documentFeatures.formatting.listTypes.unordered&&!l)}},alignment:{isDisabled:!c&&!(r.kind==="block"&&r.documentFeatures.formatting.alignment),selected:c?.[0].textAlign||"start"},blockquote:{isDisabled:!(r.kind==="block"&&r.documentFeatures.formatting.blockTypes.blockquote),isSelected:ii(t,"blockquote")},layouts:{isSelected:ii(t,"layout")},links:{isDisabled:!t.selection||Dt.isCollapsed(t.selection)||!r.documentFeatures.links,isSelected:ii(t,"link")},editor:t,dividers:{isDisabled:r.kind==="inline"||!r.documentFeatures.dividers},clearFormatting:{isDisabled:!(Object.values(o).some(d=>d.isSelected)||lH(t))},editorDocumentFeatures:n}};function lH(t){const[e]=V.nodes(t,{match:n=>n.type==="heading"||n.type==="code"||n.type==="blockquote"});return!!e}function Pj(t){const e=V.above(t,{match:Vi});return e?e[0].type:"none"}const $j=C.createContext(null);function Xr(){const t=C.useContext($j);if(!t)throw new Error("useDocumentEditorConfig must be used within a DocumentEditorConfigContext.Provider");return t}const aH=({children:t,componentBlocks:e,editorDocumentFeatures:n})=>{const r=kb();return h.jsx($j.Provider,{value:C.useMemo(()=>({componentBlocks:e,documentFeatures:n}),[e,n]),children:h.jsx(Fj.Provider,{value:oH(r,e,n),children:t})})};globalThis.Prism={manual:!0};var cH=globalThis;/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var $=function(t){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function m(b){return b instanceof s?new s(b.type,m(b.content),b.alias):Array.isArray(b)?b.map(m):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++n}),m.__id},clone:function m(b,y){y=y||{};var x,v;switch(i.util.type(b)){case"Object":if(v=i.util.objId(b),y[v])return y[v];x={},y[v]=x;for(var w in b)b.hasOwnProperty(w)&&(x[w]=m(b[w],y));return x;case"Array":return v=i.util.objId(b),y[v]?y[v]:(x=[],y[v]=x,b.forEach(function(S,k){x[k]=m(S,y)}),x);default:return b}},getLanguage:function(m){for(;m;){var b=e.exec(m.className);if(b)return b[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,b){m.className=m.className.replace(RegExp(e,"gi"),""),m.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(x){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(x.stack)||[])[1];if(m){var b=document.getElementsByTagName("script");for(var y in b)if(b[y].src==m)return b[y]}return null}},isActive:function(m,b,y){for(var x="no-"+b;m;){var v=m.classList;if(v.contains(b))return!0;if(v.contains(x))return!1;m=m.parentElement}return!!y}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(m,b){var y=i.util.clone(i.languages[m]);for(var x in b)y[x]=b[x];return y},insertBefore:function(m,b,y,x){x=x||i.languages;var v=x[m],w={};for(var S in v)if(v.hasOwnProperty(S)){if(S==b)for(var k in y)y.hasOwnProperty(k)&&(w[k]=y[k]);y.hasOwnProperty(S)||(w[S]=v[S])}var E=x[m];return x[m]=w,i.languages.DFS(i.languages,function(T,N){N===E&&T!=m&&(this[T]=w)}),w},DFS:function m(b,y,x,v){v=v||{};var w=i.util.objId;for(var S in b)if(b.hasOwnProperty(S)){y.call(b,S,b[S],x||S);var k=b[S],E=i.util.type(k);E==="Object"&&!v[w(k)]?(v[w(k)]=!0,m(k,y,null,v)):E==="Array"&&!v[w(k)]&&(v[w(k)]=!0,m(k,y,S,v))}}},plugins:{},highlightAll:function(m,b){i.highlightAllUnder(document,m,b)},highlightAllUnder:function(m,b,y){var x={callback:y,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",x),x.elements=Array.prototype.slice.apply(x.container.querySelectorAll(x.selector)),i.hooks.run("before-all-elements-highlight",x);for(var v=0,w;w=x.elements[v++];)i.highlightElement(w,b===!0,x.callback)},highlightElement:function(m,b,y){var x=i.util.getLanguage(m),v=i.languages[x];i.util.setLanguage(m,x);var w=m.parentElement;w&&w.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(w,x);var S=m.textContent,k={element:m,language:x,grammar:v,code:S};function E(N){k.highlightedCode=N,i.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,i.hooks.run("after-highlight",k),i.hooks.run("complete",k),y&&y.call(k.element)}if(i.hooks.run("before-sanity-check",k),w=k.element.parentElement,w&&w.nodeName.toLowerCase()==="pre"&&!w.hasAttribute("tabindex")&&w.setAttribute("tabindex","0"),!k.code){i.hooks.run("complete",k),y&&y.call(k.element);return}if(i.hooks.run("before-highlight",k),!k.grammar){E(i.util.encode(k.code));return}if(b&&t.Worker){var T=new Worker(i.filename);T.onmessage=function(N){E(N.data)},T.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else E(i.highlight(k.code,k.grammar,k.language))},highlight:function(m,b,y){var x={code:m,grammar:b,language:y};if(i.hooks.run("before-tokenize",x),!x.grammar)throw new Error('The language "'+x.language+'" has no grammar.');return x.tokens=i.tokenize(x.code,x.grammar),i.hooks.run("after-tokenize",x),s.stringify(i.util.encode(x.tokens),x.language)},tokenize:function(m,b){var y=b.rest;if(y){for(var x in y)b[x]=y[x];delete b.rest}var v=new a;return c(v,v.head,m),l(m,v,b,v.head,0),d(v)},hooks:{all:{},add:function(m,b){var y=i.hooks.all;y[m]=y[m]||[],y[m].push(b)},run:function(m,b){var y=i.hooks.all[m];if(!(!y||!y.length))for(var x=0,v;v=y[x++];)v(b)}},Token:s};t.Prism=i;function s(m,b,y,x){this.type=m,this.content=b,this.alias=y,this.length=(x||"").length|0}s.stringify=function m(b,y){if(typeof b=="string")return b;if(Array.isArray(b)){var x="";return b.forEach(function(E){x+=m(E,y)}),x}var v={type:b.type,content:m(b.content,y),tag:"span",classes:["token",b.type],attributes:{},language:y},w=b.alias;w&&(Array.isArray(w)?Array.prototype.push.apply(v.classes,w):v.classes.push(w)),i.hooks.run("wrap",v);var S="";for(var k in v.attributes)S+=" "+k+'="'+(v.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+v.tag+' class="'+v.classes.join(" ")+'"'+S+">"+v.content+"</"+v.tag+">"};function o(m,b,y,x){m.lastIndex=b;var v=m.exec(y);if(v&&x&&v[1]){var w=v[1].length;v.index+=w,v[0]=v[0].slice(w)}return v}function l(m,b,y,x,v,w){for(var S in y)if(!(!y.hasOwnProperty(S)||!y[S])){var k=y[S];k=Array.isArray(k)?k:[k];for(var E=0;E<k.length;++E){if(w&&w.cause==S+","+E)return;var T=k[E],N=T.inside,I=!!T.lookbehind,A=!!T.greedy,O=T.alias;if(A&&!T.pattern.global){var _=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,_+"g")}for(var F=T.pattern||T,M=x.next,P=v;M!==b.tail&&!(w&&P>=w.reach);P+=M.value.length,M=M.next){var B=M.value;if(b.length>m.length)return;if(!(B instanceof s)){var z=1,U;if(A){if(U=o(F,P,m,I),!U||U.index>=m.length)break;var D=U.index,R=U.index+U[0].length,J=P;for(J+=M.value.length;D>=J;)M=M.next,J+=M.value.length;if(J-=M.value.length,P=J,M.value instanceof s)continue;for(var Z=M;Z!==b.tail&&(J<R||typeof Z.value=="string");Z=Z.next)z++,J+=Z.value.length;z--,B=m.slice(P,J),U.index-=P}else if(U=o(F,0,B,I),!U)continue;var D=U.index,ie=U[0],oe=B.slice(0,D),re=B.slice(D+ie.length),me=P+B.length;w&&me>w.reach&&(w.reach=me);var ee=M.prev;oe&&(ee=c(b,ee,oe),P+=oe.length),u(b,ee,z);var we=new s(S,N?i.tokenize(ie,N):ie,O,ie);if(M=c(b,ee,we),re&&c(b,M,re),z>1){var ve={cause:S+","+E,reach:me};l(m,b,y,M.prev,P,ve),w&&ve.reach>w.reach&&(w.reach=ve.reach)}}}}}}function a(){var m={value:null,prev:null,next:null},b={value:null,prev:m,next:null};m.next=b,this.head=m,this.tail=b,this.length=0}function c(m,b,y){var x=b.next,v={value:y,prev:b,next:x};return b.next=v,x.prev=v,m.length++,v}function u(m,b,y){for(var x=b.next,v=0;v<y&&x!==m.tail;v++)x=x.next;b.next=x,x.prev=b,m.length-=v}function d(m){for(var b=[],y=m.head.next;y!==m.tail;)b.push(y.value),y=y.next;return b}if(!t.document)return t.addEventListener&&(i.disableWorkerMessageHandler||t.addEventListener("message",function(m){var b=JSON.parse(m.data),y=b.language,x=b.code,v=b.immediateClose;t.postMessage(i.highlight(x,i.languages[y],y)),v&&t.close()},!1)),i;var f=i.util.currentScript();f&&(i.filename=f.src,f.hasAttribute("data-manual")&&(i.manual=!0));function p(){i.manual||i.highlightAll()}if(!i.manual){var g=document.readyState;g==="loading"||g==="interactive"&&f&&f.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}(cH);$.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};$.languages.markup.tag.inside["attr-value"].inside.entity=$.languages.markup.entity;$.languages.markup.doctype.inside["internal-subset"].inside=$.languages.markup;$.hooks.add("wrap",function(t){t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty($.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:$.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+n]={pattern:/[\s\S]+/,inside:$.languages[n]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},$.languages.insertBefore("markup","cdata",s)}});Object.defineProperty($.languages.markup.tag,"addAttribute",{value:function(t,e){$.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:$.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});$.languages.html=$.languages.markup;$.languages.mathml=$.languages.markup;$.languages.svg=$.languages.markup;$.languages.xml=$.languages.extend("markup",{});$.languages.ssml=$.languages.xml;$.languages.atom=$.languages.xml;$.languages.rss=$.languages.xml;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})($);$.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};$.languages.javascript=$.languages.extend("clike",{"class-name":[$.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});$.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;$.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:$.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:$.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:$.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:$.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:$.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});$.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:$.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});$.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});$.languages.markup&&($.languages.markup.tag.addInlined("script","javascript"),$.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));$.languages.js=$.languages.javascript;(function(){if(typeof $>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var t="Loading…",e=function(f,p){return"✖ Error "+f+" while fetching file: "+p},n="✖ Error: File does not exist or is empty",r={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",s="loading",o="loaded",l="failed",a="pre[data-src]:not(["+i+'="'+o+'"]):not(['+i+'="'+s+'"])';function c(f,p,g){var m=new XMLHttpRequest;m.open("GET",f,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?p(m.responseText):m.status>=400?g(e(m.status,m.statusText)):g(n))},m.send(null)}function u(f){var p=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(f||"");if(p){var g=Number(p[1]),m=p[2],b=p[3];return m?b?[g,Number(b)]:[g,void 0]:[g,g]}}$.hooks.add("before-highlightall",function(f){f.selector+=", "+a}),$.hooks.add("before-sanity-check",function(f){var p=f.element;if(p.matches(a)){f.code="",p.setAttribute(i,s);var g=p.appendChild(document.createElement("CODE"));g.textContent=t;var m=p.getAttribute("data-src"),b=f.language;if(b==="none"){var y=(/\.(\w+)$/.exec(m)||[,"none"])[1];b=r[y]||y}$.util.setLanguage(g,b),$.util.setLanguage(p,b);var x=$.plugins.autoloader;x&&x.loadLanguages(b),c(m,function(v){p.setAttribute(i,o);var w=u(p.getAttribute("data-range"));if(w){var S=v.split(/\r\n?|\n/g),k=w[0],E=w[1]==null?S.length:w[1];k<0&&(k+=S.length),k=Math.max(0,Math.min(k-1,S.length)),E<0&&(E+=S.length),E=Math.max(0,Math.min(E,S.length)),v=S.slice(k,E).join(`
`),p.hasAttribute("data-start")||p.setAttribute("data-start",String(k+1))}g.textContent=v,$.highlightElement(g)},function(v){p.setAttribute(i,l),g.textContent=v})}}),$.plugins.fileHighlight={highlight:function(p){for(var g=(p||document).querySelectorAll(a),m=0,b;b=g[m++];)$.highlightElement(b)}};var d=!1;$.fileHighlight=function(){d||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),d=!0),$.plugins.fileHighlight.highlight.apply(this,arguments)}})();$.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};$.languages.c=$.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});$.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});$.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},$.languages.c.string],char:$.languages.c.char,comment:$.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:$.languages.c}}}});$.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete $.languages.c.boolean;(function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])})($);$.languages.arduino=$.languages.extend("cpp",{keyword:/\b(?:String|array|bool|boolean|break|byte|case|catch|continue|default|do|double|else|finally|for|function|goto|if|in|instanceof|int|integer|long|loop|new|null|return|setup|string|switch|throw|try|void|while|word)\b/,constant:/\b(?:ANALOG_MESSAGE|DEFAULT|DIGITAL_MESSAGE|EXTERNAL|FIRMATA_STRING|HIGH|INPUT|INPUT_PULLUP|INTERNAL|INTERNAL1V1|INTERNAL2V56|LED_BUILTIN|LOW|OUTPUT|REPORT_ANALOG|REPORT_DIGITAL|SET_PIN_MODE|SYSEX_START|SYSTEM_RESET)\b/,builtin:/\b(?:Audio|BSSID|Bridge|Client|Console|EEPROM|Esplora|EsploraTFT|Ethernet|EthernetClient|EthernetServer|EthernetUDP|File|FileIO|FileSystem|Firmata|GPRS|GSM|GSMBand|GSMClient|GSMModem|GSMPIN|GSMScanner|GSMServer|GSMVoiceCall|GSM_SMS|HttpClient|IPAddress|IRread|Keyboard|KeyboardController|LiquidCrystal|LiquidCrystal_I2C|Mailbox|Mouse|MouseController|PImage|Process|RSSI|RobotControl|RobotMotor|SD|SPI|SSID|Scheduler|Serial|Server|Servo|SoftwareSerial|Stepper|Stream|TFT|Task|USBHost|WiFi|WiFiClient|WiFiServer|WiFiUDP|Wire|YunClient|YunServer|abs|addParameter|analogRead|analogReadResolution|analogReference|analogWrite|analogWriteResolution|answerCall|attach|attachGPRS|attachInterrupt|attached|autoscroll|available|background|beep|begin|beginPacket|beginSD|beginSMS|beginSpeaker|beginTFT|beginTransmission|beginWrite|bit|bitClear|bitRead|bitSet|bitWrite|blink|blinkVersion|buffer|changePIN|checkPIN|checkPUK|checkReg|circle|cityNameRead|cityNameWrite|clear|clearScreen|click|close|compassRead|config|connect|connected|constrain|cos|countryNameRead|countryNameWrite|createChar|cursor|debugPrint|delay|delayMicroseconds|detach|detachInterrupt|digitalRead|digitalWrite|disconnect|display|displayLogos|drawBMP|drawCompass|encryptionType|end|endPacket|endSMS|endTransmission|endWrite|exists|exitValue|fill|find|findUntil|flush|gatewayIP|get|getAsynchronously|getBand|getButton|getCurrentCarrier|getIMEI|getKey|getModifiers|getOemKey|getPINUsed|getResult|getSignalStrength|getSocket|getVoiceCallStatus|getXChange|getYChange|hangCall|height|highByte|home|image|interrupts|isActionDone|isDirectory|isListening|isPIN|isPressed|isValid|keyPressed|keyReleased|keyboardRead|knobRead|leftToRight|line|lineFollowConfig|listen|listenOnLocalhost|loadImage|localIP|lowByte|macAddress|maintain|map|max|messageAvailable|micros|millis|min|mkdir|motorsStop|motorsWrite|mouseDragged|mouseMoved|mousePressed|mouseReleased|move|noAutoscroll|noBlink|noBuffer|noCursor|noDisplay|noFill|noInterrupts|noListenOnLocalhost|noStroke|noTone|onReceive|onRequest|open|openNextFile|overflow|parseCommand|parseFloat|parseInt|parsePacket|pauseMode|peek|pinMode|playFile|playMelody|point|pointTo|position|pow|prepare|press|print|printFirmwareVersion|printVersion|println|process|processInput|pulseIn|put|random|randomSeed|read|readAccelerometer|readBlue|readButton|readBytes|readBytesUntil|readGreen|readJoystickButton|readJoystickSwitch|readJoystickX|readJoystickY|readLightSensor|readMessage|readMicrophone|readNetworks|readRed|readSlider|readString|readStringUntil|readTemperature|ready|rect|release|releaseAll|remoteIP|remoteNumber|remotePort|remove|requestFrom|retrieveCallingNumber|rewindDirectory|rightToLeft|rmdir|robotNameRead|robotNameWrite|run|runAsynchronously|runShellCommand|runShellCommandAsynchronously|running|scanNetworks|scrollDisplayLeft|scrollDisplayRight|seek|sendAnalog|sendDigitalPortPair|sendDigitalPorts|sendString|sendSysex|serialEvent|setBand|setBitOrder|setClockDivider|setCursor|setDNS|setDataMode|setFirmwareVersion|setMode|setPINUsed|setSpeed|setTextSize|setTimeout|shiftIn|shiftOut|shutdown|sin|size|sqrt|startLoop|step|stop|stroke|subnetMask|switchPIN|tan|tempoWrite|text|tone|transfer|tuneWrite|turn|updateIR|userNameRead|userNameWrite|voiceCall|waitContinue|width|write|writeBlue|writeGreen|writeJSON|writeMessage|writeMicroseconds|writeRGB|writeRed|yield)\b/});$.languages.ino=$.languages.arduino;(function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],s=r.variable[1].inside,o=0;o<i.length;o++)s[i[o]]=t.languages.bash[i[o]];t.languages.sh=t.languages.bash,t.languages.shell=t.languages.bash})($);(function(t){function e(U,R){return U.replace(/<<(\d+)>>/g,function(J,Z){return"(?:"+R[+Z]+")"})}function n(U,R,J){return RegExp(e(U,R),"")}function r(U,R){for(var J=0;J<R;J++)U=U.replace(/<<self>>/g,function(){return"(?:"+U+")"});return U.replace(/<<self>>/g,"[^\\s\\S]")}var i={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function s(U){return"\\b(?:"+U.trim().replace(/ /g,"|")+")\\b"}var o=s(i.typeDeclaration),l=RegExp(s(i.type+" "+i.typeDeclaration+" "+i.contextual+" "+i.other)),a=s(i.typeDeclaration+" "+i.contextual+" "+i.other),c=s(i.type+" "+i.typeDeclaration+" "+i.other),u=r(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),d=r(/\((?:[^()]|<<self>>)*\)/.source,2),f=/@?\b[A-Za-z_]\w*\b/.source,p=e(/<<0>>(?:\s*<<1>>)?/.source,[f,u]),g=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[a,p]),m=/\[\s*(?:,\s*)*\]/.source,b=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[g,m]),y=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[u,d,m]),x=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[y]),v=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[x,g,m]),w={keyword:l,punctuation:/[<>()?,.:[\]]/},S=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,k=/"(?:\\.|[^\\"\r\n])*"/.source,E=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;t.languages.csharp=t.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[k]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[g]),lookbehind:!0,inside:w},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[f,v]),lookbehind:!0,inside:w},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[f]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[o,p]),lookbehind:!0,inside:w},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[g]),lookbehind:!0,inside:w},{pattern:n(/(\bwhere\s+)<<0>>/.source,[f]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[b]),lookbehind:!0,inside:w},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[v,c,f]),inside:w}],keyword:l,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),t.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),t.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[f]),lookbehind:!0,alias:"punctuation"}}),t.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[f]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[d]),lookbehind:!0,alias:"class-name",inside:w},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[v,g]),inside:w,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[v]),lookbehind:!0,inside:w,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[f,u]),inside:{function:n(/^<<0>>/.source,[f]),generic:{pattern:RegExp(u),alias:"class-name",inside:w}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[o,p,f,v,l.source,d,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[p,d]),lookbehind:!0,greedy:!0,inside:t.languages.csharp},keyword:l,"class-name":{pattern:RegExp(v),greedy:!0,inside:w},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var T=k+"|"+S,N=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[T]),I=r(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),A=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,O=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[g,I]);t.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[A,O]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[A]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[I]),inside:t.languages.csharp},"class-name":{pattern:RegExp(g),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var _=/:[^}\r\n]+/.source,F=r(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[N]),2),M=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[F,_]),P=r(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[T]),2),B=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[P,_]);function z(U,R){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[U]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[R,_]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:t.languages.csharp}}},string:/[\s\S]+/}}t.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[M]),lookbehind:!0,greedy:!0,inside:z(M,F)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[B]),lookbehind:!0,greedy:!0,inside:z(B,P)}],char:{pattern:RegExp(S),greedy:!0}}),t.languages.dotnet=t.languages.cs=t.languages.csharp})($);$.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};$.languages.markup.tag.inside["attr-value"].inside.entity=$.languages.markup.entity;$.languages.markup.doctype.inside["internal-subset"].inside=$.languages.markup;$.hooks.add("wrap",function(t){t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty($.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:$.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+n]={pattern:/[\s\S]+/,inside:$.languages[n]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},$.languages.insertBefore("markup","cdata",s)}});Object.defineProperty($.languages.markup.tag,"addAttribute",{value:function(t,e){$.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:$.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});$.languages.html=$.languages.markup;$.languages.mathml=$.languages.markup;$.languages.svg=$.languages.markup;$.languages.xml=$.languages.extend("markup",{});$.languages.ssml=$.languages.xml;$.languages.atom=$.languages.xml;$.languages.rss=$.languages.xml;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})($);(function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach(function(n){var r=e[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),n==="diff"&&i.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})})($);$.languages.go=$.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});$.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete $.languages.go["class-name"];$.languages.ini={comment:{pattern:/(^[ \f\t\v]*)[#;][^\n\r]*/m,lookbehind:!0},section:{pattern:/(^[ \f\t\v]*)\[[^\n\r\]]*\]?/m,lookbehind:!0,inside:{"section-name":{pattern:/(^\[[ \f\t\v]*)[^ \f\t\v\]]+(?:[ \f\t\v]+[^ \f\t\v\]]+)*/,lookbehind:!0,alias:"selector"},punctuation:/\[|\]/}},key:{pattern:/(^[ \f\t\v]*)[^ \f\n\r\t\v=]+(?:[ \f\t\v]+[^ \f\n\r\t\v=]+)*(?=[ \f\t\v]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/(=[ \f\t\v]*)[^ \f\n\r\t\v]+(?:[ \f\t\v]+[^ \f\n\r\t\v]+)*/,lookbehind:!0,alias:"attr-value",inside:{"inner-value":{pattern:/^("|').+(?=\1$)/,lookbehind:!0}}},punctuation:/=/};(function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})($);(function(t){var e={pattern:/\\[\\(){}[\]^$+*?|.]/,alias:"escape"},n=/\\(?:x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,r={pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},i={pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},s="(?:[^\\\\-]|"+n.source+")",o=RegExp(s+"-"+s),l={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};t.languages.regex={"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:[^\\\]]|\\[\s\S])*\]/,lookbehind:!0,inside:{"char-class-negation":{pattern:/(^\[)\^/,lookbehind:!0,alias:"operator"},"char-class-punctuation":{pattern:/^\[|\]$/,alias:"punctuation"},range:{pattern:o,inside:{escape:n,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":e,"char-set":i,escape:n}},"special-escape":e,"char-set":r,backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":l}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:n,group:[{pattern:/\((?:\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,alias:"punctuation",inside:{"group-name":l}},{pattern:/\)/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}}})($);$.languages.javascript=$.languages.extend("clike",{"class-name":[$.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});$.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;$.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:$.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:$.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:$.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:$.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:$.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});$.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:$.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});$.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});$.languages.markup&&($.languages.markup.tag.addInlined("script","javascript"),$.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));$.languages.js=$.languages.javascript;(function(t){var e=t.util.clone(t.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function s(a,c){return a=a.replace(/<S>/g,function(){return n}).replace(/<BRACES>/g,function(){return r}).replace(/<SPREAD>/g,function(){return i}),RegExp(a,c)}i=s(i).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=s(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=e.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:s(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:s(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var o=function(a){return a?typeof a=="string"?a:typeof a.content=="string"?a.content:a.content.map(o).join(""):""},l=function(a){for(var c=[],u=0;u<a.length;u++){var d=a[u],f=!1;if(typeof d!="string"&&(d.type==="tag"&&d.content[0]&&d.content[0].type==="tag"?d.content[0].content[0].content==="</"?c.length>0&&c[c.length-1].tagName===o(d.content[0].content[1])&&c.pop():d.content[d.content.length-1].content==="/>"||c.push({tagName:o(d.content[0].content[1]),openedBraces:0}):c.length>0&&d.type==="punctuation"&&d.content==="{"?c[c.length-1].openedBraces++:c.length>0&&c[c.length-1].openedBraces>0&&d.type==="punctuation"&&d.content==="}"?c[c.length-1].openedBraces--:f=!0),(f||typeof d=="string")&&c.length>0&&c[c.length-1].openedBraces===0){var p=o(d);u<a.length-1&&(typeof a[u+1]=="string"||a[u+1].type==="plain-text")&&(p+=o(a[u+1]),a.splice(u+1,1)),u>0&&(typeof a[u-1]=="string"||a[u-1].type==="plain-text")&&(p=o(a[u-1])+p,a.splice(u-1,1),u--),a[u]=new t.Token("plain-text",p,null,p)}d.content&&typeof d.content!="string"&&l(d.content)}};t.hooks.add("after-tokenize",function(a){a.language!=="jsx"&&a.language!=="tsx"||l(a.tokens)})})($);$.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};$.languages.webmanifest=$.languages.json;(function(t){t.languages.kotlin=t.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete t.languages.kotlin["class-name"];var e={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:t.languages.kotlin}};t.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:e},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:e},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete t.languages.kotlin.string,t.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),t.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),t.languages.kt=t.languages.kotlin,t.languages.kts=t.languages.kotlin})($);$.languages.less=$.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/});$.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}});$.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[^z]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+(?:\.[a-f\d]*)?(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|(?:\.\d*)?(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/};$.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/};(function(t){var e=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+e.source+")?|"+e.source+"(?:[ 	]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),s=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(l,a){a=(a||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return l});return RegExp(c,a)}t.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+i+"|"+s+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(s),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:e,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},t.languages.yml=t.languages.yaml})($);(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(u){return u=u.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+u+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+s+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+s+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(u){["url","bold","italic","strike","code-snippet"].forEach(function(d){u!==d&&(t.languages.markdown[u].inside.content.inside[d]=t.languages.markdown[d])})}),t.hooks.add("after-tokenize",function(u){if(u.language!=="markdown"&&u.language!=="md")return;function d(f){if(!(!f||typeof f=="string"))for(var p=0,g=f.length;p<g;p++){var m=f[p];if(m.type!=="code"){d(m.content);continue}var b=m.content[1],y=m.content[3];if(b&&y&&b.type==="code-language"&&y.type==="code-block"&&typeof b.content=="string"){var x=b.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");x=(/[a-z][\w-]*/i.exec(x)||[""])[0].toLowerCase();var v="language-"+x;y.alias?typeof y.alias=="string"?y.alias=[y.alias,v]:y.alias.push(v):y.alias=[v]}}}d(u.tokens)}),t.hooks.add("wrap",function(u){if(u.type==="code-block"){for(var d="",f=0,p=u.classes.length;f<p;f++){var g=u.classes[f],m=/language-(.+)/.exec(g);if(m){d=m[1];break}}var b=t.languages[d];if(b)u.content=t.highlight(c(u.content),b,d);else if(d&&d!=="none"&&t.plugins.autoloader){var y="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);u.attributes.id=y,t.plugins.autoloader.loadLanguages(d,function(){var x=document.getElementById(y);x&&(x.innerHTML=t.highlight(x.textContent,t.languages[d],d))})}}});var o=RegExp(t.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},a=String.fromCodePoint||String.fromCharCode;function c(u){var d=u.replace(o,"");return d=d.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(f,p){if(p=p.toLowerCase(),p[0]==="#"){var g;return p[1]==="x"?g=parseInt(p.slice(2),16):g=Number(p.slice(1)),a(g)}else{var m=l[p];return m||f}}),d}t.languages.md=t.languages.markdown})($);$.languages.objectivec=$.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete $.languages.objectivec["class-name"];$.languages.objc=$.languages.objectivec;(function(t){var e=/(?:\((?:[^()\\]|\\[\s\S])*\)|\{(?:[^{}\\]|\\[\s\S])*\}|\[(?:[^[\]\\]|\\[\s\S])*\]|<(?:[^<>\\]|\\[\s\S])*>)/.source;t.languages.perl={comment:[{pattern:/(^\s*)=\w[\s\S]*?=cut.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],string:[{pattern:RegExp(/\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,e].join("|")+")"),greedy:!0},{pattern:/("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/'(?:[^'\\\r\n]|\\.)*'/,greedy:!0}],regex:[{pattern:RegExp(/\b(?:m|qr)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,e].join("|")+")"+/[msixpodualngc]*/.source),greedy:!0},{pattern:RegExp(/(^|[^-])\b(?:s|tr|y)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,/([a-zA-Z0-9])(?:(?!\3)[^\\]|\\[\s\S])*\3(?:(?!\3)[^\\]|\\[\s\S])*\3/.source,e+/\s*/.source+e].join("|")+")"+/[msixpodualngcer]*/.source),lookbehind:!0,greedy:!0},{pattern:/\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\b))/,greedy:!0}],variable:[/[&*$@%]\{\^[A-Z]+\}/,/[&*$@%]\^[A-Z_]/,/[&*$@%]#?(?=\{)/,/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+(?![\w$]))+(?:::)*/,/[&*$@%]\d+/,/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/],filehandle:{pattern:/<(?![<=])\S*?>|\b_\b/,alias:"symbol"},"v-string":{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/(\bsub[ \t]+)\w+/,lookbehind:!0},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\b/,punctuation:/[{}[\];(),:]/}})($);(function(t){function e(n,r){return"___"+n.toUpperCase()+r+"___"}Object.defineProperties(t.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,i,s){if(n.language===r){var o=n.tokenStack=[];n.code=n.code.replace(i,function(l){if(typeof s=="function"&&!s(l))return l;for(var a=o.length,c;n.code.indexOf(c=e(r,a))!==-1;)++a;return o[a]=l,c}),n.grammar=t.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language!==r||!n.tokenStack)return;n.grammar=t.languages[r];var i=0,s=Object.keys(n.tokenStack);function o(l){for(var a=0;a<l.length&&!(i>=s.length);a++){var c=l[a];if(typeof c=="string"||c.content&&typeof c.content=="string"){var u=s[i],d=n.tokenStack[u],f=typeof c=="string"?c:c.content,p=e(r,u),g=f.indexOf(p);if(g>-1){++i;var m=f.substring(0,g),b=new t.Token(r,t.tokenize(d,n.grammar),"language-"+r,d),y=f.substring(g+p.length),x=[];m&&x.push.apply(x,o([m])),x.push(b),y&&x.push.apply(x,o([y])),typeof c=="string"?l.splice.apply(l,[a,1].concat(x)):c.content=x}}else c.content&&o(c.content)}return l}o(n.tokens)}}})})($);(function(t){var e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],r=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,i=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,s=/[{}\[\](),:;]/;t.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:e,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:r,operator:i,punctuation:s};var o={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:t.languages.php},l=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:o}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:o}}];t.languages.insertBefore("php","variable",{string:l,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:e,string:l,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:r,operator:i,punctuation:s}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),t.hooks.add("before-tokenize",function(a){if(/<\?/.test(a.code)){var c=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;t.languages["markup-templating"].buildPlaceholders(a,"php",c)}}),t.hooks.add("after-tokenize",function(a){t.languages["markup-templating"].tokenizePlaceholders(a,"php")})})($);$.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};$.languages.python["string-interpolation"].inside.interpolation.inside.rest=$.languages.python;$.languages.py=$.languages.python;$.languages.r={comment:/#.*/,string:{pattern:/(['"])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"percent-operator":{pattern:/%[^%\s]*%/,alias:"operator"},boolean:/\b(?:FALSE|TRUE)\b/,ellipsis:/\.\.(?:\.|\d+)/,number:[/\b(?:Inf|NaN)\b/,/(?:\b0x[\dA-Fa-f]+(?:\.\d*)?|\b\d+(?:\.\d*)?|\B\.\d+)(?:[EePp][+-]?\d+)?[iL]?/],keyword:/\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\b/,operator:/->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\|\|?|[+*\/^$@~]/,punctuation:/[(){}\[\],;]/};(function(t){t.languages.ruby=t.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),t.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var e={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:t.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete t.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",r=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;t.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+r),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+r+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),t.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:e,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:e,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete t.languages.ruby.string,t.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),t.languages.rb=t.languages.ruby})($);(function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string})($);(function(t){t.languages.sass=t.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),t.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete t.languages.sass.atrule;var e=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];t.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:e,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:e,operator:n,important:t.languages.sass.important}}}),delete t.languages.sass.property,delete t.languages.sass.important,t.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})})($);$.languages.scss=$.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}});$.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]});$.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/});$.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}});$.languages.scss.atrule.inside.rest=$.languages.scss;$.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};$.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};$.languages.swift["string-literal"].forEach(function(t){t.inside.interpolation.inside=$.languages.swift});(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript})($);(function(t){var e=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",e),delete t.languages.tsx.parameter,delete t.languages.tsx["literal-property"];var n=t.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0})($);$.languages.basic={comment:{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\$|\b)/i,function:/\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\$|\b)/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:AND|EQV|IMP|NOT|OR|XOR)\b/i,punctuation:/[,;:()]/};$.languages.vbnet=$.languages.extend("basic",{comment:[{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},{pattern:/(^|[^\\:])'.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(^|[^"])"(?:""|[^"])*"(?!")/,lookbehind:!0,greedy:!0},keyword:/(?:\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDBL|CDEC|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DEFAULT|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LET|LIB|LIKE|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPERATOR|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHELL|SHORT|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SWAP|SYNCLOCK|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\$|\b)/i,punctuation:/[,;:(){}]/});const uH=[],dw={mobile:"medium",tablet:"xlarge",desktop:"xxlarge"};function f1(t){return t.entryLayout==="content"?"none":"medium"}const lh=C.createContext(null);function fr(){return C.useContext(lh)}function dH(t){const e=q(2);let n;return e[0]!==t.children?(n=h.jsx(lh.Provider,{value:null,children:t.children}),e[0]=t.children,e[1]=n):n=e[1],n}function fw(t,e){return t.schema.kind===e}function h1(t){const e=q(21),{formatInfo:n,forceValidation:r,slugField:i,entryLayout:s,previewProps:o}=t;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={above:"mobile"},e[0]=l):l=e[0];const a=KB(l);if(s==="content"&&n.contentField&&a){const{contentField:u}=n;let d=o;for(const y of u.path){if(fw(d,"object")){d=d.fields[y];continue}if(fw(d,"conditional")){if(y!=="value")throw new Error("Conditional fields referenced in a contentField path must only reference the value field.");d=d.value;continue}throw new Error("Path specified in contentField does not point to a content field")}let f;e[1]!==r||e[2]!==d?(f=h.jsx(ch,{forceValidation:r,...d}),e[1]=r,e[2]=d,e[3]=f):f=e[3];let p;e[4]!==u.path||e[5]!==f?(p=h.jsx(QS,{children:h.jsx(lh.Provider,{value:"main",children:h.jsx(Kd,{children:h.jsx(Hf,{part:u.path,children:f})})})}),e[4]=u.path,e[5]=f,e[6]=p):p=e[6];let g;e[7]!==r||e[8]!==u.path||e[9]!==o?(g=h.jsx(eC,{children:h.jsx(lh.Provider,{value:"side",children:h.jsx(Kd,{children:h.jsx(zt,{padding:dw,children:h.jsx(ch,{forceValidation:r,omitFieldAtPath:u.path,...o})})})})}),e[7]=r,e[8]=u.path,e[9]=o,e[10]=g):g=e[10];let m;e[11]!==p||e[12]!==g?(m=h.jsxs(nC,{autoSaveId:"keystatic-content-split-view",defaultSize:320,minSize:240,maxSize:480,flex:!0,children:[p,g]}),e[11]=p,e[12]=g,e[13]=m):m=e[13];let b;return e[14]!==i||e[15]!==m?(b=h.jsx(uT,{value:uH,children:h.jsx(cT,{value:i,children:m})}),e[14]=i,e[15]=m,e[16]=b):b=e[16],b}let c;return e[17]!==r||e[18]!==i||e[19]!==o?(c=h.jsx(Kd,{children:h.jsx(Ij,{paddingY:dw,children:h.jsx(ji,{forceValidation:r,slugField:i,...o})})}),e[17]=r,e[18]=i,e[19]=o,e[20]=c):c=e[20],c}function Yu(t){return t===JS.sanitizeUrl(t)}const fH=t=>ii(t,"link"),Lj=(t,e)=>{if(fH(t)){L.unwrapNodes(t,{match:i=>i.type==="link"});return}const{selection:n}=t;n&&Dt.isCollapsed(n)?L.insertNodes(t,{type:"link",href:e,children:[{text:e}]}):L.wrapNodes(t,{type:"link",href:e,children:[{text:""}]},{split:!0})},hH=({attributes:t,children:e,element:n})=>{const r=Be(et),i=Nn(),[s,o]=L0(i,n),l=s.href,a=We.string(s),[c,u]=C.useState(!1),f=V0()===n;C.useEffect(()=>{f&&!l&&u(!0)},[l,f]);const p=Ln(()=>{L.unwrapNodes(i,{at:Ee.findPath(i,n)}),Ee.focus(i)});return h.jsxs(h.Fragment,{children:[h.jsxs(yl,{element:n,children:[h.jsx("a",{href:l,...t,children:e}),h.jsx(bl,{placement:"bottom start",children:h.jsxs(te,{gap:"small",padding:"regular",children:[h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>u(!0),children:h.jsx(X,{src:Hu})}),h.jsx(he,{children:r.format("edit")})]}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{window.open(l,"_blank","noopener,noreferrer")},children:h.jsx(X,{src:dp})}),h.jsx(he,{children:h.jsx(Y,{truncate:3,children:l})})]}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:p,children:h.jsx(X,{src:xT})}),h.jsx(he,{children:"Unlink"})]})]})})]}),h.jsx(dt,{onDismiss:()=>{u(!1),$0(i)},children:c&&h.jsx(pH,{text:a,href:l,onSubmit:({href:g})=>{o({href:g})}})})]})};function pH({onSubmit:t,...e}){let[n,r]=C.useState(e.href||""),[i,s]=C.useState(!1),{dismiss:o}=fl(),l=Be(et);const a=i&&!Yu(n);return h.jsx(nn,{size:"small",children:h.jsxs("form",{style:{display:"contents"},onSubmit:c=>{c.target===c.currentTarget&&(c.preventDefault(),a||(o(),t({href:n})))},children:[h.jsxs(nt,{children:[e.href?"Edit":"Add"," link"]}),h.jsx(gn,{children:h.jsxs(te,{gap:"large",direction:"column",children:[h.jsx(gt,{label:"Text",value:e.text,isReadOnly:!0}),h.jsx(gt,{autoFocus:!0,isRequired:!0,onBlur:()=>s(!0),label:"Link",onChange:r,value:n,errorMessage:a&&"Please provide a valid URL."})]})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:o,children:l.format("cancel")}),h.jsx(Re,{prominence:"high",type:"submit",children:l.format("save")})]})]})})}let gH=h.jsx(X,{src:bT});function mH(){const{editor:t,links:{isDisabled:e,isSelected:n}}=Zr();return C.useMemo(()=>h.jsx(ae,{prominence:"low",isDisabled:e,isSelected:n,onPress:()=>{Lj(t,""),Ee.focus(t)},children:gH}),[n,e,t])}const yH=h.jsxs(fe,{children:[h.jsx(mH,{}),h.jsx(he,{children:h.jsx(Y,{children:"Link"})})]}),rm={start:{key:"start",label:"Align Start",icon:h.jsx(X,{src:Wz})},center:{key:"center",label:"Align Center",icon:h.jsx(X,{src:Gz})},end:{key:"end",label:"Align End",icon:h.jsx(X,{src:Kz})}},bH=({alignment:t})=>{const e=Zr(),n=C.useMemo(()=>[rm.start,...Object.keys(t).map(r=>rm[r])],[t]);return C.useMemo(()=>h.jsxs(Ii,{children:[h.jsxs(fe,{children:[h.jsxs(ae,{prominence:"low",children:[rm[e.alignment.selected].icon,h.jsx(X,{src:Au})]}),h.jsx(he,{children:h.jsx(Y,{children:"Text Alignment"})})]}),h.jsx(Ai,{selectionMode:"single",selectedKeys:[e.alignment.selected],items:n,onAction:r=>{r==="start"?L.unsetNodes(e.editor,"textAlign",{match:i=>i.type==="paragraph"||i.type==="heading"}):L.setNodes(e.editor,{textAlign:r},{match:i=>i.type==="paragraph"||i.type==="heading"}),Ee.focus(e.editor)},children:r=>h.jsxs(Je,{textValue:r.label,children:[h.jsx(Y,{children:r.label}),r.icon]},r.key)})]}),[n,e.alignment.selected,e.editor])},xH=t=>{ii(t,"blockquote")?L.unwrapNodes(t,{match:n=>n.type==="blockquote"}):L.wrapNodes(t,{type:"blockquote",children:[]})},vH=()=>{const{editor:t,blockquote:{isDisabled:e,isSelected:n}}=Zr();return C.useMemo(()=>h.jsx(ae,{prominence:"low",isSelected:n,isDisabled:e,onPress:()=>{xH(t),Ee.focus(t)},children:h.jsx(X,{src:Bb})}),[t,e,n])},kH=h.jsxs(fe,{children:[h.jsx(vH,{}),h.jsxs(he,{children:[h.jsx(Y,{children:"Quote"}),h.jsx(Vn,{children:">⎵"})]})]}),Ip=[{label:"C",value:"c"},{label:"C++",value:"cpp"},{label:"Arduino",value:"arduino"},{label:"Bash",value:"bash"},{label:"C#",value:"csharp"},{label:"CSS",value:"css"},{label:"Diff",value:"diff"},{label:"Go",value:"go"},{label:"INI",value:"ini"},{label:"Java",value:"java"},{label:"JavaScript",value:"javascript"},{label:"JSX",value:"jsx"},{label:"JSON",value:"json"},{label:"Kotlin",value:"kotlin"},{label:"Less",value:"less"},{label:"Lua",value:"lua"},{label:"Makefile",value:"makefile"},{label:"Markdown",value:"markdown"},{label:"Objective-C",value:"objectivec"},{label:"Perl",value:"perl"},{label:"PHP",value:"php"},{label:"Python",value:"python"},{label:"R",value:"r"},{label:"Ruby",value:"ruby"},{label:"Rust",value:"rust"},{label:"Sass",value:"sass"},{label:"SCSS",value:"scss"},{label:"SQL",value:"sql"},{label:"Swift",value:"swift"},{label:"TypeScript",value:"typescript"},{label:"TSX",value:"tsx"},{label:"VB.NET",value:"vbnet"},{label:"YAML",value:"yaml"}],ah=new Map(Ip.map(t=>[t.value,t.label])),hw=new Map(Ip.map(t=>[t.label,t.value])),wH=new Map(Ip.map(t=>[$.languages[t.value],t.value])),No=new Map(Object.keys($.languages).flatMap(t=>{const e=wH.get($.languages[t]);return e===void 0?[]:[[t,e]]})),Bj=new Map(Ip.map(t=>[t.value,[]]));for(const[t,e]of No)Bj.get(e).push(t);const pw=[{label:"Plain text",value:"plain",aliases:[]},...[...Bj].map(([t,e])=>({label:ah.get(t),value:t,aliases:e}))],SH=new Map([...No].map(([t,e])=>[t,ah.get(e)]));function CH(t){const e=Nn(),[n,r]=C.useState(()=>di(t.schema,Object.fromEntries(Object.keys(t.schema.fields).map(c=>[c,t.element[c]])))),[i,s]=C.useState(!1),o=C.useMemo(()=>Ni(t.schema,r,()=>{}),[t.schema])(n);let{dismiss:l}=fl();const a=Be(et);return h.jsx(nn,{size:"small",children:h.jsxs("form",{style:{display:"contents"},onSubmit:c=>{if(c.target===c.currentTarget&&(c.preventDefault(),s(!0),Jr(t.schema,n,void 0))){l();const u=Ee.findPath(e,t.element);console.log(n),L.setNodes(e,n,{at:u})}},children:[h.jsxs(nt,{children:[t.nodeLabel," details"]}),h.jsx(gn,{children:h.jsx(ji,{forceValidation:i,autoFocus:!0,...o})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:l,children:a.format("cancel")}),h.jsx(Re,{prominence:"high",type:"submit",children:a.format("save")})]})]})})}function zj(t){const e=Be(et);return h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:t.onPress,children:h.jsx(X,{src:Hu})}),h.jsx(he,{children:e.format("edit")})]})}function Vj(t){const e=Nn();return h.jsx(dt,{onDismiss:()=>{t.onDismiss(),$0(e)},children:t.isOpen&&h.jsx(CH,{element:t.element,nodeLabel:t.nodeLabel,schema:t.schema})})}function EH(){const{editor:t,code:{isDisabled:e,isSelected:n}}=Zr();return C.useMemo(()=>h.jsx(ae,{isSelected:n,isDisabled:e,prominence:"low",onPress:()=>{n?L.unwrapNodes(t,{match:r=>r.type==="code"}):L.wrapNodes(t,{type:"code",children:[{text:""}]}),Ee.focus(t)},children:h.jsx(X,{src:Rh})}),[e,n,t])}const IH=h.jsxs(fe,{children:[h.jsx(EH,{}),h.jsxs(he,{children:[h.jsx(Y,{children:"Code block"}),h.jsx(Vn,{children:"```"})]})]});function AH({attributes:t,children:e,element:n}){var r;const i=Nn(),s=C.useRef(null),[o,l]=C.useState(n.language?(r=SH.get(n.language))!==null&&r!==void 0?r:n.language:"Plain text"),[a,c]=C.useState(!1),{documentFeatures:u}=Xr(),d=u.formatting.blockTypes.code&&Object.keys(u.formatting.blockTypes.code.schema.fields).length?u.formatting.blockTypes.code.schema:void 0;return h.jsxs(h.Fragment,{children:[h.jsx(c1,{children:h.jsxs(yl,{element:n,children:[h.jsx("pre",{spellCheck:"false",ref:s,children:h.jsx("code",{...t,children:e})}),h.jsx(bl,{children:h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsx(Tu,{"aria-label":"Language",width:"scale.2000",allowsCustomValue:!0,inputValue:o,onInputChange:l,onBlur:()=>{const f=Ee.findPath(i,n),p=No.get(o);if(p!==void 0){if(p==="plain"){L.unsetNodes(i,"language",{at:f});return}l(ah.get(p)),L.setNodes(i,{language:p},{at:f});return}const g=hw.get(o);if(g!==void 0){if(g==="plain"){L.unsetNodes(i,"language",{at:f});return}L.setNodes(i,{language:g},{at:f});return}if(o===""){L.unsetNodes(i,"language",{at:f}),l("Plain text");return}o!==n.language&&L.setNodes(i,{language:o},{at:f})},onSelectionChange:f=>{const p=Ee.findPath(i,n);if(No.has(o)&&(f=No.get(o)),f===null)o===""?L.unsetNodes(i,"language",{at:p}):L.setNodes(i,{language:o},{at:p});else if(typeof f=="string"){if(f==="plain"){L.unsetNodes(i,"language",{at:p}),l("Plain text");return}L.setNodes(i,{language:f},{at:p});const g=ah.get(f);g&&l(g)}},selectedKey:n.language?No.get(n.language):"plain",items:C.useMemo(()=>o==="Plain text"||hw.has(o)?pw:fp(pw,o,{keys:["label","value","aliases"]}),[o]),children:f=>h.jsx(Je,{children:f.label},f.value)}),h.jsx(Ep,{}),d!==void 0&&h.jsx(zj,{onPress:()=>c(!0)}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{L.removeNodes(i,{at:Ee.findPath(i,n)})},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})})]})}),d!==void 0&&h.jsx(Vj,{element:n,isOpen:a,nodeLabel:"Code block",schema:d,onDismiss:()=>{c(!1)}})]})}function mu(t,e){const n=[...e];for(;n.length;){const r=n.shift();t=t[r]}return t}function Jd(t,e,n,r=[]){if(t.kind==="form"||t.kind==="child"){n(t,e,r);return}if(t.kind==="object"){for(const[i,s]of Object.entries(t.fields))Jd(s,e[i],n,[...r,i]);n(t,e,r);return}if(t.kind==="array"){for(const[i,s]of e.entries())Jd(t.element,s,n,r.concat(i));return n(t,e,r)}if(t.kind==="conditional"){const i=e.discriminant;n(t,i,r.concat("discriminant")),Jd(t.values[i.toString()],e.value,n,r.concat("value")),n(t,e,r);return}rn(t)}function Os(t,e,n,r=[]){if(t.kind==="form"||t.kind==="child")return n[t.kind]?n[t.kind](t,e,r):e;if(t.kind==="object"){const i=Object.fromEntries(Object.entries(t.fields).map(([s,o])=>[s,Os(o,e[s],n,[...r,s])]));return n.object?n[t.kind](t,i,r):i}if(t.kind==="array"){const i=e.map((s,o)=>Os(t.element,s,n,r.concat(o)));return n.array?n[t.kind](t,i,r):i}if(t.kind==="conditional"){const i=Os(t.discriminant,e.discriminant,n,r.concat("discriminant")),s=Os(t.values[i.toString()],e.value,n,r.concat("value")),o={discriminant:i,value:s};return n.conditional?n[t.kind](t,o,r):o}rn(t)}function Zd(t,e,n,r){if(r.length===0)return n;const[i,...s]=r;if(t.kind==="object")return{...e,[i]:Zd(t.fields[i],e[i],n,s)};if(t.kind==="conditional"){const o=e;return Ue(i==="value"),{discriminant:o.discriminant,value:Zd(t.values[i],o.value,n,s)}}if(t.kind==="array"){const o=e,l=[...o];return vl(l,an(o)),l[i]=Zd(t.element,l[i],n,s),l}Ue(t.kind!=="form"&&t.kind!=="child"),rn(t)}function TH(t,e,n,r,i,s,o){V.withoutNormalizing(t,()=>{const l=new Map,a={kind:"object",fields:e.schema},c=Os(a,r,{child(x,v,w){if(!o&&x.options.kind==="block"&&v){try{if(mu(n,w)===v)return null}catch{}l.set(JSON.stringify(w),v.map(z0))}return null}});s({props:c});const u=Xd(c,n,a,[],[],[]),d=()=>We.get(t,i),f=d();if(u.length===0){const x=f.children.map((v,w)=>w).reverse();for(const v of x)L.removeNodes(t,{at:[...i,v]});L.insertNodes(t,{type:"component-inline-prop",propPath:void 0,children:[{text:""}]},{at:[...i,0]});return}const p=new Map;for(const[x,v]of f.children.entries())Ue(v.type==="component-block-prop"||v.type==="component-inline-prop"),p.set(v.propPath===void 0?void 0:JSON.stringify(v.propPath),x);const g=new Set(u);for(const x of u){if(x.prevPath===void 0)continue;const v=JSON.stringify(x.prevPath),w=p.get(v);if(w!==void 0){const S=f.children[w];Ue(S.propPath!==void 0),nl(x.path,S.propPath)||L.setNodes(t,{propPath:x.path},{at:[...i,w]}),g.delete(x),p.delete(v)}}let m=d().children.length;for(const x of g)L.insertNodes(t,{type:`component-${x.options.kind}-prop`,propPath:x.path,children:[x.options.kind==="block"?{type:"paragraph",children:[{text:""}]}:{text:""}]},{at:[...i,m]}),m++;const b=[];for(const[,x]of p)b.push(V.pathRef(t,[...i,x]));for(const x of b){const v=x.unref();Ue(v!==null),L.removeNodes(t,{at:v})}const y=new Map;for(const[x,v]of u.entries())y.set(JSON.stringify(v.path),x);e:for(;;){for(const[x,v]of d().children.entries()){Ue(v.type==="component-block-prop"||v.type==="component-inline-prop");const w=y.get(JSON.stringify(v.propPath));if(Ue(w!==void 0),x!==w){L.moveNodes(t,{at:[...i,x],to:[...i,w]});continue e}}break}for(const[x,v]of l){const w=y.get(x);w!==void 0&&(L.removeNodes(t,{at:[...i,w]}),L.insertNodes(t,{type:"component-block-prop",propPath:JSON.parse(x),children:v},{at:[...i,w]}))}})}function Xd(t,e,n,r,i,s){switch(n.kind){case"form":return[];case"child":return[{path:r,prevPath:i,options:n.options}];case"conditional":const o=t.discriminant===e.discriminant;return Xd(t.value,o?e.value:lt(n.values[t.discriminant]),n.values[t.discriminant],r.concat("value"),o?void 0:i?.concat("value"),o?void 0:s?.concat("value"));case"object":{const l=[];for(const a of Object.keys(n.fields))l.push(...Xd(t[a],e[a],n.fields[a],r.concat(a),i?.concat(a),s?.concat(a)));return l}case"array":{const l=[],a=an(e),c=an(t);for(const[u,d]of t.entries()){const f=c[u],p=a.indexOf(f);let g;p===-1?g=lt(n.element):g=e[p],l.push(...Xd(d,g,n.element,r.concat(u),p===-1?void 0:i?.concat(p),p===-1?void 0:s?.concat(f)))}return l}}}const Uj=wi.createContext({});function NH({path:t}){const n=C.useContext(Uj)[JSON.stringify(t)];return n===void 0?null:n}function jH({componentBlock:t,element:e,onChange:n,children:r,onRemove:i}){const o=C.useMemo(()=>Ni({kind:"object",fields:t.schema},d=>n(d,!0),d=>h.jsx(NH,{path:d})),[n,t])(e.props),l={};let a,c=[];r.forEach(d=>{const f=d.props.children.props.element.propPath;if(f===void 0)a=d;else{const p=B0(f,e.props,t.schema);if(p?.kind==="child"&&p.options.kind==="block"&&p.options.editIn==="modal"){c.push(d);return}l[JSON.stringify(_H(f,e.props))]=d}});const u=t.preview;return h.jsxs(Uj.Provider,{value:l,children:[C.useMemo(()=>h.jsx(u,{onRemove:i,...o}),[u,i,o]),h.jsxs("span",{className:W({caretColor:"transparent","& ::selection":{backgroundColor:"transparent"},overflow:"hidden",width:1,height:1,position:"absolute"}),children:[a,c]})]})}function _H(t,e){return t.map(n=>{var r;if(typeof n=="string"){var i;return e=(i=e)===null||i===void 0?void 0:i[n],n}if(!Array.isArray(e))return e=void 0,"";const s=an(e);return e=(r=e)===null||r===void 0?void 0:r[n],s[n]})}function OH(t){var e;const n=$S(),r=C.useMemo(()=>Jr({kind:"object",fields:t.componentBlock.schema},t.elementProps,void 0),[t.componentBlock,t.elementProps]),[i,s]=C.useState(!1),o=C.useCallback(()=>{s(!1)},[]),l=C.useCallback(()=>{s(!0)},[]),a=(e=t.componentBlock.toolbar)!==null&&e!==void 0?e:DH;return h.jsx(RH,{selected:n,...t.attributes,children:h.jsxs(te,{gap:"medium",direction:"column",children:[h.jsx(U0,{children:h.jsx(Y,{casing:"uppercase",color:"neutralSecondary",weight:"medium",size:"small",children:t.componentBlock.label})}),h.jsxs(C.Fragment,{children:[t.renderedBlock,h.jsx(a,{isValid:r,onRemove:t.onRemove,props:t.previewProps,onShowEditMode:l}),h.jsx(dt,{onDismiss:()=>o(),children:(()=>{if(i)return h.jsxs(nn,{children:[h.jsxs(nt,{children:["Edit ",t.componentBlock.label]}),h.jsx(MH,{props:t.previewProps,onClose:o})]})})()})]})]})})}const RH=C.forwardRef(function({children:e,selected:n,...r},i){return h.jsx("div",{...r,ref:i,className:W(up,{position:"relative",paddingInlineStart:j.size.space.xlarge,marginBottom:j.size.space.xlarge,"::before":{display:"block",content:'" "',backgroundColor:n?j.color.alias.borderSelected:j.color.alias.borderIdle,borderRadius:4,width:4,position:"absolute",left:0,top:0,bottom:0,zIndex:1}}),children:e})});function DH({onShowEditMode:t,onRemove:e,isValid:n}){const r=Be(et);return h.jsx(U0,{children:h.jsxs(te,{direction:"column",gap:"medium",children:[h.jsxs(te,{alignItems:"center",gap:"regular",UNSAFE_style:{userSelect:"none"},children:[h.jsx(ae,{onPress:()=>t(),children:r.format("edit")}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:e,children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:r.format("delete")})]})]}),!n&&h.jsx(Eu,{children:"Contains invalid fields. Please edit."})]})})}function MH({onClose:t,props:e}){const n=Be(et),r=C.useId(),[i,s]=C.useState(!1),[o,l]=C.useState(()=>oa(e)),a=C.useMemo(()=>Ni(e.schema,l,()=>{}),[e.schema])(o);return h.jsxs(h.Fragment,{children:[h.jsx(gn,{children:h.jsx(te,{id:r,elementType:"form",onSubmit:c=>{c.target===c.currentTarget&&(c.preventDefault(),Jr(e.schema,o,void 0)?(console.log(zs(o,e.schema)),cl(o,e),t()):s(!0))},direction:"column",gap:"xxlarge",children:h.jsx(ji,{...a,forceValidation:i})})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:t,children:n.format("cancel")}),h.jsx(Re,{form:r,prominence:"high",type:"submit",children:"Done"})]})]})}function FH(t){var e;const n=t.componentBlock.toolbar!==null,r=(e=t.componentBlock.toolbar)!==null&&e!==void 0?e:PH;return h.jsx("div",{...t.attributes,className:up,children:n?h.jsxs(yl,{element:t.element,children:[h.jsx("div",{children:t.renderedBlock}),h.jsx(bl,{children:h.jsx(r,{onRemove:t.onRemove,props:t.previewProps})})]}):h.jsx("div",{children:t.renderedBlock})})}function PH({onRemove:t}){return h.jsxs(fe,{children:[h.jsx(ae,{onPress:t,margin:"regular",children:h.jsx(X,{src:l5})}),h.jsx(he,{tone:"critical",children:"Remove"})]})}function Qd(t,e,n){switch(e.kind){case"form":return[];case"child":return[{path:n,options:e.options}];case"conditional":return Qd(t.value,e.values[t.discriminant],n.concat("value"));case"object":{const r=[];return Object.keys(e.fields).forEach(i=>{r.push(...Qd(t[i],e.fields[i],n.concat(i)))}),r}case"array":{const r=[];return t.forEach((i,s)=>{r.push(...Qd(i,e.element,n.concat(s)))}),r}}}function qy(t,e){const n=Qd(t,{kind:"object",fields:e},[]);return n.length?n:[{path:void 0,options:{kind:"inline",placeholder:""}}]}function gw(t){if(t.selection){const e=V.above(t,{match:n=>Ge(n)&&n.type!=="paragraph"});if(e&&(e[0].type==="component-block-prop"||e[0].type==="component-inline-prop"))return{isInside:!0,componentBlock:V.parent(t,e[1]),prop:e}}return{isInside:!1}}const mw=new WeakMap;function qj([t,e],n,r){let i=mw.get(r);if(i||(i=new WeakSet,mw.set(r,i)),i.has(t))return!1;let s=!1;if(r.inlineMarks!=="inherit"&&Bt.isText(t)&&(s=oT([t,e],n,r.inlineMarks,r.softBreaks)),Rt.isElement(t)){let o=t.children.map((l,a)=>qj([l,[...e,a]],n,r)).some(l=>l);r.kind==="block"?t.type==="component-block"?r.componentBlocks||(L.unwrapNodes(n,{at:e}),s=!0):s=aT([t,e],n,r.documentFeatures)||o:s=lT([t,e],n,r.documentFeatures.links)}return s===!1&&i.add(t),s}function $H(t){const e=new Set([t]);for(const n of e)if(n.kind!=="form"){if(n.kind==="child")return!0;if(n.kind==="array")e.add(n.element);else if(n.kind==="object")for(const r of Object.values(n.fields))e.add(r);else if(n.kind==="conditional")for(const r of Object.values(n.values))e.add(r);else rn(n)}return!1}function Hj(t){const e=new Set([t]);let n=!1;for(const r of e)if(r.kind!=="form")if(r.kind==="child"){if(n)return!1;n=!0}else if(r.kind==="array"){if($H(r.element))return!1}else if(r.kind==="object")for(const i of Object.values(r.fields))e.add(i);else if(r.kind==="conditional")for(const i of Object.values(r.values))e.add(i);else rn(r);return n}function LH(t,e){const n=[];return Jd(t,e,(r,i,s)=>{r.kind==="array"&&Hj(r.element)&&n.push([s,r])}),n}function BH(t){const e=t.children[0];return t.children.length===1&&(t.type==="component-inline-prop"&&e.type===void 0&&e.text===""||t.type==="component-block-prop"&&e.type==="paragraph"&&e.children.length===1&&e.children[0].type===void 0&&e.children[0].text==="")}function zH(t,e,n){const r=OI(l=>XA(e,l)),{normalizeNode:i,deleteBackward:s,insertBreak:o}=n;return n.deleteBackward=l=>{if(n.selection){const a=gw(n);if(a.isInside&&Dt.isCollapsed(n.selection)&&V.isStart(n,n.selection.anchor,a.prop[1])&&a.prop[1][a.prop[1].length-1]===0){L.unwrapNodes(n,{at:a.componentBlock[1]});return}}s(l)},n.insertBreak=()=>{const l=gw(n);if(n.selection&&l.isInside){const{prop:[a,c],componentBlock:[u,d]}=l,f=c[c.length-1]===u.children.length-1;if(a.type==="component-block-prop"){const[[p,g]]=V.nodes(n,{match:b=>b.type==="paragraph"}),m=g[g.length-1]===a.children.length-1;if(We.string(p)===""&&m){f?L.moveNodes(n,{at:g,to:De.next(l.componentBlock[1])}):(L.move(n,{distance:1,unit:"line"}),L.removeNodes(n,{at:g}));return}}if(a.type==="component-inline-prop"){V.withoutNormalizing(n,()=>{const p=t[u.component];if(a.propPath!==void 0&&p!==void 0){const m={kind:"object",fields:p.schema},b=tz(m,a.propPath,u.props),y=[...b].reverse().findIndex(x=>x.kind==="array");if(y!==-1){const x=b.length-1-y,v=b[x];Ue(v.kind==="array");const w=mu(u.props,a.propPath.slice(0,x));if(Hj(v.element)){We.string(a)===""&&w.length-1===a.propPath[x]?(L.removeNodes(n,{at:c}),f?(L.insertNodes(n,{type:"paragraph",children:[{text:""}]},{at:De.next(d)}),L.select(n,De.next(d))):L.move(n,{distance:1,unit:"line"})):o();return}}}L.splitNodes(n,{always:!0});const g=De.next(c);f?L.moveNodes(n,{at:g,to:De.next(d)}):(ou(n,g,[...De.next(g),0]),L.removeNodes(n,{at:g}))});return}}o()},n.normalizeNode=l=>{const[a,c]=l;if(a.type==="component-inline-prop"&&!a.propPath&&(a.children.length!==1||!Bt.isText(a.children[0])||a.children[0].text!=="")){L.removeNodes(n,{at:c});return}if(a.type==="component-block"){const u=t[a.component];if(u){const d={kind:"object",fields:u.schema},f=ef(a.props,d);if(f!==a.props){L.setNodes(n,{props:f},{at:c});return}for(const[b,y]of LH(d,a.props)){if(a.children.length===1&&a.children[0].type==="component-inline-prop"&&a.children[0].propPath===void 0)break;const x=[];for(const[I,A]of a.children.entries())if((A.type==="component-block-prop"||A.type==="component-inline-prop")&&A.propPath!==void 0){const O=A.propPath.concat();for(;O.length&&typeof O.pop()!="number";);nl(b,O)&&x.push([I,A])}const v=mu(a.props,b),w=an(v),S=new Set(w),k=new Set,E=[],T=[],N=()=>{let I=al();for(;S.has(I);)I=al();return I};for(const[,I]of x){const A=I.propPath[b.length];Ue(typeof A=="number"),v.length<=A||k.has(A)&&BH(I)?(E.push(lt(y.element)),T.push(N())):(k.add(A),E.push(v[A]),T.push(k.has(A)?N():w[A]))}if(vl(E,T),!nl(v,E)){const I=Zd(d,a.props,E,b);L.setNodes(n,{props:I},{at:c});for(const[A,[O,_]]of x.entries()){const F=[..._.propPath];F[b.length]=A,L.setNodes(n,{propPath:F},{at:[...c,O]})}return}}const p=new Map(qy(a.props,u.schema).map(b=>[JSON.stringify(b.path),b.options.kind]));if(a.children.forEach(b=>{Ue(b.type==="component-block-prop"||b.type==="component-inline-prop"),p.delete(JSON.stringify(b.propPath))}),p.size){L.insertNodes(n,[...p].map(([b,y])=>({type:`component-${y}-prop`,propPath:b&&JSON.parse(b),children:[{text:""}]})),{at:[...c,a.children.length]});return}const g=new Set,m={};qy(a.props,t[a.component].schema).forEach((b,y)=>{m[JSON.stringify(b.path)]={options:b.options,index:y}});for(const[b,y]of a.children.entries()){if(y.type!=="component-inline-prop"&&y.type!=="component-block-prop")continue;const x=[...c,b],v=JSON.stringify(y.propPath);if(m[v]===void 0){L.removeNodes(n,{at:x});return}if(g.has(v)){L.removeNodes(n,{at:x});return}g.add(v);const w=m[v],S=w.index;if(b!==S){L.moveNodes(n,{at:x,to:[...c,S]});return}const k=`component-${w.options.kind}-prop`;if(y.type!==k){L.setNodes(n,{type:k},{at:x});return}const E=r(w.options);if(qj([y,x],n,E))return}}}i(l)},n}function ef(t,e){if(e.kind==="child"||e.kind==="form")return t;if(e.kind==="conditional"){const n=t,r=ef(n.value,e.values[n.discriminant.toString()]);return r===n.value?t:{discriminant:n.discriminant,value:r}}if(e.kind==="array"){const n=t,r=n.map(i=>ef(i,e.element));return nl(n,r)?t:r}if(e.kind==="object"){const n=t;let r=!1;const i={};for(const[s,o]of Object.entries(e.fields)){const l=n[s];if(l===void 0){r=!0,i[s]=lt(o);continue}const a=ef(l,o);a!==l&&(r=!0),i[s]=a}return r?i:t}rn(e)}function VH(t){return h.jsx("span",{...t.attributes,children:t.children})}function UH(t,e){const n=lt({kind:"object",fields:e.schema});return{type:"component-block",component:t,props:n,children:qy(n,e.schema).map(r=>({type:`component-${r.options.kind}-prop`,propPath:r.path,children:[r.options.kind==="block"?{type:"paragraph",children:[{text:""}]}:{text:""}]}))}}function p1(t,e,n){const r=UH(n,e[n]);pr(t,r);const i=V.above(t,{match:s=>s.type==="component-block"});if(i){const s=V.start(t,i[1]);L.setSelection(t,{anchor:s,focus:s})}}const qH=({attributes:t,children:e,element:n})=>{const r=Nn(),[i,s]=L0(r,n),l=Xr().componentBlocks[i.component],a=C.useMemo(()=>{if(!l)return;const m=new Map;for(const b of i.children)b.type==="component-block-prop"&&b.propPath&&m.set(JSON.stringify(b.propPath),b.children);return m.size?Os({kind:"object",fields:l.schema},i.props,{child(b,y,x){if(b.options.kind==="block"){const v=JSON.stringify(x),w=m.get(v);if(w)return w.map(z0)}return y}}):i.props},[l,i]),c=C.useRef({__elementToGetPath:n,currentElement:i,propsWithChildFields:a});C.useEffect(()=>{c.current={__elementToGetPath:n,currentElement:i,propsWithChildFields:a}});const u=Ln(()=>{const m=Ee.findPath(r,n);L.removeNodes(r,{at:m})}),d=C.useCallback((m,b)=>{const y=c.current.propsWithChildFields;TH(r,l,y,m(y),Ee.findPath(r,c.current.__elementToGetPath),s,b)},[s,l,r]),f=C.useMemo(()=>l?Ni({kind:"object",fields:l.schema},m=>d(m,!1),()=>{}):()=>{throw new Error("expected component block to exist when called")},[l,d]);if(!l)return h.jsxs("div",{style:{border:"red 4px solid",padding:8},children:[h.jsx("pre",{contentEditable:!1,style:{userSelect:"none"},children:`The block "${i.component}" no longer exists.

Props:

${JSON.stringify(i.props,null,2)}

Content:`}),e]});const p=f(a),g=h.jsx(jH,{children:e,componentBlock:l,element:i,onChange:d,onRemove:u});return l.chromeless?h.jsx(FH,{element:n,attributes:t,renderedBlock:g,componentBlock:l,onRemove:u,previewProps:p}):h.jsx(OH,{attributes:t,children:e,componentBlock:l,onRemove:u,previewProps:p,renderedBlock:g,elementProps:i.props})};function Wj(t){pr(t,{type:"divider",children:[{text:""}]}),V.insertNode(t,{type:"paragraph",children:[{text:""}]})}const HH=()=>{const{editor:t,dividers:{isDisabled:e}}=Zr();return C.useMemo(()=>h.jsx(ae,{prominence:"low",isDisabled:e,onPress:()=>{Wj(t)},children:h.jsx(X,{src:tC})}),[t,e])},WH=h.jsxs(fe,{delay:200,children:[h.jsx(HH,{}),h.jsxs(he,{children:[h.jsx(Y,{children:"Divider"}),h.jsx(Vn,{children:"---"})]})]});function KH({attributes:t,children:e}){const n=$S();return h.jsxs("div",{...t,style:{caretColor:"transparent"},children:[h.jsx("hr",{style:{backgroundColor:n?j.color.alias.borderSelected:j.color.alias.borderIdle}}),e]})}const GH=({attributes:t,children:e,element:n})=>{const r=Nn(),i=n.layout,s=Xr().documentFeatures.layouts,o=s.findIndex(l=>l.toString()===i.toString());return h.jsx("div",{className:up,...t,children:h.jsxs(yl,{element:n,children:[h.jsx("div",{className:W({columnGap:j.size.space.regular,display:"grid"}),style:{gridTemplateColumns:i.map(l=>`${l}fr`).join(" ")},children:e}),h.jsx(bl,{children:h.jsxs(te,{padding:"regular",gap:"regular",children:[h.jsx(Ia,{selectionMode:"single",prominence:"low",density:"compact",onAction:l=>{const a=Ee.findPath(r,n),c=s[l];L.setNodes(r,{type:"layout",layout:c},{at:a}),Ee.focus(r)},selectedKeys:o!==-1?[o.toString()]:[],children:s.map((l,a)=>h.jsx(Je,{children:JH(l)},a))}),h.jsx(Ep,{}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{const l=Ee.findPath(r,n);L.removeNodes(r,{at:l})},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})})]})})},YH=({attributes:t,children:e})=>h.jsx("div",{className:W({borderColor:j.color.border.neutral,borderRadius:j.size.radius.regular,borderStyle:"dashed",borderWidth:j.size.border.regular,padding:j.size.space.medium}),...t,children:e}),Kj=(t,e)=>{pr(t,[{type:"layout",layout:e,children:[{type:"layout-area",children:[{type:"paragraph",children:[{text:""}]}]}]}]);const n=V.above(t,{match:r=>r.type==="layout"});n&&L.select(t,[...n[1],0])};function JH(t){return h.jsx("div",{role:"img",className:W({display:"grid",gridTemplateColumns:t.map(r=>`${r}fr`).join(" "),gap:2,width:16,height:16}),children:t.map((r,i)=>h.jsx("div",{className:W({backgroundColor:"currentcolor",borderRadius:1})},i))})}const ZH=h.jsx(X,{src:a5}),XH=({layouts:t})=>{const{editor:e,layouts:{isSelected:n}}=Zr();return C.useMemo(()=>h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",isSelected:n,onPress:()=>{ii(e,"layout")?L.unwrapNodes(e,{match:r=>r.type==="layout"}):Kj(e,t[0]),Ee.focus(e)},children:ZH}),h.jsx(he,{children:"Layouts"})]}),[e,n,t])},QH=(t,e)=>{const n=Pj(t),r=ii(t,e)&&(n==="none"||n===e);V.withoutNormalizing(t,()=>{L.unwrapNodes(t,{match:Vi,split:!0,mode:r?"all":"lowest"}),r||L.wrapNodes(t,{type:e,children:[]},{match:i=>i.type!=="list-item-content"&&Ge(i)})})};function eW(t){const{editor:e,lists:n}=Zr();return C.useMemo(()=>{const r=[];n.ordered.isDisabled&&r.push("ordered"),n.unordered.isDisabled&&r.push("unordered");const i=[];return n.ordered.isSelected&&i.push("ordered"),n.unordered.isSelected&&i.push("unordered"),h.jsx(Ia,{flexShrink:0,"aria-label":"Lists",selectionMode:"single",buttonLabelBehavior:"hide",density:"compact",prominence:"low",summaryIcon:h.jsx(X,{src:wf}),selectedKeys:i,disabledKeys:r,onAction:s=>{const o=`${s}-list`;QH(e,o),Ee.focus(e)},children:[t.lists.unordered&&h.jsxs(Je,{textValue:"Bullet List (- )",children:[h.jsx(X,{src:wf}),h.jsx(Y,{children:"Bullet List"}),h.jsx(Vn,{children:"-⎵"})]},"unordered"),t.lists.ordered&&h.jsxs(Je,{textValue:"Numbered List (1.)",children:[h.jsx(X,{src:Lb}),h.jsx(Y,{children:"Numbered List"}),h.jsx(Vn,{children:"1.⎵"})]},"ordered")].filter(s=>s!==!1)})},[e,n.ordered.isDisabled,n.ordered.isSelected,n.unordered.isDisabled,n.unordered.isSelected,t.lists.ordered,t.lists.unordered])}function tW(t){const e=V.above(t,{match:Ge});if(!e||e[0].type!=="list-item-content")return!1;const n=De.parent(e[1]);if(n[n.length-1]===0)return!1;const r=De.previous(n),i=We.get(t,r);if(i.children.length!==1)return L.moveNodes(t,{at:n,to:[...r,i.children.length-1,i.children[i.children.length-1].children.length]}),!0;const s=V.parent(t,De.parent(e[1]))[0].type;return V.withoutNormalizing(t,()=>{L.wrapNodes(t,{type:s,children:[]},{at:n}),L.moveNodes(t,{to:[...r,i.children.length],at:n})}),!0}function nW(t){const e=V.above(t,{match:Ge});return e&&e[0].type==="list-item-content"?(L.unwrapNodes(t,{match:Vi,split:!0}),!0):!1}function Ap(t){return new Promise(e=>{const n=document.createElement("input");n.type="file",n.style.display="none",n.accept=t,n.onchange=()=>{var r;const i=(r=n.files)===null||r===void 0?void 0:r[0];i&&e(i)},document.body.appendChild(n),n.click()})}async function Gj(t){const e=await Ap(t);if(e)return{content:new Uint8Array(await e.arrayBuffer()),filename:e.name}}function Tp(){return Gj("image/*")}function g1(t,e){const n=q(4),[r,i]=C.useState(null);let s,o;return n[0]!==t||n[1]!==e?(s=()=>{if(t){const l=URL.createObjectURL(new Blob([t],{type:e}));return i(l),()=>URL.revokeObjectURL(l)}else i(null)},o=[e,t],n[0]=t,n[1]=e,n[2]=s,n[3]=o):(s=n[2],o=n[3]),C.useEffect(s,o),r}function rW(t){var e;const n=q(36),{value:r}=t;let i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>!0,n[0]=i):i=n[0];const[s,o]=C.useReducer(i,!1),l=l2(),a=g1(r===null?null:r.data,r?.extension==="svg"?"image/svg+xml":void 0),c=C.useId(),u=C.useId(),d=t.description?u:void 0,f=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let p;n[1]!==c||n[2]!==f||n[3]!==t.label?(p=h.jsx(Cu,{id:c,elementType:"span",isRequired:f,children:t.label}),n[1]=c,n[2]=f,n[3]=t.label,n[4]=p):p=n[4];let g;n[5]!==t.description||n[6]!==u?(g=t.description&&h.jsx(Ah,{id:u,children:t.description}),n[5]=t.description,n[6]=u,n[7]=g):g=n[7];let m;n[8]!==t?(m=h.jsx(ae,{onPress:async()=>{const E=await Tp();if(E){var T;const N=(T=E.filename.match(/\.([^.]+$)/))===null||T===void 0?void 0:T[1];N&&t.onChange({data:E.content,extension:N,filename:t.transformFilename?t.transformFilename(E.filename):E.filename})}},children:"Choose file"}),n[8]=t,n[9]=m):m=n[9];let b;n[10]!==r||n[11]!==t||n[12]!==o?(b=r!==null&&h.jsx(ae,{prominence:"low",onPress:()=>{t.onChange(null),o()},children:"Remove"}),n[10]=r,n[11]=t,n[12]=o,n[13]=b):b=n[13];let y;n[14]!==m||n[15]!==b?(y=h.jsxs(mn,{children:[m,b]}),n[14]=m,n[15]=b,n[16]=y):y=n[16];let x;n[17]!==a?(x=a&&h.jsx(zt,{alignSelf:"start",backgroundColor:"canvas",borderRadius:"regular",border:"neutral",padding:"regular",children:h.jsx("img",{src:a,alt:"",style:{display:"block",maxHeight:j.size.alias.singleLineWidth,maxWidth:"100%"}})}),n[17]=a,n[18]=x):x=n[18];let v;n[19]!==l||n[20]!==r||n[21]!==t?(v=l&&r!==null&&h.jsx(gt,{label:"Filename",onChange:E=>{t.onChange({...r,filename:E})},value:r.filename}),n[19]=l,n[20]=r,n[21]=t,n[22]=v):v=n[22];let w;if(n[23]!==t||n[24]!==s||n[25]!==r){var S;w=(t.forceValidation||s)&&((S=t.validation)===null||S===void 0?void 0:S.isRequired)&&r===null&&h.jsxs(Eu,{children:[t.label," is required"]}),n[23]=t,n[24]=s,n[25]=r,n[26]=w}else w=n[26];let k;return n[27]!==d||n[28]!==c||n[29]!==p||n[30]!==g||n[31]!==y||n[32]!==x||n[33]!==v||n[34]!==w?(k=h.jsxs(te,{"aria-describedby":d,"aria-labelledby":c,direction:"column",gap:"medium",role:"group",children:[p,g,y,x,v,w]}),n[27]=d,n[28]=c,n[29]=p,n[30]=g,n[31]=y,n[32]=x,n[33]=v,n[34]=w,n[35]=k):k=n[35],k}const iW=({attributes:t,children:e,element:n})=>{const[r,i]=C.useState(!1),[s,o]=C.useState(),l=Be(et),a=Nn(),[c,u]=L0(a,n),d=g1(c.src.content,c.src.filename.endsWith(".svg")?"image/svg+xml":void 0),p=V0()===n;return h.jsxs(h.Fragment,{children:[h.jsxs(c1,{attributes:t,children:[e,h.jsxs(yl,{element:n,children:[h.jsx("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:h.jsx(U0,{children:h.jsx("img",{...t,src:d,alt:c.alt,"data-selected":p,onLoad:g=>{const m=g.target;o(m.width/m.height)},className:W({boxSizing:"border-box",borderRadius:j.size.radius.regular,display:"block",maxHeight:j.size.scale[3600],maxWidth:"100%",transition:vr("box-shadow"),"&[data-selected=true]":{boxShadow:`0 0 0 ${j.size.border.regular} ${j.color.alias.borderSelected}`}})})})}),h.jsx(bl,{hideArrow:!0,children:h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsxs(te,{gap:"small",children:[h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>i(!0),children:h.jsx(X,{src:Hu})}),h.jsx(he,{children:l.format("edit")})]}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:async()=>{const g=await Tp();g&&u({src:g})},children:h.jsx(X,{src:vT})}),h.jsx(he,{children:"Choose file"})]})]}),h.jsx(Ds,{orientation:"vertical"}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{L.removeNodes(a,{at:Ee.findPath(a,n)})},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})})]},s)]}),h.jsx(dt,{onDismiss:()=>{i(!1),$0(a)},children:r&&h.jsx(sW,{alt:c.alt,title:c.title,filename:c.src.filename,onSubmit:({alt:g,filename:m,title:b})=>{u({alt:g,title:b,src:{content:c.src.content,filename:m}})}})})]})};function sW(t){const{images:e}=Xr().documentFeatures;if(!e)throw new Error("unexpected image rendered when images are disabled");const n=C.useMemo(()=>en(e.schema),[e]),[r,i]=C.useState({alt:t.alt,title:t.title}),s=C.useMemo(()=>Ni(n,i,()=>{}),[n])(r),[o,l]=oW(t.filename),[a,c]=C.useState(!1);let[u,d]=C.useState(o),[f,p]=C.useState(!1),{dismiss:g}=fl(),m=Be(et);return h.jsx(nn,{size:"small",children:h.jsxs("form",{style:{display:"contents"},onSubmit:b=>{b.target===b.currentTarget&&(b.preventDefault(),c(!0),u&&Jr(n,r,void 0)&&(g(),t.onSubmit({alt:r.alt,title:r.title,filename:[u,l].join(".")})))},children:[h.jsx(nt,{children:"Image details"}),h.jsx(gn,{children:h.jsxs(te,{gap:"large",direction:"column",children:[h.jsx(gt,{label:"File name",onChange:d,onBlur:()=>p(!0),value:u,isRequired:!0,errorMessage:(f||a)&&!u?"Please provide a file name.":void 0,endElement:l?h.jsx(te,{alignItems:"center",justifyContent:"center",paddingEnd:"regular",children:h.jsxs(Y,{color:"neutralTertiary",children:[".",l]})}):null}),h.jsx(ji,{forceValidation:a,autoFocus:!0,...s})]})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:g,children:m.format("cancel")}),h.jsx(Re,{prominence:"high",type:"submit",children:m.format("save")})]})]})})}function oW(t){const e=t.lastIndexOf(".");return e===-1?[t,""]:[t.substring(0,e),t.substring(e+1)]}let lW=h.jsx(X,{src:Iu});function aW(){const t=Nn();return h.jsx(h.Fragment,{children:h.jsx(ae,{prominence:"low",onPress:async()=>{const e=await Tp();e&&L.insertNodes(t,{type:"image",src:e,alt:"",title:"",children:[{text:""}]})},children:lW})})}const cW=h.jsxs(fe,{children:[h.jsx(aW,{}),h.jsx(he,{children:h.jsx(Y,{children:"Image"})})]});function uW(t){const{insertData:e}=t;return t.insertData=n=>{const r=Array.from(n.files).filter(i=>i.type.startsWith("image/"));if(r.length){Promise.all(r.map(async i=>({name:i.name,data:new Uint8Array(await i.arrayBuffer())}))).then(i=>{pr(t,{type:"image",src:{content:i[0].data,filename:i[0].name},alt:"",title:"",children:[{text:""}]})});return}e(n)},t}function yw(t,e){return{start:Math.min(t,e),end:Math.max(t,e)}}function Fl(t,e){return t?e===0?[0,0]:[1,e-1]:[0,e]}function Rc(t){var e,n,r,i;const s=(e=V.above(t,{match:Vt("table-cell"),at:(n=t.selection)===null||n===void 0?void 0:n.anchor.path}))===null||e===void 0?void 0:e[1],o=(r=V.above(t,{match:Vt("table-cell"),at:(i=t.selection)===null||i===void 0?void 0:i.focus.path}))===null||r===void 0?void 0:r[1],l=V.above(t,{match:Vt("table")});if(t.selection&&l&&Rt.isElement(l[0].children[0])&&s&&o&&De.equals(s.slice(0,-3),o.slice(0,-3))){const[a,c]=V.edges(t,t.selection);return{tablePath:l[1],table:l[0],singleCell:De.equals(s,o)?_o.equals(V.start(t,s),a)&&_o.equals(V.end(t,s),c)&&!_o.equals(a,c)?"selected":"not-selected":"many",row:yw(s[s.length-2]+s[s.length-3],o[o.length-2]+o[s.length-3]),column:yw(s[s.length-1],o[o.length-1])}}}const Xn=t=>({type:"table-cell",...t?{header:!0}:{},children:[{type:"paragraph",children:[{text:""}]}]});function Yj(t){return Bt.isText(t)?{...t}:{...t,children:t.children.map(Yj)}}function dW(t){const{deleteFragment:e,normalizeNode:n,getFragment:r,insertFragment:i,deleteBackward:s}=t;return t.insertFragment=o=>{const l=Rc(t);if(!l||o.length!==1||o[0].type!=="table"){i(o);return}const a=o[0].children.flatMap(m=>m.type==="table-head"||m.type==="table-body"?m.children:[]);if(!a.every(Vt("table-row"))){i(o);return}let{row:c,column:u,tablePath:d,table:f}=l;const p=l.table.children[l.table.children.length===1?0:1];if(a[0].type!=="table-row"||p.type!=="table-body"||p.children[0].type!=="table-row"){i(o);return}const g=f.children[0].type==="table-head";l.singleCell!=="many"&&(c={start:c.start,end:Math.min(c.start+a.length-1,p.children.length-1+(g?1:0))},u={start:u.start,end:Math.min(u.start+a[0].children.length-1,p.children[0].children.length-1)}),V.withoutNormalizing(t,()=>{for(let m=c.start;m<=c.end;m++){const b=a[(m-c.start)%a.length];for(let y=u.start;y<=u.end;y++){const x=[...Fl(g,m),y],v=We.get(f,x),w=b.children[(y-u.start)%b.children.length];if(v.type!=="table-cell"||w.type!=="table-cell")continue;const S=[...d,...x];for(const k of[...v.children.keys()].reverse())L.removeNodes(t,{at:[...S,k]});L.insertNodes(t,w.children.map(Yj),{at:[...S,0]})}}L.setSelection(t,{anchor:V.start(t,[...d,...Fl(g,c.start),u.start]),focus:V.end(t,[...d,...Fl(g,c.end),u.end])})})},t.deleteBackward=o=>{if(t.selection&&Dt.isCollapsed(t.selection)&&t.selection.anchor.offset===0){const l=V.above(t,{match:Vt("table-cell")});if(l&&l[0].children[0].type==="paragraph"&&l[0].children[0].children[0].type===void 0&&De.equals(t.selection.anchor.path,[...l[1],0,0]))return}s(o)},t.getFragment=()=>{const o=Rc(t);if(o&&o.singleCell!=="not-selected"){var l;const{table:a}=o,c=a.children[0].type==="table-head"||a.children[0].type==="table-body"?a.children[0]:void 0;if(!c)return r();const u=((l=a.children[1])===null||l===void 0?void 0:l.type)==="table-body"?a.children[1]:void 0,d=u||c,f=c.type==="table-head",p=o.row.start===0&&!!u,g=o.column.end-o.column.start+1;return[{type:"table",children:[...p?[{type:"table-head",children:[{type:"table-row",children:Array.from({length:g}).map((m,b)=>c.children[0].children[b+o.column.start])}]}]:[],{type:"table-body",children:Array.from({length:o.row.end-o.row.start+(p?0:1)}).map((m,b)=>({type:"table-row",children:Array.from({length:g}).map((y,x)=>d.children[b+o.row.start-(f&&!p?1:0)].children[x+o.column.start])}))}]}]}return r()},t.deleteFragment=o=>{if(!t.selection||Dt.isCollapsed(t.selection)){e(o);return}const l=Rc(t);if(!l||l.singleCell==="not-selected"){e(o);return}const a=l.table.children[0];if(!Rt.isElement(a)||!Rt.isElement(a.children[0])){e(o);return}const c=l.table.children.reduce((y,x)=>y+(x.type==="table-head"||x.type==="table-body"?x.children.length:0),0)-1,{row:u,column:d,tablePath:f}=l,p=u.start===0&&u.end===c,g=d.start===0&&d.end===a.children[0].children.length-1;if(p&&g){L.removeNodes(t,{at:f});return}const m=a.type==="table-head";if(g){V.withoutNormalizing(t,()=>{for(let y=u.end;y>=u.start;y--){if(m){if(y===0){L.removeNodes(t,{at:[...f,0]});continue}L.removeNodes(t,{at:[...f,1,y-1]});continue}L.removeNodes(t,{at:[...f,0,y]})}});return}if(p){V.withoutNormalizing(t,()=>{for(let v=d.end;v>=d.start;v--)for(let w=0;w<=c;w++)L.removeNodes(t,{at:[...f,...Fl(m,w),v]});const y=[...f,0,0,d.start],x=V.start(t,d.start===0?y:De.previous(y));L.select(t,x)});return}const b=V.start(t,t.selection).path;V.withoutNormalizing(t,()=>{for(let y=u.start;y<=u.end;y++)for(let x=d.start;x<=d.end;x++){const v=[...Fl(m,y),x],w=We.get(l.table,v);if(!Rt.isElement(w))continue;const S=[...f,...v];L.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:[...S,0]});for(const k of[...w.children.keys()].reverse())L.removeNodes(t,{at:[...S,k+1]})}L.select(t,b)})},t.normalizeNode=o=>{const[l,a]=o;if(l.type==="table-head"&&l.children.length>1){ou(t,a,De.next(a),(u,d)=>d!==0);return}let c=!1;for(const u of["table-body","table-head"])if(l.type===u){for(const[d,f]of l.children.entries())if(f.type==="table-row"){for(const[p,g]of f.children.entries())if(g.type==="table-cell"){const m=[...a,d,p];g.header&&u==="table-body"&&(L.unsetNodes(t,"header",{at:m}),c=!0),!g.header&&u==="table-head"&&(L.setNodes(t,{header:!0},{at:m}),c=!0)}}}if(!c){if(l.type==="table"){const u=l.children.reduce((f,p)=>p.type==="table-head"||p.type==="table-body"?p.children.reduce((g,m)=>m.type==="table-row"?Math.max(g,m.children.length):g,f):f,0);let d=!1;for(const[f,p]of l.children.entries())if(p.type==="table-body"||p.type==="table-head")for(const[g,m]of p.children.entries())m.type==="table-row"&&m.children.length!==u&&(L.insertNodes(t,Array.from({length:u-m.children.length},()=>Xn(p.type==="table-head")),{at:[...a,f,g,m.children.length]}),d=!0);if(d)return;if(l.children.length===1&&l.children[0].type==="table-head"){L.insertNodes(t,{type:"table-body",children:Array.from({length:l.children[0].children.length},()=>Xn(!1))},{at:[...a,1]});return}if(l.children.length===2&&l.children[1].type==="table-head"){L.moveNodes(t,{at:[...a,1],to:[...a,0]});return}if(l.children.length>2){ou(t,a,De.next(a),(f,p)=>p!==0&&p!==1);return}}n(o)}},t}const Jj=t=>{L.insertNodes(t,{type:"table",children:[{type:"table-head",children:[{type:"table-row",children:[Xn(!0),Xn(!0),Xn(!0)]}]},{type:"table-body",children:[{type:"table-row",children:[Xn(!1),Xn(!1),Xn(!1)]},{type:"table-row",children:[Xn(!1),Xn(!1),Xn(!1)]}]}]})},ul=C.createContext(void 0);function fW(t,e,n){var r;const i=new Set,s=t.children[0].type==="table-head"||t.children[0].type==="table-body"?t.children[0]:void 0;if(!s)return i;const o=((r=t.children[1])===null||r===void 0?void 0:r.type)==="table-body"?t.children[1]:void 0;for(let l=e.start;l<=e.end;l++){const a=o?l===0?s.children[0]:o.children[l-1]:s.children[l];if(Rt.isElement(a))for(let c=n.start;c<=n.end;c++)i.add(a.children[c])}return i}function hW(t){const e=kb(),n=Rc(e);if(n){var r,i;return h.jsx(ul.Provider,{value:{cells:n.singleCell==="not-selected"?new Set:fW(n.table,n.row,n.column),table:n.table,focus:(r=V.above(e,{match:Vt("table-cell"),at:(i=e.selection)===null||i===void 0?void 0:i.focus.path}))===null||r===void 0?void 0:r[0]},children:t.children})}return h.jsx(ul.Provider,{value:void 0,children:t.children})}const Zj=C.createContext({top:new Map,left:new Map}),pW=({attributes:t,children:e,element:n})=>{var r;const i=Nn(),s=C.useContext(ul),o=s?.table===n?s:void 0,l=C.useMemo(()=>{const a=n.children[0];if(!Rt.isElement(a)||!Rt.isElement(a.children[0]))return{top:new Map,left:new Map};const c=new Map,u=new Map;for(const[d,f]of a.children[0].children.entries())f.type==="table-cell"&&c.set(f,n.children.every(p=>Rt.isElement(p)?p.children.every(g=>Rt.isElement(g)&&o?.cells.has(g.children[d])):!1));for(const d of n.children)if(!(d.type!=="table-head"&&d.type!=="table-body"))for(const f of d.children)f.type!=="table-row"||f.children[0].type!=="table-cell"||u.set(f.children[0],f.children.every(p=>o?.cells.has(p)));return{top:c,left:u}},[n,o]);return h.jsx(Zj.Provider,{value:l,children:h.jsx(ul.Provider,{value:o,children:h.jsx(c1,{attributes:t,children:h.jsxs(yl,{element:n,children:[h.jsx("table",{className:W({width:"100%",tableLayout:"fixed",position:"relative",borderSpacing:0,"& *::selection":o!=null&&o.cells.size?{backgroundColor:"transparent"}:void 0}),children:e}),h.jsx(bl,{children:h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",isSelected:((r=n.children[0])===null||r===void 0?void 0:r.type)==="table-head",onPress:()=>{const a=Ee.findPath(i,n);V.withoutNormalizing(i,()=>{if(n.children[0].type==="table-head"){L.moveNodes(i,{at:[...a,0,0],to:[...a,1,0]}),L.removeNodes(i,{at:[...a,0]});return}L.insertNodes(i,{type:"table-head",children:[]},{at:[...a,0]}),L.moveNodes(i,{at:[...a,1,0],to:[...a,0,0]})})},children:h.jsx(X,{src:iN})}),h.jsx(he,{children:"Header row"})]}),h.jsx(Ep,{}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{L.removeNodes(i,{at:Ee.findPath(i,n)})},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})})]})})})})},gW=({attributes:t,children:e})=>h.jsx("tbody",{...t,children:e}),mW=({attributes:t,children:e})=>h.jsx("thead",{...t,children:e}),yW=({attributes:t,children:e,element:n})=>{var r,i;const s=(r=C.useContext(ul))===null||r===void 0?void 0:r.table;return h.jsx(bW.Provider,{value:(i=s?.children.indexOf(n))!==null&&i!==void 0?i:-1,children:h.jsx("tr",{...t,children:e})})},bW=C.createContext(-1);function xW({attributes:t,children:e,element:n}){const r=Nn(),i=C.useContext(ul),s=C.useContext(Zj),o=i?.cells.has(n),l="calc(100% + 2px)",a=n.header?"th":"td",c=o?j.color.alias.borderSelected:j.color.alias.borderIdle;return h.jsxs(a,{className:W({borderInlineEnd:`1px solid ${c}`,borderBottom:`1px solid ${c}`,borderTop:s.top.has(n)?`1px solid ${c}`:void 0,borderInlineStart:s.left.has(n)?`1px solid ${c}`:void 0,backgroundColor:i!=null&&i.cells.has(n)?j.color.alias.backgroundSelected:n.header?j.color.scale.slate3:void 0,position:"relative",margin:0,padding:j.size.space.regular,fontWeight:"inherit",boxSizing:"border-box",textAlign:"start",verticalAlign:"top"}),...t,children:[o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{contentEditable:!1,className:W({position:"absolute",top:-1,insetInlineStart:-1,background:j.color.alias.borderSelected,height:l,width:1})}),h.jsx("div",{contentEditable:!1,className:W({position:"absolute",top:-1,insetInlineStart:-1,background:j.color.alias.borderSelected,height:1,width:l})})]}),s.top.has(n)&&h.jsx(im,{location:"top",selected:!!s.top.get(n),label:"Select Column",onClick:()=>{const u=Ee.findPath(r,n),d=V.above(r,{match:Vt("table"),at:u});if(!d)return;const f=d[0].children.length-1,p=d[0].children[f];if(p.type!=="table-body")return;const g=u[u.length-1],m=[...d[1],d[0].children.length-1,p.children.length-1,g];L.select(r,{anchor:V.start(r,u),focus:V.end(r,m)})}}),s.left.has(n)&&h.jsx(im,{location:"left",selected:!!s.left.get(n),label:"Select Row",onClick:()=>{const u=Ee.findPath(r,n);L.select(r,{anchor:V.start(r,De.parent(u)),focus:V.end(r,De.parent(u))})}}),s.left.has(n)&&s.top.has(n)&&h.jsx(im,{location:"top-left",selected:!!(s.top.get(n)&&s.left.get(n)),label:"Select Table",onClick:()=>{const u=Ee.findPath(r,n),d=V.above(r,{match:Vt("table"),at:u});d&&L.select(r,{anchor:V.start(r,d[1]),focus:V.end(r,d[1])})}}),h.jsx("div",{children:e}),i?.focus===n&&h.jsx(kW,{cell:n,table:i.table})]})}function im(t){const e=C.useContext(ul),n=Nn();let{location:r,selected:i}=t;return h.jsxs("div",{contentEditable:!1,children:[h.jsx("button",{tabIndex:-1,type:"button",...Ar({location:r,selected:i}),className:W({background:j.color.scale.slate3,border:`1px solid ${j.color.alias.borderIdle}`,margin:0,padding:0,position:"absolute",":hover":{background:j.color.scale.slate4},"::before":{content:'""',inset:-1,position:"absolute"},"&[data-location=top]":{top:-9,insetInlineStart:-1,width:"calc(100% + 2px)",height:8},"&[data-location=left]":{top:-1,insetInlineStart:-9,width:8,height:"calc(100% + 2px)"},"&[data-location=top-left]":{top:-9,insetInlineStart:-9,width:8,height:8},"&:not([data-location=top])":{borderInlineEnd:"none"},"&:not([data-location=left])":{borderBottom:"none"},"&[data-selected=true]":{background:j.color.scale.indigo8,borderColor:j.color.alias.borderSelected}}),style:{visibility:e!=null&&e.focus?"visible":"hidden"},"aria-label":t.label,onClick:()=>{Ee.focus(n),t.onClick()}}),t.selected&&(t.location==="top"?h.jsx("div",{className:W({position:"absolute",top:-9,insetInlineEnd:-1,background:j.color.alias.borderSelected,height:8,width:1,zIndex:2})}):h.jsx("div",{className:W({position:"absolute",bottom:-1,insetInlineStart:-9,background:j.color.alias.borderSelected,height:1,width:8,zIndex:2})}))]})}const vW={deleteRow:{label:"Delete row",action:(t,e)=>{const n=e.slice(0,-3),r=We.get(t,n);if(r.type!=="table")return;const i=r.children[0].type==="table-head",s=De.parent(e);L.removeNodes(t,{at:i&&s[e.length-3]===0?De.parent(s):s})}},deleteColumn:{label:"Delete column",action:(t,e)=>{const n=e[e.length-1],r=e.slice(0,-3),i=We.get(t,r);i.type==="table"&&V.withoutNormalizing(t,()=>{for(const[s,o]of i.children.entries())if(!(o.type!=="table-head"&&o.type!=="table-body"))for(const l of o.children.keys())L.removeNodes(t,{at:[...r,s,l,n]})})}},insertRowBelow:{label:"Insert row below",action:(t,e)=>{const n=We.get(t,De.parent(e)),r=e.slice(0,-3),i=We.get(t,r);if(n.type!=="table-row"||i.type!=="table")return;const s=i.children[0].type==="table-head",o=[...r,s?1:0,s&&e[e.length-3]===0?0:e[e.length-2]+1];V.withoutNormalizing(t,()=>{L.insertNodes(t,{type:"table-row",children:n.children.map(()=>Xn(!1))},{at:o}),L.select(t,[...o,e[e.length-1]])})}},insertColumnRight:{label:"Insert column right",action:(t,e)=>{const n=e[e.length-1]+1,r=e.slice(0,-3),i=We.get(t,r);i.type==="table"&&V.withoutNormalizing(t,()=>{for(const[s,o]of i.children.entries())if(!(o.type!=="table-head"&&o.type!=="table-body"))for(const l of o.children.keys())L.insertNodes(t,Xn(o.type==="table-head"),{at:[...r,s,l,n]});L.select(t,V.start(t,De.next(e)))})}}},sm=vW;function kW(t){const e=Nn(),n=j.size.space.small;return h.jsx("div",{contentEditable:!1,className:W({top:n,insetInlineEnd:n,position:"absolute"}),children:h.jsxs(fe,{children:[h.jsxs(Ii,{align:"end",children:[h.jsx(ae,{prominence:"low",UNSAFE_className:W({borderRadius:j.size.radius.small,height:"auto",minWidth:0,padding:0,"&::before":{content:'""',inset:`calc(${n} * -1)`,position:"absolute"}}),children:h.jsx(X,{src:Au})}),h.jsx(Ai,{onAction:r=>{r in sm&&sm[r].action(e,Ee.findPath(e,t.cell))},items:Object.entries(sm).map(([r,i])=>({...i,key:r})),children:r=>h.jsx(Je,{children:r.label},r.key)})]}),h.jsx(he,{children:"Options"})]})})}const wW=()=>{const{editor:t,blockquote:{isDisabled:e,isSelected:n}}=Zr();return C.useMemo(()=>h.jsx(ae,{prominence:"low",isSelected:n,isDisabled:e,onPress:()=>{Jj(t),Ee.focus(t)},children:h.jsx(X,{src:zb})}),[t,e,n])},SW=h.jsxs(fe,{children:[h.jsx(wW,{}),h.jsx(he,{children:h.jsx(Y,{children:"Table"})})]});function CW(t,e,n){if(n==="left"||n==="right"){const a=V.above(t,{match:Vt("table-row"),at:e});if(!a)return;const d=e[e.length-1]+(n==="left"?-1:1);return a[0].children[d]?[...a[1],d]:void 0}const r=V.above(t,{match:Vt("table"),at:e});if(!r)return;const i=n==="up"?-1:1,o=e[e.length-3]+e[e.length-2]+i,l=Fl(r[0].children[0].type==="table-head",o);if(We.has(r[0],l))return[...r[1],...l,e[e.length-1]]}function EW({documentFeatures:t,viewState:e}){const n=Xr().componentBlocks;let r=!1,i=!1;for(const a of Object.values(n))a.toolbarIcon&&(i=!0),a.toolbarIcon||(r=!0);const s=Object.values(t.formatting.inlineMarks).some(a=>a),o=t.formatting.alignment.center||t.formatting.alignment.end,l=t.formatting.listTypes.unordered||t.formatting.listTypes.ordered;return h.jsxs(AW,{children:[h.jsxs(TW,{children:[!!t.formatting.headings.levels.length&&h.jsx(jW,{headingLevels:t.formatting.headings.levels}),s&&h.jsx(MW,{marks:t.formatting.inlineMarks}),(o||l)&&h.jsxs(bw,{children:[o&&h.jsx(bH,{alignment:t.formatting.alignment}),l&&h.jsx(eW,{lists:t.formatting.listTypes})]}),(t.dividers||t.links||!!t.images||t.formatting.blockTypes.blockquote||t.tables||!!t.layouts.length||t.formatting.blockTypes.code||i)&&h.jsxs(bw,{children:[t.dividers&&WH,t.links&&yH,t.images&&cW,t.formatting.blockTypes.blockquote&&kH,!!t.layouts.length&&h.jsx(XH,{layouts:t.layouts}),t.formatting.blockTypes.code&&IH,t.tables&&SW,r&&_W]}),h.jsx(zt,{flex:!0})]}),C.useMemo(()=>e&&h.jsxs(te,{gap:"xsmall",children:[h.jsx(Ep,{}),h.jsxs(fe,{children:[h.jsx(Re,{prominence:"low",onPress:()=>{e.toggle()},children:h.jsx(X,{src:e.expanded?zz:Bz})}),h.jsx(he,{children:e.expanded?"Collapse":"Expand"})]})]}),[e]),!!r&&h.jsx(RW,{})]})}const bw=({children:t})=>h.jsx(te,{gap:"regular",children:t}),IW=({children:t})=>fr()==="main"?h.jsx("div",{className:W({boxSizing:"border-box",display:"flex",paddingInline:j.size.space.medium,minWidth:0,maxWidth:800,marginInline:"auto",[dn.above.mobile]:{paddingInline:j.size.space.xlarge},[dn.above.tablet]:{paddingInline:j.size.space.xxlarge}}),children:t}):h.jsx("div",{className:W({display:"flex"}),children:t}),AW=({children:t})=>{let e=fr();return h.jsx(h.Fragment,{children:h.jsx("div",{"data-layout":e,className:W({backdropFilter:"blur(8px)",backgroundClip:"padding-box",backgroundColor:`color-mix(in srgb, transparent, ${j.color.background.canvas} 90%)`,borderBottom:`${j.size.border.regular} solid color-mix(in srgb, transparent, ${j.color.foreground.neutral} 10%)`,borderStartEndRadius:j.size.radius.medium,borderStartStartRadius:j.size.radius.medium,minWidth:0,position:"sticky",top:0,zIndex:2,'&[data-layout="main"]':{borderRadius:0}}),children:h.jsx(IW,{children:t})})})},TW=t=>{let e=fr();return h.jsx(te,{"data-layout":e,paddingY:"regular",paddingX:"medium",gap:"large",flex:!0,minWidth:0,UNSAFE_className:W({msOverflowStyle:"none",scrollbarWidth:"none",overflowX:"auto","&::-webkit-scrollbar":{display:"none"},'&[data-layout="main"]':{paddingInline:0}}),...t})},NW=new Map([["normal","normal"],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6]]),jW=({headingLevels:t})=>{const{editor:e,textStyles:n}=Zr(),r=n.allowedHeadingLevels.length===0,i=C.useMemo(()=>{let o=[{name:"Paragraph",id:"normal"}];return t.forEach(l=>{o.push({name:`Heading ${l}`,id:l.toString()})}),o},[t]),s=n.selected.toString();return C.useMemo(()=>h.jsx(Cb,{flexShrink:0,width:"scale.1700",prominence:"low","aria-label":"Text block",items:i,isDisabled:r,selectedKey:s,onSelectionChange:o=>{let l=NW.get(o);l==="normal"?V.withoutNormalizing(e,()=>{L.unsetNodes(e,"level",{match:a=>a.type==="heading"}),L.setNodes(e,{type:"paragraph"},{match:a=>a.type==="heading"})}):l&&L.setNodes(e,{type:"heading",level:l},{match:a=>a.type==="paragraph"||a.type==="heading"}),Ee.focus(e)},children:o=>h.jsx(Je,{children:o.name},o.id)}),[e,r,i,s])},_W=h.jsx(OW,{});function OW(){const t=Nn(),e=Xr().componentBlocks;return Object.entries(e).filter(([,n])=>n.toolbarIcon).map(([n,r])=>h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{p1(t,e,n),Ee.focus(t)},children:h.jsx(X,{src:r.toolbarIcon})}),h.jsx(he,{children:r.label})]},n))}function RW(){let t=fr();const e=Nn(),n=Xr().componentBlocks;return h.jsxs(Ii,{align:"end",children:[h.jsxs(fe,{children:[h.jsxs(ae,{marginY:"regular",marginEnd:t==="main"?void 0:"medium",children:[h.jsx(X,{src:Eb}),h.jsx(X,{src:Au})]}),h.jsxs(he,{children:[h.jsx(Y,{children:"Insert"}),h.jsx(Vn,{children:"/"})]})]}),h.jsx(Ai,{onAction:r=>{p1(e,n,r)},items:Object.entries(n).filter(([,r])=>!r.toolbarIcon),children:([r,i])=>h.jsx(Je,{children:i.label},r)})]})}const DW=[{key:"bold",label:"Bold",icon:cE,shortcut:"B"},{key:"italic",label:"Italic",icon:uE,shortcut:"I"},{key:"underline",label:"Underline",icon:Hz,shortcut:"U"},{key:"strikethrough",label:"Strikethrough",icon:fE},{key:"code",label:"Code",icon:Rh},{key:"superscript",label:"Superscript",icon:Uz},{key:"subscript",label:"Subscript",icon:Vz},{key:"clearFormatting",label:"Clear formatting",icon:dE}];function MW({marks:t}){const{editor:e,clearFormatting:{isDisabled:n},marks:r}=Zr(),i=om(t),s=om(Object.keys(r).filter(l=>r[l].isSelected)),o=om(Object.keys(r).filter(l=>r[l].isDisabled).concat(n?"clearFormatting":[]));return C.useMemo(()=>{const l=DW.filter(a=>a.key==="clearFormatting"||i[a.key]);return h.jsx(Ia,{UNSAFE_className:W({minWidth:`calc(${j.size.element.medium} * 4)`}),prominence:"low",density:"compact",buttonLabelBehavior:"hide",overflowMode:"collapse",summaryIcon:h.jsx(X,{src:qz}),items:l,selectionMode:"multiple",selectedKeys:s,disabledKeys:o,onAction:a=>{if(a==="clearFormatting")eT(e);else{var c;const u=a;(c=V.marks(e))!==null&&c!==void 0&&c[u]?V.removeMark(e,u):V.addMark(e,u,!0)}Ee.focus(e)},children:a=>h.jsxs(Je,{textValue:a.label,children:[h.jsx(Y,{children:a.label}),"shortcut"in a&&h.jsx(Vn,{meta:!0,children:a.shortcut}),h.jsx(X,{src:a.icon})]},a.key)})},[o,e,i,s])}function om(t){return C.useMemo(()=>t,[JSON.stringify(t)])}const FW=({attributes:t,children:e,element:n})=>{const r=`h${n.level}`,i=Nn(),{documentFeatures:s}=Xr(),[o,l]=C.useState(!1);return Object.keys(s.formatting.headings.schema.fields).length===0?h.jsx(r,{...t,style:{textAlign:n.textAlign},children:e}):h.jsxs(h.Fragment,{children:[h.jsx(r,{style:{textAlign:n.textAlign},children:h.jsxs(yl,{element:n,children:[h.jsx("div",{children:e}),h.jsx(bl,{children:h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsx(zj,{onPress:()=>l(!0)}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{L.removeNodes(i,{at:Ee.findPath(i,n)})},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})})]})}),h.jsx(Vj,{element:n,schema:s.formatting.headings.schema,isOpen:o,nodeLabel:"Heading",onDismiss:()=>l(!1)})]})},PW=t=>{switch(t.element.type){case"layout":return h.jsx(GH,{attributes:t.attributes,children:t.children,element:t.element});case"layout-area":return h.jsx(YH,{...t});case"code":return h.jsx(AH,{attributes:t.attributes,children:t.children,element:t.element});case"component-block":return h.jsx(qH,{attributes:t.attributes,children:t.children,element:t.element});case"component-inline-prop":case"component-block-prop":return h.jsx(VH,{...t});case"heading":return h.jsx(FW,{attributes:t.attributes,children:t.children,element:t.element});case"link":return h.jsx(hH,{attributes:t.attributes,children:t.children,element:t.element});case"ordered-list":return h.jsx("ol",{...t.attributes,children:t.children});case"unordered-list":return h.jsx("ul",{...t.attributes,children:t.children});case"list-item":return h.jsx("li",{...t.attributes,children:t.children});case"list-item-content":return h.jsx("span",{...t.attributes,children:t.children});case"blockquote":return h.jsx("blockquote",{...t.attributes,children:t.children});case"divider":return h.jsx(KH,{...t});case"image":return h.jsx(iW,{attributes:t.attributes,children:t.children,element:t.element});case"table":return h.jsx(pW,{attributes:t.attributes,children:t.children,element:t.element});case"table-head":return h.jsx(mW,{attributes:t.attributes,children:t.children,element:t.element});case"table-body":return h.jsx(gW,{attributes:t.attributes,children:t.children,element:t.element});case"table-row":return h.jsx(yW,{attributes:t.attributes,children:t.children,element:t.element});case"table-cell":return h.jsx(xW,{attributes:t.attributes,children:t.children,element:t.element});default:let{textAlign:e}=t.element;return h.jsx("p",{style:{textAlign:e},...t.attributes,children:t.children})}};function $W(t,e){return[...Object.keys(e).map(r=>({label:e[r].label,insert:i=>{p1(i,e,r)}})),...t.textStyles.allowedHeadingLevels.filter(r=>t.editorDocumentFeatures.formatting.headings.levels.includes(r)).map(r=>({label:`Heading ${r}`,insert(i){pr(i,{type:"heading",level:r,children:[{text:""}]})}})),!t.blockquote.isDisabled&&t.editorDocumentFeatures.formatting.blockTypes.blockquote&&{label:"Blockquote",insert(r){pr(r,{type:"blockquote",children:[{text:""}]})}},!t.code.isDisabled&&t.editorDocumentFeatures.formatting.blockTypes.code&&{label:"Code block",insert(r){pr(r,{type:"code",children:[{text:""}]})}},!!t.editorDocumentFeatures.images&&{label:"Image",async insert(r){const i=await Tp();i&&pr(r,{type:"image",src:i,alt:"",title:"",children:[{text:""}]})}},!!t.editorDocumentFeatures.tables&&{label:"Table",insert:Jj},!t.dividers.isDisabled&&t.editorDocumentFeatures.dividers&&{label:"Divider",insert(r){pr(r,{type:"divider",children:[{text:""}]})}},!!t.editorDocumentFeatures.layouts.length&&{label:"Layout",insert(r){Kj(r,t.editorDocumentFeatures.layouts[0])}},!t.lists.ordered.isDisabled&&t.editorDocumentFeatures.formatting.listTypes.ordered&&{label:"Numbered List",keywords:["ordered list"],insert(r){pr(r,{type:"ordered-list",children:[{text:""}]})}},!t.lists.unordered.isDisabled&&t.editorDocumentFeatures.formatting.listTypes.unordered&&{label:"Bullet List",keywords:["unordered list"],insert(r){pr(r,{type:"unordered-list",children:[{text:""}]})}}].filter(r=>typeof r!="boolean")}function xw(t,e,n){const r=Ee.findPath(t,e);L.delete(t,{at:{focus:V.start(t,r),anchor:V.end(t,r)}}),n.insert(t)}function LW({children:t,text:e}){const n=Zr(),{editor:r}=n,{componentBlocks:i}=Xr(),s=fp($W(n,i),e.text.slice(1),{keys:["label","keywords"]}).map((y,x)=>({...y,index:x})),o=C.useRef({options:s,text:e});C.useEffect(()=>{o.current={options:s,text:e}});const l=C.useRef(y=>{});C.useEffect(()=>{l.current=y=>{if(!y.defaultPrevented)switch(y.key){case"ArrowDown":{o.current.options.length&&(y.preventDefault(),p.selectionManager.setFocused(!0),p.selectionManager.setFocusedKey((Number(p.selectionManager.focusedKey)===o.current.options.length-1?0:Number(p.selectionManager.focusedKey)+1).toString()));return}case"ArrowUp":{o.current.options.length&&(y.preventDefault(),p.selectionManager.setFocused(!0),p.selectionManager.setFocusedKey((p.selectionManager.focusedKey==="0"?o.current.options.length-1:Number(p.selectionManager.focusedKey)-1).toString()));return}case"Enter":{const x=o.current.options[Number(p.selectionManager.focusedKey)];x&&(xw(r,o.current.text,x),y.preventDefault());return}case"Escape":{const x=Ee.findPath(r,o.current.text);L.unsetNodes(r,"insertMenu",{at:x}),y.preventDefault();return}}}}),C.useEffect(()=>{const y=Ee.toDOMNode(r,r);let x=v=>l.current(v);return y.addEventListener("keydown",x),()=>{y.removeEventListener("keydown",x)}},[r]);const a=C.useRef(null),c=xb({isOpen:!0}),{triggerProps:{onPress:u,...d},overlayProps:f}=WO({type:"listbox"},c,a);let p=zS({items:s,children:y=>h.jsx(Je,{children:y.label},y.index)});C.useEffect(()=>{!p.selectionManager.isFocused&&p.collection.size&&(p.selectionManager.setFocused(!0),p.selectionManager.setFocusedKey("0"))},[p]);const g=C.useRef(null);C.useEffect(()=>{var y;const x=(y=g.current)===null||y===void 0||(y=y.querySelector('[role="listbox"] [role="presentation"]'))===null||y===void 0?void 0:y.children[p.selectionManager.focusedKey];x&&x8(x,{scrollMode:"if-needed",boundary:g.current,block:"nearest"})},[p.selectionManager.focusedKey]);const m=C.useRef(null);let b=rC();return h.jsxs(C.Fragment,{children:[h.jsx("span",{...d,role:"button",className:W({color:j.color.foreground.accent,fontWeight:j.typography.fontWeight.medium}),ref:a,children:t}),h.jsx(IR,{width:"alias.singleLineWidth",placement:"bottom start",isNonModal:!0,hideArrow:!0,...f,state:c,triggerRef:a,children:h.jsx("div",{className:W({overflow:"scroll",maxHeight:300}),ref:g,children:h.jsx(iC,{"aria-label":"Insert block",state:p,shouldUseVirtualFocus:!0,layout:b,ref:m,onAction:y=>{xw(r,e,s[y])}})})})]})}const vw=new WeakSet,kw=new WeakSet;function Xj(t,e){if(Bt.isText(t))return t.insertMenu?e:void 0;if(!vw.has(t.children)){for(const[n,r]of t.children.entries()){if(kw.has(r))continue;let i=Xj(r,[...e,n]);if(i)return i;kw.add(r)}vw.add(t.children)}}function ww(t){var e;const n=Xj(t,[]);return n&&!((e=V.marks(t))!==null&&e!==void 0&&e.insertMenu)&&(!t.selection||!De.equals(t.selection.anchor.path,n)||!De.equals(t.selection.focus.path,n))?(L.unsetNodes(t,"insertMenu",{at:n}),!0):!1}function BW(t){const{normalizeNode:e,apply:n,insertText:r}=t;return t.normalizeNode=([i,s])=>{if(Bt.isText(i)&&i.insertMenu){if(i.text[0]!=="/"){L.unsetNodes(t,"insertMenu",{at:s});return}const o=/\s/.exec(i.text);if(o){L.unsetNodes(t,"insertMenu",{at:{anchor:{path:s,offset:o.index},focus:V.end(t,s)},match:Bt.isText,split:!0});return}}V.isEditor(t)&&ww(t)||e([i,s])},t.apply=i=>{n(i),i.type==="set_selection"&&ww(t)},t.insertText=i=>{if(r(i),t.selection&&i==="/"){const s=V.start(t,V.above(t,{match:Ge})[1]),o=V.before(t,t.selection.anchor,{unit:"character"});o&&(_o.equals(s,o)||o.offset!==0&&/\s/.test(We.get(t,o.path).text[o.offset-1]))&&L.setNodes(t,{insertMenu:!0},{at:{anchor:o,focus:t.selection.anchor},match:Bt.isText,split:!0})}},t}function zW({placeholder:t,children:e}){const[n,r]=C.useState(0);return h.jsxs("span",{className:W({position:"relative",display:"inline-block",width:n}),children:[h.jsx("span",{contentEditable:!1,className:W({position:"absolute",pointerEvents:"none",display:"inline-block",left:0,top:0,maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.5",userSelect:"none",fontStyle:"normal",fontWeight:"normal",textDecoration:"none",textAlign:"left"}),children:h.jsx("span",{ref:i=>{if(i){const s=i.offsetWidth;s!==n&&r(s)}},children:t})}),e]})}const VW=({leaf:t,text:e,children:n,attributes:r})=>{const{underline:i,strikethrough:s,bold:o,italic:l,code:a,keyboard:c,superscript:u,subscript:d,placeholder:f,insertMenu:p,...g}=t;f!==void 0&&(n=h.jsx(zW,{placeholder:f,children:n})),p&&(n=h.jsx(LW,{text:e,children:n})),a&&(n=h.jsx("code",{children:n})),o&&(n=h.jsx("strong",{children:n})),s&&(n=h.jsx("s",{children:n})),l&&(n=h.jsx("em",{children:n})),c&&(n=h.jsx("kbd",{children:n})),u&&(n=h.jsx("sup",{children:n})),d&&(n=h.jsx("sub",{children:n})),i&&(n=h.jsx("u",{children:n}));const m=Object.keys(g).filter(b=>b.startsWith("prism_")).map(b=>qW.get(b.replace("prism_","")));if(m.length){const b=m.join(" ");n=h.jsx("span",{className:b,children:n})}return h.jsx("span",{...r,children:n})},UW=t=>h.jsx(VW,{...t}),qW=new Map([{types:["comment","prolog","doctype","cdata"],style:{color:j.color.foreground.neutralTertiary,fontStyle:"italic"}},{types:["atrule","attr-name","class-name","selector"],style:{color:j.color.scale.amber11}},{types:["boolean","constant","inserted-sign","entity","inserted","number","regex","symbol","variable"],style:{color:j.color.scale.green11}},{types:["attr-value","builtin","char","constant","generics","url"],style:{color:j.color.scale.pink11}},{types:["string"],style:{color:j.color.scale.indigo9}},{types:["annotation","deleted","deleted-sign","decorator","important","tag"],style:{color:j.color.scale.red11}},{types:["function","function-variable","operator"],style:{color:j.color.scale.purple11}},{types:["tag","selector","keyword"],style:{color:j.color.scale.indigo11}},{types:["punctuation"],style:{color:j.color.foreground.neutralSecondary}}].flatMap(t=>{const e=W(t.style);return t.types.map(n=>[n,e])})),HW=/^```(\w+)? ?$/;function WW(t,e,n){const{insertBreak:r,normalizeNode:i,insertText:s}=n;function o(l){var a;if(l?.[0].type!=="paragraph"||l[0].children.length!==1||l[0].children[0].type!==void 0)return!1;const c=HW.exec(l[0].children[0].text);if(!c)return!1;const u=qu(n,t,e);return u&&(u.kind==="inline"||!u.documentFeatures.formatting.blockTypes.code)?!1:(n.history.undos.push({operations:[],selectionBefore:n.selection}),L.select(n,l[1]),L.delete(n),L.wrapNodes(n,{type:"code",...c[1]?{language:(a=No.get(c[1].toLowerCase()))!==null&&a!==void 0?a:c[1]}:{},children:[]},{match:d=>d.type==="paragraph"}),!0)}return n.insertBreak=()=>{const l=V.above(n,{match:Ge});if(l?.[0].type==="code"&&Bt.isText(l[0].children[0])){const a=l[0].children[0].text;if(a[a.length-1]===`
`&&n.selection&&Dt.isCollapsed(n.selection)&&_o.equals(V.end(n,l[1]),n.selection.anchor)){r(),L.setNodes(n,{type:"paragraph",children:[]}),L.delete(n,{distance:1,at:{path:[...l[1],0],offset:a.length-1}});return}n.insertText(`
`);return}n.selection&&Dt.isCollapsed(n.selection)&&o(l)||r()},n.insertText=l=>{s(l),l===" "&&n.selection&&Dt.isCollapsed(n.selection)&&o(V.above(n,{match:Ge}))},n.normalizeNode=([l,a])=>{if(l.type==="code"&&Rt.isElement(l))for(const[c,u]of l.children.entries()){if(!Bt.isText(u)){n.isVoid(u)?L.removeNodes(n,{at:[...a,c]}):L.unwrapNodes(n,{at:[...a,c]});return}const d=Object.keys(u).filter(f=>f!=="text");if(d.length){L.unsetNodes(n,d,{at:[...a,c]});return}}i([l,a])},n}const Qj=()=>({type:"paragraph",children:[{text:""}]});function KW(t){const{normalizeNode:e}=t;return t.normalizeNode=n=>{const[r,i]=n;if(V.isEditor(r)){let s=r.children[r.children.length-1];if(s?.type!=="paragraph"){L.insertNodes(t,Qj(),{at:[...i,r.children.length]});return}}e(n)},t}function GW(t){const{normalizeNode:e,deleteBackward:n}=t;return t.deleteBackward=r=>{if(t.selection&&Dt.isCollapsed(t.selection)&&t.selection.anchor.offset===0){const[i,s]=V.above(t,{match:o=>o.type==="layout-area"})||[t,[]];if(i.type==="layout-area"&&_o.equals(V.start(t,s),t.selection.anchor))return}n(r)},t.normalizeNode=r=>{const[i,s]=r;if(Rt.isElement(i)&&i.type==="layout"){if(i.layout===void 0){L.unwrapNodes(t,{at:s});return}if(i.children.length<i.layout.length){L.insertNodes(t,Array.from({length:i.layout.length-i.children.length}).map(()=>({type:"layout-area",children:[Qj()]})),{at:[...s,i.children.length]});return}if(i.children.length>i.layout.length){Array.from({length:i.children.length-i.layout.length}).map((o,l)=>l).reverse().forEach(o=>{const l=[...s,o+i.layout.length],a=i.children[o+i.layout.length];ou(t,l,[...s,i.layout.length-1,i.children[i.layout.length-1].children.length],c=>c.type!=="paragraph"||We.string(a)!==""),L.removeNodes(t,{at:l})});return}}e(r)},t}const YW=/(^|\s)\[(.+?)\]\((\S+)\)$/;function JW(t,e,n){const{insertText:r,isInline:i,normalizeNode:s}=n;return n.isInline=o=>o.type==="link"?!0:i(o),t.links&&(n.insertText=o=>{if(r(o),o!==")"||!n.selection)return;const l=V.start(n,V.above(n,{match:Ge})[1]),a=V.string(n,{anchor:n.selection.anchor,focus:l}),c=YW.exec(a);if(!c)return;const u=qu(n,t,e);if(u?.documentFeatures.links===!1)return;const[,d,f,p]=c;n.history.undos.push({operations:[],selectionBefore:n.selection});const g=c.index===0?l:Tc(n,l,{distance:c.index}),m=Tc(n,g,{distance:d===""?1:2}),b=Tc(n,m,{distance:f.length});L.delete(n,{at:{anchor:b,focus:n.selection.anchor}}),L.delete(n,{at:{anchor:g,focus:m}}),L.wrapNodes(n,{type:"link",href:p,children:[]},{at:{anchor:n.selection.anchor,focus:g},split:!0});const y=V.next(n);y&&L.select(n,y[1])}),n.normalizeNode=([o,l])=>{if(o.type==="link"){if(We.string(o)===""){L.unwrapNodes(n,{at:l});return}for(const[c,u]of o.children.entries())if(u.type==="link"){L.unwrapNodes(n,{at:[...l,c]});return}}if(XB(o)){let c=null;for(const[u,d]of o.children.entries()){var a;if(d.type==="link"&&d.href===((a=c)===null||a===void 0?void 0:a.node.href)){const f=[...l,c.index],p=[...l,u],g=[...f,c.node.children.length];for(let m=d.children.length-1;m>=0;m--){const b=[...p,m];L.moveNodes(n,{at:b,to:g})}L.removeNodes(n,{at:p});return}(!Bt.isText(d)||d.text!=="")&&(c=null),d.type==="link"&&(c={index:u,node:d})}}s([o,l])},n}function ZW(t,e){return e2(XS(),t,e)}function e2(t,e,n){return XW(KW(JW(e,n,sH(dW(zH(n,e,QW(GW(WW(e,n,vz(e,t))))))))))}function XW(t){const{normalizeNode:e}=t;return t.normalizeNode=([n,r])=>{if(!Bt.isText(n)&&n.type!=="link"){const i=V.isEditor(n)?"editor":n.type;if(typeof i!="string"||Po[i]===void 0){L.unwrapNodes(t,{at:r});return}const s=Po[i];if(s.kind==="blocks"&&n.children.length!==0&&n.children.every(l=>!Ge(l))){L.wrapNodes(t,{type:s.blockToWrapInlinesIn,children:[]},{at:r,match:l=>!Ge(l)});return}let o=!1;for(const[l,a]of[...n.children.entries()].reverse()){const c=[...r,l];if(s.kind==="inlines"){if(!Bt.isText(a)&&Ge(a)){Hy(t,[a,c],r),o=!0;continue}}else{if(!Ge(a)){L.wrapNodes(t,{type:s.blockToWrapInlinesIn,children:[]},{at:c}),o=!0;continue}if(!s.allowedChildren.has(a.type)){Hy(t,[a,c],r),o=!0;continue}}}if(o)return}e([n,r])},t}function Hy(t,[e,n],r){const i=e.type,s=Po[i],o=We.get(t,r),l=V.isEditor(o)?"editor":o.type,a=Po[l];if(!s||s.invalidPositionHandleMode==="unwrap"){if(a.kind==="blocks"&&a.blockToWrapInlinesIn){L.setNodes(t,{type:a.blockToWrapInlinesIn,...Object.fromEntries(Object.keys(e).filter(u=>u!=="type"&&u!=="children").map(u=>[u,null]))},{at:n});return}L.unwrapNodes(t,{at:n});return}const c=Po[o.type||"editor"];if(c?.kind==="blocks"&&c.allowedChildren.has(i)){r.length===0?L.moveNodes(t,{at:n,to:[n[0]+1]}):L.moveNodes(t,{at:n,to:De.next(r)});return}if(V.isEditor(o)){L.moveNodes(t,{at:n,to:[n[0]+1]}),L.unwrapNodes(t,{at:[n[0]+1]});return}Hy(t,[e,n],r.slice(0,-1))}function QW(t){const{isVoid:e}=t;return t.isVoid=n=>n.type==="divider"||n.type==="image"||e(n),t}function eK(t,e,n){const{insertText:r}=n,i=Object.create(null),s={...t};let o=(l,a,c,u="paragraph")=>{if(!c(s))return;const d=l[l.length-1];i[d]||(i[d]=Object.create(null)),i[d][l]={insert:a,type:u,shouldBeEnabledInComponentBlock:c}};return o("1. ",()=>{L.wrapNodes(n,{type:"ordered-list",children:[]},{match:Ge})},l=>l.formatting.listTypes.ordered),o("- ",()=>{L.wrapNodes(n,{type:"unordered-list",children:[]},{match:Ge})},l=>l.formatting.listTypes.unordered),o("* ",()=>{L.wrapNodes(n,{type:"unordered-list",children:[]},{match:Ge})},l=>l.formatting.listTypes.unordered),t.formatting.headings.levels.forEach(l=>{o("#".repeat(l)+" ",()=>{L.setNodes(n,{type:"heading",level:l},{match:a=>a.type==="paragraph"||a.type==="heading"})},a=>a.formatting.headings.levels.includes(l),"heading-or-paragraph")}),o("> ",()=>{L.wrapNodes(n,{type:"blockquote",children:[]},{match:l=>l.type==="paragraph"})},l=>l.formatting.blockTypes.blockquote),o("---",()=>{Wj(n)},l=>l.dividers),n.insertText=l=>{r(l);const a=i[l];if(a&&n.selection&&Dt.isCollapsed(n.selection)){const{anchor:c}=n.selection,u=V.above(n,{match:Ge});if(!u||u[0].type!=="paragraph"&&u[0].type!=="heading")return;const d=V.start(n,u[1]),f={anchor:c,focus:d},p=V.string(n,f),g=a[p];if(!g||g.type==="paragraph"&&u[0].type!=="paragraph")return;const m=qu(n,t,e);if(m&&(m.kind==="inline"||!g.shouldBeEnabledInComponentBlock(m.documentFeatures)))return;n.history.undos.push({operations:[],selectionBefore:n.selection}),L.select(n,f),L.delete(n),g.insert()}},n}function Sw(t){if(!t.selection)return{isInside:!1};const[,e]=V.parent(t,t.selection);if(!e.length)return{isInside:!1};const[n,r]=V.parent(t,e);return n.type==="blockquote"?{isInside:!0,path:r}:{isInside:!1}}function tK(t){const{insertBreak:e,deleteBackward:n}=t;return t.deleteBackward=r=>{if(t.selection&&Sw(t).isInside&&Dt.isCollapsed(t.selection)&&t.selection.anchor.offset===0&&t.selection.anchor.path[t.selection.anchor.path.length-2]===0){L.unwrapNodes(t,{match:s=>s.type==="blockquote",split:!0});return}n(r)},t.insertBreak=()=>{const r=Sw(t);if(t.selection&&r.isInside){const[i,s]=V.node(t,t.selection);if(De.isDescendant(s,r.path)&&We.string(i)===""){L.unwrapNodes(t,{match:o=>o.type==="blockquote",split:!0});return}}e()},t}function nK(t){const{insertBreak:e}=t;return t.insertBreak=()=>{e();const n=V.above(t,{match:o=>o.type==="heading"});if(!n||!t.selection||!Dt.isCollapsed(t.selection))return;const r=n[1];if(_o.equals(V.end(t,r),t.selection.anchor)){L.unwrapNodes(t,{at:r});return}if(!De.hasPrevious(r))return;const i=De.previous(r),s=We.get(t,i);s.type==="heading"&&s.children.length===1&&Bt.isText(s.children[0])&&s.children[0].text===""&&L.unwrapNodes(t,{at:i})},t}const Cw={bold:["**","__"],italic:["*","_"],strikethrough:["~~"],code:["`"]};function rK(t,e,n,r){t.history.undos.push({operations:[],selectionBefore:t.selection});const i=V.pointRef(t,r);L.delete(t,{at:t.selection.anchor,distance:n.length,reverse:!0}),L.delete(t,{at:r,distance:n.length}),L.setNodes(t,{[e]:!0},{match:Bt.isText,split:!0,at:{anchor:i.unref(),focus:t.selection.anchor}}),t.removeMark(e)}function iK(t,e,n){const{insertText:r,insertBreak:i}=n;n.insertBreak=()=>{i();const l=V.marks(n);if(!l||!n.selection)return;const a=V.above(n,{match:Ge});if(!a)return;const c=Tc(n,n.selection.anchor),u=Object.keys(l);if(!c||!De.isDescendant(c.path,a[1])){for(const f of u)n.removeMark(f);return}const d=We.get(n,c.path);for(const f of u)d[f]||n.removeMark(f)};const s={},o=t.formatting.inlineMarks;return Object.keys(Cw).forEach(l=>{o[l]&&(s[l]=Cw[l])}),Object.keys(s).length===0||(n.insertText=l=>{if(r(l),n.selection&&Dt.isCollapsed(n.selection)){for(const[a,c]of Object.entries(s))for(const u of c)if(l===u[u.length-1]){const d=sK(n);let f=V.string(n,{anchor:n.selection.anchor,focus:d});const p=/\s/.test(f.slice(-u.length-1,-u.length)),g=u===f.slice(-u.length);if(p||!g)continue;const m=f.slice(0,-u.length-1);for(const[b]of[...m].reverse().entries()){if(m.slice(b,b+u.length)!==u)continue;const x=b===0?d:Tc(n,d,{distance:b}),v=V.after(n,x,{distance:u.length});if(b!==0&&!/\s/.test(V.string(n,{anchor:V.before(n,x,{unit:"character"}),focus:x})))continue;const w=V.string(n,{anchor:v,focus:n.selection.anchor}).slice(0,-u.length);if(w===""||/\s/.test(w[0])||a==="italic"&&(w[0]==="_"||w[0]==="*")||a==="code"&&w==="`")continue;const S=qu(n,t,e);if(!(S&&S.inlineMarks!=="inherit"&&S.inlineMarks[a]===!1)){rK(n,a,u,x);return}}}}}),n}function sK(t){return V.start(t,V.above(t,{match:Ge})[1])}const Vo=new Set,tf=new Set;let Dc=null;function hr(t,e){const n=Vo.has(t);Vo.add(t);try{return e()}finally{n||Vo.delete(t)}}function m1(t,e){if(Dc!==null)return e();Dc=t;try{return e()}finally{Dc=null}}function Ew(t,e){const n=new Set;for(const r of t)Vo.has(r)||n.add(r),Vo.add(r);try{return e()}finally{for(const r of n)Vo.delete(r)}}function oK(t,e){const n=tf.has(t);tf.add(t);try{return e()}finally{n||tf.delete(t)}}function $r(t){const e={text:t};for(const n of Vo)tf.has(n)||(e[n]=!0);return Dc!==null?[{text:""},{type:"link",href:Dc,children:[e]},{text:""}]:[e]}function Iw(t){const e=t.parentElement,n=e?.getAttribute("data-align");if(n==="center"||n==="end")return n;if(t instanceof HTMLElement){const r=t.style.textAlign;if(r==="center")return"center";if(r==="right"||r==="end")return"end"}}const lK={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6},aK={CODE:"code",DEL:"strikethrough",S:"strikethrough",STRIKE:"strikethrough",EM:"italic",I:"italic",STRONG:"bold",U:"underline",SUP:"superscript",SUB:"subscript",KBD:"keyboard"};function cK(t){const e=new Set,n=t.style,{nodeName:r}=t,i=aK[r];i&&e.add(i);const{fontWeight:s,textDecoration:o,verticalAlign:l}=n;return o==="underline"?e.add("underline"):o==="line-through"&&e.add("strikethrough"),r==="SPAN"&&t.classList.contains("code")&&e.add("code"),(r==="B"&&s!=="normal"||typeof s=="string"&&(s==="bold"||s==="bolder"||s==="1000"||/^[5-9]\d{2}$/.test(s)))&&e.add("bold"),n.fontStyle==="italic"&&e.add("italic"),l==="super"?e.add("superscript"):l==="sub"&&e.add("subscript"),e}function uK(t){const e=new DOMParser().parseFromString(t,"text/html");return Wy(nf(e.body.childNodes))}function dK(t){if(!(t instanceof globalThis.HTMLElement)){const n=t.textContent;return n?$r(n):[]}if(t.nodeName==="BR")return $r(`
`);if(t.nodeName==="IMG"){const n=t.getAttribute("alt");return $r(n??"")}if(t.nodeName==="HR")return[{type:"divider",children:[{text:""}]}];const e=cK(t);return t.classList.contains("listtype-quote")?(e.delete("italic"),Ew(e,()=>[{type:"blockquote",children:Wy(nf(t.childNodes))}])):Ew(e,()=>{const{nodeName:n}=t;if(n==="A"){const o=t.getAttribute("href");if(o)return m1(o,()=>oK("underline",()=>nf(t.childNodes)))}if(n==="PRE"&&t.textContent)return[{type:"code",children:[{text:t.textContent||""}]}];const r=nf(t.childNodes),i=Wy(r);if(n==="LI"){let o;const l={type:"list-item-content",children:i.filter(c=>o===void 0&&(c.type==="ordered-list"||c.type==="unordered-list")?(o=c,!1):!0)};return[{type:"list-item",children:o?[l,o]:[l]}]}if(n==="P")return[{type:"paragraph",textAlign:Iw(t),children:i}];const s=lK[n];return typeof s=="number"?[{type:"heading",level:s,textAlign:Iw(t),children:i}]:n==="BLOCKQUOTE"?[{type:"blockquote",children:i}]:n==="OL"?[{type:"ordered-list",children:i}]:n==="UL"?[{type:"unordered-list",children:i}]:n==="DIV"&&!Ge(i[0])?[{type:"paragraph",children:i}]:r})}function nf(t){const e=[];for(const n of t)e.push(...dK(n));return e}function Wy(t){if(!t.length)return[{text:""}];if(t.some(Ge)){const e=[];let n=[];const r=()=>{n.length&&(e.push({type:"paragraph",children:n}),n=[])};for(const i of t){if(Ge(i)){r(),e.push(i);continue}We.string(i).trim()!==""&&n.push(i)}return r(),e}return t}const fK={mdastExtensions:[wN(),DN()],extensions:[jN(),PN()]};function Aw(t){let n=bN(t,fK).children;return n.length===1&&n[0].type==="paragraph"&&(n=n[0].children),ni(n,t)}function ni(t,e){const n=[];for(const r of t){const i=hK(r,e);i.length&&n.push(...i)}return n.length||n.push({text:""}),n}function hK(t,e){switch(t.type){case"blockquote":return[{type:"blockquote",children:ni(t.children,e)}];case"link":return m1(t.url,()=>ni(t.children,e));case"code":return[{type:"code",children:[{text:t.value}]}];case"paragraph":return[{type:"paragraph",children:ni(t.children,e)}];case"heading":return[{type:"heading",level:t.depth,children:ni(t.children,e)}];case"list":return[{type:t.ordered?"ordered-list":"unordered-list",children:ni(t.children,e)}];case"listItem":return[{type:"list-item",children:ni(t.children,e)}];case"thematicBreak":return[{type:"divider",children:[{text:""}]}];case"break":return $r(`
`);case"delete":return hr("strikethrough",()=>ni(t.children,e));case"strong":return hr("bold",()=>ni(t.children,e));case"emphasis":return hr("italic",()=>ni(t.children,e));case"inlineCode":return hr("code",()=>$r(t.value));case"text":return $r(t.value)}return $r(e.slice(t.position.start.offset,t.position.end.offset))}const pK=/https?:\/\//;function lm(t,e){Ge(e[0])?pr(t,e):L.insertFragment(t,e)}const t2="x-keystatic-fragment",gK=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,n2=t=>{const e=gK(t);return!!e&&t instanceof e.Node},r2=t=>n2(t)&&t.nodeType===3,mK=t=>n2(t)&&t.nodeType===1,i2=t=>{let e="";if(r2(t)&&t.nodeValue)return t.nodeValue;if(mK(t)){for(const r of Array.from(t.childNodes))e+=i2(r);const n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e};function yK(t,e){const{selection:n}=t;if(!n)return;const[r,i]=Dt.edges(n),s=V.void(t,{at:r.path}),o=V.void(t,{at:i.path});if(Dt.isCollapsed(n)&&!s)return;const l=Ee.toDOMRange(t,n);let a=l.cloneContents(),c=a.childNodes[0];if(a.childNodes.forEach(g=>{g.textContent&&g.textContent.trim()!==""&&(c=g)}),o){const[g]=o,m=l.cloneRange(),b=Ee.toDOMNode(t,g);m.setEndAfter(b),a=m.cloneContents()}if(s&&(c=a.querySelector("[data-slate-spacer]")),Array.from(a.querySelectorAll("[data-slate-zero-width]")).forEach(g=>{const m=g.getAttribute("data-slate-zero-width")==="n";g.textContent=m?`
`:""}),r2(c)){const g=c.ownerDocument.createElement("span");g.style.whiteSpace="pre",g.appendChild(c),a.appendChild(g),c=g}const u=t.getFragment(),d=JSON.stringify(u,(g,m)=>m instanceof Uint8Array?{[rf]:Fo(m)}:m),f=window.btoa(encodeURIComponent(d));c.setAttribute("data-keystatic-fragment",f),e.setData(`application/${t2}`,f);const p=a.ownerDocument.createElement("div");p.appendChild(a),p.setAttribute("hidden","true"),a.ownerDocument.body.appendChild(p),e.setData("text/html",p.innerHTML),e.setData("text/plain",i2(p)),a.ownerDocument.body.removeChild(p)}const bK=/data-keystatic-fragment="(.+?)"/m,xK=t=>{const e=t.getData("text/html"),[,n]=e.match(bK)||[];return n},rf="$$keystaticUint8Array$$";function vK(t){const{insertTextData:e}=t;return t.setFragmentData=n=>{yK(t,n)},t.insertFragmentData=n=>{const r=n.getData(`application/${t2}`)||xK(n);if(r){const i=decodeURIComponent(window.atob(r)),s=JSON.parse(i,(o,l)=>typeof l=="object"&&l!==null&&rf in l&&typeof l[rf]=="string"?Xh(l[rf]):l);return t.insertFragment(s),!0}return!1},t.insertTextData=n=>{const r=V.above(t,{match:Ge});if(r?.[0].type==="code"){const l=n.getData("text/plain");return t.insertText(l),!0}let i=n.getData("vscode-editor-data");if(i)try{const l=JSON.parse(i);if(l?.mode==="markdown"||l?.mode==="mdx"){const a=n.getData("text/plain");if(a){const c=Aw(a);return lm(t,c),!0}}}catch(l){console.log(l)}const s=n.getData("text/plain");if(pK.test(s)&&Yu(s)&&t.selection&&!Dt.isCollapsed(t.selection)&&V.above(t,{match:l=>Ge(l)&&!Ge(l.children[0])})&&V.nodes(t,{match:l=>l.type==="link"}).next().done)return L.wrapNodes(t,{type:"link",href:s,children:[]},{split:!0}),!0;const o=n.getData("text/html");if(o){const l=uK(o);return lm(t,l),!0}if(s){const l=Aw(s);return lm(t,l),!0}return e(n)},t}const Tw={"...":"…","-->":"→","->":"→","<-":"←","<--":"←","--":"–"};function kK(t){const{insertText:e}=t;return t.insertText=n=>{if(e(n),n===" "&&t.selection&&Dt.isCollapsed(t.selection)){const r=t.selection.anchor,i=V.above(t,{match:Ge});i&&Object.keys(Tw).forEach(s=>{const o=V.before(t,r,{unit:"character",distance:s.length+1});if(o&&De.isDescendant(o.path,i[1])){const l={anchor:r,focus:o};V.string(t,l).slice(0,s.length)===s&&(t.history.undos.push({operations:[],selectionBefore:t.selection}),L.select(t,l),t.insertText(Tw[s]+" "))}})}},t}function wK(t){return t.insertSoftBreak=()=>{L.insertText(t,`
`)},t}const am={"mod+b":"bold","mod+i":"italic","mod+u":"underline"};function SK(t,e){const n=V.marks(t);if(n!=null&&n[e])return!0;for(const r of V.nodes(t,{match:Bt.isText}))if(r[0][e])return!0;return!1}const CK=new Map([["ArrowUp","up"],["ArrowDown","down"],["ArrowLeft","left"],["ArrowRight","right"]]),EK=(t,e)=>n=>{if(n.defaultPrevented)return;for(const l in am)if(e.formatting.inlineMarks[am[l]]&&$l.isHotkey(l,n.nativeEvent)){n.preventDefault();const a=am[l];SK(t,a)?V.removeMark(t,a):V.addMark(t,a,!0);return}if($l.isHotkey("mod+\\",n.nativeEvent)){eT(t);return}if(e.links&&$l.isHotkey("mod+k",n.nativeEvent)){n.preventDefault(),Lj(t,"");return}if(n.key==="Tab"&&(n.shiftKey?nW(t):tW(t))){n.preventDefault();return}if(n.key==="Tab"&&t.selection){const l=V.above(t,{match:a=>a.type==="layout-area"||a.type==="table-cell"});if(l){const a=n.shiftKey?V.before(t,l[1],{unit:"block"}):V.after(t,l[1],{unit:"block"});L.setSelection(t,{anchor:a,focus:a}),n.preventDefault()}}if($l.isHotkey("mod+a",n)){const l=V.above(t,{match:Vt("table")});if(l){L.select(t,l[1]),n.preventDefault();return}}const r=CK.get(n.key),{selection:i}=t;if(r&&i){const l=Rc(t);if(l){var s,o;const a=(s=V.above(t,{match:Vt("table-cell"),at:i.focus.path}))===null||s===void 0?void 0:s[1],c=(o=V.above(t,{match:Vt("table-cell"),at:i.anchor.path}))===null||o===void 0?void 0:o[1];if(!a||!c)return;const u=CW(t,a,r);if(u){if(l.singleCell==="not-selected"){if(r!=="up"&&r!=="down")return;const[d,f]=Ee.toDOMPoint(t,i.focus),p=V.above(t,{match:Ge,at:i.focus.path});if(!p||r==="up"&&p[1].slice(a.length).some(k=>k!==0))return;if(r==="down"){const[k]=V.parent(t,p[1]);if(k.children.length-1!==p[1][p[1].length-1])return;for(const[E,T]of We.ancestors(t,p[1],{reverse:!0})){if(E.type==="table-cell")break;const[N]=V.parent(t,T);if(N.children.length-1!==T[T.length-1])return}}const g=Ee.toDOMNode(t,p[0]),m=document.createRange();m.selectNodeContents(g);const b=Array.from(m.getClientRects()),y=document.createRange();y.setStart(d,f),y.setEnd(d,f);const x=Array.from(y.getClientRects()),v=x[x.length-1],w=r==="up"?"top":"bottom",S=w==="top"?Math.min(...b.map(k=>k.top)):Math.max(...b.map(k=>k.bottom));if(v[w]===S){const k=V[r==="up"?"end":"start"](t,u);L.select(t,{focus:k,anchor:n.shiftKey?i.anchor:k}),n.preventDefault()}return}if(!n.shiftKey)return;De.equals(u,c)?L.select(t,u):L.select(t,{anchor:i.anchor,focus:V.start(t,u)}),n.preventDefault()}}}};function IK(t,e){return vK(uW(wK(BW(kK(nK(tK(iK(t,e,eK(t,e,e2(k8(HO(XS())),t,e))))))))))}function s2({onChange:t,value:e,componentBlocks:n,documentFeatures:r,...i}){let s=fr();const o=C.useMemo(()=>IK(r,n),[r,n]);return h.jsx("div",{"data-layout":s,className:Ye(W({backgroundColor:j.color.background.canvas,minWidth:0,'&[data-layout="main"]':{flex:1,display:"flex",flexDirection:"column"},'&:not([data-layout="main"])':{border:`${j.size.border.regular} solid ${j.color.border.neutral}`,borderRadius:j.size.radius.medium}}),"keystar-document-editor"),children:h.jsxs(TK,{componentBlocks:n,documentFeatures:r,editor:o,value:e,onChange:l=>{t?.(l);const a=window.getSelection();if(a&&!Ee.isFocused(o)){const c=Ee.toDOMNode(o,o);a.anchorNode===c&&Ee.focus(o)}},children:[C.useMemo(()=>t!==void 0&&h.jsx(EW,{documentFeatures:r}),[r,t]),h.jsx(NK,{...i,readOnly:t===void 0}),!1]})})}const o2=C.createContext(!1);function l2(){return C.useContext(o2)}function AK(t){return Math.random().toString(36)}function TK({children:t,editor:e,onChange:n,value:r,componentBlocks:i,documentFeatures:s}){const o=C.useMemo(()=>AK(),[e]);return h.jsx(o2.Provider,{value:!0,children:h.jsx(UO,{editor:e,value:r,onChange:l=>{n(l);const a=window.getSelection();if(a&&!Ee.isFocused(e)){const c=Ee.toDOMNode(e,e);a.anchorNode===c&&Ee.focus(e)}},children:h.jsx(hW,{children:h.jsx(aH,{componentBlocks:i,editorDocumentFeatures:s,children:t})})},o)})}function Ky(t){return typeof t=="string"?t.length:Array.isArray(t.content)?t.content.reduce((e,n)=>e+Ky(n),0):Ky(t.content)}function NK(t){const e=P0(),n=fr(),r=kb(),{componentBlocks:i,documentFeatures:s}=Xr(),o=C.useMemo(()=>EK(r,s),[r,s]);return h.jsx(iz,{editor:r,children:h.jsx(bR,{size:n==="main"?"medium":"regular",children:h.jsx(qO,{placeholder:'Start writing or press "/" for commands...',decorate:C.useCallback(([l,a])=>{let c=[];if(l.type==="component-block"){if(l.children.length===1&&Rt.isElement(l.children[0])&&l.children[0].type==="component-inline-prop"&&l.children[0].propPath===void 0)return c;l.children.forEach((u,d)=>{if(We.string(u)===""&&Rt.isElement(u)&&(u.type==="component-block-prop"||u.type==="component-inline-prop")&&u.propPath!==void 0){const f=V.start(r,[...a,d]),p=nz(u.propPath,i[l.component].schema,l.props);p&&c.push({placeholder:p,anchor:f,focus:f})}})}if(l.type==="code"&&l.children.length===1&&l.children[0].type===void 0&&l.language&&l.language in $.languages){let f=function(p,g){for(const m of g){const b=Ky(m),y=p+b;typeof m!="string"&&(c.push({["prism_"+m.type]:!0,anchor:{path:u,offset:p},focus:{path:u,offset:y}}),f(p,Array.isArray(m.content)?m.content:[m.content])),p=y}};const u=[...a,0],d=$.tokenize(l.children[0].text,$.languages[l.language]);f(0,d)}return c},[r,i]),onKeyDown:o,renderElement:PW,renderLeaf:UW,...t,...Ar({container:e,layout:n}),className:Ye(_K,t.className)})})})}let jK={flex:1,height:"auto",minHeight:j.size.scale[2e3],minWidth:0,padding:j.size.space.medium,'&[data-layout="main"]':{boxSizing:"border-box",height:"100%",padding:0,paddingTop:j.size.space.medium,minHeight:0,minWidth:0,maxWidth:800,marginInline:"auto",[dn.above.mobile]:{padding:j.size.space.xlarge},[dn.above.tablet]:{padding:j.size.space.xxlarge},'&[data-container="wide"]':{padding:j.size.scale[600]}}};const _K=W({...jK,a:{color:j.color.foreground.accent}}),OK={};let RK=0;function Nw(){return RK++}function DK(t){const e=Xr(),[n,r]=C.useState(()=>({key:Nw(),value:t.value})),i=C.useMemo(()=>ez(e.documentFeatures,t.schema.options),[t.schema,e.documentFeatures]);return n.value!==t.value&&r({key:Nw(),value:t.value}),h.jsx(dH,{children:h.jsx(Sb,{label:t.schema.options.label,children:s=>C.createElement(s2,{...s,key:n.key,componentBlocks:t.schema.options.componentBlocks==="inherit"?e.componentBlocks:OK,documentFeatures:i,onChange:o=>{r(l=>({key:l.key,value:o})),t.onChange(o)},value:n.value})})})}function MK(t){const e=d1(t);return t.schema.options.kind==="block"&&(t.schema.options.editIn==="both"||t.schema.options.editIn==="modal")&&e.value?h.jsx(DK,{schema:t.schema,...e}):null}function a2(t){if(t.kind==="object"){var e;return(e=t.Input)!==null&&e!==void 0?e:Hq}if(t.kind==="conditional"){var n;return(n=t.Input)!==null&&n!==void 0?n:Gq}if(t.kind==="array"){var r;return(r=t.Input)!==null&&r!==void 0?r:Qq}return t.kind==="child"?MK:t.Input}const ch=C.memo(function(e){var n;const r=q(7);if(((n=e.omitFieldAtPath)===null||n===void 0?void 0:n.length)===0)return null;let i;r[0]!==e.schema?(i=a2(e.schema),r[0]=e.schema,r[1]=i):i=r[1];const s=i,o=e,l=!!e.autoFocus,a=!!e.forceValidation;let c;return r[2]!==s||r[3]!==o||r[4]!==l||r[5]!==a?(c=h.jsx(s,{...o,autoFocus:l,forceValidation:a}),r[2]=s,r[3]=o,r[4]=l,r[5]=a,r[6]=c):c=r[6],c}),FK=[],ji=C.memo(function(e){const n=q(13);let r,i;n[0]!==e?({slugField:i,...r}=e,n[0]=e,n[1]=r,n[2]=i):(r=n[1],i=n[2]);let s;n[3]!==r.schema?(s=a2(r.schema),n[3]=r.schema,n[4]=s):s=n[4];const o=s,l=r,a=!!r.autoFocus,c=!!r.forceValidation;let u;n[5]!==o||n[6]!==l||n[7]!==a||n[8]!==c?(u=h.jsx(o,{...l,autoFocus:a,forceValidation:c}),n[5]=o,n[6]=l,n[7]=a,n[8]=c,n[9]=u):u=n[9];let d;return n[10]!==i||n[11]!==u?(d=h.jsx(uT,{value:FK,children:h.jsx(cT,{value:i,children:u})}),n[10]=i,n[11]=u,n[12]=d):d=n[12],d});class Gy extends Error{constructor(){super("There are a variable number of child fields")}}function c2(t){try{const e=Yy(t,[],new Set);return e.length===1?e[0]:void 0}catch(e){if(e instanceof Gy)return;throw e}}function Yy(t,e,n){if(n.has(t))return[];switch(n.add(t),t.kind){case"form":return[];case"child":return[{relativePath:e,options:t.options,kind:"child"}];case"conditional":{if(Mc(t))throw new Gy;return[]}case"array":{if(t.asChildTag){const r=Yy(t.element,[],n);return r.length>1?[]:[{kind:"array",asChildTag:t.asChildTag,field:t,relativePath:e,child:r[0]}]}if(Mc(t))throw new Gy;return[]}case"object":{const r=[];for(const[i,s]of Object.entries(t.fields))r.push(...Yy(s,e.concat(i),n));return r}}}function Mc(t,e=new Set){if(e.has(t))return!1;switch(e.add(t),t.kind){case"form":return!1;case"child":return!0;case"conditional":return Object.values(t.values).some(n=>Mc(n,e));case"object":return Object.keys(t.fields).some(n=>Mc(t.fields[n],e));case"array":return Mc(t.element,e)}}function y1(t){if(t.type==="inline")return $i(t.children);if(t.type==="link")return m1(t.attributes.href,()=>$i(t.children));if(t.type==="text")return $r(t.attributes.content);if(t.type==="strong")return hr("bold",()=>$i(t.children));if(t.type==="code")return hr("code",()=>$r(t.attributes.content));if(t.type==="em")return hr("italic",()=>$i(t.children));if(t.type==="s")return hr("strikethrough",()=>$i(t.children));if(t.type==="tag"){if(t.tag==="u")return hr("underline",()=>$i(t.children));if(t.tag==="kbd")return hr("keyboard",()=>$i(t.children));if(t.tag==="sub")return hr("subscript",()=>$i(t.children));if(t.tag==="sup")return hr("superscript",()=>$i(t.children))}if(t.type==="softbreak")return $r(" ");if(t.type==="hardbreak")return $r(`
`);if(t.tag==="component-inline-prop"&&Array.isArray(t.attributes.propPath)&&t.attributes.propPath.every(e=>typeof e=="string"||typeof e=="number"))return{type:"component-inline-prop",children:sf(t.children),propPath:t.attributes.propPath};throw new Error(`Unknown inline node type: ${t.type}`)}function $i(t){return t.flatMap(y1)}function sf(t){const e=t.flatMap(y1),n=[];let r;for(const[s,o]of e.entries()){var i;o.type===void 0&&o.text===""&&((i=r)===null||i===void 0?void 0:i.type)===void 0&&s!==e.length-1||(n.push(o),r=o)}return n.length||n.push({text:""}),n}function jw(t,e){const n=t.children.flatMap(r=>Yt(r,e));return n.length===0?[{type:"paragraph",children:[{text:""}]}]:(n[n.length-1].type!=="paragraph"&&n.push({type:"paragraph",children:[{text:""}]}),n)}function Yt(t,e){if(t.type==="blockquote")return{type:"blockquote",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="fence"){const{language:i,content:s,...o}=t.attributes;return{type:"code",children:[{text:s.replace(/\n$/,"")}],...typeof i=="string"?{language:i}:{},...o}}if(t.type==="heading")return{...t.attributes,level:t.attributes.level,type:"heading",children:sf(t.children)};if(t.type==="list")return{type:t.attributes.ordered?"ordered-list":"unordered-list",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="item"){var n;const i=[{type:"list-item-content",children:t.children.length?sf([t.children[0]]):[{text:""}]}];if(((n=t.children[1])===null||n===void 0?void 0:n.type)==="list"){const s=t.children[1];i.push({type:s.attributes.ordered?"ordered-list":"unordered-list",children:s.children.flatMap(o=>Yt(o,e))})}return{type:"list-item",children:i}}if(t.type==="paragraph"){if(t.children.length===1&&t.children[0].type==="inline"&&t.children[0].children.length===1&&t.children[0].children[0].type==="image"){var r;const s=t.children[0].children[0];return{type:"image",src:decodeURI(s.attributes.src),alt:s.attributes.alt,title:(r=s.attributes.title)!==null&&r!==void 0?r:"",children:[{text:""}]}}const i=sf(t.children);return i.length===1&&i[0].type==="component-inline-prop"?i[0]:{type:"paragraph",children:i,textAlign:t.attributes.textAlign}}if(t.type==="hr")return{type:"divider",children:[{text:""}]};if(t.type==="table")return{type:"table",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="tbody")return{type:"table-body",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="thead")return t.children.length?{type:"table-head",children:t.children.flatMap(i=>Yt(i,e))}:[];if(t.type==="tr")return{type:"table-row",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="td")return{type:"table-cell",children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="th")return{type:"table-cell",header:!0,children:t.children.flatMap(i=>Yt(i,e))};if(t.type==="tag"){if(t.tag==="table")return Yt(t.children[0],e);if(t.tag==="layout")return{type:"layout",layout:t.attributes.layout,children:t.children.flatMap(i=>Yt(i,e))};if(t.tag==="layout-area")return{type:"layout-area",children:t.children.flatMap(i=>Yt(i,e))};if(t.tag==="component-block")return{type:"component-block",component:t.attributes.component,props:t.attributes.props,children:t.children.length===0?[{type:"component-inline-prop",children:[{text:""}]}]:t.children.flatMap(i=>Yt(i,e))};if(t.tag==="component-block-prop"&&Array.isArray(t.attributes.propPath)&&t.attributes.propPath.every(i=>typeof i=="string"||typeof i=="number"))return{type:"component-block-prop",children:t.children.flatMap(i=>Yt(i,e)),propPath:t.attributes.propPath};if(t.tag){const i=e[t.tag];if(i){const s=c2({kind:"object",fields:i.schema});if(s){const o=JSON.parse(JSON.stringify(t.attributes)),l=[];return u2(t.children,l,o,s,[],e),{type:"component-block",component:t.tag,props:o,children:l}}return{type:"component-block",component:t.tag,props:t.attributes,children:t.children.length===0?[{type:"component-inline-prop",children:[{text:""}]}]:t.children.flatMap(o=>Yt(o,e))}}}throw new Error(`Unknown tag: ${t.tag}`)}return y1(t)}function u2(t,e,n,r,i,s){if(r.kind==="child"){const o=t.flatMap(l=>Yt(l,s));e.push({type:`component-${r.options.kind}-prop`,propPath:[...i,...r.relativePath],children:o})}if(r.kind==="array"){const o=[];for(let[c,u]of t.entries()){if(u.type==="paragraph"&&(u=u.children[0].children[0]),u.type!=="tag")throw new Error(`expected tag ${r.asChildTag}, found type: ${u.type}`);if(u.tag!==r.asChildTag)throw new Error(`expected tag ${r.asChildTag}, found tag: ${u.tag}`);const d=JSON.parse(JSON.stringify(u.attributes));r.child&&u2(u.children,e,d,r.child,[...i,...r.relativePath,c],s),o.push(d)}const l=r.relativePath[r.relativePath.length-1],a=mu(n,r.relativePath.slice(0,-1));a[l]=o}}function Vs(t,e){return typeof t=="string"?`${t.replace(/\/*$/,"")}/${e===void 0?"":e+"/"}`:""}function Jy(t,e,n,r,i,s,o){return t.map(l=>{if(l.type==="component-block"){const c=e[l.component];if(!c)return l;const u=en(c.schema);return{...l,props:PK(u,l.props,n,r,i,o)}}if(l.type==="image"&&typeof l.src=="string"&&i==="edit"){var a;const c=d2(s,o),u=l.src.slice(c.length),d=(a=typeof s.images=="object"&&typeof s.images.directory=="string"?r.get(Wt(s.images.directory)):n)===null||a===void 0?void 0:a.get(u);return d?{type:"image",src:{filename:u,content:d},alt:l.alt,title:l.title,children:[{text:""}]}:{type:"paragraph",children:[{text:`Missing image ${u}`}]}}if(typeof l.type=="string"){const c=Jy(l.children,e,n,r,i,s,o);return{...l,children:c}}return l})}function PK(t,e,n,r,i,s){return Os(t,e,{form:(o,l)=>{if(o.formKind==="asset"){var a;if(i==="read")return o.reader.parse(l);const c=o.filename(l,{slug:s,suggestedFilenamePrefix:void 0});return o.parse(l,{asset:c?o.directory?(a=r.get(o.directory))===null||a===void 0?void 0:a.get(c):n.get(c):void 0,slug:s})}if(o.formKind==="content"||o.formKind==="assets")throw new Error("Not implemented");return i==="read"?o.reader.parse(l):o.parse(l,void 0)}})}function d2(t,e){return Vs(typeof t.images=="object"?t.images.publicPath:void 0,e)}function Uo(t,e,n,r,i){const s=[];return{value:Os(e,t,{form(o,l,a){if(a.length===1&&n===a[0]){if(o.formKind!=="slug")throw new Error("slugField is a not a slug field");return o.serializeWithSlug(l).value}if(o.formKind==="asset"){const{asset:c,value:u}=o.serialize(l,{suggestedFilenamePrefix:i?cm(a,e,t):void 0,slug:r});return c&&s.push({path:c.filename,contents:c.content,parent:o.directory}),u}if(o.formKind==="content"||o.formKind==="assets"){let c,u,d;if(o.formKind==="content"){const p=o.serialize(l,{slug:r});p.content&&s.push({path:cm(a,e,t)+o.contentExtension,contents:p.content,parent:void 0}),{value:d,other:c,external:u}=p}else({value:d,other:c,external:u}=o.serialize(l,{slug:r}));for(const[p,g]of c)s.push({path:cm(a,e,t)+"/"+p,contents:g,parent:void 0});const f=new Set(o.directories);for(const[p,g]of u){if(!f.has(p))throw new Error(`Invalid directory ${p} in content field serialization`);for(const[m,b]of g)s.push({path:m,contents:b,parent:p})}return d}return o.serialize(l).value},object(o,l){return Object.fromEntries(Object.entries(l).filter(([a,c])=>c!==void 0))},array(o,l){return l.map(a=>a===void 0?null:a)},conditional(o,l){return l.value===void 0?{discriminant:l.discriminant}:l},child(){}}),extraFiles:s}}function cm(t,e,n){const r=[];for(const i of t){if(e.kind==="array"){if(n=n[i],e.slugField&&e.element.kind==="object"){const s=_t({schema:e.element.fields,slugField:e.slugField},n);r.push(s)}else r.push(i);e=e.element;continue}if(r.push(i),e.kind==="object"){n=n[i],e=e.fields[i];continue}if(e.kind==="conditional"){i==="discriminant"?e=e.discriminant:i==="value"&&(e=e.values[n.discriminant]),n=n[i];continue}throw new Error(`unexpected ${e.kind}`)}return r.join("/")}function nc(t){return new ce.Node("inline",{},t.flatMap(of))}const $K={bold:{type:"strong"},code:{type:"code"},italic:{type:"em"},underline:{type:"tag",tag:"u"},keyboard:{type:"tag",tag:"kbd"},strikethrough:{type:"s"},subscript:{type:"tag",tag:"sub"},superscript:{type:"tag",tag:"sup"}};function of(t){var e,n;if(t.type==="link")return new ce.Node("link",{href:t.href},t.children.flatMap(of));if(t.type!==void 0)throw new Error(`unexpected inline node type: ${t.type}`);const r=Object.keys(t).filter(a=>a!=="text"&&a!=="code").sort(),i=t.text.split(/\n/);if(i.length>1)return i.flatMap((a,c)=>{if(c===0)return of({...t,text:a});const u=of({...t,text:a});return[new ce.Node("hardbreak"),...Array.isArray(u)?u:[u]]});const s=(e=/^\s+/.exec(t.text))===null||e===void 0?void 0:e[0],o=(n=/\s+$/.exec(t.text))===null||n===void 0?void 0:n[0];let l=t.code?[new ce.Node("code",{content:t.text.trim()},[])]:[new ce.Node("text",{content:t.text.trim()})];for(const a of r){const c=$K[a];c&&(l=[new ce.Node(c.type,{},l,c.tag)])}return/^\s+$/.test(t.text)?l.unshift(new ce.Node("text",{content:s},[])):(s!=null&&s.length&&l.unshift(new ce.Node("text",{content:s},[])),o!=null&&o.length&&l.push(new ce.Node("text",{content:o},[]))),l}function LK(t,e){const n=[],r={...e,extraFiles:n};return{node:new ce.Node("document",{},t.flatMap(s=>Zy(s,r))),extraFiles:n}}function f2(t,e,n,r){if(r.kind==="child"){const i=t.find(s=>nl(s.propPath,r.relativePath));i&&e.push(...i.children);return}if(r.kind==="array"){const i=r.relativePath[r.relativePath.length-1],s=mu(n,r.relativePath.slice(0,-1)),o=s[i];delete s[i];const l=new Map;for(const a of t){const c=a.propPath.slice(r.relativePath.length+1),u=a.propPath[r.relativePath.length];l.get(u)===void 0&&l.set(u,[]),l.get(u).push({children:a.children,propPath:c})}e.push(...o.map((a,c)=>{var u;const d=(u=l.get(c))!==null&&u!==void 0?u:[],f=[];return f2(d,f,a,r.child),new ce.Node("tag",a,f,r.asChildTag)}))}}function Zy(t,e){if(t.type==="paragraph"){const r=new ce.Node("paragraph",t.textAlign?{textAlign:t.textAlign}:{},[nc(t.children)]);return t.textAlign&&r.annotations.push({name:"textAlign",value:t.textAlign,type:"attribute"}),r}if(t.type==="image")return e.extraFiles.push({contents:t.src.content,path:t.src.filename,parent:typeof e.documentFeatures.images=="object"&&typeof e.documentFeatures.images.directory=="string"?Wt(e.documentFeatures.images.directory):void 0}),new ce.Node("paragraph",{},[new ce.Node("inline",{},[new ce.Node("image",{src:encodeURI(`${d2(e.documentFeatures,e.slug)}${t.src.filename}`),alt:t.alt,title:t.title})])]);if(t.type==="code"){const r={},{children:i,language:s,type:o,...l}=t,a=typeof e.documentFeatures.formatting.blockTypes.code=="object"?e.documentFeatures.formatting.blockTypes.code.schema:void 0;if(a&&Object.keys(a.fields).length>0){const d=Uo(di(a,l),a,void 0,e.slug,!1);Object.assign(r,d.value),e.extraFiles.push(...d.extraFiles)}let c=i[0].text+`
`;const u=new ce.Node("fence",{content:c,language:s,...r},[new ce.Node("text",{content:c})]);for(const[d,f]of Object.entries(r))u.annotations.push({name:d,value:f,type:"attribute"});return u}const n=r=>Zy(r,e);if(t.type==="blockquote")return new ce.Node("blockquote",{},t.children.map(n));if(t.type==="divider")return new ce.Node("hr");if(t.type==="table"){const r=t.children.find(i=>i.type==="table-head");return new ce.Node("tag",{},[new ce.Node("table",{},[new ce.Node("thead",{},r?r.children.map(n):[]),n(t.children.find(i=>i.type==="table-body"))])],"table")}if(t.type==="table-body")return new ce.Node("tbody",{},t.children.map(n));if(t.type==="table-row")return new ce.Node("tr",{},t.children.map(n));if(t.type==="table-cell")return new ce.Node(t.header?"th":"td",{},t.children.map(n));if(t.type==="heading"){const r={};t.textAlign&&(r.textAlign=t.textAlign);const{children:i,level:s,textAlign:o,type:l,...a}=t,c=e.documentFeatures.formatting.headings.schema;Object.keys(c.fields).length>0&&Object.assign(r,Uo(di(c,a),c,void 0,e.slug,!1).value);const u=new ce.Node("heading",{level:t.level,...r},[nc(t.children)]);for(const[d,f]of Object.entries(r))u.annotations.push({name:d,value:f,type:"attribute"});return u}if(t.type==="ordered-list")return new ce.Node("list",{ordered:!0},t.children.map(n));if(t.type==="unordered-list")return new ce.Node("list",{ordered:!1},t.children.map(n));if(t.type==="layout")return new ce.Node("tag",{layout:t.layout},t.children.map(n),"layout");if(t.type==="layout-area")return new ce.Node("tag",{},t.children.flatMap(n),"layout-area");if(t.type==="component-block"){const r=t.children.length===1&&t.children[0].type==="component-inline-prop"&&t.children[0].propPath===void 0,i=e.componentBlocks[t.component],s=[];for(const a of t.children)(a.type==="component-block-prop"||a.type==="component-inline-prop")&&a.propPath!==void 0&&s.push({type:a.type,propPath:a.propPath,children:a.type==="component-block-prop"?a.children.flatMap(n):[nc(a.children)]});let o=t.props;if(i){const a=Uo(t.props,{kind:"object",fields:i.schema},void 0,e.slug,!1);o=a.value,e.extraFiles.push(...a.extraFiles);const c=c2({kind:"object",fields:i.schema});if(c){const u=[];return f2(s,u,o,c),new ce.Node("tag",o,u,t.component)}}const l=r?[]:s.map(a=>new ce.Node("tag",{propPath:a.propPath},a.children,a.type));return new ce.Node("tag",o,l,t.component)}if(t.type==="component-block-prop"||t.type==="component-inline-prop")return new ce.Node("tag",{propPath:t.propPath},t.type==="component-inline-prop"?[nc(t.children)]:t.children.flatMap(n),t.type);if(t.type==="list-item"){const r=t.children[0];if(r.type!=="list-item-content")throw new Error("list item content must contain a list-item-content");const s=[nc(r.children)],o=t.children[1];return o&&s.push(Zy(o,e)),new ce.Node("item",{},s)}if(t.type==="list-item-content")throw new Error("list-item-content in unexpected position");debugger;throw new Error(`unexpected node type: ${t.type}`)}let BK=0;function _w(){return BK++}const zK=new TextEncoder;function VK(t,e,n,r){const{extraFiles:i,node:s}=LK(t,{componentBlocks:n,documentFeatures:r,slug:e.slug}),o=new Map,l=new Map;for(const a of i){if(a.parent===void 0){o.set(a.path,a.contents);continue}l.has(a.parent)||l.set(a.parent,new Map),l.get(a.parent).set(a.path,a.contents)}return{content:zK.encode(Lc(Hs(Lc(s)))),other:o,external:l,value:void 0}}function UK(t,e,n){const r=ZW(t,e);return r.children=n,V.normalize(r,{force:!0}),r.children}function qK(t){let e=fr();const[n,r]=C.useState(()=>({key:_w(),value:t.value}));n.value!==t.value&&r({key:_w(),value:t.value});let i={label:t.label,labelElementType:"span",description:t.description};return e==="main"&&(i={"aria-label":t.label}),h.jsx(Sb,{height:e==="main"?"100%":void 0,...i,children:s=>C.createElement(s2,{...s,key:n.key,componentBlocks:t.componentBlocks,documentFeatures:t.documentFeatures,onChange:o=>{r(l=>({key:l.key,value:o})),t.onChange(o)},value:n.value})})}const Ow=new TextDecoder,HK=au({label:"Alt text",description:"This text will be used by screen readers and search engines."}),WK=Gn({Input(){return null},defaultValue(){return""},parse(t){if(t===void 0)return"";if(typeof t!="string")throw new Ce("Must be string");return t},validate(t){return t},serialize(t){return{value:t}},label:"Title"});function KK(t){var e,n,r,i,s,o,l,a,c,u,d,f,p,g,m,b,y,x;const v=t.formatting===!0?{blockTypes:!0,headingLevels:!0,inlineMarks:!0,listTypes:!0,softBreaks:!0}:(e=t.formatting)!==null&&e!==void 0?e:{},w=t.images===!0?{}:t.images;return{formatting:{alignment:v.alignment===!0?{center:!0,end:!0}:{center:!!((n=v.alignment)!==null&&n!==void 0&&n.center),end:!!((r=v.alignment)!==null&&r!==void 0&&r.end)},blockTypes:v?.blockTypes===!0?{blockquote:!0,code:{schema:en({})}}:{blockquote:!!((i=v.blockTypes)!==null&&i!==void 0&&i.blockquote),code:(S=>{if(((S=v.blockTypes)===null||S===void 0?void 0:S.code)===void 0)return!1;if(v.blockTypes.code===!0||!v.blockTypes.code.schema)return{schema:en({})};for(const k of["type","children","language"])if(k in v.blockTypes.code.schema)throw new Error(`"${k}" cannot be a key in the schema for code blocks`);return{schema:en(v.blockTypes.code.schema)}})()},headings:(S=>{const k=v?.headingLevels,E=typeof k=="object"&&"levels"in k?k:{levels:k,schema:void 0};if(E.schema){for(const T of["type","children","level","textAlign"])if(T in E.schema)throw new Error(`"${T}" cannot be a key in the schema for headings`)}return{levels:[...new Set(E.levels===!0?[1,2,3,4,5,6]:E.levels)],schema:en((S=E.schema)!==null&&S!==void 0?S:{})}})(),inlineMarks:v.inlineMarks===!0?{bold:!0,code:!0,italic:!0,keyboard:!1,strikethrough:!0,subscript:!1,superscript:!1,underline:!1}:{bold:!!((s=v.inlineMarks)!==null&&s!==void 0&&s.bold),code:!!((o=v.inlineMarks)!==null&&o!==void 0&&o.code),italic:!!((l=v.inlineMarks)!==null&&l!==void 0&&l.italic),strikethrough:!!((a=v.inlineMarks)!==null&&a!==void 0&&a.strikethrough),underline:!!((c=v.inlineMarks)!==null&&c!==void 0&&c.underline),keyboard:!!((u=v.inlineMarks)!==null&&u!==void 0&&u.keyboard),subscript:!!((d=v.inlineMarks)!==null&&d!==void 0&&d.subscript),superscript:!!((f=v.inlineMarks)!==null&&f!==void 0&&f.superscript)},listTypes:v.listTypes===!0?{ordered:!0,unordered:!0}:{ordered:!!((p=v.listTypes)!==null&&p!==void 0&&p.ordered),unordered:!!((g=v.listTypes)!==null&&g!==void 0&&g.unordered)},softBreaks:!!v.softBreaks},links:!!t.links,layouts:[...new Set((t.layouts||[]).map(S=>JSON.stringify(S)))].map(S=>JSON.parse(S)),dividers:!!t.dividers,images:w===void 0?!1:{...w,schema:{alt:(m=(b=w.schema)===null||b===void 0?void 0:b.alt)!==null&&m!==void 0?m:HK,title:(y=(x=w.schema)===null||x===void 0?void 0:x.title)!==null&&y!==void 0?y:WK}},tables:!!t.tables}}function GK({label:t,componentBlocks:e={},description:n,...r}){const i=KK(r);return{kind:"form",formKind:"content",defaultValue(){return[{type:"paragraph",children:[{text:""}]}]},Input(s){return h.jsx(qK,{componentBlocks:e,description:n,label:t,documentFeatures:i,...s})},parse(s,o){const l=Ow.decode(o.content),a=jw(Hs(l),e);return Jy(UK(i,e,a),e,o.other,o.external,"edit",i,o.slug)},contentExtension:".mdoc",validate(s){return s},directories:[...rp(en(Object.fromEntries(Object.entries(e).map(([s,o])=>[s,en(o.schema)])))),...typeof i.images=="object"&&typeof i.images.directory=="string"?[Wt(i.images.directory)]:[]],serialize(s,o){return VK(s,o,e,i)},reader:{parse(s,o){const l=Ow.decode(o.content),a=jw(Hs(l),e);return Jy(a,e,new Map,new Map,"read",i,void 0)}}}}const on={blockParent:"ProseMirror-blockParent",focused:"ProseMirror-focused",hideselection:"ProseMirror-hideselection",nodeInSelection:"ProseMirror-nodeInSelection",nodeSelection:"ProseMirror-selectednode",placeholder:"ProseMirror-placeholder"};function h2(t){const e=new WeakMap;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}let YK=j.color.background.canvas,JK=j.color.alias.borderSelected,Rw=j.size.border.medium,rc=j.size.space.regular;KS({".prosemirror-dropcursor-block":{"&::before, &::after":{backgroundColor:YK,border:`${Rw} solid ${JK}`,borderRadius:"50%",content:'" "',height:rc,position:"absolute",width:rc,top:`calc(${rc} / -2 - ${Rw} / 2)`},"&::before":{left:`calc(${rc} * -1)`},"&::after":{right:`calc(${rc} * -1)`}}});const ZK=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],XK=W`
  /* Provide our own selection indicator */
  .${on.nodeSelection} {
    position: relative;
  }
  .${on.nodeSelection}::after {
    background-color: ${j.color.alias.backgroundSelected};
    border-radius: ${j.size.radius.small};
    content: '';
    inset: calc(${j.size.alias.focusRingGap} * -1);
    pointer-events: none;
    position: absolute;
  }
  .${on.nodeSelection}:is(${ZK.join(", ")}) {
    outline: ${j.size.alias.focusRing} solid
      ${j.color.border.accent};
    outline-offset: ${j.size.alias.focusRingGap};
  }
  .${on.hideselection} *::selection {
    background: transparent;
  }
  .${on.hideselection} *::-moz-selection {
    background: transparent;
  }
  .${on.hideselection} {
    caret-color: transparent;
  }

  /* Style the placeholder element */
  .${on.placeholder} {
    color: ${j.color.foreground.neutralTertiary};
    pointer-events: none;
  }

  /* Protect against generic img rules */
  img.ProseMirror-separator {
    display: inline !important;
    border: none !important;
    margin: 0 !important;
  }

  /* Provide an indicator for focusing places that don't allow regular selection */
  .ProseMirror-gapcursor {
    display: none;
    pointer-events: none;
    position: absolute;
  }
  .ProseMirror-gapcursor:after {
    content: '';
    display: block;
    position: absolute;
    top: -2px;
    width: 20px;
    border-top: 1px solid black;
    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
  }

  @keyframes ProseMirror-cursor-blink {
    to {
      visibility: hidden;
    }
  }

  .ProseMirror-focused .ProseMirror-gapcursor {
    display: block;
  }
  .ProseMirror > .ProseMirror-yjs-cursor:first-child {
    margin-top: 16px;
  }
  /* This gives the remote user caret. The colors are automatically overwritten*/
  .ProseMirror-yjs-cursor {
    position: relative;
    margin-left: -1px;
    margin-right: -1px;
    border-left: 1px solid black;
    border-right: 1px solid black;
    border-color: orange;
    word-break: normal;
    pointer-events: none;
  }
  /* This renders the username above the caret */
  .ProseMirror-yjs-cursor > div {
    position: absolute;
    top: -1.05em;
    left: -1px;
    font-size: 13px;
    background-color: rgb(250, 129, 0);
    font-family: ${j.typography.fontFamily.base};
    font-style: normal;
    font-weight: normal;
    line-height: normal;
    user-select: none;
    color: white;
    padding-left: 2px;
    padding-right: 2px;
    white-space: nowrap;
  }
`;function p2(t){const e=C.useRef(t),n=C.useCallback((...r)=>e.current(...r),[]);return C.useEffect(()=>{e.current=t}),n}function Hl(t){return(e,n)=>e.selection instanceof de&&e.selection.node.type===t?!1:(n&&n(e.tr.replaceSelectionWith(t.createAndFill())),!0)}function QK(t,e){return(n,r,i)=>{const s=[];for(const o of n.selection.ranges)n.doc.nodesBetween(o.$from.pos,o.$to.pos,(l,a)=>{l.type===t&&s.push([a,a+l.nodeSize])});if(!s.length)return Yo(t)(n,r,i);if(r){const o=n.tr;for(const[l,a]of s)o.setBlockType(l,a,e);r(o)}return!0}}function g2(t){const e=t.contentMatch.defaultType,n=e.contentMatch.defaultType,r=Kt(t.schema).nodes.table_header;return(i,s)=>{const o=r.createAndFill(),l=n.createAndFill(),a=e.create(void 0,[o,o,o]),c=e.create(void 0,[l,l,l]);return s?.(i.tr.replaceSelectionWith(t.create(void 0,[a,c,c]))),!0}}function eG(t,e){for(let n=t.depth;n>0;n--){let r=t.$from.node(n);if(r.type.contentMatch.defaultType===e)return{node:r,pos:t.$from.before(n)}}}function qo(t,e=null){const n=t.contentMatch.defaultType;return function(r,i){let{$from:s,$to:o}=r.selection,l=s.blockRange(o),a=!1,c=l;if(!l)return!1;const u=eG(l,n);if(u?.node.type==t)return m2(n)(r,i);if(u&&u.node.type!==t)return i&&i(r.tr.setNodeMarkup(u.pos,t,e).scrollIntoView()),!0;if(l.depth>=2&&s.node(l.depth-1).type.compatibleContent(t)&&l.startIndex==0){if(s.index(l.depth-1)==0)return!1;let f=r.doc.resolve(l.start-2);c=new yf(f,f,l.depth),l.endIndex<l.parent.childCount&&(l=new yf(s,r.doc.resolve(o.end(l.depth)),l.depth)),a=!0}let d=Db(c,t,e,l);return d?(i&&i(tG(r.tr,l,d,a,t).scrollIntoView()),!0):!1}}function tG(t,e,n,r,i){let s=G.empty;for(let u=n.length-1;u>=0;u--)s=G.from(n[u].type.create(n[u].attrs,s));t.step(new tn(e.start-(r?2:0),e.end,e.start,e.end,new Q(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Ql(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function nG(t){return function(e,n){let{$from:r,$to:i,node:s}=e.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(i))return!1;let o=r.node(-1);if(o.type!=t)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let u=G.empty,d=r.index(-1)?1:r.index(-2)?2:3;for(let b=r.depth-d;b>=r.depth-3;b--)u=G.from(r.node(b).copy(u));let f=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;u=u.append(G.from(t.createAndFill()));let p=r.before(r.depth-(d-1)),g=e.tr.replace(p,r.after(-f),new Q(u,4-d,0)),m=-1;g.doc.nodesBetween(p,g.doc.content.size,(b,y)=>{if(m>-1)return!1;b.isTextblock&&b.content.size==0&&(m=y+1)}),m>-1&&g.setSelection(Te.near(g.doc.resolve(m))),n(g.scrollIntoView())}return!0}let l=i.pos==r.end()?o.contentMatchAt(0).defaultType:null,a=e.tr.delete(r.pos,i.pos),c=l?[null,{type:l}]:void 0;return Ql(a.doc,r.pos,2,c)?(n&&n(a.split(r.pos,2,c).scrollIntoView()),!0):!1}}function m2(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?rG(e,n,t,s):iG(e,n,s):!0:!1}}function rG(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new tn(s-1,o,s,o,new Q(G.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new yf(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Nu(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return Ta(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function iG(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,g=n.endIndex-1,m=n.startIndex;g>m;g--)p-=i.child(g).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?G.empty:G.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new tn(d-(l?1:0),f+(a?1:0),d+1,f-1,new Q((l?G.empty:G.from(i.copy(G.empty))).append(a?G.empty:G.from(i.copy(G.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function sG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=G.from(c?t.create():null),d=new Q(G.from(t.create(null,G.from(l.type.create(null,u)))),c?3:1,0),f=s.start,p=s.end;n(e.tr.step(new tn(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}const b1="@@independentForGapCursor";class ht extends Te{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ht.valid(r)?new ht(r):Te.near(r)}content(){return Q.empty}eq(e){return e instanceof ht&&e.head==this.head}toJSON(){return{type:"ksgapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ht(e.resolve(n.pos))}getBookmark(){return new x1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!oG(e)||!lG(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ht.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(ht.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!de.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(ht.valid(l))return l}return null}}}ht.prototype.visible=!1;ht.findFrom=ht.findGapCursorFrom;try{Te.jsonID("ksgapcursor",ht)}catch{}class x1{constructor(e){this.pos=e}map(e){return new x1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ht.valid(n)?new ht(n):Te.near(n)}}function oG(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating||i.type.spec[b1])return!0;if(i.inlineContent)return!1}}return!0}function lG(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating||i.type.spec[b1])return!0;if(i.inlineContent)return!1}}return!0}function Np(t){const e=Be(et),n=C.useId(),[r,i]=C.useState(!1),[s,o]=C.useState(t.value),l=C.useMemo(()=>Ni(t.schema,o,()=>{}),[t.schema])(s),{dismiss:a}=fl();return h.jsxs(h.Fragment,{children:[h.jsx(gn,{children:h.jsx(te,{id:n,elementType:"form",onSubmit:c=>{c.target===c.currentTarget&&(c.preventDefault(),Jr(t.schema,s,void 0)?(t.onSave(s),a()):i(!0))},direction:"column",gap:"xxlarge",children:h.jsx(ji,{...l,forceValidation:r})})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:a,children:e.format("cancel")}),h.jsx(Re,{form:n,prominence:"high",type:"submit",children:"Done"})]})]})}function Fc(t,e,n){try{return To({kind:"object",fields:t},e,[],[],(r,i)=>{if(r.formKind==="asset"){var s;const o=r.filename(i,{slug:n.slug,suggestedFilenamePrefix:void 0});return r.parse(i,{asset:o?r.directory?(s=n.otherFiles.get(r.directory))===null||s===void 0?void 0:s.get(o):n.extraFiles.get(o):void 0,slug:n.slug})}if(r.formKind==="assets")throw new Error("Not implemented");if(r.formKind==="content")throw new Error("Not implemented");return r.parse(i,void 0)},!1)}catch(r){throw new Error(jj(r))}}function ct(t,e){const n=Uo(t,{kind:"object",fields:e},void 0,void 0,!1);return{value:n.value,extraFiles:n.extraFiles.map(r=>({...r,contents:r.contents}))}}function v1(t,e){const n=new Map,r=new Map;for(const i of t.extraFiles)i.parent?(r.has(i.parent)||r.set(i.parent,new Map),r.get(i.parent).set(i.path,i.contents)):n.set(i.path,i.contents);return Fc(e,t.value,{slug:void 0,extraFiles:n,otherFiles:r})}function Us(t,e,n){const r=v1(e,t),i=Uo(r,{kind:"object",fields:t},void 0,n.slug,!1);for(const s of i.extraFiles)s.parent?(n.otherFiles.has(s.parent)||n.otherFiles.set(s.parent,new Map),n.otherFiles.get(s.parent).set(s.path,s.contents)):n.extraFiles.set(s.path,s.contents);return i.value}const Rs=function(e,n){const r=q(3);let i,s;return r[0]!==e||r[1]!==n?(s=v1(e,n),r[0]=e,r[1]=n,r[2]=s):s=r[2],i=s,i};function bc(t){return JSON.stringify({value:t.value,extraFiles:t.extraFiles.map(e=>({path:e.path,parent:e.parent,contents:Fo(e.contents)}))})}function xc(t){if(typeof t=="string")return!1;const e=t.dataset.props;if(!e)return!1;try{const n=JSON.parse(e);return{props:{value:n.value,extraFiles:n.extraFiles.map(r=>({path:r.path,parent:r.parent,contents:Xh(r.contents)}))}}}catch{return!1}}function um(t){const e=q(37),[n,r]=C.useState(!1),i=vt();let s,o;e[0]!==t.component.schema?(o={kind:"object",fields:t.component.schema},e[0]=t.component.schema,e[1]=o):o=e[1],s=o;const l=s,a=Rs(t.node.attrs.props,t.component.schema),c=`${on.blockParent} ${W({marginBlock:"1em",position:"relative",...t.hasNodeSelection?{"&::after":{backgroundColor:j.color.alias.backgroundSelected,borderRadius:j.size.radius.regular,content:"''",inset:0,pointerEvents:"none",position:"absolute"}}:{}})}${t.hasNodeSelection?` ${on.hideselection}`:""}`,u=t.hasNodeSelection?"color.alias.borderSelected":"color.alias.borderDisabled",d=t.hasNodeSelection?"color.alias.backgroundSelected":"color.alias.backgroundIdle",f=t.hasNodeSelection?j.color.foreground.accent:j.color.foreground.neutralTertiary;let p;e[2]!==f?(p=W({color:f,textTransform:"uppercase",fontWeight:j.typography.fontWeight.semibold,fontSize:"0.9rem"}),e[2]=f,e[3]=p):p=e[3];let g;e[4]!==i||e[5]!==t?(g=()=>{i((T,N)=>(N&&N(T.tr.setSelection(de.create(T.doc,t.getPos()))),!0))},e[4]=i,e[5]=t,e[6]=g):g=e[6];let m;e[7]!==p||e[8]!==g||e[9]!==t.component.label?(m=h.jsx(zt,{flex:1,paddingX:"regular",paddingY:"small",UNSAFE_className:p,onClick:g,children:t.component.label}),e[7]=p,e[8]=g,e[9]=t.component.label,e[10]=m):m=e[10];let b;e[11]!==t.component.schema?(b=!!Object.keys(t.component.schema).length&&h.jsx(Re,{prominence:"low",onPress:()=>{r(!0)},UNSAFE_className:W({borderBottomRightRadius:0}),children:"Edit"}),e[11]=t.component.schema,e[12]=b):b=e[12];let y;e[13]!==d||e[14]!==m||e[15]!==t.toolbar||e[16]!==b?(y=h.jsxs(te,{backgroundColor:d,contentEditable:!1,alignItems:"center","data-ignore-content":"",children:[m,t.toolbar,b]}),e[13]=d,e[14]=m,e[15]=t.toolbar,e[16]=b,e[17]=y):y=e[17];let x;e[18]!==t.children?(x=h.jsx(zt,{padding:"regular",children:t.children}),e[18]=t.children,e[19]=x):x=e[19];let v;e[20]!==c||e[21]!==u||e[22]!==y||e[23]!==x?(v=h.jsxs(zt,{UNSAFE_className:c,border:u,borderRadius:"regular",children:[y,x]}),e[20]=c,e[21]=u,e[22]=y,e[23]=x,e[24]=v):v=e[24];let w;e[25]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{r(!1)},e[25]=w):w=e[25];let S;e[26]!==n||e[27]!==t||e[28]!==i||e[29]!==l||e[30]!==a?(S=n&&h.jsxs(nn,{children:[h.jsxs(nt,{children:["Edit ",t.component.label]}),h.jsx(Np,{schema:l,value:a,onSave:T=>{i((N,I)=>(I&&I(N.tr.setNodeAttribute(t.getPos(),"props",ct(T,l.fields))),!0))}})]}),e[26]=n,e[27]=t,e[28]=i,e[29]=l,e[30]=a,e[31]=S):S=e[31];let k;e[32]!==S?(k=h.jsx(dt,{onDismiss:w,children:S}),e[32]=S,e[33]=k):k=e[33];let E;return e[34]!==v||e[35]!==k?(E=h.jsxs(h.Fragment,{children:[v,k]}),e[34]=v,e[35]=k,e[36]=E):E=e[36],E}function aG(t){const e=new Map(Object.keys(t).map((n,r)=>[n,`component${r}`]));return Object.fromEntries(Object.entries(t).flatMap(([n,r])=>{let i;const s={kind:"object",fields:r.schema};if(r.kind==="block")i={group:`${r.forSpecificLocations?"":"block "}${e.get(n)}`,defining:!0,attrs:{props:{default:ct(lt(s),s.fields)}},reactNodeView:{component:function(l){const a=vt(),c=Rs(l.node.attrs.props,r.schema);return"NodeView"in r&&r.NodeView?h.jsx(r.NodeView,{isSelected:l.hasNodeSelection||l.isNodeCompletelyWithinSelection,onRemove:()=>{a((u,d)=>{if(d){const f=l.getPos();d(u.tr.delete(f,f+l.node.nodeSize))}return!0})},onChange:u=>{a((d,f)=>(f&&f(d.tr.setNodeAttribute(l.getPos(),"props",ct(u,s.fields))),!0))},value:c}):h.jsx(um,{node:l.node,hasNodeSelection:l.hasNodeSelection||l.isNodeCompletelyWithinSelection,component:r,getPos:l.getPos,children:"ContentView"in r&&r.ContentView&&h.jsx(r.ContentView,{value:c})})},rendersOwnContent:!1},parseDOM:[{tag:`div[data-component="${n}"]`,getAttrs(o){return typeof o=="string"?!1:xc(o)}}],toDOM(o){return["div",{"data-component":n,"data-props":bc(o.attrs.props)}]},insertMenu:r.forSpecificLocations?void 0:{label:r.label,command:Hl,forToolbar:!0,description:r.description,icon:r.icon}};else if(r.kind==="wrapper")i={group:`${r.forSpecificLocations?"":"block "}${e.get(n)}`,content:"block+",defining:!0,attrs:{props:{default:ct(lt(s),s.fields)}},reactNodeView:{component:function(l){const a=vt(),c=Rs(l.node.attrs.props,r.schema);return"NodeView"in r&&r.NodeView?h.jsx(r.NodeView,{isSelected:l.hasNodeSelection||l.isNodeCompletelyWithinSelection,onRemove:()=>{a((u,d)=>{if(d){const f=l.getPos();d(u.tr.delete(f,f+l.node.nodeSize))}return!0})},onChange:u=>{a((d,f)=>(f&&f(d.tr.setNodeAttribute(l.getPos(),"props",ct(u,s.fields))),!0))},value:c,children:l.children}):h.jsx(um,{node:l.node,hasNodeSelection:l.hasNodeSelection||l.isNodeCompletelyWithinSelection,component:r,getPos:l.getPos,children:"ContentView"in r&&r.ContentView?h.jsx(r.ContentView,{value:c,children:l.children}):l.children})},rendersOwnContent:!1},toDOM(o){return["div",{"data-component":n,"data-props":bc(o.attrs.props)},0]},parseDOM:[{tag:`div[data-component="${n}"]`,getAttrs:xc}],insertMenu:r.forSpecificLocations?void 0:{label:r.label,command:Hl,forToolbar:!0,description:r.description,icon:r.icon}};else if(r.kind==="inline")i={group:"inline",inline:!0,attrs:{props:{default:ct(lt(s),s.fields)}},toDOM:o=>["span",{"data-component":n,"data-props":bc(o.attrs.props)}],parseDOM:[{tag:`span[data-component="${n}"]`,getAttrs:xc}],reactNodeView:{component:function(l){const a=Rs(l.node.attrs.props,r.schema),c=vt();return"NodeView"in r&&r.NodeView?h.jsx("span",{contentEditable:!1,children:h.jsx(r.NodeView,{value:a,onChange:u=>{c((d,f)=>(f&&f(d.tr.setNodeAttribute(l.getPos(),"props",ct(u,s.fields))),!0))},isSelected:l.hasNodeSelection||l.isNodeCompletelyWithinSelection,onRemove:()=>{c((u,d)=>{if(d){const f=l.getPos();d(u.tr.delete(f,f+l.node.nodeSize))}return!0})}})}):"ContentView"in r&&r.ContentView?h.jsx(zt,{elementType:"span",contentEditable:!1,border:l.hasNodeSelection?"color.alias.borderSelected":"color.alias.borderIdle",borderRadius:"regular",children:h.jsx(r.ContentView,{value:a})}):h.jsx(zt,{elementType:"span",contentEditable:!1,border:l.hasNodeSelection?"color.alias.borderSelected":"color.alias.borderIdle","data-component":n,borderRadius:"regular",UNSAFE_className:W({"::after":{content:"attr(data-component)"}})})},rendersOwnContent:!1},insertMenu:{label:r.label,command:Hl,forToolbar:!0,description:r.description,icon:r.icon}};else if(r.kind==="repeating"){const o=r.children.map(l=>({key:l,label:t[l].label}));i={group:`${r.forSpecificLocations?"":"block "}${e.get(n)}`,content:`(${r.children.map(l=>e.get(l)).join(" | ")}){${r.validation.children.min},${r.validation.children.max===1/0?"":r.validation.children.max}}`,defining:!0,attrs:{props:{default:ct(lt(s),s.fields)}},reactNodeView:{component:function(a){const c=vt(),u=Rs(a.node.attrs.props,r.schema);return"NodeView"in r&&r.NodeView?h.jsx(r.NodeView,{isSelected:a.hasNodeSelection||a.isNodeCompletelyWithinSelection,onRemove:()=>{c((d,f)=>{if(f){const p=a.getPos();f(d.tr.delete(p,p+a.node.nodeSize))}return!0})},onChange:d=>{c((f,p)=>(p&&p(f.tr.setNodeAttribute(a.getPos(),"props",ct(d,s.fields))),!0))},value:u,children:a.children}):h.jsx(um,{node:a.node,hasNodeSelection:a.hasNodeSelection||a.isNodeCompletelyWithinSelection,component:r,getPos:a.getPos,toolbar:a.node.contentMatchAt(a.node.childCount).defaultType&&(r.children.length===1?h.jsx(Re,{onPress:()=>{c((d,f)=>(f&&f(d.tr.insert(a.getPos()+a.node.nodeSize-1,d.schema.nodes[r.children[0]].createAndFill())),!0))},children:"Insert"}):h.jsxs(Ii,{children:[h.jsx(Re,{children:"Insert"}),h.jsx(Ai,{onAction:d=>{c((f,p)=>(p&&p(f.tr.insert(a.getPos()+a.node.nodeSize-1,f.schema.nodes[d].createAndFill())),!0))},items:o,children:d=>h.jsx(Je,{children:d.label},d.key)})]})),children:"ContentView"in r&&r.ContentView?h.jsx(r.ContentView,{value:u,children:a.children}):a.children})},rendersOwnContent:!1},toDOM(l){return["div",{"data-component":n,"data-props":bc(l.attrs.props)},0]},parseDOM:[{tag:`div[data-component="${n}"]`,getAttrs:xc}],insertMenu:r.forSpecificLocations?void 0:{label:r.label,command:Hl,forToolbar:!0,description:r.description,icon:r.icon}}}return i?[[n,i]]:[]}))}function cG(t){return Object.fromEntries(Object.entries(t).flatMap(([e,n])=>{var r;if(n.kind!=="mark")return[];const i={kind:"object",fields:n.schema},s=(r=n.tag)!==null&&r!==void 0?r:"span",o={attrs:{props:{default:ct(lt(i),i.fields)}},toDOM(l){const a=document.createElement(s);a.setAttribute("data-component",e),a.setAttribute("data-props",bc(l.attrs.props));let c,u=()=>(c||(c=v1(l.attrs.props,n.schema)),c);return typeof n.className=="function"?a.className=n.className({value:u()}):typeof n.className=="string"&&(a.className=n.className),typeof n.style=="function"?Object.assign(a.style,n.style({value:u()})):n.style&&Object.assign(a.style,n.style),a},parseDOM:[{tag:`${s}[data-component="${e}"]`,getAttrs:xc}]};return[[e,o]]}))}const uG=W({marginBlock:"1em"}),dG=["p",{class:uG},0],fG=["blockquote",{class:Ye(on.blockParent,W({[`&.${on.nodeInSelection}, &.${on.nodeSelection}`]:{borderColor:j.color.alias.borderSelected}}))},0],hG=["hr",{contenteditable:"false",class:W({cursor:"pointer",[`&.${on.nodeInSelection}, &.${on.nodeSelection}`]:{backgroundColor:j.color.alias.borderSelected}})}],pG=["pre",{spellcheck:"false"},["code",{},0]],gG=["br"],mG=["ol",{},0],yG=["ul",{},0],bG=["li",{},0],y2="inline*",xG=[{description:"Use this for a top level heading",icon:dF},{description:"Use this for key sections",icon:fF},{description:"Use this for sub-sections",icon:hF},{description:"Use this for deep headings",icon:pF},{description:"Use this for grouping list items",icon:gF},{description:"Use this for low-level headings",icon:mF}],Dw={colspan:{default:1},rowspan:{default:1}},b2=W({borderBottom:`1px solid ${j.color.alias.borderIdle}`,borderInlineEnd:`1px solid ${j.color.alias.borderIdle}`,boxSizing:"border-box",margin:0,padding:j.size.space.regular,position:"relative",textAlign:"start",verticalAlign:"top","&.selectedCell":{backgroundColor:j.color.alias.backgroundSelected,"& *::selection":{backgroundColor:"transparent"}},"&.selectedCell::after":{border:`1px solid ${j.color.alias.borderSelected}`,position:"absolute",top:-1,left:-1,content:'""',height:"100%",width:"100%"}}),vG=W(b2,{backgroundColor:j.color.scale.slate3,fontWeight:j.typography.fontWeight.semibold}),Gt={doc:{content:"block+"},paragraph:{content:y2,group:"block",parseDOM:[{tag:"p"},{tag:"[data-ignore-content]",ignore:!0}],toDOM(){return dG}},text:{group:"inline"},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return fG},insertMenu:{label:"Blockquote",description:"Insert a quote or citation",icon:Bb,command:iE}},divider:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return hG},insertMenu:{label:"Divider",description:"A horizontal line to separate content",icon:yF,command:Hl}},code_block:{content:"text*",group:"block",defining:!0,[b1]:!0,attrs:{language:{default:""}},insertMenu:{label:"Code block",description:"Display code with syntax highlighting",icon:uF,command:Yo},marks:"",code:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return pG}},list_item:{content:"block+",parseDOM:[{tag:"li"}],toDOM(){return bG},defining:!0},unordered_list:{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM(){return yG},insertMenu:{label:"Bullet list",description:"Insert an unordered list",icon:wf,command:qo}},ordered_list:{content:"list_item+",group:"block",attrs:{start:{default:1}},parseDOM:[{tag:"ol",getAttrs:t=>typeof t=="string"?!1:!(t instanceof HTMLOListElement)||t.start<0?{start:1}:{start:t.start}}],toDOM(t){return t.attrs.start===1?mG:["ol",{start:t.attrs.start},0]},insertMenu:{label:"Ordered list",description:"Insert an ordered list",icon:Lb,command:qo}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return gG}},table:{content:"table_row+",insertMenu:{label:"Table",description:"Insert a table",icon:zb,command:g2},tableRole:"table",isolating:!0,group:"block",parseDOM:[{tag:"table"}],toDOM(){return["table",{class:W({width:"100%",tableLayout:"fixed",position:"relative",borderSpacing:0,borderInlineStart:`1px solid ${j.color.alias.borderIdle}`,borderTop:`1px solid ${j.color.alias.borderIdle}`,"&:has(.selectedCell) *::selection":{backgroundColor:"transparent"},".ProseMirror-widget + *":{marginTop:0}})},["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",allowGapCursor:!1,parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:"block+",tableRole:"cell",isolating:!0,attrs:Dw,parseDOM:[{tag:"td"}],toDOM(){return["td",{class:b2},0]}},table_header:{content:"block+",tableRole:"header_cell",attrs:Dw,isolating:!0,parseDOM:[{tag:"th"}],toDOM(){return["th",{class:vG},0]}},image:{content:"",group:"inline",inline:!0,attrs:{src:{},filename:{},alt:{default:""},title:{default:""}},insertMenu:{label:"Image",description:"Insert an image",icon:Iu,command:t=>(e,n,r)=>(n&&r&&(async()=>{const i=await Ap("image/*"),s=Kt(t.schema);!i||!s.config.image||r.dispatch(r.state.tr.replaceSelectionWith(t.createChecked({src:new Uint8Array(await i.arrayBuffer()),filename:s.config.image.transformFilename(i.name)})))})(),!0)},nodeView(t){const e=new Blob([t.attrs.src],{type:t.attrs.filename.endsWith(".svg")?"image/svg+xml":void 0}),n=document.createElement("img");return n.src=URL.createObjectURL(e),n.alt=t.attrs.alt,n.title=t.attrs.title,n.dataset.filename=t.attrs.filename,n.classList.add(W({boxSizing:"border-box",borderRadius:j.size.radius.regular,display:"inline-block",maxHeight:j.size.scale[3600],maxWidth:"100%",transition:vr("box-shadow"),"&::selection":{backgroundColor:"transparent"}})),{dom:n,destroy(){URL.revokeObjectURL(n.src)}}},toDOM(t){return["img",{src:`data:${t.attrs.filename.endsWith(".svg")?"image/svg+xml":"application/octet-stream"};base64,${Fo(t.attrs.src)}`,alt:t.attrs.alt,title:t.attrs.title,"data-filename":t.attrs.filename}]},parseDOM:[{tag:"img[src][data-filename]",getAttrs(t){var e,n;if(typeof t=="string")return!1;const r=t.getAttribute("src"),i=t.getAttribute("data-filename");return!(r!=null&&r.startsWith("data:"))||!i?!1:{src:Xh(r.replace(/^data:[a-z/-]+;base64,/,"")),filename:i,alt:(e=t.getAttribute("alt"))!==null&&e!==void 0?e:"",title:(n=t.getAttribute("title"))!==null&&n!==void 0?n:""}}}]}},kG=["em",0],wG=["strong",0],SG=["code",0],CG=["s",0],ic={link:{attrs:{href:{},title:{default:""}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){var e;if(typeof t=="string")return!1;const n=t.getAttribute("href");return n?{href:n,title:(e=t.getAttribute("title"))!==null&&e!==void 0?e:""}:!1}}],toDOM(t){return["a",{href:t.attrs.href,title:t.attrs.title===""?void 0:t.attrs.title},0]}},italic:{shortcuts:["Mod-i","Mod-I"],parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="italic"}],toDOM(){return kG}},bold:{shortcuts:["Mod-b","Mod-B"],parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>typeof t=="string"?!1:t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>typeof t=="string"?/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null:!1}],toDOM(){return wG}},strikethrough:{shortcuts:["Mod-Shift-s","Mod-Shift-S"],parseDOM:[{tag:"s"}],toDOM(){return CG}},code:{shortcuts:["Mod-`","Mod-Shift-M","Mod-E","Mod-e"],parseDOM:[{tag:"code"}],toDOM(){return SG}}};function jp(t,e,n){const r={doc:Gt.doc,paragraph:Gt.paragraph,text:Gt.text,hard_break:Gt.hard_break,...aG(e)};t.blockquote&&(r.blockquote=Gt.blockquote),t.divider&&(r.divider=Gt.divider),t.codeBlock&&(r.code_block={...Gt.code_block,attrs:{...Gt.code_block.attrs,props:{default:ct(lt({kind:"object",fields:t.heading.schema}),t.heading.schema)}}}),t.orderedList&&(r.ordered_list=Gt.ordered_list),t.unorderedList&&(r.unordered_list=Gt.unordered_list),(t.orderedList||t.unorderedList)&&(r.list_item=Gt.list_item),t.heading.levels.length&&(r.heading={attrs:{level:{default:t.heading.levels[0]},props:{default:ct(lt({kind:"object",fields:t.heading.schema}),t.heading.schema)}},content:y2,group:"block",parseDOM:t.heading.levels.map(u=>({tag:"h"+u,attrs:{level:u}})),defining:!0,toDOM(u){return["h"+u.attrs.level,0]},insertMenu:t.heading.levels.map((u,d)=>({...xG[d],label:"Heading "+u,command:f=>Yo(f,{level:u})}))}),t.table&&(r.table=Gt.table,r.table_row=Gt.table_row,n?r.table_cell={...Gt.table_cell,content:"paragraph"}:r.table_cell=Gt.table_cell,r.table_header=Gt.table_header),t.image&&(r.image=Gt.image);const i={...cG(e)};t.link&&(i.link=ic.link),t.italic&&(i.italic=ic.italic),t.bold&&(i.bold=ic.bold),t.strikethrough&&(i.strikethrough=ic.strikethrough),t.code&&(i.code=ic.code);const s=new rM({nodes:r,marks:i}),o=s.nodes,l=s.marks,a={schema:s,marks:l,nodes:o,config:t,components:e,insertMenuItems:[],format:n?"mdx":"markdoc"};x2.set(s,a);const c=[];for(const u of Object.values(s.nodes)){const d=u.spec.insertMenu;if(d)if(Array.isArray(d))for(const f of d)c.push({label:f.label,description:f.description,icon:f.icon,command:f.command(u,a),forToolbar:f.forToolbar});else c.push({label:d.label,description:d.description,icon:d.icon,command:d.command(u,a),forToolbar:d.forToolbar})}return a.insertMenuItems=c.sort((u,d)=>u.label.localeCompare(d.label)).map((u,d)=>({...u,id:d.toString()})),a}const x2=new WeakMap;function Kt(t){const e=x2.get(t);if(!e)throw new Error("No editor schema for schema");return e}const v2=wi.createContext(null);function _i(){const t=C.useContext(v2);if(t===null)throw new Error("useEditorState must be used inside ProseMirrorEditorView");return t}function vt(){return _p().dispatchCommand}function fi(){return _p().schema}function kl(){return _p().view}function EG(){const t=kl(),e=_i();return C.useCallback(()=>{if(t.current&&t.current.state!==e){var n;(n=t.current)===null||n===void 0||n.updateState(e)}return t.current},[t,e])}function IG(t,e){const n=C.useRef(null),r=C.useRef(null),i=Nt(),s=p2(e);return C.useLayoutEffect(()=>{if(n.current===null)return;const o=new B6({mount:n.current},{state:t,config:i,dispatchTransaction(l){const a=o.state.apply(l);o.updateState(a),s(a)}});return r.current=o,()=>{o.destroy(),r.current=null}},[n,s,i]),C.useLayoutEffect(()=>{var o;(o=r.current)===null||o===void 0||o.updateState(t)},[t]),{view:r,mount:n}}function AG(t){const{mount:e}=_p();return h.jsx("div",{...t,ref:e})}const k2=wi.createContext(null);function _p(){const t=C.useContext(k2);if(t===null)throw new Error("editor hooks must be used inside a ProseMirrorEditorView");return t}const TG=C.forwardRef(function(e,n){const{view:r,mount:i}=IG(e.value,e.onChange);C.useImperativeHandle(n,()=>({get view(){return r.current}}),[r]);const s=C.useMemo(()=>({view:r,mount:i,dispatchCommand:o=>{r.current&&(o(r.current.state,r.current.dispatch,r.current),r.current.focus())},schema:Kt(e.value.schema)}),[i,e.value.schema,r]);return h.jsx(k2.Provider,{value:s,children:h.jsx(v2.Provider,{value:e.value,children:e.children})})});function Op(t,e){return Vs(typeof t.image=="object"?t.image.publicPath:void 0,e)}function NG(t){const e=t.nodes.image;return new At({props:{handleDrop(n,r){var i;if((i=r.dataTransfer)!==null&&i!==void 0&&i.files.length){const s=r.dataTransfer.files[0];let o=n.posAtCoords({left:r.clientX,top:r.clientY});if(!o)return;let l=n.state.doc.resolve(o.pos);for(const[a,c]of Object.entries(t.components)){if(c.kind!=="block"&&c.kind!=="inline"||!c.handleFile)continue;const u=c.handleFile(s,n.props.config);if(u)return(async()=>{const d=await u,f=Q.maxOpen(G.from(t.schema.nodes[a].createChecked({props:ct(d,c.schema)}))),p=kf(n.state.doc,n.state.selection.from,f);p!==null&&n.dispatch(n.state.tr.replace(p,p,f))})(),!0}if(s.type.startsWith("image/")&&e&&t.config.image){const{transformFilename:a}=t.config.image;return(async()=>{const c=Q.maxOpen(G.from(e.createChecked({src:new Uint8Array(await s.arrayBuffer()),filename:a(s.name)}))),u=kf(n.state.doc,l.pos,c);if(u===null)return!1;n.dispatch(n.state.tr.replace(u,u,c))})(),!0}}},handlePaste(n,r){var i;if((i=r.clipboardData)!==null&&i!==void 0&&i.files.length){const s=r.clipboardData.files[0];for(const[o,l]of Object.entries(t.components)){if(l.kind!=="block"||!l.handleFile)continue;const a=l.handleFile(s,n.props.config);if(a)return(async()=>{const c=await a;n.dispatch(n.state.tr.replaceSelectionWith(t.schema.nodes[o].createChecked({props:ct(c,l.schema)})))})(),!0}if(s.type.startsWith("image/")&&e&&t.config.image){const{transformFilename:o}=t.config.image;return(async()=>n.dispatch(n.state.tr.replaceSelectionWith(e.createChecked({src:new Uint8Array(await s.arrayBuffer()),filename:o(s.name)}))))(),!0}}}}})}function jG(){const t=q(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(i,s,o)=>(s&&o&&(async()=>{const l=await Ap("image/*"),a=Kt(o.state.schema);!l||!a.config.image||o.dispatch(o.state.tr.replaceSelectionWith(o.state.schema.nodes.image.createChecked({src:new Uint8Array(await l.arrayBuffer()),filename:a.config.image.transformFilename(l.name)})))})(),!0),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(Kl,{"aria-label":"Image",command:e,children:h.jsx(X,{src:Iu})}),t[1]=n):n=t[1];let r;return t[2]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsxs(fe,{children:[n,h.jsx(he,{children:h.jsx(Y,{children:"Image"})})]}),t[2]=r):r=t[2],r}const Ui=new Kr("AutocompleteDecoration");function _G(t,e){return e.find(t.from,t.to).length>0}const Mw={kind:"inactive"};function OG(t,e,n,r,i){return t.setMeta(Ui,{action:"add",from:n,to:r,menu:e,pattern:i})}function RG(){const t=q(4),e=_i();let n;t[0]!==e?(n=Ui.getState(e),t[0]=e,t[1]=n):n=t[1];const r=n;if(!r||r.kind==="inactive")return null;let i;return t[2]!==r?(i=h.jsx(DG,{state:r}),t[2]=r,t[3]=i):i=t[3],i}function DG(t){const e=q(9),n=_i();let r,i;e[0]!==t.state.decorations||e[1]!==n.doc?(i=t.state.decorations.find()[0],r=n.doc.textBetween(i.from,i.to).slice(1),e[0]=t.state.decorations,e[1]=n.doc,e[2]=r,e[3]=i):(r=e[2],i=e[3]);const s=r;let o;return e[4]!==t.state.component||e[5]!==s||e[6]!==i.from||e[7]!==i.to?(o=h.jsx(t.state.component,{query:s,from:i.from,to:i.to}),e[4]=t.state.component,e[5]=s,e[6]=i.from,e[7]=i.to,e[8]=o):o=e[8],o}function Rp(t){return t.setMeta(Ui,{action:"remove"})}function MG(t){const e=Ui.getState(t);if(e?.kind==="active")return e.decorations.find()[0]}function w2(t){const e=MG(t);if(e)return Rp(t.tr.delete(e.from,e.to))}const FG=W({color:j.color.foreground.accent});function PG(){return new At({key:Ui,state:{init:()=>({kind:"inactive"}),apply(t,e,n,r){const i=t.getMeta(Ui);if(i?.action==="add"){const d=It.inline(i.from,i.to,{nodeName:"decoration-autocomplete",class:FG},{inclusiveStart:!1,inclusiveEnd:!0}),f=r.doc.textBetween(i.from,i.to,""),p=tt.create(t.doc,[d]);return{kind:"active",trigger:f,decorations:p,component:i.menu,pattern:i.pattern}}if(e.kind==="inactive")return e;const s=e.decorations.map(t.mapping,t.doc),o=s.find();if(i?.action==="remove"||!_G(t.selection,s)||o.length!==1)return Mw;const{from:l,to:a}=o[0],c="�",u=r.doc.textBetween(l,a,c,c);return e.trigger!==u.slice(0,e.trigger.length)||u.includes(c)||e.pattern&&!e.pattern.test(u)?Mw:{...e,decorations:s}}},props:{decorations:t=>{const e=Ui.getState(t);return e?.kind==="active"?e.decorations:tt.empty},handlePaste:Fw,handleDrop:Fw,handleKeyDown(t,e){const n=Ui.getState(t.state);return n?.kind==="active"&&e.key==="Escape"?(Rp(t.state.tr),!0):!1}}})}function Fw(t){const e=Ui.getState(t.state);return e?.kind==="active"&&t.dispatch(Rp(t.state.tr)),!1}function $G(t){var e;const n=q(20);let r,i,s,o;n[0]!==t?({listenerRef:i,onEscape:s,scrollRef:r,...o}=t,n[0]=t,n[1]=r,n[2]=i,n[3]=s,n[4]=o):(r=n[1],i=n[2],s=n[3],o=n[4]);const l=zS(t),a=rC(),c=C.useRef(null);let u;u=new TS({collection:l.collection,ref:c,layoutDelegate:a});const d=u,{collectionProps:f}=KO({keyboardDelegate:d,ref:i,scrollRef:(e=r)!==null&&e!==void 0?e:c,selectionManager:l.selectionManager,disallowEmptySelection:!0,disallowTypeAhead:!0,isVirtualized:!0,shouldFocusWrap:!0});let p;n[5]!==l.selectionManager||n[6]!==t.onAction||n[7]!==s?(p=v=>{e:switch(v.key){case"Enter":{var w;l.selectionManager.select(l.selectionManager.focusedKey),(w=t.onAction)===null||w===void 0||w.call(t,l.selectionManager.focusedKey),v.preventDefault();break e}case"Escape":{var S;(S=s)===null||S===void 0||S()}}},n[5]=l.selectionManager,n[6]=t.onAction,n[7]=s,n[8]=p):p=n[8];const g=p;let m;n[9]!==g||n[10]!==f.onKeyDown?(m=GO(g,f.onKeyDown),n[9]=g,n[10]=f.onKeyDown,n[11]=m):m=n[11];const b=m;let y;n[12]!==c||n[13]!==a||n[14]!==l||n[15]!==o?(y=h.jsx(iC,{ref:c,renderEmptyState:LG,layout:a,state:l,autoFocus:"first",shouldUseVirtualFocus:!0,shouldFocusWrap:!0,UNSAFE_className:AR,...o}),n[12]=c,n[13]=a,n[14]=l,n[15]=o,n[16]=y):y=n[16];let x;return n[17]!==b||n[18]!==y?(x={keydownListener:b,listbox:y},n[17]=b,n[18]=y,n[19]=x):x=n[19],x}function LG(){return h.jsx(zr,{alignItems:"center",gap:"regular",height:"element.regular",paddingX:"medium",children:h.jsx(Y,{color:"neutralSecondary",weight:"medium",children:"No results…"})})}const Xy=new Kr("keydown");function k1(t){const e=q(6),n=_i();let r;e[0]!==n?(r=Xy.getState(n),e[0]=n,e[1]=r):r=e[1];const i=r,s=p2(t);let o,l;e[2]!==i||e[3]!==s?(o=()=>{if(!i)return;const a={fn:s};return i.add(a),()=>{i.delete(a)}},l=[i,s],e[2]=i,e[3]=s,e[4]=o,e[5]=l):(o=e[4],l=e[5]),C.useEffect(o,l)}function BG(){return new At({key:Xy,state:{init(){return new Set},apply(t,e){return e}},props:{handleKeyDown(t,e){const n=Xy.getState(t.state);if(!n)return!1;for(const r of n)if(r.fn(e))return!0;return!1}}})}function zG(t,e,n){const r=t.state.doc.nodeAt(e);if(r!==null&&n===e+r.nodeSize){const l=t.nodeDOM(e);if(l instanceof Element)return Pw(l,t)}const i=t.domAtPos(e),s=t.domAtPos(n),o=document.createRange();return o.setStart(i.node,i.offset),o.setEnd(s.node,s.offset),Pw(o,t)}function S2(t,e){const n=q(5),[r,i]=C.useState(null),s=EG();let o,l;return n[0]!==s||n[1]!==t||n[2]!==e?(o=()=>{const a=s();if(!a){i(null);return}i(zG(a,t,e))},l=[s,t,e],n[0]=s,n[1]=t,n[2]=e,n[3]=o,n[4]=l):(o=n[3],l=n[4]),C.useLayoutEffect(o,l),r}function Pw(t,e){return{contextElement:e.dom,getBoundingClientRect:()=>t.getBoundingClientRect()}}function VG(t){const e=kl(),n=S2(t.from,t.to),r=C.useMemo(()=>({get current(){var o,l;return(o=(l=e.current)===null||l===void 0?void 0:l.dom)!==null&&o!==void 0?o:null}}),[e]),{keydownListener:i,listbox:s}=$G({listenerRef:r,...t,UNSAFE_style:{width:320,...t.UNSAFE_style}});return k1(o=>(i(o),o.defaultPrevented)),n&&h.jsx(sE,{adaptToBoundary:"stretch",portal:!1,minWidth:"element.medium",placement:"bottom-start",reference:n,children:s})}const UG={pattern:/(?:^|\s)\/$/,handler(t,e,n,r){return OG(t.tr,HG,r-1,r,void 0)}},qG=h2(t=>{const e=w2(t);return e?{state:t.apply(e),tr:e}:{state:t}});function $w(t){return(e,n,r)=>{const{state:i,tr:s}=qG(e);return s?(n&&n(s),t(i,n,r)):!1}}function C2(t){return h.jsxs(Je,{textValue:t.label,children:[h.jsx(Y,{children:t.label}),t.description&&h.jsx(Y,{slot:"description",children:t.description}),t.icon&&h.jsx(X,{src:t.icon})]},t.id)}function HG(t){const e=q(23),n=kl(),r=vt(),i=fi(),s=_i();let o,l;if(e[0]!==i.insertMenuItems||e[1]!==t.query||e[2]!==s){let p;e[4]!==s?(p=g=>g.command(s),e[4]=s,e[5]=p):p=e[5],l=fp(i.insertMenuItems,t.query,{keys:["label"]}).filter(p),e[0]=i.insertMenuItems,e[1]=t.query,e[2]=s,e[3]=l}else l=e[3];o=l;const a=o;let c;e[6]!==a||e[7]!==r||e[8]!==n.current||e[9]!==s.tr?(c=p=>{if(p.key!==" ")return!1;if(a.length===1)return r($w(a[0].command)),!0;if(a.length===0){var g;(g=n.current)===null||g===void 0||g.dispatch(Rp(s.tr))}return!1},e[6]=a,e[7]=r,e[8]=n.current,e[9]=s.tr,e[10]=c):c=e[10],k1(c);let u;e[11]!==s||e[12]!==n.current?(u=()=>{var p;const g=w2(s);g&&((p=n.current)===null||p===void 0||p.dispatch(g))},e[11]=s,e[12]=n.current,e[13]=u):u=e[13];let d;e[14]!==a||e[15]!==r?(d=p=>{const g=a.find(m=>m.id===p);g&&r($w(g.command))},e[14]=a,e[15]=r,e[16]=d):d=e[16];let f;return e[17]!==t.from||e[18]!==t.to||e[19]!==a||e[20]!==u||e[21]!==d?(f=h.jsx(VG,{from:t.from,to:t.to,"aria-label":"Insert menu",items:a,children:C2,onEscape:u,onAction:d}),e[17]=t.from,e[18]=t.to,e[19]=a,e[20]=u,e[21]=d,e[22]=f):f=e[22],f}function WG(t){const e=q(33),[n,r]=C.useState(!1),i=Be(et);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>r(!0),e[0]=s):s=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(ae,{prominence:"low",onPress:s,children:h.jsx(X,{src:Hu})}),e[1]=o):o=e[1];let l;e[2]!==i?(l=i.format("edit"),e[2]=i,e[3]=l):l=e[3];let a;e[4]!==l?(a=h.jsxs(fe,{children:[o,h.jsx(he,{children:l})]}),e[4]=l,e[5]=a):a=e[5];let c;e[6]!==t.href?(c=()=>{window.open(t.href,"_blank","noopener,noreferrer")},e[6]=t.href,e[7]=c):c=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(X,{src:dp}),e[8]=u):u=e[8];let d;e[9]!==c?(d=h.jsx(ae,{prominence:"low",onPress:c,children:u}),e[9]=c,e[10]=d):d=e[10];let f;e[11]!==t.href?(f=h.jsx(he,{children:h.jsx(Y,{truncate:3,children:t.href})}),e[11]=t.href,e[12]=f):f=e[12];let p;e[13]!==d||e[14]!==f?(p=h.jsxs(fe,{children:[d,f]}),e[13]=d,e[14]=f,e[15]=p):p=e[15];let g;e[16]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(X,{src:xT}),e[16]=g):g=e[16];let m;e[17]!==t.onUnlink?(m=h.jsx(ae,{prominence:"low",onPress:t.onUnlink,children:g}),e[17]=t.onUnlink,e[18]=m):m=e[18];let b;e[19]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(he,{children:"Unlink"}),e[19]=b):b=e[19];let y;e[20]!==m?(y=h.jsxs(fe,{children:[m,b]}),e[20]=m,e[21]=y):y=e[21];let x;e[22]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{r(!1)},e[22]=x):x=e[22];let v;e[23]!==n||e[24]!==t?(v=n&&h.jsx(E2,{text:t.text,href:t.href,onSubmit:k=>{const{href:E}=k;t.onHrefChange(E)}}),e[23]=n,e[24]=t,e[25]=v):v=e[25];let w;e[26]!==v?(w=h.jsx(dt,{onDismiss:x,children:v}),e[26]=v,e[27]=w):w=e[27];let S;return e[28]!==a||e[29]!==p||e[30]!==y||e[31]!==w?(S=h.jsxs(te,{gap:"small",padding:"regular",children:[a,p,y,w]}),e[28]=a,e[29]=p,e[30]=y,e[31]=w,e[32]=S):S=e[32],S}function E2(t){const e=q(40);let n,r;e[0]!==t?({onSubmit:r,...n}=t,e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]);const[i,s]=C.useState(n.href||""),[o,l]=C.useState(!1),{dismiss:a}=fl(),c=Be(et);let u;e[3]!==o||e[4]!==i?(u=o&&!Yu(i),e[3]=o,e[4]=i,e[5]=u):u=e[5];const d=u;let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={display:"contents"},e[6]=f):f=e[6];let p;e[7]!==d||e[8]!==a||e[9]!==r||e[10]!==i?(p=A=>{A.target===A.currentTarget&&(A.preventDefault(),d||(a(),r({href:i})))},e[7]=d,e[8]=a,e[9]=r,e[10]=i,e[11]=p):p=e[11];const g=n.href?"Edit":"Add";let m;e[12]!==g?(m=h.jsxs(nt,{children:[g," link"]}),e[12]=g,e[13]=m):m=e[13];let b;e[14]!==n.text?(b=h.jsx(gt,{label:"Text",value:n.text,isReadOnly:!0}),e[14]=n.text,e[15]=b):b=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>l(!0),e[16]=y):y=e[16];const x=d&&"Please provide a valid URL.";let v;e[17]!==i||e[18]!==x?(v=h.jsx(gt,{autoFocus:!0,isRequired:!0,onBlur:y,label:"Link",onChange:s,value:i,errorMessage:x}),e[17]=i,e[18]=x,e[19]=v):v=e[19];let w;e[20]!==b||e[21]!==v?(w=h.jsx(gn,{children:h.jsxs(te,{gap:"large",direction:"column",children:[b,v]})}),e[20]=b,e[21]=v,e[22]=w):w=e[22];let S;e[23]!==c?(S=c.format("cancel"),e[23]=c,e[24]=S):S=e[24];let k;e[25]!==a||e[26]!==S?(k=h.jsx(Re,{onPress:a,children:S}),e[25]=a,e[26]=S,e[27]=k):k=e[27];let E;e[28]!==c?(E=c.format("save"),e[28]=c,e[29]=E):E=e[29];let T;e[30]!==E?(T=h.jsx(Re,{prominence:"high",type:"submit",children:E}),e[30]=E,e[31]=T):T=e[31];let N;e[32]!==k||e[33]!==T?(N=h.jsxs(mn,{children:[k,T]}),e[32]=k,e[33]=T,e[34]=N):N=e[34];let I;return e[35]!==p||e[36]!==m||e[37]!==w||e[38]!==N?(I=h.jsx(nn,{size:"small",children:h.jsxs("form",{style:f,onSubmit:p,children:[m,w,N]})}),e[35]=p,e[36]=m,e[37]=w,e[38]=N,e[39]=I):I=e[39],I}function KG(t){const e=q(42),n=Be(et),r=vt(),[i,s]=C.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>s(!0),e[0]=o):o=e[0];let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(ae,{prominence:"low",onPress:o,children:h.jsx(X,{src:Hu})}),e[1]=l):l=e[1];let a;e[2]!==n?(a=n.format("edit"),e[2]=n,e[3]=a):a=e[3];let c;e[4]!==a?(c=h.jsxs(fe,{children:[l,h.jsx(he,{children:a})]}),e[4]=a,e[5]=c):c=e[5];let u;e[6]!==r||e[7]!==t.pos?(u=async()=>{const A=await Ap("image/*");if(!A)return;const O=new Uint8Array(await A.arrayBuffer());r((_,F)=>{if(F){const{tr:M}=_;M.setNodeAttribute(t.pos,"src",O);const P=_.apply(M);M.setSelection(de.create(P.doc,t.pos)),F(M)}return!0})},e[6]=r,e[7]=t.pos,e[8]=u):u=e[8];let d;e[9]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(X,{src:vT}),e[9]=d):d=e[9];let f;e[10]!==u?(f=h.jsx(ae,{prominence:"low",onPress:u,children:d}),e[10]=u,e[11]=f):f=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(he,{children:"Choose file"}),e[12]=p):p=e[12];let g;e[13]!==f?(g=h.jsxs(fe,{children:[f,p]}),e[13]=f,e[14]=g):g=e[14];let m;e[15]!==c||e[16]!==g?(m=h.jsxs(te,{gap:"small",children:[c,g]}),e[15]=c,e[16]=g,e[17]=m):m=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(Ds,{orientation:"vertical"}),e[18]=b):b=e[18];let y;e[19]!==r||e[20]!==t.pos||e[21]!==t.node.nodeSize?(y=()=>{r((A,O)=>(O&&O(A.tr.delete(t.pos,t.pos+t.node.nodeSize)),!0))},e[19]=r,e[20]=t.pos,e[21]=t.node.nodeSize,e[22]=y):y=e[22];let x;e[23]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(X,{src:un}),e[23]=x):x=e[23];let v;e[24]!==y?(v=h.jsx(ae,{prominence:"low",onPress:y,children:x}),e[24]=y,e[25]=v):v=e[25];let w;e[26]===Symbol.for("react.memo_cache_sentinel")?(w=h.jsx(he,{tone:"critical",children:"Remove"}),e[26]=w):w=e[26];let S;e[27]!==v?(S=h.jsxs(fe,{children:[v,w]}),e[27]=v,e[28]=S):S=e[28];let k;e[29]!==m||e[30]!==S?(k=h.jsxs(te,{gap:"regular",padding:"regular",children:[m,b,S]}),e[29]=m,e[30]=S,e[31]=k):k=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{s(!1)},e[32]=E):E=e[32];let T;e[33]!==i||e[34]!==r||e[35]!==t?(T=i&&h.jsx(GG,{alt:t.node.attrs.alt,title:t.node.attrs.title,filename:t.node.attrs.filename,onSubmit:A=>{r((O,_)=>{if(_){const{tr:F}=O;F.setNodeMarkup(t.pos,void 0,{...t.node.attrs,...A});const M=O.apply(F);F.setSelection(de.create(M.doc,t.pos)),_(F)}return!0}),s(!1)}}),e[33]=i,e[34]=r,e[35]=t,e[36]=T):T=e[36];let N;e[37]!==T?(N=h.jsx(dt,{onDismiss:E,children:T}),e[37]=T,e[38]=N):N=e[38];let I;return e[39]!==k||e[40]!==N?(I=h.jsxs(h.Fragment,{children:[k,N]}),e[39]=k,e[40]=N,e[41]=I):I=e[41],I}function GG(t){const e=fi(),[n,r]=C.useState({alt:t.alt,title:t.title}),i=C.useMemo(()=>({kind:"object",fields:e.config.image.schema}),[e.config.image]),s=C.useMemo(()=>Ni(i,r,()=>{}),[i])(n),[o,l]=YG(t.filename),[a,c]=C.useState(!1);let[u,d]=C.useState(o),[f,p]=C.useState(!1),{dismiss:g}=fl(),m=Be(et);return h.jsx(nn,{size:"small",children:h.jsxs("form",{style:{display:"contents"},onSubmit:b=>{b.target===b.currentTarget&&(b.preventDefault(),c(!0),u&&Jr(i,n,void 0)&&(g(),t.onSubmit({alt:n.alt,title:n.title,filename:[u,l].join(".")})))},children:[h.jsx(nt,{children:"Image details"}),h.jsx(gn,{children:h.jsxs(te,{gap:"large",direction:"column",children:[h.jsx(gt,{label:"File name",onChange:d,onBlur:()=>p(!0),value:u,isRequired:!0,errorMessage:(f||a)&&!u?"Please provide a file name.":void 0,endElement:l?h.jsx(te,{alignItems:"center",justifyContent:"center",paddingEnd:"regular",children:h.jsxs(Y,{color:"neutralTertiary",children:[".",l]})}):null}),h.jsx(ji,{forceValidation:a,autoFocus:!0,...s})]})}),h.jsxs(mn,{children:[h.jsx(Re,{onPress:g,children:m.format("cancel")}),h.jsx(Re,{prominence:"high",type:"submit",children:m.format("save")})]})]})})}function YG(t){const e=t.lastIndexOf(".");return e===-1?[t,""]:[t.substring(0,e),t.substring(e+1)]}function Lw(t){const e=q(14),[n,r]=C.useState(!1);let i,s;e[0]!==t.schema?(s={kind:"object",fields:t.schema},e[0]=t.schema,e[1]=s):s=e[1],i=s;const o=i,l=Rs(t.serialized,t.schema),a=vt();let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{r(!0)},e[2]=c):c=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(ae,{prominence:"low",onPress:c,children:h.jsx(X,{src:Hb})}),e[3]=u):u=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsxs(fe,{children:[u,h.jsx(he,{children:"Edit"})]}),e[4]=d):d=e[4];let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{r(!1)},e[5]=f):f=e[5];let p;e[6]!==n||e[7]!==t||e[8]!==a||e[9]!==o||e[10]!==l?(p=n&&h.jsxs(nn,{children:[h.jsxs(nt,{children:["Edit ",t.name]}),h.jsx(Np,{schema:o,value:l,onSave:m=>{a((b,y)=>(y&&y(b.tr.setNodeAttribute(t.pos,"props",ct(m,t.schema))),!0))}})]}),e[6]=n,e[7]=t,e[8]=a,e[9]=o,e[10]=l,e[11]=p):p=e[11];let g;return e[12]!==p?(g=h.jsxs(h.Fragment,{children:[d,h.jsx(dt,{onDismiss:f,children:p})]}),e[12]=p,e[13]=g):g=e[13],g}function JG(t,e){return Object.assign(t,{shouldShow:e})}const Bw={code_block:function(e){const n=vt(),r=fi(),i=kl();return h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsx(gt,{"aria-label":"Code block language",value:e.node.attrs.language,onChange:s=>{const o=i.current;o.dispatch(o.state.tr.setNodeAttribute(e.pos,"language",s))}}),!!Object.keys(r.config.codeBlock.schema).length&&h.jsx(Lw,{name:"Code Block",schema:r.config.codeBlock.schema,pos:e.pos,serialized:e.node.attrs.props}),h.jsx(Ds,{orientation:"vertical"}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{n((s,o)=>(o&&o(s.tr.delete(e.pos,e.pos+e.node.nodeSize)),!0))},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})},image:KG,table:function(e){var n;const r=vt(),i=fi();return h.jsxs(te,{gap:"regular",padding:"regular",children:[i.format==="markdoc"&&h.jsxs(h.Fragment,{children:[h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",isSelected:((n=e.node.firstChild)===null||n===void 0||(n=n.firstChild)===null||n===void 0?void 0:n.type)===i.nodes.table_header,onPress:()=>{r(Cp("row"))},children:h.jsx(X,{src:iN})}),h.jsx(he,{children:"Header row"})]}),h.jsx(Ds,{orientation:"vertical"})]}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{r((s,o)=>(o&&o(s.tr.delete(e.pos,e.pos+e.node.nodeSize)),!0))},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})},heading:JG(function(e){const n=vt(),r=fi();return h.jsxs(te,{gap:"regular",padding:"regular",children:[h.jsx(Lw,{name:"Heading",schema:r.config.heading.schema,pos:e.pos,serialized:e.node.attrs.props}),h.jsx(Ds,{orientation:"vertical"}),h.jsxs(fe,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{n((i,s)=>(s&&s(i.tr.delete(e.pos,e.pos+e.node.nodeSize)),!0))},children:h.jsx(X,{src:un})}),h.jsx(he,{tone:"critical",children:"Remove"})]})]})},t=>!!Object.keys(t.config.heading.schema).length)};function Wl(t,e){const{parent:n,parentOffset:r}=t,i=n.childAfter(r);if(!i.node)return null;const s=i.node.marks.find(u=>u.type===e);if(!s)return null;let o=t.index(),l=t.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&s.isInSet(n.child(o-1).marks);)o-=1,l-=n.child(o).nodeSize;for(;a<n.childCount&&s.isInSet(n.child(a).marks);)c+=n.child(a).nodeSize,a+=1;return{from:l,to:c,mark:s}}const ZG=t=>{const e=q(14),n=vt(),r=t.mark.attrs.href;if(typeof r!="string")return null;let i;e[0]!==t.state.doc||e[1]!==t.from||e[2]!==t.to?(i=t.state.doc.textBetween(t.from,t.to),e[0]=t.state.doc,e[1]=t.from,e[2]=t.to,e[3]=i):i=e[3];let s,o;e[4]!==n||e[5]!==t.from||e[6]!==t.to?(s=()=>{n((a,c)=>(c&&c(a.tr.removeMark(t.from,t.to,a.schema.marks.link)),!0))},o=a=>{n((c,u)=>(u&&u(c.tr.removeMark(t.from,t.to,c.schema.marks.link).addMark(t.from,t.to,c.schema.marks.link.create({href:a}))),!0))},e[4]=n,e[5]=t.from,e[6]=t.to,e[7]=s,e[8]=o):(s=e[7],o=e[8]);let l;return e[9]!==i||e[10]!==r||e[11]!==s||e[12]!==o?(l=h.jsx(WG,{text:i,href:r,onUnlink:s,onHrefChange:o}),e[9]=i,e[10]=r,e[11]=s,e[12]=o,e[13]=l):l=e[13],l};function XG(t){const e=q(43);let n;e[0]!==t.state.schema?(n=Kt(t.state.schema),e[0]=t.state.schema,e[1]=n):n=e[1];const i=n.components[t.node.type.name],s=vt(),[o,l]=C.useState(!1);let a,c;e[2]!==i.schema?(c={kind:"object",fields:i.schema},e[2]=i.schema,e[3]=c):c=e[3],a=c;const u=a,d=Rs(t.node.attrs.props,i.schema),f=kl();if(i.kind==="inline"&&i.ToolbarView){let N;e[4]!==f.current||e[5]!==t.pos||e[6]!==u.fields?(N=O=>{const _=f.current;_.dispatch(_.state.tr.setNodeAttribute(t.pos,"props",ct(O,u.fields)))},e[4]=f.current,e[5]=t.pos,e[6]=u.fields,e[7]=N):N=e[7];let I;e[8]!==s||e[9]!==t.pos||e[10]!==t.node.nodeSize?(I=()=>{s((O,_)=>(_&&_(O.tr.delete(t.pos,t.pos+t.node.nodeSize)),!0))},e[8]=s,e[9]=t.pos,e[10]=t.node.nodeSize,e[11]=I):I=e[11];let A;return e[12]!==i.ToolbarView||e[13]!==d||e[14]!==N||e[15]!==I?(A=h.jsx(i.ToolbarView,{value:d,onChange:N,onRemove:I}),e[12]=i.ToolbarView,e[13]=d,e[14]=N,e[15]=I,e[16]=A):A=e[16],A}let p;e[17]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{l(!0)},e[17]=p):p=e[17];let g;e[18]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsx(ae,{prominence:"low",onPress:p,children:h.jsx(X,{src:Hb})}),e[18]=g):g=e[18];let m;e[19]===Symbol.for("react.memo_cache_sentinel")?(m=h.jsxs(fe,{children:[g,h.jsx(he,{children:"Edit"})]}),e[19]=m):m=e[19];let b;e[20]!==s||e[21]!==t.pos||e[22]!==t.node.nodeSize?(b=()=>{s((N,I)=>(I&&I(N.tr.delete(t.pos,t.pos+t.node.nodeSize)),!0))},e[20]=s,e[21]=t.pos,e[22]=t.node.nodeSize,e[23]=b):b=e[23];let y;e[24]===Symbol.for("react.memo_cache_sentinel")?(y=h.jsx(X,{src:un}),e[24]=y):y=e[24];let x;e[25]!==b?(x=h.jsx(ae,{prominence:"low",onPress:b,children:y}),e[25]=b,e[26]=x):x=e[26];let v;e[27]===Symbol.for("react.memo_cache_sentinel")?(v=h.jsx(he,{tone:"critical",children:"Remove"}),e[27]=v):v=e[27];let w;e[28]!==x?(w=h.jsxs(te,{gap:"regular",padding:"regular",children:[m,h.jsxs(fe,{children:[x,v]})]}),e[28]=x,e[29]=w):w=e[29];let S;e[30]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{l(!1)},e[30]=S):S=e[30];let k;e[31]!==o||e[32]!==i||e[33]!==s||e[34]!==t||e[35]!==u||e[36]!==d?(k=o&&h.jsxs(nn,{children:[h.jsxs(nt,{children:["Edit ",i.label]}),h.jsx(Np,{schema:u,value:d,onSave:N=>{s((I,A)=>(A&&A(I.tr.setNodeAttribute(t.pos,"props",ct(N,u.fields))),!0))}})]}),e[31]=o,e[32]=i,e[33]=s,e[34]=t,e[35]=u,e[36]=d,e[37]=k):k=e[37];let E;e[38]!==k?(E=h.jsx(dt,{onDismiss:S,children:k}),e[38]=k,e[39]=E):E=e[39];let T;return e[40]!==w||e[41]!==E?(T=h.jsxs(h.Fragment,{children:[w,E]}),e[40]=w,e[41]=E,e[42]=T):T=e[42],T}const QG=t=>{const e=q(31);let n;e[0]!==t.state.schema?(n=Kt(t.state.schema),e[0]=t.state.schema,e[1]=n):n=e[1];const i=n.components[t.mark.type.name],s=vt(),[o,l]=C.useState(!1);let a,c;e[2]!==i.schema?(c={kind:"object",fields:i.schema},e[2]=i.schema,e[3]=c):c=e[3],a=c;const u=a,d=Rs(t.mark.attrs.props,i.schema);let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{l(!0)},e[4]=f):f=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=h.jsx(ae,{prominence:"low",onPress:f,children:h.jsx(X,{src:Hb})}),e[5]=p):p=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsxs(fe,{children:[p,h.jsx(he,{children:"Edit"})]}),e[6]=g):g=e[6];let m;e[7]!==s||e[8]!==t.from||e[9]!==t.to||e[10]!==t.mark.type?(m=()=>{s((T,N)=>(N&&N(T.tr.removeMark(t.from,t.to,t.mark.type)),!0))},e[7]=s,e[8]=t.from,e[9]=t.to,e[10]=t.mark.type,e[11]=m):m=e[11];let b;e[12]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(X,{src:un}),e[12]=b):b=e[12];let y;e[13]!==m?(y=h.jsx(ae,{prominence:"low",onPress:m,children:b}),e[13]=m,e[14]=y):y=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(he,{tone:"critical",children:"Remove"}),e[15]=x):x=e[15];let v;e[16]!==y?(v=h.jsxs(te,{gap:"regular",padding:"regular",children:[g,h.jsxs(fe,{children:[y,x]})]}),e[16]=y,e[17]=v):v=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{l(!1)},e[18]=w):w=e[18];let S;e[19]!==o||e[20]!==i||e[21]!==s||e[22]!==t||e[23]!==u||e[24]!==d?(S=o&&h.jsxs(nn,{children:[h.jsxs(nt,{children:["Edit ",i.label]}),h.jsx(Np,{schema:u,value:d,onSave:T=>{s((N,I)=>(I&&I(N.tr.removeMark(t.from,t.to,t.mark.type).addMark(t.from,t.to,t.mark.type.create({props:ct(T,i.schema)}))),!0))}})]}),e[19]=o,e[20]=i,e[21]=s,e[22]=t,e[23]=u,e[24]=d,e[25]=S):S=e[25];let k;e[26]!==S?(k=h.jsx(dt,{onDismiss:w,children:S}),e[26]=S,e[27]=k):k=e[27];let E;return e[28]!==v||e[29]!==k?(E=h.jsxs(h.Fragment,{children:[v,k]}),e[28]=v,e[29]=k,e[30]=E):E=e[30],E};function eY(t){if(t.selection instanceof _e){const s=Kt(t.schema);let o=null;for(const[l,a]of Object.entries(s.components)){if(a.kind!=="mark"||!Object.keys(a.schema).length)continue;const c=s.schema.marks[l],u=Wl(t.selection.$from,c),d=Wl(t.selection.$to,c);if(u&&u.from===d?.from&&u.to===d.to){const f=u.to-u.from;(!o||f<o.to-o.from)&&(o={adaptToBoundary:"flip",kind:"mark",component:QG,mark:u.mark,from:u.from,to:u.to})}}if(s.marks.link){const l=Wl(t.selection.$from,s.marks.link),a=Wl(t.selection.$to,s.marks.link);if(l&&l.from===a?.from&&l.to===a.to){const c=l.to-l.from;if(!o||c<o.to-o.from)return{adaptToBoundary:"flip",kind:"mark",component:ZG,mark:l.mark,from:l.from,to:l.to}}}if(o)return o}const e=Kt(t.schema);if(t.selection instanceof de){var n;const s=t.selection.node;if(((n=e.components[s.type.name])===null||n===void 0?void 0:n.kind)==="inline")return{adaptToBoundary:"stick",kind:"node",node:s,component:XG,pos:t.selection.from};const o=Bw[s.type.name];if(o!==void 0&&(!o.shouldShow||o.shouldShow(e)))return{adaptToBoundary:"stick",kind:"node",node:s,component:o,pos:t.selection.from}}const r=t.selection.$from.start(t.selection.$from.sharedDepth(t.selection.to)),i=t.doc.resolve(r);for(let s=i.depth;s>0;s--){const o=i.node(s);if(!o)break;const l=Bw[o.type.name];if(l!==void 0&&(!l.shouldShow||l.shouldShow(e)))return{adaptToBoundary:"stick",kind:"node",node:o,component:l,pos:i.start(s)-1}}return null}function tY(t){const e=q(4),n=t.decoration.kind==="node"?t.decoration.pos:t.decoration.from,r=t.decoration.kind==="node"?t.decoration.pos+t.decoration.node.nodeSize:t.decoration.to,i=S2(n,r);let s;return e[0]!==i||e[1]!==t.decoration||e[2]!==t.state?(s=i&&h.jsx(sE,{adaptToBoundary:t.decoration.adaptToBoundary,minWidth:"element.medium",placement:"bottom",portal:!1,reference:i,children:t.decoration.kind==="node"?h.jsx(t.decoration.component,{...t.decoration,state:t.state}):h.jsx(t.decoration.component,{...t.decoration,state:t.state})}),e[0]=i,e[1]=t.decoration,e[2]=t.state,e[3]=s):s=e[3],s}function nY(t){const e=q(5);let n,r;e[0]!==t.state?(r=eY(t.state),e[0]=t.state,e[1]=r):r=e[1],n=r;const i=n;if(!i)return null;let s;return e[2]!==i||e[3]!==t.state?(s=h.jsx(tY,{decoration:i,state:t.state}),e[2]=i,e[3]=t.state,e[4]=s):s=e[4],s}function Kl(t){var e,n;const r=_i(),i=vt(),s=!!((e=t.isSelected)!==null&&e!==void 0&&e.call(t,r)),o=!t.command(r)||((n=t.isDisabled)===null||n===void 0?void 0:n.call(t,r));return C.useMemo(()=>h.jsx(lF,{"aria-label":t["aria-label"],isSelected:s,isDisabled:o,onPress:()=>{i(t.command)},children:t.children}),[o,s,t,i])}function rY(t){const[e,n]=C.useState(null),r=vt(),i=kl();return k1(s=>{if(s.metaKey&&(s.key==="k"||s.key==="K")){const{state:o}=i.current;if(!So(t.link)(o))return s.preventDefault(),n(o.doc.textBetween(o.selection.from,o.selection.to)),!0}return!1}),C.useMemo(()=>h.jsxs(h.Fragment,{children:[h.jsxs(fe,{children:[h.jsx(Kl,{"aria-label":"Divider",command:(s,o)=>{const l=Wl(s.selection.$from,t.link),a=Wl(s.selection.$to,t.link);if(l&&(!a||l.mark===a?.mark)){if(o){var c;o(s.tr.removeMark(l.from,(c=a?.to)!==null&&c!==void 0?c:l.to,t.link))}return!0}if(s.selection.empty)return!1;if(o){const u=s.doc.textBetween(s.selection.from,s.selection.to);n(u)}return!0},isSelected:So(t.link),children:h.jsx(X,{src:bT})}),h.jsxs(he,{children:[h.jsx(Y,{children:"Link"}),h.jsx(Vn,{meta:!0,children:"K"})]})]}),h.jsx(dt,{onDismiss:()=>{n(null)},children:e&&h.jsx(E2,{href:"",text:e,onSubmit:s=>{n(null),r(xo(t.link,s))}})})]}),[t.link,r,e])}const iY=C.memo(function(e){const n=fi(),{nodes:r,marks:i}=n;return h.jsxs(oY,{...e,children:[h.jsxs(lY,{children:[r.heading&&h.jsx(uY,{headingType:r.heading}),h.jsxs(nF,{"aria-label":"Formatting options",children:[h.jsx(sg,{}),h.jsx(fY,{}),h.jsx(sg,{}),h.jsx(pY,{}),h.jsx(sg,{}),h.jsxs($b,{"aria-label":"Blocks",children:[r.divider&&h.jsxs(fe,{children:[h.jsx(Kl,{"aria-label":"Divider",command:Hl(r.divider),isSelected:Cd(r.divider),children:h.jsx(X,{src:tC})}),h.jsxs(he,{children:[h.jsx(Y,{children:"Divider"}),h.jsx(Vn,{children:"---"})]})]}),i.link&&h.jsx(rY,{link:i.link}),r.blockquote&&h.jsxs(fe,{children:[h.jsx(Kl,{"aria-label":"Quote",command:(s,o)=>{if(Cd(r.blockquote)(s)){const{$from:a,$to:c}=s.selection,u=a.blockRange(c,f=>f.type===r.blockquote);if(!u)return!1;const d=Nu(u);return d===null?!1:(o&&o(s.tr.lift(u,d).scrollIntoView()),!0)}else return iE(r.blockquote)(s,o)},isSelected:Cd(r.blockquote),children:h.jsx(X,{src:Bb})}),h.jsxs(he,{children:[h.jsx(Y,{children:"Quote"}),h.jsx(Vn,{children:">⎵"})]})]}),r.code_block&&h.jsxs(fe,{children:[h.jsx(Kl,{"aria-label":"Code block",command:QK(r.code_block,r.paragraph),isSelected:Cd(r.code_block),children:h.jsx(X,{src:Rh})}),h.jsxs(he,{children:[h.jsx(Y,{children:"Code block"}),h.jsx(Vn,{children:"```"})]})]}),r.table&&h.jsxs(fe,{children:[h.jsx(Kl,{"aria-label":"Table",command:g2(r.table),children:h.jsx(X,{src:zb})}),h.jsx(he,{children:h.jsx(Y,{children:"Table"})})]}),r.image&&h.jsx(jG,{})]})]})]}),h.jsx(dY,{})]})}),sY=({children:t})=>{let e=fr();return h.jsx("div",{"data-layout":e,className:W({alignItems:"center",boxSizing:"border-box",display:"flex",height:j.size.element.medium,[dn.above.mobile]:{height:j.size.element.large},'&[data-layout="main"]':{marginInline:"auto",maxWidth:800,minWidth:0,paddingInline:j.size.space.medium,[dn.above.mobile]:{paddingInline:j.size.space.xlarge},[dn.above.tablet]:{paddingInline:j.size.space.xxlarge}}}),children:t})},oY=t=>{let e=fr();return h.jsx("div",{...t,"data-layout":e,className:W({backdropFilter:"blur(8px)",backgroundClip:"padding-box",backgroundColor:`color-mix(in srgb, transparent, ${j.color.background.canvas} 90%)`,borderBottom:`${j.size.border.regular} solid color-mix(in srgb, transparent, ${j.color.foreground.neutral} 10%)`,borderStartEndRadius:j.size.radius.medium,borderStartStartRadius:j.size.radius.medium,minWidth:0,position:"sticky",top:0,zIndex:2,'&[data-layout="main"]':{borderRadius:0}}),children:h.jsx(sY,{children:t.children})})},lY=t=>{let e=fr();return h.jsx("div",{"data-layout":e,className:W({alignItems:"center",display:"flex",flex:1,gap:j.size.space.regular,paddingInline:j.size.space.medium,minWidth:0,overflowX:"auto",marginBlock:`calc(${j.size.alias.focusRing} * -1)`,paddingBlock:j.size.alias.focusRing,msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},'&[data-layout="main"]':{paddingInline:0}}),...t})},aY=new Map([["normal","normal"],["1",1],["2",2],["3",3],["4",4],["5",5],["6",6]]);function cY(t,e,n){var r;let i;for(const s of t.selection.ranges)if(t.doc.nodesBetween(s.$from.pos,s.$to.pos,o=>{if(o.type===e){const l=o.attrs.level;i===void 0?i=l:i!==l&&(i="disabled")}o.type===n&&(i===void 0?i="normal":i!=="normal"&&(i="disabled"))}),i==="disabled")break;return(r=i)!==null&&r!==void 0?r:"disabled"}const uY=t=>{const{nodes:e,config:n}=fi(),r=C.useMemo(()=>{let l=[{name:"Paragraph",id:"normal"}];return n.heading.levels.forEach(a=>{l.push({name:`Heading ${a}`,id:a.toString()})}),l},[n.heading.levels]),i=_i(),s=cY(i,t.headingType,e.paragraph),o=vt();return C.useMemo(()=>h.jsx(Cb,{flexShrink:0,width:"scale.1700",prominence:"low","aria-label":"Text block",items:r,isDisabled:s==="disabled",selectedKey:s==="disabled"?"normal":s.toString(),onSelectionChange:l=>{let a=aY.get(l);a==="normal"?o(Yo(e.paragraph)):a&&o(Yo(t.headingType,{level:parseInt(a)}))},children:l=>h.jsx(Je,{children:l.name},l.id)}),[r,s,e.paragraph,t.headingType,o])};function dY(){const t=fr(),e=vt(),n=fi(),r=C.useMemo(()=>n.insertMenuItems.filter(s=>s.forToolbar),[n.insertMenuItems]),i=C.useMemo(()=>new Map(r.map(s=>[s.id,s])),[r]);return r.length===0?null:h.jsxs(Ii,{align:"end",children:[h.jsxs(fe,{children:[h.jsxs(ae,{marginEnd:t==="main"?void 0:"medium",children:[h.jsx(X,{src:Eb}),h.jsx(X,{src:Au})]}),h.jsxs(he,{children:[h.jsx(Y,{children:"Insert"}),h.jsx(Vn,{children:"/"})]})]}),h.jsx(Ai,{onAction:s=>{var o;const l=(o=i.get(s))===null||o===void 0?void 0:o.command;l&&e(l)},items:r,children:C2})]})}const So=t=>e=>{if(e.selection instanceof _e&&e.selection.empty)return e.selection.$cursor?!!t.isInSet(e.storedMarks||e.selection.$cursor.marks()):!1;for(const n of e.selection.ranges)if(e.doc.rangeHasMark(n.$from.pos,n.$to.pos,t))return!0;return!1};function fY(){const t=_i(),e=fi(),n=vt(),r=C.useMemo(()=>{const o=[];e.marks.bold&&o.push({key:"bold",label:"Bold",icon:cE,shortcut:"B",command:xo(e.marks.bold),isSelected:So(e.marks.bold)}),e.marks.italic&&o.push({key:"italic",label:"Italic",icon:uE,shortcut:"I",command:xo(e.marks.italic),isSelected:So(e.marks.italic)}),e.marks.strikethrough&&o.push({key:"strikethrough",label:"Strikethrough",icon:fE,command:xo(e.marks.strikethrough),isSelected:So(e.marks.strikethrough)}),e.marks.code&&o.push({key:"code",label:"Code",icon:Rh,command:xo(e.marks.code),isSelected:So(e.marks.code)});for(const[l,a]of Object.entries(e.components))a.kind==="mark"&&o.push({key:l,label:a.label,icon:a.icon,command:xo(e.schema.marks[l]),isSelected:So(e.schema.marks[l])});return o.push({key:"clearFormatting",label:"Clear formatting",icon:dE,command:gY(),isSelected:()=>!1}),o},[e]),i=zw(r.filter(o=>o.isSelected(t)).map(o=>o.key)),s=zw(r.filter(o=>!o.command(t)).map(o=>o.key));return C.useMemo(()=>h.jsx($b,{"aria-label":"Text formatting",value:i,onChange:o=>{const l=r.find(a=>a.key===o);l&&n(l.command)},disabledKeys:s,selectionMode:"multiple",children:r.map(o=>h.jsxs(fe,{children:[h.jsx(lE,{value:o.key,"aria-label":o.label,children:h.jsx(X,{src:o.icon})}),h.jsxs(he,{children:[h.jsx(Y,{children:o.label}),"shortcut"in o&&h.jsx(Vn,{meta:!0,children:o.shortcut})]})]},o.key))}),[s,r,n,i])}function zw(t){return C.useMemo(()=>t,[JSON.stringify(t)])}function hY(t,e){const n=t.selection.$from.sharedDepth(t.selection.to);for(let r=n;r>0;r--){const i=t.selection.$from.node(r);if(i.type===e.nodes.ordered_list)return"ordered_list";if(i.type===e.nodes.unordered_list)return"unordered_list"}return null}function pY(){const t=_i(),e=fi(),n=vt(),r=!!e.nodes.ordered_list&&qo(e.nodes.ordered_list)(t),i=!!e.nodes.unordered_list&&qo(e.nodes.unordered_list)(t),s=hY(t,e),o=C.useMemo(()=>[!!e.nodes.unordered_list&&{label:"Bullet list",key:"unordered_list",shortcut:"-",icon:wf},!!e.nodes.ordered_list&&{label:"Numbered list",key:"ordered_list",shortcut:"1.",icon:Lb}].filter(Vw),[e.nodes.unordered_list,e.nodes.ordered_list]),l=C.useMemo(()=>[!r&&"ordered_list",!i&&"unordered_list"].filter(Vw),[r,i]);return C.useMemo(()=>o.length===0?null:h.jsx($b,{"aria-label":"Lists",value:s,onChange:a=>{const c=a,u=e.nodes[c];u&&n(qo(u))},disabledKeys:l,selectionMode:"single",children:o.map(a=>h.jsxs(fe,{children:[h.jsx(lE,{value:a.key,"aria-label":a.label,children:h.jsx(X,{src:a.icon})}),h.jsxs(he,{children:[h.jsx(Y,{children:a.label}),h.jsx(Vn,{meta:!0,children:a.shortcut})]})]},a.key))}),[s,l,n,o,e.nodes])}function Vw(t){return t!==!1}function gY(){return(t,e)=>t.selection.empty?!1:(e&&e(t.tr.removeMark(t.selection.from,t.selection.to)),!0)}function Cd(t){return e=>{let n=!1;for(const r of e.selection.ranges)if(e.doc.nodesBetween(r.$from.pos,r.$to.pos,i=>{i.type===t&&(n=!0)}),n)break;return n}}let mY=0;function yY(t){const e=kl();return h.jsx("span",{className:A2,ref:C.useCallback(n=>{if(!n)return;n.appendChild(t.node);const r=e.current;r&&r.hasFocus()&&r.focus()},[t.node,e])})}const bY=C.memo(function(e){const n=q(9);let r;n[0]!==e.contentDOM?(r=e.contentDOM?h.jsx(yY,{node:e.contentDOM}):null,n[0]=e.contentDOM,n[1]=r):r=n[1];let i;return n[2]!==e.component||n[3]!==e.node||n[4]!==e.getPos||n[5]!==e.hasNodeSelection||n[6]!==e.isNodeCompletelyWithinSelection||n[7]!==r?(i=h.jsx(e.component,{node:e.node,getPos:e.getPos,hasNodeSelection:e.hasNodeSelection,isNodeCompletelyWithinSelection:e.isNodeCompletelyWithinSelection,children:r}),n[2]=e.component,n[3]=e.node,n[4]=e.getPos,n[5]=e.hasNodeSelection,n[6]=e.isNodeCompletelyWithinSelection,n[7]=r,n[8]=i):i=n[8],i});function xY(t){const e=q(12);let n;e[0]!==t.state?(n=Qy.getState(t.state),e[0]=t.state,e[1]=n):n=e[1];const r=n;let i;e[2]!==r.nodeViews?(i=()=>new Map(r.nodeViews),e[2]=r.nodeViews,e[3]=i):i=e[3];const[s,o]=C.useState(i);let l,a;e[4]!==r?(l=()=>r.register(()=>{o(new Map(r.nodeViews))}),a=[r],e[4]=r,e[5]=l,e[6]=a):(l=e[5],a=e[6]),C.useLayoutEffect(l,a);const c=t.state.selection instanceof de?t.state.selection.from:void 0,u=t.state.selection.from,d=t.state.selection.to;let f;return e[7]!==s||e[8]!==c||e[9]!==u||e[10]!==d?(f=h.jsx(h.Fragment,{children:[...s].map(p=>{const[g,m]=p,{contentDOM:b,dom:y,node:x,getPos:v}=m,w=I2(x.type);if(!w)return null;const S=v();return S===void 0?null:LS.createPortal(h.jsx(bY,{hasNodeSelection:c===S,isNodeCompletelyWithinSelection:S>=u&&S+x.nodeSize<=d,node:x,contentDOM:b,component:w.component,getPos:v}),y,g)})}),e[7]=s,e[8]=c,e[9]=u,e[10]=d,e[11]=f):f=e[11],f}function I2(t){return t.spec.reactNodeView}const A2=W({display:"contents"});function Uw(t){const e=document.createElement(t);return e.classList.add(A2),e}const Qy=new Kr("reactNodeViews");function vY(t){const e=new Set;for(const r of Object.values(t.nodes))(r.spec.reactNodeView||r.spec.nodeView)&&e.add(r);return new At({key:Qy,state:{init(){const r=new Set;return{nodeViews:new Map,callbacks:r,register:i=>(r.add(i),()=>{r.delete(i)})}},apply(r,i){return i}},props:{nodeViews:Object.fromEntries([...e].map(r=>[r.name,(i,s,o)=>{if(r.spec.nodeView)return r.spec.nodeView(i,s,o);const l=I2(r),a=document.createElement(r.isInline?"span":"div"),c=l!=null&&l.rendersOwnContent||r.isLeaf?void 0:Uw(r.inlineContent?"div":"span"),u=Uw(r.inlineContent?"div":"span");a.appendChild(u);const d=`${mY++}`,f={contentDOM:c,dom:u,getPos:o,key:d,node:i},p=Qy.getState(s.state);p.nodeViews.set(d,f);const g=()=>{for(const m of p.callbacks)m()};return g(),{dom:a,contentDOM:c,destroy(){p.nodeViews.delete(d),g()},ignoreMutation(m){return!(c!=null&&c.contains(m.target))},deselectNode(){},selectNode(){},update(m){return m.type!==r?!1:(p.nodeViews.set(d,{...f,node:m}),g(),!0)}}}]))}})}const dm={deleteRow:{label:"Delete row",command:PV},deleteColumn:{label:"Delete column",command:OV},insertRowBelow:{label:"Insert row below",command:MV},insertColumnRight:{label:"Insert column right",command:jV}};function kY(){const t=q(12),e=vt(),n=j.size.space.small;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=W({top:n,insetInlineEnd:n,position:"absolute"}),t[0]=r):r=t[0];let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=W({borderRadius:j.size.radius.small,height:"auto",minWidth:0,padding:0,"&::before":{content:'""',inset:`calc(${n} * -1)`,position:"absolute"}}),t[1]=i):i=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(ae,{prominence:"low","aria-label":"Cell options",UNSAFE_className:i,children:h.jsx(X,{src:Au})}),t[2]=s):s=t[2];let o;t[3]!==e?(o=f=>{f in dm&&e(dm[f].command)},t[3]=e,t[4]=o):o=t[4];let l,a;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=Object.entries(dm).map(f=>{const[p,g]=f;return{...g,key:p}}),a=f=>h.jsx(Je,{children:f.label},f.key),t[5]=l,t[6]=a):(l=t[5],a=t[6]);let c;t[7]!==o?(c=h.jsxs(Ii,{align:"end",children:[s,h.jsx(Ai,{onAction:o,items:l,children:a})]}),t[7]=o,t[8]=c):c=t[8];let u;t[9]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(he,{children:"Options"}),t[9]=u):u=t[9];let d;return t[10]!==c?(d=h.jsx("div",{contentEditable:!1,className:r,children:h.jsxs(fe,{children:[c,u]})}),t[10]=c,t[11]=d):d=t[11],d}function qw(t){const e=CY(t.selection.$from);if(e!==void 0){const n=document.createElement("div"),r=It.widget(e+1,n,{element:n,side:1});return{set:tt.create(t.doc,[r]),element:n}}}const w1=new At({state:{init(t,e){return qw(e)},apply(t,e,n,r){return qw(r)}},props:{decorations(t){var e;return(e=w1.getState(t))===null||e===void 0?void 0:e.set}}});function wY(){return w1}function SY(){const t=q(4),e=_i();let n,r;if(t[0]!==e){r=Symbol.for("react.early_return_sentinel");e:{var i;const s=(i=w1.getState(e))===null||i===void 0?void 0:i.element;if(!s){r=null;break e}let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=h.jsx(kY,{}),t[3]=o):o=t[3],n=LS.createPortal(o,s)}t[0]=e,t[1]=n,t[2]=r}else n=t[1],r=t[2];return r!==Symbol.for("react.early_return_sentinel")?r:n}function CY(t){for(let e=t.depth;e>0;e--){const r=t.node(e).type.spec.tableRole;if(r==="cell"||r==="header_cell")return t.before(e)}}const EY=C.createContext({id:""}),IY=EY.Provider;function AY(t){return`keystatic-editor-root-${t}`}function TY(t){return`keystatic-editor-toolbar-${t}`}function NY(t){return`keystatic-editor-content-${t}`}const jY=W({flex:1,height:"auto",minHeight:j.size.scale[2e3],minWidth:0,outline:0,padding:j.size.space.medium,'[data-layout="main"] > div > &':{boxSizing:"border-box",height:"100%",padding:0,paddingTop:j.size.space.medium,minHeight:0,minWidth:0,maxWidth:800,marginInline:"auto",[dn.above.mobile]:{padding:j.size.space.xlarge},[dn.above.tablet]:{padding:j.size.space.xxlarge},'&[data-container="wide"]':{padding:j.size.scale[600]}}}),_Y=C.forwardRef(function(e,n){const r=q(46);let i,s,o;r[0]!==e?({value:i,onChange:s,...o}=e,r[0]=e,r[1]=i,r[2]=s,r[3]=o):(i=r[1],s=r[2],o=r[3]);const[l,a]=C.useState(i);if("yjs"in s){var c;((c=at.getState(l))===null||c===void 0?void 0:c.type)!==s.yjs()&&a(i)}const u=fr(),d=P0(),f=u==="main"?"medium":"regular";let p;r[4]!==u||r[5]!==d?(p=Ar({layout:u,container:d}),r[4]=u,r[5]=d,r[6]=p):p=r[6];let g;r[7]!==f||r[8]!==p?(g={size:f,UNSAFE_className:jY,...p},r[7]=f,r[8]=p,r[9]=g):g=r[9];const m=xR(g);let b,y;mc.getState(i)?(b=l??i,y=a):(b=i,y=s);const x=C.useId();let v,w;r[10]!==x?(w={id:x},r[10]=x,r[11]=w):w=r[11],v=w;const S=v;let k;r[12]!==x?(k=AY(x),r[12]=x,r[13]=k):k=r[13];let E;r[14]===Symbol.for("react.memo_cache_sentinel")?(E=W(XK,{'&[data-layout="main"]':{flex:1,display:"flex",flexDirection:"column"},'&:not([data-layout="main"])':{border:`${j.size.border.regular} solid ${j.color.border.neutral}`,borderRadius:j.size.radius.medium}}),r[14]=E):E=r[14];let T;r[15]!==x?(T=TY(x),r[15]=x,r[16]=T):T=r[16];let N;r[17]!==T?(N=h.jsx(iY,{id:T,"data-keystatic-editor":"toolbar"}),r[17]=T,r[18]=N):N=r[18];let I;r[19]!==x?(I=NY(x),r[19]=x,r[20]=I):I=r[20];let A;r[21]!==o||r[22]!==m||r[23]!==I?(A=h.jsx("div",{children:h.jsx(AG,{...o,...m,role:"textbox","aria-multiline":"true",id:I,"data-keystatic-editor":"content"})}),r[21]=o,r[22]=m,r[23]=I,r[24]=A):A=r[24];let O;r[25]!==k||r[26]!==u||r[27]!==N||r[28]!==A?(O=h.jsxs(zt,{id:k,"data-keystatic-editor":"root","data-layout":u,backgroundColor:"canvas",minWidth:0,UNSAFE_className:E,children:[N,A]}),r[25]=k,r[26]=u,r[27]=N,r[28]=A,r[29]=O):O=r[29];let _;r[30]!==b?(_=h.jsx(xY,{state:b}),r[30]=b,r[31]=_):_=r[31];let F;r[32]===Symbol.for("react.memo_cache_sentinel")?(F=h.jsx(SY,{}),r[32]=F):F=r[32];let M;r[33]!==b?(M=h.jsx(nY,{state:b}),r[33]=b,r[34]=M):M=r[34];let P;r[35]===Symbol.for("react.memo_cache_sentinel")?(P=h.jsx(RG,{}),r[35]=P):P=r[35];let B;r[36]!==b||r[37]!==y||r[38]!==n||r[39]!==O||r[40]!==_||r[41]!==M?(B=h.jsxs(TG,{value:b,onChange:y,ref:n,children:[O,_,F,M,P]}),r[36]=b,r[37]=y,r[38]=n,r[39]=O,r[40]=_,r[41]=M,r[42]=B):B=r[42];let z;return r[43]!==S||r[44]!==B?(z=h.jsx(IY,{value:S,children:B}),r[43]=S,r[44]=B,r[45]=z):z=r[45],z}),sc=[];function OY(t){if(!t.type.spec.code||!t.childCount)return sc;const e=t.content.child(0).text;if(!e)return sc;let n=t.attrs.language;if(typeof n!="string")return sc;n=n.trim();const r=n.indexOf(" ");if(r!==-1&&(n=n.slice(0,r)),n=n.toLowerCase(),!Object.prototype.hasOwnProperty.call($.languages,n))return sc;const i=$.languages[n];if(typeof i!="object")return sc;const s=[],o=$.tokenize(e,i);function l(a,c){for(const u of c){const d=eb(u),f=a+d;if(typeof u!="string"){const p=MY.get(u.type);p&&s.push({attrs:{class:p},from:a,to:f}),l(a,Array.isArray(u.content)?u.content:[u.content])}a=f}}return l(0,o),s}function RY(t){let e=0;const n=[];for(let r=0;r<t.childCount;r++){const i=t.child(r),s=T2(i);if(!s.length){e+=i.nodeSize;continue}const o=e+1;for(const l of s)n.push({attrs:l.attrs,from:l.from+o,to:l.to+o});e+=i.nodeSize}return n}const T2=h2(t=>t.isTextblock?OY(t):RY(t.content));function DY(){return new At({props:{decorations(t){const e=T2(t.doc).map(n=>It.inline(n.from,n.to,n.attrs));return tt.create(t.doc,e)}}})}function eb(t){return typeof t=="string"?t.length:Array.isArray(t.content)?t.content.reduce((e,n)=>e+eb(n),0):eb(t.content)}const MY=new Map([{types:["comment","prolog","doctype","cdata"],style:{color:j.color.foreground.neutralTertiary,fontStyle:"italic"}},{types:["atrule","attr-name","class-name","selector"],style:{color:j.color.scale.amber11}},{types:["boolean","constant","inserted-sign","entity","inserted","number","regex","symbol","variable"],style:{color:j.color.scale.green11}},{types:["attr-value","builtin","char","constant","generics","url"],style:{color:j.color.scale.pink11}},{types:["string"],style:{color:j.color.scale.indigo9}},{types:["annotation","deleted","deleted-sign","decorator","important","tag"],style:{color:j.color.scale.red11}},{types:["function","function-variable","operator"],style:{color:j.color.scale.purple11}},{types:["tag","selector","keyword"],style:{color:j.color.scale.indigo11}},{types:["punctuation"],style:{color:j.color.foreground.neutralSecondary}}].flatMap(t=>{const e=W(t.style);return t.types.map(n=>[n,e])})),fm=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1,FY=(t,e,n)=>{const{$head:r,$anchor:i}=t.selection;return!r.parent.type.spec.code||!r.sameParent(i)?!1:fc(QC,eE,tE)(t,e,n)};function PY(t,e){for(let n=e;n>0;n--){let r=t.before(n);const i=t.doc.nodeAt(r);if(i&&i.type.spec.selectable!==!1)return r}}const $Y=(t,e)=>{const{$from:n,to:r}=t.selection,i=n.sharedDepth(r);if(i===0)return!1;const s=PY(n,i);return s===void 0?!1:(e&&e(t.tr.setSelection(de.create(t.doc,s))),!0)};function LY({nodes:t,marks:e,config:n},r){const i={},s=(c,u)=>{i[c]?i[c]=fc(i[c],u):i[c]=u};t.list_item&&(s("Enter",nG(t.list_item)),s("Tab",sG(t.list_item)),s("Shift-Tab",m2(t.list_item))),s("Enter",fc(qM,QC,eE,tE));let o=fc(Ix,PM,$M),l=fc(Ix,BM,zM);s("Backspace",o),s("Mod-Backspace",o),s("Shift-Backspace",o),s("Delete",l),s("Mod-Delete",l),s("Mod-a",WM),fm&&(s("Ctrl-h",o),s("Alt-Backspace",o),s("Ctrl-d",l),s("Ctrl-Alt-Backspace",l),s("Alt-Delete",l),s("Alt-d",l),s("Ctrl-a",GM),s("Ctrl-e",YM)),s("Mod-z",r?h8:WN),s("Shift-Mod-z",r?Tk:zy),fm&&s("Mod-y",r?Tk:zy);const a=["Mod-Enter","Shift-Enter"];fm&&a.push("Ctrl-Enter");for(const c of a)s(c,FY),t.hard_break&&s(c,BY(t.hard_break));for(const c of Object.values(e))if(c.spec.shortcuts){if(Array.isArray(c.spec.shortcuts)){for(const u of c.spec.shortcuts){if(typeof u!="string")throw new Error(`Invalid shortcut for mark ${c.name}`);s(u,xo(c))}continue}throw new Error(`Invalid shortcuts for mark ${c.name}`)}if(s("Alt-ArrowUp",VM),s("Alt-ArrowDown",UM),s("Escape",$Y),t.unordered_list&&s("Shift-Ctrl-8",qo(t.unordered_list)),t.ordered_list&&s("Shift-Ctrl-9",qo(t.ordered_list)),s("Shift-Ctrl-0",Yo(t.paragraph)),t.heading)for(const c of n.heading.levels)s(`Shift-Ctrl-${c}`,Yo(t.heading,{level:c}));return i}function BY(t){return(e,n)=>(n&&n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)}function zY(t={}){return new At({view(e){return new VY(e,t)}})}class VY{cursorPos=null;element=null;constructor(e,n){var r;this.editorView=e,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){this.timeout!==void 0&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=kf(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}function UY(){return new At({props:{decorations:KY,createSelectionBetween(t,e,n){return e.pos==n.pos&&ht.valid(n)?new ht(n):null},handleClick:HY,handleKeyDown:qY,handleDOMEvents:{beforeinput:WY}}})}const qY=s1({ArrowLeft:Ed("horiz",-1),ArrowRight:Ed("horiz",1),ArrowUp:Ed("vert",-1),ArrowDown:Ed("vert",1)});function Ed(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof _e){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=ht.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new ht(c))),!0):!1}}function HY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ht.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&de.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ht(r))),!0)}function WY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ht))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=G.empty;for(let o=r.length-1;o>=0;o--)i=G.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Q(i,0,0));return s.setSelection(_e.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function KY(t){if(!(t.selection instanceof ht))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tt.create(t.doc,[It.widget(t.selection.head,e,{key:"gapcursor"})])}const GY=500;function YY({rules:t,enterRules:e}){return new At({props:{handleTextInput(n){return setTimeout(()=>{hm(n,t)}),!1},handleKeyDown(n,r){return r.key==="Enter"?hm(n,e):!1},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{hm(n,t)})}}}})}function JY(t,e,n,r){const i=t.doc.resolve(e);if(i.parent.type.spec.code)return;const s=i.parent.textBetween(Math.max(0,i.parentOffset-GY),i.parentOffset,null,"￼");for(const o of r){const l=o.pattern.exec(s);if(!l)continue;const a=e-l[0].length,c=o.handler(t,l,a,n);if(c)return c}}function hm(t,e){const n=t.state;if(t.composing||!(n.selection instanceof _e))return!1;const{$cursor:r}=n.selection;if(!r)return!1;const i=JY(n,r.pos,r.pos,e);if(!i)return!1;const s=Bo.getState(t.state);return s?(s.undoManager.stopCapturing(),t.dispatch(i)):t.dispatch(tU(i)),!0}function pm(t,e=null,n){return(r,i,s,o)=>{let l=e instanceof Function?e(i):e,a=r.tr.delete(s,o),c=a.doc.resolve(s),u=c.blockRange(),d=u&&Db(u,t,l);if(!d)return null;a.wrap(u,d);let f=a.doc.resolve(s-1).nodeBefore;return f&&f.type==t&&Ta(a.doc,s-1)&&!n&&a.join(s-1),a}}function tb(t,e=null){return(n,r,i,s)=>{let o=n.doc.resolve(i),l=e instanceof Function?e(r):e;return l===!1||!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t)?null:n.tr.delete(i,s).setBlockType(i,i,t,l)}}function ZY(t,e=null){return(n,r,i,s)=>{let o=n.doc.resolve(i),l=e instanceof Function?e(r):e;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t)?n.tr.delete(i,s).replaceSelectionWith(t.createAndFill(l)):null}}function XY(t){return(e,n,r,i)=>{let s=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);s+=n[0].slice(o+n[1].length),r+=o;let l=r-i;l>0&&(s=n[0].slice(o-l,o)+s,r=i)}return e.tr.insertText(s,r,i)}}const QY={"...":"…","-->":"→","->":"→","<-":"←","<--":"←","--":"–","(c)":"©","(r)":"®","(tm)":"™"},eJ=new Map([["bold",["**","__"]],["italic",["*","_"]],["strikethrough",["~~"]],["code",["`"]]]),tJ=Object.entries(QY).map(([t,e])=>({pattern:new RegExp(`(${yc(t)})\\s$`),handler:XY(e)}));function nJ({nodes:t,marks:e,config:n}){const r=[...tJ];t.blockquote&&r.push({pattern:/^\s*>\s$/,handler:pm(t.blockquote)}),t.ordered_list&&r.push({pattern:/^\s*(\d+)(?:\.|\))\s$/,handler:pm(t.ordered_list,s=>({start:parseInt(s[1],10)}))}),t.unordered_list&&r.push({pattern:/^\s*([-+*])\s$/,handler:pm(t.unordered_list)}),t.code_block&&r.push({pattern:/^```(\w+)?\s$/,handler:tb(t.code_block,s=>{var o;return{language:(o=s[1])!==null&&o!==void 0?o:""}})}),t.divider&&r.push({pattern:/^---$/,handler:ZY(t.divider)}),t.heading&&r.push({pattern:/^(#{1,6})\s$/,handler:tb(t.heading,s=>n.heading.levels.includes(s[1].length)?{level:s[1].length}:null)});for(const[s,o]of eJ){const l=e[s];for(const a of o)l&&r.push({pattern:new RegExp(`${a[0]==="_"?"(?:^|\\s)":a==="*"?"(?:^|[^\\*])":""}${yc(a)}([^${yc(a[0])}\\s]|(?:[^${yc(a[0])}\\s].*[^\\s]))${yc(a)}$`),handler:(c,[,u],d,f)=>{const p=f-u.length-a.length*2;if(!Hw(c.doc,p,f,l))return null;const g=c.tr;return g.addMark(p+a.length,f-a.length,l.create()),g.delete(f-a.length,f),g.delete(p,p+a.length),g.removeStoredMark(l),g}})}const i=e.link;return i&&r.push({pattern:/(?:^|[^!])\[(.*)\]\((.*)\)$/,handler(s,[,o,l],a,c){const u=c-l.length-o.length-4;if(!Hw(s.doc,u,c,i))return null;const d=s.tr;return d.addMark(u,c,i.create({href:l})),d.delete(u+1+o.length,c),d.delete(u,u+1),d.removeStoredMark(i),d}}),r.push(UG),r}function rJ({nodes:t}){const e=[];return t.code_block&&e.push({pattern:/^```(\w+)?$/,handler:tb(t.code_block,n=>{var r;return{language:(r=n[1])!==null&&r!==void 0?r:""}})}),e}function Hw(t,e,n,r){let i=!0;return t.nodesBetween(e,n,s=>{!s.isText&&!s.type.allowsMarkType(r)&&(i=!1)}),i}function Ww(t){return t===JS.sanitizeUrl(t)}const Kw=/^https?:\/\//;function iJ(t,e,n){let r=!1;return t.doc.nodesBetween(t.pos,e.pos,i=>{if(i.marks.some(s=>s.type===n.marks.link))return r=!0,!1}),r}function sJ(t){if(!t.marks.link)return new At({});const e=t.marks.link;return new At({props:{transformPasted(n){var r,i;return n.content.childCount===1&&((r=n.content.firstChild)===null||r===void 0?void 0:r.type)===t.nodes.paragraph&&((i=n.content.firstChild.firstChild)===null||i===void 0?void 0:i.text)!==void 0&&Kw.test(n.content.firstChild.firstChild.text)&&Ww(n.content.firstChild.firstChild.text)&&n.content.firstChild.firstChild.marks.length===0?Q.maxOpen(G.from(t.nodes.paragraph.createChecked(null,t.schema.text(n.content.firstChild.firstChild.text,[e.create({href:n.content.firstChild.firstChild.text,title:""})])))):n},handlePaste(n,r){var i;const s=(i=r.clipboardData)===null||i===void 0?void 0:i.getData("text/plain");if(s&&Kw.test(s)&&Ww(s)&&!n.state.selection.empty&&n.state.selection.$from.parent===n.state.selection.$to.parent&&!iJ(n.state.selection.$from,n.state.selection.$to,t)){const{tr:o}=n.state;return o.addMark(n.state.selection.from,n.state.selection.to,e.create({href:s,title:""})),n.dispatch(o),!0}return!1}}})}function N2(t,e,n,r){let i=[],s=0,o=[],l="";function a(){let u=i;for(let d=0;d<s;d++){const f=u[u.length-1];if(!("children"in f))throw new Error("Expected children in last element");u=f.children}return u}const c=(u,d,f)=>{var p;let g=u?u.marks:[],m=l;if(l="",(p=u)!==null&&p!==void 0&&p.isText&&g.some(y=>Gw(y.type)&&!y.isInSet(o))){let[,y,x]=/^(\s*)(.*)$/m.exec(u.text);y&&(m+=y,u=x?u.withText(x):null,u||(g=o))}if(u&&u.isText&&g.some(y=>Gw(y.type)&&(f==t.childCount-1||!y.isInSet(t.child(f+1).marks)))){let[,y,x]=/^(.*?)(\s*)$/m.exec(u.text);x&&(l=x,u=y?u.withText(y):null,u||(g=o))}e:for(const[y,x]of g.entries())if(Yw(x.type))for(const[v,w]of o.entries()){if(!Yw(w.type))break;if(x.eq(w)){y>v?g=g.slice(0,v).concat(x).concat(g.slice(v,y)).concat(g.slice(y+1,g.length)):v>y&&(g=g.slice(0,y).concat(g.slice(y+1,v)).concat(x).concat(g.slice(v,g.length)));continue e}}let b=0;for(;b<Math.min(o.length,g.length)&&g[b].eq(o[b]);)++b;for(;b<o.length;){const y=o.pop();y.type!==Kt(y.type.schema).marks.code&&s--}if(m&&a().push(e(m)),u){for(;o.length<g.length;){let x=g[o.length];o.push(x);const v=r(x);v&&(a().push(v),s++)}const y=n(u);y&&a().push(y)}};return t.forEach(c),c(null,0,t.childCount),i}function Gw(t){const e=Kt(t.schema);return t===e.marks.bold||t===e.marks.italic||t===e.marks.strikethrough}function Yw(t){const e=Kt(t.schema);return t===e.marks.bold||t===e.marks.italic||t===e.marks.strikethrough||t===e.marks.link}function oJ(t,e){const n=[];return t.forEach(r=>{n.push(S1(r,e))}),n}function lJ(t,e){return[new ce.Node("inline",{},N2(t,n=>new ce.Node("text",{content:n}),n=>aJ(n,e),n=>cJ(n,e)))]}function aJ(t,e){const{schema:n}=e;if(t.type===n.nodes.hard_break)return new ce.Node("hardbreak");if(t.type===n.nodes.image){const{src:i,filename:s}=t.attrs;if(typeof e.schema.config.image=="object"&&typeof e.schema.config.image.directory=="string"){const o=Wt(e.schema.config.image.directory);e.otherFiles.has(o)||e.otherFiles.set(o,new Map),e.otherFiles.get(o).set(s,i)}else e.extraFiles.set(s,i);return new ce.Node("image",{src:encodeURI(`${Op(e.schema.config,e.slug)}${t.attrs.filename}`),alt:t.attrs.alt,title:t.attrs.title})}const r=e.schema.components[t.type.name];if(r?.kind==="inline"){const i=new ce.Node("tag",Us(r.schema,t.attrs.props,e),[],t.type.name);return i.inline=!0,i}if(t.text!==void 0)return new ce.Node(t.marks.some(i=>i.type===n.marks.code)?"code":"text",{content:t.text})}function cJ(t,e){const{schema:n}=e;if(t.type===n.marks.code)return;const r=n.components[t.type.name];if(r){const s=new ce.Node("tag",Us(r.schema,t.attrs.props,e),[],t.type.name);return s.inline=!0,s}let i;if(t.type===n.marks.bold&&(i="strong"),t.type===n.marks.italic&&(i="em"),t.type===n.marks.strikethrough&&(i="s"),i)return new ce.Node(i,{},[]);if(t.type===n.marks.link)return new ce.Node("link",{href:t.attrs.href,title:t.attrs.title})}function S1(t,e){const n=l=>oJ(l,e),r=l=>lJ(l,e),i=Kt(t.type.schema);if(t.type===i.nodes.doc)return new ce.Node("document",{},n(t.content));if(t.type===i.nodes.paragraph)return new ce.Node("paragraph",{},r(t.content));if(t.type===i.nodes.blockquote)return new ce.Node("blockquote",{},n(t.content));if(t.type===i.nodes.divider)return new ce.Node("hr");if(t.type===i.nodes.table){const l=n(t.content),a=new ce.Node("thead",{},[]);l[0].children[0].type==="th"&&a.children.push(l.shift());const c=new ce.Node("tbody",{},l);return new ce.Node("tag",{},[new ce.Node("table",{},[a,c])],"table")}if(t.type===i.nodes.table_row)return new ce.Node("tr",{},n(t.content));if(t.type===i.nodes.table_header)return new ce.Node("th",{},n(t.content));if(t.type===i.nodes.table_cell)return new ce.Node("td",{},n(t.content));if(t.type===i.nodes.heading){const l=Us(i.config.heading.schema,t.attrs.props,e),a=new ce.Node("heading",{level:t.attrs.level,...l},r(t.content));for(const[c,u]of Object.entries(l))a.annotations.push({name:c,value:u,type:"attribute"});return a}if(t.type===i.nodes.code_block){const l=Us(i.config.codeBlock.schema,t.attrs.props,e),a=new ce.Node("fence",typeof t.attrs.language=="string"&&t.attrs.language!=="plain"?{language:t.attrs.language,content:t.textBetween(0,t.content.size)+`
`,...l}:{content:t.textBetween(0,t.content.size)+`
`,...l},r(t.content));for(const[c,u]of Object.entries(l))a.annotations.push({name:c,value:u,type:"attribute"});return a}if(t.type===i.nodes.list_item){let l=n(t.content);return l.length===1&&l[0].type==="paragraph"?l=l[0].children:l.length===2&&l[0].type==="paragraph"&&l[0].children.length===1&&l[1].type==="list"&&(l=[l[0].children[0],l[1]]),new ce.Node("item",{},l)}if(t.type===i.nodes.ordered_list)return new ce.Node("list",{ordered:!0,start:t.attrs.start},n(t.content));if(t.type===i.nodes.unordered_list)return new ce.Node("list",{ordered:!1},n(t.content));const s=t.type.name,o=i.components[s];if(o){const l=o.kind==="wrapper"||o.kind==="repeating"?n(t.content):[];return new ce.Node("tag",Us(o.schema,t.attrs.props,e),l,s)}return new ce.Node("paragraph",{},r(t.content))}let Gl;function Or(){if(!Gl)throw new Error("state not set");return Gl}function j2(){return Or().schema}function Es(t){Or().errors.push(t)}function uJ(t,e){const n=Or(),r=n.marks;n.marks=t.addToSet(n.marks);try{return e()}finally{n.marks=r}}function jo(t,e){const n=[];for(const r of t){const i=Dp(r,e);i&&(Array.isArray(i)?n.push(...i):n.push(i))}return n}function Zn(t,e){return Es({error:{id:"unspecified-type",level:"critical",message:`${t.type} is not allowed`},lines:t.lines,type:t.type,location:t.location}),jo(t.children,e)}function fs(t,e,n){let r=jo(t.children,e);const i=e.createAndFill(n,r);return i||Es({error:{id:"unexpected-children",level:"critical",message:`${t.type} has unexpected children`},lines:t.lines,type:t.type,location:t.location}),i}function oc(t,e,n){return e?uJ(e instanceof Aa?e.create():e,()=>jo(t.children,n)):Zn(t,n)}function _2(t,e,n,r,i){Gl={schema:e,errors:[],marks:[],extraFiles:n??new Map,otherFiles:r??new Map,slug:i};try{let s=Dp(t,void 0);if(Gl.errors.length)throw new Error(Gl.errors.map(o=>o.lines[0]+":"+o.error.message).join(`
`));if(!(s instanceof nr))throw new Error("unexpected node");return s}finally{Gl=void 0}}function gm(t,e){const n=j2(),r=[];for(const s of t.children){const o=Dp(s,n.nodes.paragraph);if(o){if(!Array.isArray(o)){if(o.isInline){r.push(n.nodes.paragraph.createAndFill({},o));continue}r.push(o);continue}if(s.type==="inline"){r.push(n.nodes.paragraph.createAndFill({},o));continue}r.push(...o)}}const i=e.createAndFill({},r);return i||Es({error:{id:"unexpected-children",level:"critical",message:`${t.type} has unexpected children`},lines:t.lines,type:t.type,location:t.location}),i}function Dp(t,e){if(t.errors.length){for(const o of t.errors)Es({error:o,lines:t.lines,type:t.type,location:t.location});return null}if(t.type==="error")return Es({error:{id:"error-node",level:"critical",message:"Unexpected error node without errors"},lines:t.lines,type:t.type,location:t.location}),null;const n=j2();if(t.type==="inline")return jo(t.children,e);if(t.type==="em")return oc(t,n.marks.italic,e);if(t.type==="code")return n.marks.code?n.schema.text(t.attributes.content,[...Or().marks,n.marks.code.create()]):Zn(t,e);if(t.type==="s")return oc(t,n.marks.strikethrough,e);if(t.type==="strong")return oc(t,n.marks.bold,e);if(t.type==="softbreak")return n.schema.text(`
`);if(t.type==="hardbreak")return n.nodes.hard_break?n.nodes.hard_break.create():Zn(t,e);if(t.type==="blockquote")return n.nodes.blockquote?fs(t,n.nodes.blockquote,{}):Zn(t,e);if(t.type==="heading"){if(!n.nodes.heading)return Zn(t,e);const{level:o,...l}=t.attributes,a=Or(),c=a.schema.config.heading.schema;return fs(t,n.nodes.heading,{level:t.attributes.level,props:ct(Fc(c,l,a),c)})}if(t.type==="paragraph")return fs(t,n.nodes.paragraph,{});if(t.type==="comment")return[];if(t.type==="document")return fs(t,n.nodes.doc,{});if(t.type==="fence"){if(!n.nodes.code_block)return Zn(t,e);let{language:o,content:l,...a}=t.attributes;const c=Or(),u=c.schema.config.codeBlock.schema;return l=l.slice(0,-1),n.nodes.code_block.createAndFill({language:typeof t.attributes.language=="string"?t.attributes.language:"",props:ct(Fc(u,a,c),u)},l?n.schema.text(l):void 0)}if(t.type==="hr")return n.nodes.divider?fs(t,n.nodes.divider,{}):Zn(t,e);if(t.type==="link"){var r;return oc(t,(r=n.marks.link)===null||r===void 0?void 0:r.create({href:t.attributes.href}),e)}if(t.type==="text")return n.schema.text(t.attributes.content,Or().marks);if(t.type==="item")return n.nodes.list_item?gm(t,n.nodes.list_item):Zn(t,e);if(t.type==="list"){const o=t.attributes.ordered?n.nodes.ordered_list:n.nodes.unordered_list;return o?fs(t,o,t.attributes.ordered&&t.attributes.start!==void 0?{start:t.attributes.start}:{}):Zn(t,e)}if(t.type==="table")return n.nodes.table?fs(t,n.nodes.table,{}):Zn(t,e);if(t.type==="tbody"||t.type==="thead")return jo(t.children,e);if(t.type==="tr")return n.nodes.table_row?fs(t,n.nodes.table_row,{}):Zn(t,e);if(t.type==="th")return n.nodes.table_header?gm(t,n.nodes.table_header):Zn(t,e);if(t.type==="td")return n.nodes.table_cell?gm(t,n.nodes.table_cell):Zn(t,e);if(t.type==="tag"&&t.tag){if(t.tag==="table")return Dp(t.children[0],e);const o=n.components[t.tag];if(o){const l=Or(),a=Fc(o.schema,t.attributes,l);if(o.kind==="mark")return oc(t,n.schema.marks[t.tag].create({props:ct(a,o.schema)}),e);const c=n.schema.nodes[t.tag],u=jo(t.children,c),d=c.createAndFill({props:ct(a,o.schema)},u);return d||Es({error:{id:"unexpected-children",level:"critical",message:`${t.type} has unexpected children`},lines:t.lines,type:t.type,location:t.location}),o.kind==="inline"&&!(e!=null&&e.isTextblock)?n.nodes.paragraph.createAndFill({},d):d}return Es({error:{id:"unspecified-type",level:"critical",message:`Missing component definition for ${t.tag}`},lines:t.lines,type:t.type,location:t.location}),jo(t.children,e)}if(t.type==="image"){var i,s;const o=Op(n.config,Or().slug),a=decodeURIComponent(t.attributes.src).slice(o.length),c=(i=typeof n.config.image=="object"&&typeof n.config.image.directory=="string"?Or().otherFiles.get(Wt(n.config.image.directory)):Or().extraFiles)===null||i===void 0?void 0:i.get(a);return c&&n.nodes.image?n.nodes.image.createChecked({src:c,alt:t.attributes.alt,title:t.attributes.title,filename:a}):n.schema.text(`![${t.attributes.alt||""}](${t.attributes.src||""}${(s=t.attributes.title)!==null&&s!==void 0&&s.length?` "${t.attributes.title}"`:""})`)}return Es({error:{id:"unhandled-type",level:"critical",message:`Unhandled type ${t.type}`},lines:t.lines,type:t.type,location:t.location}),null}function dJ(){return new At({props:{clipboardTextSerializer(t,e){try{return Lc(S1(e.state.doc.type.create({},t.content),{otherFiles:new Map,extraFiles:new Map,schema:Kt(e.state.schema),slug:void 0}))}catch(n){return console.log("failed to serialize clipboard text as markdoc",n),t.content.textBetween(0,t.content.size,`

`)}},clipboardTextParser(t,e,n,r){try{return Q.maxOpen(_2(Hs(t),Kt(r.state.schema),void 0,void 0,void 0).content)}catch(i){return console.log("failed to parse clipboard text as markdoc",i),hJ(t,e,n,r)}},handlePaste(t,e){if(t.props.editable&&!t.props.editable(t.state)||!e.clipboardData)return!1;const n=e.clipboardData.getData("text/html");if(n&&fJ(n)){const r=e.clipboardData.getData("text/plain");return t.pasteText(r),!0}return!1}}})}function fJ(t){const n=new globalThis.DOMParser().parseFromString(t,"text/html"),r=n.body.firstElementChild;if(n.body.childElementCount!==1||r?.tagName!=="DIV"||!(r instanceof HTMLElement)||!r.style.fontFamily.includes("monospace"))return!1;for(const i of r.children)if(i.tagName!=="BR"){if(i.tagName!=="DIV")return!1;for(const s of i.children)if(s.tagName!=="SPAN")return!1}return!0}function hJ(t,e,n,r){let i=e.marks(),{schema:s}=r.state,o=pl.fromSchema(s),l=document.createElement("div");return t.split(/(?:\r\n?|\n)+/).forEach(c=>{let u=l.appendChild(document.createElement("p"));c&&u.appendChild(o.serializeNode(s.text(c,i)))}),(r.someProp("clipboardParser")||r.someProp("domParser")||_b.fromSchema(r.state.schema)).parseSlice(l,{preserveWhitespace:!0,context:e,ruleFromNode(c){return c.nodeName=="BR"&&!c.nextSibling&&c.parentNode&&!pJ.test(c.parentNode.nodeName)?{ignore:!0}:null}})}const pJ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gJ(){return new At({props:{decorations(t){const e=[];let n,r;if(t.selection instanceof _e&&({from:n,to:r}=t.selection),t.selection instanceof Un&&(n=0,r=t.doc.content.size),n!==void 0&&r!==void 0){const i=n,s=r;t.doc.nodesBetween(n,r,(o,l)=>{if(o.isText)return;const a=l,c=l+o.nodeSize;a>=i&&c<=s&&e.push(It.node(l,l+o.nodeSize,{class:on.nodeInSelection}))})}return tt.create(t.doc,e)}}})}function mJ(t){return new At({props:{decorations(e){var n;let r=e.doc;if(r.childCount===1&&(n=r.firstChild)!==null&&n!==void 0&&n.isTextblock&&r.firstChild.content.size===0){let i=document.createElement("span");return i.className=on.placeholder,i.textContent=t,tt.create(r,[It.widget(1,i)])}}}})}const yJ=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.style.borderColor=t.color;const n=document.createElement("div");return n.style.backgroundColor=t.color,n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e};function Mp(t,e,n,r,i){const s=Kt(t.type.schema);return Ll.create({selection:e,storedMarks:n,plugins:[sJ(s),NG(s),BG(),...r&&i?[Y6(r),f8(i,{cursorBuilder:yJ,awarenessStateFilter(o,l,a){const c=i.getLocalState();return o!==l&&a.location===c?.location&&a.branch===c?.branch}}),m8()]:[nU()],zY({color:j.color.alias.borderSelected,width:2}),YY({rules:nJ(s),enterRules:rJ(s)}),UY(),hV(LY(s,!!(r&&i))),dJ(),gJ(),mJ('Start writing or press "/" for commands…'),vY(t.type.schema),PG(),KV(),wY(),DY()],doc:t})}let Yl;function Qn(){if(!Yl)throw new Error("state not set");return Yl}function zi(t){Qn().errors.push(t)}function bJ(){return Qn().schema}function xJ(t,e){const n=Qn(),r=n.marks;n.marks=t.addToSet(n.marks);try{return e()}finally{n.marks=r}}function la(t,e){const n=[];for(const r of t){const i=O2(r,e);i&&(Array.isArray(i)?n.push(...i):n.push(i))}return n}function Dn(t,e){return zi(`${t.type} is not allowed`),la("children"in t?t.children:[],e)}function ei(t,e,n,r){let i=la("children"in t?t.children:[],e);r&&(i=r(i));const s=e.createAndFill(n,i);return s||zi(`${t.type} has unexpected children`),s}function Al(t,e,n){return e?xJ(e instanceof Aa?e.create():e,()=>la("children"in t?t.children:[],n)):Dn(t,n)}function vJ(t,e,n,r,i){Yl={schema:e,errors:[],marks:[],extraFiles:n??new Map,otherFiles:r??new Map,slug:i,definitions:new Map},JN(t,s=>{if(s.type==="definition"){const o=String(s.identifier).toUpperCase();Qn().definitions.has(o)||Qn().definitions.set(o,s)}});try{let s=O2(t,void 0);if(Yl.errors.length)throw new Error(Yl.errors.join(`
`));if(!(s instanceof nr))throw new Error("unexpected node");return s}finally{Yl=void 0}}const Jw=t=>e=>{const n=[];let r=[];for(const i of e){if(i.isInline){r.push(i);continue}r.length&&(n.push(t.nodes.paragraph.createChecked({},r)),r=[]),n.push(i)}return r.length&&n.push(t.nodes.paragraph.createChecked({},r)),n};function kJ(t){Ue(t.body.length===1);const e=t.body[0];return Ue(e.type==="ExpressionStatement"),nb(e.expression)}function nb(t){if(t.type==="Literal"){const e=t.value;return Ue(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null),e}if(t.type==="ArrayExpression")return t.elements.map(e=>(Ue(e!==null&&e.type!=="SpreadElement"),nb(e)));if(t.type==="ObjectExpression")return Object.fromEntries(t.properties.map(e=>{Ue(e.type==="Property"&&!e.computed&&e.kind==="init");const n=e.key,r=n.type==="Identifier"?n.name:n.type==="Literal"?n.value:void 0;return Ue(typeof r=="string"),[r,nb(e.value)]}));throw new Error(`Unexpected expression type ${t.type}`)}function O2(t,e){const n=bJ();if(t.type==="emphasis")return Al(t,n.marks.italic,e);if(t.type==="inlineCode")return n.marks.code?n.schema.text(t.value,[...Qn().marks,n.marks.code.create()]):Dn(t,e);if(t.type==="delete")return Al(t,n.marks.strikethrough,e);if(t.type==="strong")return Al(t,n.marks.bold,e);if(t.type==="break")return n.nodes.hard_break?n.nodes.hard_break.create():Dn(t,e);if(t.type==="blockquote")return n.nodes.blockquote?ei(t,n.nodes.blockquote,{}):Dn(t,e);if(t.type==="heading")return n.nodes.heading?ei(t,n.nodes.heading,{level:t.depth}):Dn(t,e);if(t.type==="paragraph")return ei(t,n.nodes.paragraph,{});if(t.type==="root")return ei(t,n.nodes.doc,{});if(t.type==="code"){if(!n.nodes.code_block)return Dn(t,e);let o=typeof t.lang=="string"?t.lang:"";return t.meta&&(o+=" "+t.meta),n.nodes.code_block.createAndFill({language:o},n.schema.text(t.value))}if(t.type==="thematicBreak")return n.nodes.divider?ei(t,n.nodes.divider,{}):Dn(t,e);if(t.type==="link"){var r;return Al(t,(r=n.marks.link)===null||r===void 0?void 0:r.create({href:t.url}),e)}if(t.type==="linkReference"){var i;const o=Qn().definitions.get(t.identifier.toUpperCase());return o?Al(t,(i=n.marks.link)===null||i===void 0?void 0:i.create({href:o.url}),e):(zi(`Could not find definition for ${t.identifier}`),la(t.children,e))}if(t.type==="text")return n.schema.text(t.value,Qn().marks);if(t.type==="listItem")return n.nodes.list_item?ei(t,n.nodes.list_item,{},Jw(n)):Dn(t,e);if(t.type==="list"){const o=t.ordered?n.nodes.ordered_list:n.nodes.unordered_list;return o?ei(t,o,t.ordered&&t.start!=null?{start:t.start}:{}):Dn(t,e)}if(t.type==="table")return n.nodes.table?ei(t,n.nodes.table,{}):Dn(t,e);if(t.type==="tableRow")return n.nodes.table_row?ei(t,n.nodes.table_row,{}):Dn(t,e);if(t.type==="tableCell")return n.nodes.table_cell?ei(t,n.nodes.table_cell,{},Jw(n)):Dn(t,e);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement"){if(!t.name)return Dn(t,e);const o=n.components[t.name];if(o){const l=Qn(),a={};for(const f of t.attributes){if(f.type==="mdxJsxAttribute"){if(f.value==null){a[f.name]=!0;continue}try{a[f.name]=typeof f.value=="string"?f.value:kJ(f.value.data.estree)}catch{zi(`${t.type} has unexpected attributes`)}continue}zi(`${t.type} has unexpected attributes`)}const c=Fc(o.schema,a,l);if(o.kind==="mark")return t.type==="mdxJsxFlowElement"?Dn(t,e):Al(t,n.schema.marks[t.name].create({props:ct(c,o.schema)}),e);const u=n.schema.nodes[t.name],d=u.createAndFill({props:ct(c,o.schema)},la(t.children,u));return d||zi(`${t.type} has unexpected children`),o.kind==="inline"&&!(e!=null&&e.isTextblock)?n.nodes.paragraph.createAndFill({},d):d}return zi(`Missing component definition for ${t.name}`),la("children"in t?t.children:[],e)}if(t.type==="image"||t.type==="imageReference"){var s;const o=t.type==="image"?t:Qn().definitions.get(t.identifier.toUpperCase());if(!o)return zi(`Could not find definition for ${t.identifier}`),null;const l=Op(n.config,Qn().slug),c=decodeURI(o.url).slice(l.length),u=(s=typeof n.config.image=="object"&&typeof n.config.image.directory=="string"?Qn().otherFiles.get(Wt(n.config.image.directory)):Qn().extraFiles)===null||s===void 0?void 0:s.get(c);return u&&n.nodes.image?n.nodes.image.createChecked({src:u,alt:t.alt,title:o.title,filename:c}):n.schema.text(`![${t.alt||""}](${o.url||""}${o.title?` "${o.title}"`:""})`)}return t.type==="definition"?[]:(zi(`Unhandled type ${t.type}: ${aj(t,{extensions:[SN(),MN(),cj(),sC()],rule:"-"})}`),null)}function R2(t,e){const n=[];return t.forEach(r=>{n.push(IJ(r,e))}),n}function wJ(t,e){return N2(t,n=>({type:"text",value:n}),n=>SJ(n,e),n=>CJ(n,e))}function C1(t){return Object.entries(t).map(([e,n])=>({type:"mdxJsxAttribute",name:e,value:n===!0?null:typeof n=="string"?n:{type:"mdxJsxAttributeValueExpression",value:JSON.stringify(n)}}))}function SJ(t,e){const{schema:n}=e;if(t.type===n.nodes.hard_break)return{type:"break"};if(t.type===n.nodes.image){const{src:i,filename:s}=t.attrs;if(typeof e.schema.config.image=="object"&&typeof e.schema.config.image.directory=="string"){const o=Wt(e.schema.config.image.directory);e.otherFiles.has(o)||e.otherFiles.set(o,new Map),e.otherFiles.get(o).set(s,i)}else e.extraFiles.set(s,i);return{type:"image",url:encodeURI(`${Op(e.schema.config,e.slug)}${t.attrs.filename}`),alt:t.attrs.alt,title:t.attrs.title}}const r=e.schema.components[t.type.name];if(r?.kind==="inline")return{type:"mdxJsxTextElement",name:t.type.name,attributes:C1(Us(r.schema,t.attrs.props,e)),children:[]};if(t.text!==void 0)return{type:t.marks.some(i=>i.type===n.marks.code)?"inlineCode":"text",value:t.text}}function CJ(t,e){const{schema:n}=e;if(t.type===n.marks.code)return;const r=n.components[t.type.name];if(r)return{type:"mdxJsxTextElement",name:t.type.name,attributes:C1(Us(r.schema,t.attrs.props,e)),children:[]};let i;if(t.type===n.marks.bold&&(i="strong"),t.type===n.marks.italic&&(i="emphasis"),t.type===n.marks.strikethrough&&(i="delete"),i)return{type:i,children:[]};if(t.type===n.marks.link)return{type:"link",url:t.attrs.href,title:t.attrs.title,children:[]}}function Id(t,e){const n=[];return t.content.forEach(r=>{n.push(e(r))}),n}function Zw(t){return{type:"listItem",spread:t.length===2&&t[0].type==="paragraph"&&t[1].type==="list"?!1:void 0,children:t}}function EJ(t,e){return{type:"root",children:R2(t.content,e)}}function IJ(t,e){const n=a=>R2(a,e),r=a=>wJ(a,e),i=Kt(t.type.schema);if(t.type===i.nodes.paragraph)return{type:"paragraph",children:r(t.content)};if(t.type===i.nodes.blockquote)return{type:"blockquote",children:n(t.content)};if(t.type===i.nodes.divider)return{type:"thematicBreak"};if(t.type===i.nodes.table)return{type:"table",children:Id(t,a=>({type:"tableRow",children:Id(a,c=>({type:"tableCell",children:r(c.content.child(0).content)}))}))};if(t.type===i.nodes.heading)return{type:"heading",depth:t.attrs.level,children:r(t.content)};if(t.type===i.nodes.code_block){var s;let a=typeof t.attrs.language=="string"&&t.attrs.language!=="plain"?t.attrs.language:void 0,c=null;return(s=a)!==null&&s!==void 0&&s.includes(" ")&&([a,c]=a.split(" ",2)),{type:"code",lang:a,meta:c,value:t.textContent}}if(t.type===i.nodes.ordered_list)return{type:"list",ordered:!0,spread:!1,start:t.attrs.start,children:Id(t,a=>Zw(n(a.content)))};if(t.type===i.nodes.unordered_list)return{type:"list",spread:!1,children:Id(t,a=>Zw(n(a.content)))};const o=t.type.name,l=i.components[o];if(l){const a=l.kind==="wrapper"||l.kind==="repeating"?n(t.content):[];return{type:"mdxJsxFlowElement",name:o,attributes:C1(Us(l.schema,t.attrs.props,e)),children:a}}return{type:"paragraph",children:r(t.content)}}function Fp(t){return Mp(t.nodes.doc.createAndFill())}function D2(t,e,n,r,i){const s=_2(Hs(t),e,n,r,i);return Mp(s)}function M2(t,e){const n=new Map,r=new Map,i=S1(t.doc,{extraFiles:n,otherFiles:r,schema:Kt(t.schema),slug:e}),s=Lc(i);return{content:Lc(Hs(s)),other:n,external:r}}function F2(t,e,n,r,i){const s=bN(t,{extensions:[KR(),jN(),PN(),hq()],mdastExtensions:[GR(),wN(),DN(),iq()]}),o=vJ(s,e,n,r,i);return Mp(o)}function P2(t,e){const n=new Map,r=new Map,i=EJ(t.doc,{extraFiles:n,otherFiles:r,schema:Kt(t.schema),slug:e});return{content:aj(i,{extensions:[SN(),MN(),cj(),sC()],rule:"-"}),other:n,external:r}}function Pp(t){const e=q(12),n=fr();let r;e[0]!==t.label||e[1]!==t.description?(r={label:t.label,labelElementType:"span",description:t.description},e[0]=t.label,e[1]=t.description,e[2]=r):r=e[2];let i=r;if(n==="main"){let a;e[3]!==t.label?(a={"aria-label":t.label},e[3]=t.label,e[4]=a):a=e[4],i=a}const s=n==="main"?"100%":void 0;let o;e[5]!==t.value||e[6]!==t.onChange?(o=a=>h.jsx(_Y,{...a,value:t.value,onChange:t.onChange}),e[5]=t.value,e[6]=t.onChange,e[7]=o):o=e[7];let l;return e[8]!==s||e[9]!==i||e[10]!==o?(l=h.jsx(Sb,{height:s,...i,children:o}),e[8]=s,e[9]=i,e[10]=o,e[11]=l):l=e[11],l}function $p(t,e,n){return Mp(o8(t.schema,e),void 0,void 0,e,n)}const AJ=au({label:"Alt text",description:"This text will be used by screen readers and search engines."}),TJ=Gn({Input(){return null},defaultValue(){return""},parse(t){if(t===void 0)return"";if(typeof t!="string")throw new Ce("Must be string");return t},validate(t){return t},serialize(t){return{value:t}},label:"Title"});function Ju(t){var e,n,r,i,s,o,l,a,c,u;return{bold:(e=t.bold)!==null&&e!==void 0?e:!0,italic:(n=t.italic)!==null&&n!==void 0?n:!0,strikethrough:(r=t.strikethrough)!==null&&r!==void 0?r:!0,code:(i=t.code)!==null&&i!==void 0?i:!0,heading:(()=>{let d=[],f=typeof t.heading=="object"&&!Array.isArray(t.heading)?t.heading.levels:t.heading;return(f===!0||f===void 0)&&(d=[1,2,3,4,5,6]),Array.isArray(f)&&(d=f),{levels:d,schema:t.heading&&typeof t.heading=="object"&&"schema"in t.heading?t.heading.schema:{}}})(),blockquote:(s=t.blockquote)!==null&&s!==void 0?s:!0,orderedList:(o=t.orderedList)!==null&&o!==void 0?o:!0,unorderedList:(l=t.unorderedList)!==null&&l!==void 0?l:!0,table:(a=t.table)!==null&&a!==void 0?a:!0,link:(c=t.link)!==null&&c!==void 0?c:!0,image:t.image!==!1?((d,f,p,g,m)=>{const b=t.image===!0?void 0:t.image;return{directory:b?.directory,publicPath:b?.publicPath,transformFilename:(d=b?.transformFilename)!==null&&d!==void 0?d:y=>y,schema:{alt:(f=b==null||(p=b.schema)===null||p===void 0?void 0:p.alt)!==null&&f!==void 0?f:AJ,title:(g=b==null||(m=b.schema)===null||m===void 0?void 0:m.title)!==null&&g!==void 0?g:TJ}}})():void 0,divider:(u=t.divider)!==null&&u!==void 0?u:!0,codeBlock:t.codeBlock===!1?void 0:{schema:typeof t.codeBlock=="object"?t.codeBlock.schema:{}}}}function NJ(t){if(t.kind==="object"||t.kind==="conditional")return{type:Object,required:!0};if(t.kind==="array")return{type:Array,required:!0};if(t.kind==="child")return{};if(t.formKind===void 0){if(typeof t.defaultValue=="string"&&"options"in t&&Array.isArray(t.options)&&t.options.every(e=>typeof e=="object"&&e!==null&&"value"in e&&typeof e.value=="string"))return{type:String,matches:t.options.map(e=>e.value),required:!0};if(typeof t.defaultValue=="string"){let e=!1;try{t.parse("")}catch{e=!0}return{type:String,required:e}}try{return t.parse(1),{type:Number}}catch{}return typeof t.defaultValue=="boolean"?{type:Boolean,required:!0}:{}}if(t.formKind==="slug"){let e=!1;try{t.parse("",void 0)}catch{e=!0}return{type:String,required:e}}if(t.formKind==="asset"){let e=!1;try{t.validate(null)}catch{e=!0}return{type:String,required:e}}return{}}function mm(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>{const r=NJ(n);return[e,r]}))}function jJ(t){const e=Ju(t.options||{}),n={nodes:{...Ga},tags:{}};e.heading.levels.length?n.nodes.heading={...Ga.heading,attributes:{...Ga.heading.attributes,...mm(e.heading.schema)}}:n.nodes.heading=void 0,e.blockquote||(n.nodes.blockquote=void 0),e.codeBlock?n.nodes.fence={...Ga.fence,attributes:{...Ga.fence.attributes,...mm(e.codeBlock.schema)}}:n.nodes.fence=void 0,!e.orderedList&&!e.unorderedList&&(n.nodes.list=void 0),e.bold||(n.nodes.strong=void 0),e.italic||(n.nodes.em=void 0),e.strikethrough||(n.nodes.s=void 0),e.link||(n.nodes.link=void 0),e.image||(n.nodes.image=void 0),e.divider||(n.nodes.hr=void 0),e.table||(n.nodes.table=void 0);for(const[s,o]of Object.entries(t.components||{})){var r;const l=o.kind==="block"||o.kind==="inline";n.tags[s]={render:(r=t.render)===null||r===void 0||(r=r.tags)===null||r===void 0?void 0:r[s],children:l?[]:void 0,selfClosing:l,attributes:mm(o.schema),description:"description"in o?o.description:void 0,inline:o.kind==="inline"||o.kind==="mark"}}for(const[s,o]of Object.entries(((i=t.render)===null||i===void 0?void 0:i.nodes)||{})){var i;const l=n.nodes[s];l&&(l.render=o)}return n}const uh=new TextDecoder,$2=new TextEncoder;function Lp(t,e){return[...rp(en(Object.fromEntries(Object.entries(t).map(([n,r])=>[n,en(r.schema)])))),...typeof e.image=="object"&&typeof e.image.directory=="string"?[Wt(e.image.directory)]:[]]}function E1({label:t,description:e,options:n={},components:r={},extension:i="mdoc"}){let s;const o=Ju(n);let l=()=>(s||(s=jp(o,r,!1)),s);return{kind:"form",formKind:"content",defaultValue(){return Fp(l())},Input(a){return h.jsx(Pp,{description:e,label:t,...a})},parse:(a,{content:c,other:u,external:d,slug:f})=>{const p=uh.decode(c);return D2(p,l(),u,d,f)},contentExtension:`.${i}`,validate(a){return a},directories:Lp(r,o),serialize(a,{slug:c}){const u=M2(a,c);return{content:$2.encode(u.content),external:u.external,other:u.other,value:void 0}},reader:{parse:(a,{content:c})=>{const u=uh.decode(c);return{node:Hs(u)}}},collaboration:{toYjs(a){return yp(a.doc)},fromYjs(a,c){return $p(l(),a,c)}}}}E1.createMarkdocConfig=jJ;E1.inline=function({label:e,description:n,options:r={},components:i={}}){let s;const o=Ju(r);let l=()=>(s||(s=jp(o,i,!1)),s);return{kind:"form",formKind:"assets",defaultValue(){return Fp(l())},Input(a){return h.jsx(Pp,{description:n,label:e,...a})},parse:(a,{other:c,external:u,slug:d})=>{if(a===void 0&&(a=""),typeof a!="string")throw new Ce("Must be a string");return D2(a,l(),c,u,d)},validate(a){return a},directories:Lp(i,o),serialize(a,{slug:c}){const u=M2(a,c);return{external:u.external,other:u.other,value:u.content}},reader:{parse:a=>{if(a===void 0&&(a=""),typeof a!="string")throw new Ce("Must be a string");return{node:Hs(a)}}},collaboration:{toYjs(a){return yp(a.doc)},fromYjs(a,c){return $p(l(),a,c)}}}};function L2({label:t,description:e,options:n={},components:r={},extension:i="mdx"}){let s;const o=Ju(n);let l=()=>(s||(s=jp(o,r,!0)),s);return{kind:"form",formKind:"content",defaultValue(){return Fp(l())},Input(a){return h.jsx(Pp,{description:e,label:t,...a})},parse:(a,{content:c,other:u,external:d,slug:f})=>{const p=uh.decode(c);return F2(p,l(),u,d,f)},contentExtension:`.${i}`,validate(a){return a},directories:Lp(r,o),serialize(a,{slug:c}){const u=P2(a,c);return{content:$2.encode(u.content),external:u.external,other:u.other,value:void 0}},reader:{parse:(a,{content:c})=>uh.decode(c)},collaboration:{toYjs(a){return yp(a.doc)},fromYjs(a,c){return $p(l(),a,c)}}}}L2.inline=function({label:e,description:n,options:r={},components:i={}}){let s;const o=Ju(r);let l=()=>(s||(s=jp(o,i,!0)),s);return{kind:"form",formKind:"assets",defaultValue(){return Fp(l())},Input(a){return h.jsx(Pp,{description:n,label:e,...a})},parse:(a,{other:c,external:u,slug:d})=>{if(a===void 0&&(a=""),typeof a!="string")throw new Ce("Must be a string");return F2(a,l(),c,u,d)},validate(a){return a},directories:Lp(i,o),serialize(a,{slug:c}){const u=P2(a,c);return{external:u.external,other:u.other,value:u.content}},reader:{parse:a=>{if(a===void 0&&(a=""),typeof a!="string")throw new Ce("Must be a string");return a}},collaboration:{toYjs(a){return yp(a.doc)},fromYjs(a,c){return $p(l(),a,c)}}}};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function B2(t){return typeof t>"u"||t===null}function _J(t){return typeof t=="object"&&t!==null}function OJ(t){return Array.isArray(t)?t:B2(t)?[]:[t]}function RJ(t,e){var n,r,i,s;if(e)for(s=Object.keys(e),n=0,r=s.length;n<r;n+=1)i=s[n],t[i]=e[i];return t}function DJ(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function MJ(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var FJ=B2,PJ=_J,$J=OJ,LJ=DJ,BJ=MJ,zJ=RJ,Ot={isNothing:FJ,isObject:PJ,toArray:$J,repeat:LJ,isNegativeZero:BJ,extend:zJ};function z2(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function yu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=z2(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}yu.prototype=Object.create(Error.prototype);yu.prototype.constructor=yu;yu.prototype.toString=function(e){return this.name+": "+z2(this,e)};var Pn=yu;function ym(t,e,n,r,i){var s="",o="",l=Math.floor(i/2)-1;return r-e>l&&(s=" ... ",e=r-l+s.length),n-r>l&&(o=" ...",n=r+l-o.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+o,pos:r-e+s.length}}function bm(t,e){return Ot.repeat(" ",e-t.length)+t}function VJ(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(t.buffer);)i.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var l="",a,c,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(a=1;a<=e.linesBefore&&!(o-a<0);a++)c=ym(t.buffer,r[o-a],i[o-a],t.position-(r[o]-r[o-a]),d),l=Ot.repeat(" ",e.indent)+bm((t.line-a+1).toString(),u)+" | "+c.str+`
`+l;for(c=ym(t.buffer,r[o],i[o],t.position,d),l+=Ot.repeat(" ",e.indent)+bm((t.line+1).toString(),u)+" | "+c.str+`
`,l+=Ot.repeat("-",e.indent+u+3+c.pos)+`^
`,a=1;a<=e.linesAfter&&!(o+a>=i.length);a++)c=ym(t.buffer,r[o+a],i[o+a],t.position-(r[o]-r[o+a]),d),l+=Ot.repeat(" ",e.indent)+bm((t.line+a+1).toString(),u)+" | "+c.str+`
`;return l.replace(/\n$/,"")}var UJ=VJ,qJ=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],HJ=["scalar","sequence","mapping"];function WJ(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function KJ(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(qJ.indexOf(n)===-1)throw new Pn('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=WJ(e.styleAliases||null),HJ.indexOf(this.kind)===-1)throw new Pn('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var pn=KJ;function Xw(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}function GJ(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function rb(t){return this.extend(t)}rb.prototype.extend=function(e){var n=[],r=[];if(e instanceof pn)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Pn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof pn))throw new Pn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Pn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Pn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof pn))throw new Pn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(rb.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Xw(i,"implicit"),i.compiledExplicit=Xw(i,"explicit"),i.compiledTypeMap=GJ(i.compiledImplicit,i.compiledExplicit),i};var YJ=rb,JJ=new pn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),ZJ=new pn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),XJ=new pn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),QJ=new YJ({explicit:[JJ,ZJ,XJ]});function eZ(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function tZ(){return null}function nZ(t){return t===null}var rZ=new pn("tag:yaml.org,2002:null",{kind:"scalar",resolve:eZ,construct:tZ,predicate:nZ,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iZ(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function sZ(t){return t==="true"||t==="True"||t==="TRUE"}function oZ(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var lZ=new pn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iZ,construct:sZ,predicate:oZ,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function aZ(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function cZ(t){return 48<=t&&t<=55}function uZ(t){return 48<=t&&t<=57}function dZ(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!aZ(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!cZ(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!uZ(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function fZ(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function hZ(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ot.isNegativeZero(t)}var pZ=new pn("tag:yaml.org,2002:int",{kind:"scalar",resolve:dZ,construct:fZ,predicate:hZ,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gZ=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mZ(t){return!(t===null||!gZ.test(t)||t[t.length-1]==="_")}function yZ(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var bZ=/^[-+]?[0-9]+e/;function xZ(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ot.isNegativeZero(t))return"-0.0";return n=t.toString(10),bZ.test(n)?n.replace("e",".e"):n}function vZ(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ot.isNegativeZero(t))}var kZ=new pn("tag:yaml.org,2002:float",{kind:"scalar",resolve:mZ,construct:yZ,predicate:vZ,represent:xZ,defaultStyle:"lowercase"}),wZ=QJ.extend({implicit:[rZ,lZ,pZ,kZ]}),SZ=wZ,V2=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),U2=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function CZ(t){return t===null?!1:V2.exec(t)!==null||U2.exec(t)!==null}function EZ(t){var e,n,r,i,s,o,l,a=0,c=null,u,d,f;if(e=V2.exec(t),e===null&&(e=U2.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(s=+e[4],o=+e[5],l=+e[6],e[7]){for(a=e[7].slice(0,3);a.length<3;)a+="0";a=+a}return e[9]&&(u=+e[10],d=+(e[11]||0),c=(u*60+d)*6e4,e[9]==="-"&&(c=-c)),f=new Date(Date.UTC(n,r,i,s,o,l,a)),c&&f.setTime(f.getTime()-c),f}function IZ(t){return t.toISOString()}var AZ=new pn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:CZ,construct:EZ,instanceOf:Date,represent:IZ});function TZ(t){return t==="<<"||t===null}var NZ=new pn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:TZ}),I1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function jZ(t){if(t===null)return!1;var e,n,r=0,i=t.length,s=I1;for(n=0;n<i;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function _Z(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,s=I1,o=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}function OZ(t){var e="",n=0,r,i,s=t.length,o=I1;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[r];return i=s%3,i===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):i===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):i===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}function RZ(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var DZ=new pn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:jZ,construct:_Z,predicate:RZ,represent:OZ}),MZ=Object.prototype.hasOwnProperty,FZ=Object.prototype.toString;function PZ(t){if(t===null)return!0;var e=[],n,r,i,s,o,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],o=!1,FZ.call(i)!=="[object Object]")return!1;for(s in i)if(MZ.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function $Z(t){return t!==null?t:[]}var LZ=new pn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:PZ,construct:$Z}),BZ=Object.prototype.toString;function zZ(t){if(t===null)return!0;var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],BZ.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}function VZ(t){if(t===null)return[];var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}var UZ=new pn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:zZ,construct:VZ}),qZ=Object.prototype.hasOwnProperty;function HZ(t){if(t===null)return!0;var e,n=t;for(e in n)if(qZ.call(n,e)&&n[e]!==null)return!1;return!0}function WZ(t){return t!==null?t:{}}var KZ=new pn("tag:yaml.org,2002:set",{kind:"mapping",resolve:HZ,construct:WZ}),q2=SZ.extend({implicit:[AZ,NZ],explicit:[DZ,LZ,UZ,KZ]}),to=Object.prototype.hasOwnProperty,dh=1,H2=2,W2=3,fh=4,xm=1,GZ=2,Qw=3,YZ=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,JZ=/[\x85\u2028\u2029]/,ZZ=/[,\[\]\{\}]/,K2=/^(?:!|!!|![a-z\-]+!)$/i,G2=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function eS(t){return Object.prototype.toString.call(t)}function hi(t){return t===10||t===13}function Ho(t){return t===9||t===32}function zn(t){return t===9||t===32||t===10||t===13}function Jl(t){return t===44||t===91||t===93||t===123||t===125}function XZ(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function QZ(t){return t===120?2:t===117?4:t===85?8:0}function eX(t){return 48<=t&&t<=57?t-48:-1}function tS(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function tX(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Y2=new Array(256),J2=new Array(256);for(var Tl=0;Tl<256;Tl++)Y2[Tl]=tS(Tl)?1:0,J2[Tl]=tS(Tl);function nX(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||q2,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Z2(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=UJ(n),new Pn(e,n)}function ue(t,e){throw Z2(t,e)}function hh(t,e){t.onWarning&&t.onWarning.call(null,Z2(t,e))}var nS={YAML:function(e,n,r){var i,s,o;e.version!==null&&ue(e,"duplication of %YAML directive"),r.length!==1&&ue(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&ue(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&ue(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&hh(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var i,s;r.length!==2&&ue(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],K2.test(i)||ue(e,"ill-formed tag handle (first argument) of the TAG directive"),to.call(e.tagMap,i)&&ue(e,'there is a previously declared suffix for "'+i+'" tag handle'),G2.test(s)||ue(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ue(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function qs(t,e,n,r){var i,s,o,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,s=l.length;i<s;i+=1)o=l.charCodeAt(i),o===9||32<=o&&o<=1114111||ue(t,"expected valid JSON character");else YZ.test(l)&&ue(t,"the stream contains non-printable characters");t.result+=l}}function rS(t,e,n,r){var i,s,o,l;for(Ot.isObject(n)||ue(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,l=i.length;o<l;o+=1)s=i[o],to.call(e,s)||(e[s]=n[s],r[s]=!0)}function Zl(t,e,n,r,i,s,o,l,a){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&ue(t,"nested arrays are not supported inside keys"),typeof i=="object"&&eS(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&eS(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)rS(t,e,s[c],n);else rS(t,e,s,n);else!t.json&&!to.call(n,i)&&to.call(e,i)&&(t.line=o||t.line,t.lineStart=l||t.lineStart,t.position=a||t.position,ue(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete n[i];return e}function A1(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ue(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ct(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ho(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(hi(i))for(A1(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&hh(t,"deficient indentation"),r}function Bp(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||zn(n)))}function T1(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ot.repeat(`
`,e-1))}function rX(t,e,n){var r,i,s,o,l,a,c,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),zn(p)||Jl(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),zn(i)||n&&Jl(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,l=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),zn(i)||n&&Jl(i))break}else if(p===35){if(r=t.input.charCodeAt(t.position-1),zn(r))break}else{if(t.position===t.lineStart&&Bp(t)||n&&Jl(p))break;if(hi(p))if(a=t.line,c=t.lineStart,u=t.lineIndent,Ct(t,!1,-1),t.lineIndent>=e){l=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=a,t.lineStart=c,t.lineIndent=u;break}}l&&(qs(t,s,o,!1),T1(t,t.line-a),s=o=t.position,l=!1),Ho(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}return qs(t,s,o,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function iX(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(qs(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else hi(n)?(qs(t,r,i,!0),T1(t,Ct(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Bp(t)?ue(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ue(t,"unexpected end of the stream within a single quoted scalar")}function sX(t,e){var n,r,i,s,o,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return qs(t,n,t.position,!0),t.position++,!0;if(l===92){if(qs(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),hi(l))Ct(t,!1,e);else if(l<256&&Y2[l])t.result+=J2[l],t.position++;else if((o=QZ(l))>0){for(i=o,s=0;i>0;i--)l=t.input.charCodeAt(++t.position),(o=XZ(l))>=0?s=(s<<4)+o:ue(t,"expected hexadecimal character");t.result+=tX(s),t.position++}else ue(t,"unknown escape sequence");n=r=t.position}else hi(l)?(qs(t,n,r,!0),T1(t,Ct(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Bp(t)?ue(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}ue(t,"unexpected end of the stream within a double quoted scalar")}function oX(t,e){var n=!0,r,i,s,o=t.tag,l,a=t.anchor,c,u,d,f,p,g=Object.create(null),m,b,y,x;if(x=t.input.charCodeAt(t.position),x===91)u=93,p=!1,l=[];else if(x===123)u=125,p=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),x=t.input.charCodeAt(++t.position);x!==0;){if(Ct(t,!0,e),x=t.input.charCodeAt(t.position),x===u)return t.position++,t.tag=o,t.anchor=a,t.kind=p?"mapping":"sequence",t.result=l,!0;n?x===44&&ue(t,"expected the node content, but found ','"):ue(t,"missed comma between flow collection entries"),b=m=y=null,d=f=!1,x===63&&(c=t.input.charCodeAt(t.position+1),zn(c)&&(d=f=!0,t.position++,Ct(t,!0,e))),r=t.line,i=t.lineStart,s=t.position,Sa(t,e,dh,!1,!0),b=t.tag,m=t.result,Ct(t,!0,e),x=t.input.charCodeAt(t.position),(f||t.line===r)&&x===58&&(d=!0,x=t.input.charCodeAt(++t.position),Ct(t,!0,e),Sa(t,e,dh,!1,!0),y=t.result),p?Zl(t,l,g,b,m,y,r,i,s):d?l.push(Zl(t,null,g,b,m,y,r,i,s)):l.push(m),Ct(t,!0,e),x=t.input.charCodeAt(t.position),x===44?(n=!0,x=t.input.charCodeAt(++t.position)):n=!1}ue(t,"unexpected end of the stream within a flow collection")}function lX(t,e){var n,r,i=xm,s=!1,o=!1,l=e,a=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)xm===i?i=d===43?Qw:GZ:ue(t,"repeat of a chomping mode identifier");else if((u=eX(d))>=0)u===0?ue(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ue(t,"repeat of an indentation width identifier"):(l=e+u-1,o=!0);else break;if(Ho(d)){do d=t.input.charCodeAt(++t.position);while(Ho(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!hi(d)&&d!==0)}for(;d!==0;){for(A1(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>l&&(l=t.lineIndent),hi(d)){a++;continue}if(t.lineIndent<l){i===Qw?t.result+=Ot.repeat(`
`,s?1+a:a):i===xm&&s&&(t.result+=`
`);break}for(r?Ho(d)?(c=!0,t.result+=Ot.repeat(`
`,s?1+a:a)):c?(c=!1,t.result+=Ot.repeat(`
`,a+1)):a===0?s&&(t.result+=" "):t.result+=Ot.repeat(`
`,a):t.result+=Ot.repeat(`
`,s?1+a:a),s=!0,o=!0,a=0,n=t.position;!hi(d)&&d!==0;)d=t.input.charCodeAt(++t.position);qs(t,n,t.position,!1)}return!0}function iS(t,e){var n,r=t.tag,i=t.anchor,s=[],o,l=!1,a;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),a=t.input.charCodeAt(t.position);a!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),!(a!==45||(o=t.input.charCodeAt(t.position+1),!zn(o))));){if(l=!0,t.position++,Ct(t,!0,-1)&&t.lineIndent<=e){s.push(null),a=t.input.charCodeAt(t.position);continue}if(n=t.line,Sa(t,e,W2,!1,!0),s.push(t.result),Ct(t,!0,-1),a=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&a!==0)ue(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function aX(t,e,n){var r,i,s,o,l,a,c=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,g=null,m=null,b=!1,y=!1,x;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),x=t.input.charCodeAt(t.position);x!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(x===63||x===58)&&zn(r))x===63?(b&&(Zl(t,d,f,p,g,null,o,l,a),p=g=m=null),y=!0,b=!0,i=!0):b?(b=!1,i=!0):ue(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,x=r;else{if(o=t.line,l=t.lineStart,a=t.position,!Sa(t,n,H2,!1,!0))break;if(t.line===s){for(x=t.input.charCodeAt(t.position);Ho(x);)x=t.input.charCodeAt(++t.position);if(x===58)x=t.input.charCodeAt(++t.position),zn(x)||ue(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Zl(t,d,f,p,g,null,o,l,a),p=g=m=null),y=!0,b=!1,i=!1,p=t.tag,g=t.result;else if(y)ue(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(y)ue(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,l=t.lineStart,a=t.position),Sa(t,e,fh,!0,i)&&(b?g=t.result:m=t.result),b||(Zl(t,d,f,p,g,m,o,l,a),p=g=m=null),Ct(t,!0,-1),x=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&x!==0)ue(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&Zl(t,d,f,p,g,null,o,l,a),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),y}function cX(t){var e,n=!1,r=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ue(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ue(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!zn(o);)o===33&&(r?ue(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),K2.test(i)||ue(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),ZZ.test(s)&&ue(t,"tag suffix cannot contain flow indicator characters")}s&&!G2.test(s)&&ue(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ue(t,"tag name is malformed: "+s)}return n?t.tag=s:to.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:ue(t,'undeclared tag handle "'+i+'"'),!0}function uX(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&ue(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!zn(n)&&!Jl(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ue(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function dX(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!zn(r)&&!Jl(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ue(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),to.call(t.anchorMap,n)||ue(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Ct(t,!0,-1),!0}function Sa(t,e,n,r,i){var s,o,l,a=1,c=!1,u=!1,d,f,p,g,m,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=l=fh===n||W2===n,r&&Ct(t,!0,-1)&&(c=!0,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)),a===1)for(;cX(t)||uX(t);)Ct(t,!0,-1)?(c=!0,l=s,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)):l=!1;if(l&&(l=c||i),(a===1||fh===n)&&(dh===n||H2===n?m=e:m=e+1,b=t.position-t.lineStart,a===1?l&&(iS(t,b)||aX(t,b,m))||oX(t,m)?u=!0:(o&&lX(t,m)||iX(t,m)||sX(t,m)?u=!0:dX(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&ue(t,"alias node should not have any properties")):rX(t,m,dh===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):a===0&&(u=l&&iS(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ue(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(g=t.implicitTypes[d],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(to.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){g=p[d];break}g||ue(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&ue(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ue(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function fX(t){var e=t.position,n,r,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Ct(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!zn(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&ue(t,"directive name must not be less than one character in length");o!==0;){for(;Ho(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!hi(o));break}if(hi(o))break;for(n=t.position;o!==0&&!zn(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}o!==0&&A1(t),to.call(nS,r)?nS[r](t,r,i):hh(t,'unknown document directive "'+r+'"')}if(Ct(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ct(t,!0,-1)):s&&ue(t,"directives end mark is expected"),Sa(t,t.lineIndent-1,fh,!1,!0),Ct(t,!0,-1),t.checkLineBreaks&&JZ.test(t.input.slice(e,t.position))&&hh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Bp(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ct(t,!0,-1));return}if(t.position<t.length-1)ue(t,"end of the stream or a document separator is expected");else return}function X2(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new nX(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,ue(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)fX(n);return n.documents}function hX(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=X2(t,n);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}function pX(t,e){var n=X2(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Pn("expected a single document in the stream, but found more")}}var gX=hX,mX=pX,yX={loadAll:gX,load:mX},Q2=Object.prototype.toString,e_=Object.prototype.hasOwnProperty,N1=65279,bX=9,bu=10,xX=13,vX=32,kX=33,wX=34,ib=35,SX=37,CX=38,EX=39,IX=42,t_=44,AX=45,ph=58,TX=61,NX=62,jX=63,_X=64,n_=91,r_=93,OX=96,i_=123,RX=124,s_=125,xn={};xn[0]="\\0";xn[7]="\\a";xn[8]="\\b";xn[9]="\\t";xn[10]="\\n";xn[11]="\\v";xn[12]="\\f";xn[13]="\\r";xn[27]="\\e";xn[34]='\\"';xn[92]="\\\\";xn[133]="\\N";xn[160]="\\_";xn[8232]="\\L";xn[8233]="\\P";var DX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],MX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function FX(t,e){var n,r,i,s,o,l,a;if(e===null)return{};for(n={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],l=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),a=t.compiledTypeMap.fallback[o],a&&e_.call(a.styleAliases,l)&&(l=a.styleAliases[l]),n[o]=l;return n}function PX(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Pn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ot.repeat("0",r-e.length)+e}var $X=1,xu=2;function LX(t){this.schema=t.schema||q2,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ot.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=FX(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?xu:$X,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function sS(t,e){for(var n=Ot.repeat(" ",e),r=0,i=-1,s="",o,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(o=t.slice(r),r=l):(o=t.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function sb(t,e){return`
`+Ot.repeat(" ",t.indent*e)}function BX(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}function gh(t){return t===vX||t===bX}function vu(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==N1||65536<=t&&t<=1114111}function oS(t){return vu(t)&&t!==N1&&t!==xX&&t!==bu}function lS(t,e,n){var r=oS(t),i=r&&!gh(t);return(n?r:r&&t!==t_&&t!==n_&&t!==r_&&t!==i_&&t!==s_)&&t!==ib&&!(e===ph&&!i)||oS(e)&&!gh(e)&&t===ib||e===ph&&i}function zX(t){return vu(t)&&t!==N1&&!gh(t)&&t!==AX&&t!==jX&&t!==ph&&t!==t_&&t!==n_&&t!==r_&&t!==i_&&t!==s_&&t!==ib&&t!==CX&&t!==IX&&t!==kX&&t!==RX&&t!==TX&&t!==NX&&t!==EX&&t!==wX&&t!==SX&&t!==_X&&t!==OX}function VX(t){return!gh(t)&&t!==ph}function vc(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function o_(t){var e=/^\n* /;return e.test(t)}var l_=1,ob=2,a_=3,c_=4,Pl=5;function UX(t,e,n,r,i,s,o,l){var a,c=0,u=null,d=!1,f=!1,p=r!==-1,g=-1,m=zX(vc(t,0))&&VX(vc(t,t.length-1));if(e||o)for(a=0;a<t.length;c>=65536?a+=2:a++){if(c=vc(t,a),!vu(c))return Pl;m=m&&lS(c,u,l),u=c}else{for(a=0;a<t.length;c>=65536?a+=2:a++){if(c=vc(t,a),c===bu)d=!0,p&&(f=f||a-g-1>r&&t[g+1]!==" ",g=a);else if(!vu(c))return Pl;m=m&&lS(c,u,l),u=c}f=f||p&&a-g-1>r&&t[g+1]!==" "}return!d&&!f?m&&!o&&!i(t)?l_:s===xu?Pl:ob:n>9&&o_(t)?Pl:o?s===xu?Pl:ob:f?c_:a_}function qX(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===xu?'""':"''";if(!t.noCompatMode&&(DX.indexOf(e)!==-1||MX.test(e)))return t.quotingType===xu?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=r||t.flowLevel>-1&&n>=t.flowLevel;function a(c){return BX(t,c)}switch(UX(e,l,t.indent,o,a,t.quotingType,t.forceQuotes&&!r,i)){case l_:return e;case ob:return"'"+e.replace(/'/g,"''")+"'";case a_:return"|"+aS(e,t.indent)+cS(sS(e,s));case c_:return">"+aS(e,t.indent)+cS(sS(HX(e,o),s));case Pl:return'"'+WX(e)+'"';default:throw new Pn("impossible error: invalid scalar style")}}()}function aS(t,e){var n=o_(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),s=i?"+":r?"":"-";return n+s+`
`}function cS(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function HX(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,uS(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var l=o[1],a=o[2];s=a[0]===" ",r+=l+(!i&&!s&&a!==""?`
`:"")+uS(a,e),i=s}return r}function uS(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,s,o=0,l=0,a="";r=n.exec(t);)l=r.index,l-i>e&&(s=o>i?o:l,a+=`
`+t.slice(i,s),i=s+1),o=l;return a+=`
`,t.length-i>e&&o>i?a+=t.slice(i,o)+`
`+t.slice(o+1):a+=t.slice(i),a.slice(1)}function WX(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=vc(t,i),r=xn[n],!r&&vu(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||PX(n);return e}function KX(t,e,n){var r="",i=t.tag,s,o,l;for(s=0,o=n.length;s<o;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(ns(t,e,l,!1,!1)||typeof l>"u"&&ns(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}function dS(t,e,n,r){var i="",s=t.tag,o,l,a;for(o=0,l=n.length;o<l;o+=1)a=n[o],t.replacer&&(a=t.replacer.call(n,String(o),a)),(ns(t,e+1,a,!0,!0,!1,!0)||typeof a>"u"&&ns(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=sb(t,e)),t.dump&&bu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function GX(t,e,n){var r="",i=t.tag,s=Object.keys(n),o,l,a,c,u;for(o=0,l=s.length;o<l;o+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),a=s[o],c=n[a],t.replacer&&(c=t.replacer.call(n,a,c)),ns(t,e,a,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ns(t,e,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=i,t.dump="{"+r+"}"}function YX(t,e,n,r){var i="",s=t.tag,o=Object.keys(n),l,a,c,u,d,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new Pn("sortKeys must be a boolean or a function");for(l=0,a=o.length;l<a;l+=1)f="",(!r||i!=="")&&(f+=sb(t,e)),c=o[l],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),ns(t,e+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&bu===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=sb(t,e)),ns(t,e+1,u,!0,d)&&(t.dump&&bu===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=s,t.dump=i||"{}"}function fS(t,e,n){var r,i,s,o,l,a;for(i=n?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(l=i[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(a=t.styleMap[l.tag]||l.defaultStyle,Q2.call(l.represent)==="[object Function]")r=l.represent(e,a);else if(e_.call(l.represent,a))r=l.represent[a](e,a);else throw new Pn("!<"+l.tag+'> tag resolver accepts not "'+a+'" style');t.dump=r}return!0}return!1}function ns(t,e,n,r,i,s,o){t.tag=null,t.dump=n,fS(t,n,!1)||fS(t,n,!0);var l=Q2.call(t.dump),a=r,c;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=l==="[object Object]"||l==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(n),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(YX(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(GX(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?dS(t,e-1,t.dump,i):dS(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(KX(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&qX(t,t.dump,e,s,a);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Pn("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function JX(t,e){var n=[],r=[],i,s;for(lb(t,n,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(s)}function lb(t,e,n){var r,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)lb(t[i],e,n);else for(r=Object.keys(t),i=0,s=r.length;i<s;i+=1)lb(t[r[i]],e,n)}function ZX(t,e){e=e||{};var n=new LX(e);n.noRefs||JX(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),ns(n,0,r,!0,!0)?n.dump+`
`:""}var XX=ZX,QX={dump:XX},eQ=yX.load,tQ=QX.dump;const u_=new TextDecoder,nQ=new TextEncoder;function rQ(t){const n=u_.decode(t).match(/^---(?:\r?\n([^]*?))?\r?\n---\r?\n?/);if(n){var r;const i=nQ.encode(n[0]);return{frontmatter:(r=n[1])!==null&&r!==void 0?r:"",content:t.slice(i.byteLength)}}return null}function d_(t,e,n=!1){const r=e.data==="json"?JSON.parse:eQ;if(!e.contentField){const s=u_.decode(t);return{loaded:r(s)}}const i=rQ(t);if(n&&!i)throw new Error("Frontmatter not found");return{loaded:i===null?{}:r(i.frontmatter),extraFakeFile:{path:`${e.contentField.path.join("/")}${e.contentField.contentExtension}`,contents:i===null?t:i.content}}}const j1=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),h.jsx("path",{d:"M3 3v5h5M12 7v5l4 2"})]}),hS=new Eh("Notice",["heading"]),iQ={caution:Em,critical:Em,neutral:yE,positive:mE},sQ={caution:"alert",critical:"alert",neutral:"status",positive:"status"};function ar(t){const e=$e(42);let n,r,i;e[0]!==t?({children:i,tone:n,...r}=t,e[0]=t,e[1]=n,e[2]=r,e[3]=i):(n=e[1],r=e[2],i=e[3]);const s=n===void 0?"neutral":n,o=C.useRef(null),l=Si(r);let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=hS.element("heading"),e[4]=a):a=e[4];const c=a,u=Z1(),d=Z1();let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=hS.selector("heading"),e[5]=f):f=e[5];const p=MR(f,o),g=s==="neutral"?"accent":s,m=iQ[s];let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=W({display:"grid",gap:j.size.space.large}),e[6]=b):b=e[6];const y=b;let x;const v=p?"content":"heading-start / heading-start / content-end / content-end",w=p?"regular":void 0;let S;e[7]!==v||e[8]!==d||e[9]!==w?(S={elementType:"div",gridArea:v,id:d,paddingY:w,UNSAFE_className:y},e[7]=v,e[8]=d,e[9]=w,e[10]=S):S=e[10];let k;e[11]!==u?(k={elementType:"div",gridArea:"heading",id:u,UNSAFE_className:c,size:"small"},e[11]=u,e[12]=k):k=e[12];let E;e[13]!==g?(E={color:g,weight:"medium"},e[13]=g,e[14]=E):E=e[14];let T;e[15]!==S||e[16]!==k||e[17]!==E?(T={content:S,heading:k,text:E},e[15]=S,e[16]=k,e[17]=E,e[18]=T):T=e[18],x=T;const N=x,I=sQ[s];let A;e[19]!==r?(A=pi(r),e[19]=r,e[20]=A):A=e[20];let O;e[21]===Symbol.for("react.memo_cache_sentinel")?(O=["icon heading","icon content"],e[21]=O):O=e[21];let _;e[22]===Symbol.for("react.memo_cache_sentinel")?(_=["icon.medium","auto"],e[22]=_):_=e[22];let F;e[23]!==m||e[24]!==g?(F=h.jsx(X,{src:m,size:"medium",color:g,gridArea:"icon",alignSelf:"start"}),e[23]=m,e[24]=g,e[25]=F):F=e[25];let M;e[26]!==i?(M=rs(i)?h.jsx(gn,{children:h.jsx(Y,{children:i})}):i,e[26]=i,e[27]=M):M=e[27];let P;e[28]!==N||e[29]!==M?(P=h.jsx(Ci,{slots:N,children:M}),e[28]=N,e[29]=M,e[30]=P):P=e[30];let B;return e[31]!==u||e[32]!==d||e[33]!==I||e[34]!==o||e[35]!==l.className||e[36]!==l.style||e[37]!==A||e[38]!==g||e[39]!==F||e[40]!==P?(B=h.jsxs(ff,{"aria-live":"polite","aria-labelledby":u,"aria-describedby":d,role:I,ref:o,tabIndex:0,UNSAFE_className:l.className,UNSAFE_style:l.style,...A,backgroundColor:g,border:g,borderRadius:"medium",minWidth:0,padding:"medium",width:"100%",alignItems:"center",areas:O,columnGap:"medium",columns:_,rows:`${FR("icon.medium","auto")} auto`,children:[F,P]}),e[31]=u,e[32]=d,e[33]=I,e[34]=o,e[35]=l.className,e[36]=l.style,e[37]=A,e[38]=g,e[39]=F,e[40]=P,e[41]=B):B=e[41],B}const oQ=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M15 12v6M12 15h6"}),h.jsx("rect",{width:14,height:14,x:8,y:8,rx:2,ry:2}),h.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),_1=h.jsxs(h.Fragment,{children:[h.jsx("rect",{width:8,height:4,x:8,y:2,rx:1,ry:1}),h.jsx("path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M16 4h2a2 2 0 0 1 2 2v4M21 14H11"}),h.jsx("path",{d:"m15 10-4 4 4 4"})]}),O1=h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"}),h.jsx("path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2m-9 6h10"}),h.jsx("path",{d:"m17 10 4 4-4 4"})]}),lQ=h.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2ZM2 10h20"}),aQ=h.jsx("path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}),Pc=new Eh("Breadcrumbs",["item","link","list","separator"]);function pS(t){const e=$e(26),{children:n,isCurrent:r,isDisabled:i,isMenu:s,size:o}=t,l=o===void 0?"regular":o,{direction:a}=ro(),c=C.useRef(null),u=t.href?"a":"span";let d;e[0]!==t||e[1]!==u?(d={...t,elementType:u},e[0]=t,e[1]=u,e[2]=d):d=e[2];let{itemProps:f}=eR(d,c);const{hoverProps:p,isHovered:g}=Su(t);let m;m=a==="rtl"?PR:$R;const b=m;if(s){let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N={},e[3]=N):N=e[3],f=N}let y;e[4]!==f||e[5]!==p?(y=Cr(f,p),e[4]=f,e[5]=p,e[6]=y):y=e[6];const x=l!=="regular"?l:void 0,v=g?"hover":void 0;let w;e[7]!==x||e[8]!==v?(w=Ar({size:x,interaction:v}),e[7]=x,e[8]=v,e[9]=w):w=e[9];let S;e[10]!==g?(S=Ye(Pc.element("link"),W({color:j.color.foreground.neutral,cursor:"default",fontSize:j.typography.text.regular.size,fontFamily:j.typography.fontFamily.base,fontWeight:j.typography.fontWeight.medium,outline:0,MozOsxFontSmoothing:"auto",WebkitFontSmoothing:"auto","&[data-size=small]":{fontSize:j.typography.text.small.size},"&[data-size=medium]":{fontSize:j.typography.text.medium.size},"&[data-size=large]":{fontSize:j.typography.text.large.size},"&:not([aria-current=page])":{"&:not([aria-disabled=true])":{cursor:"pointer"},"&[data-interaction=hover]":{color:j.color.foreground.neutralEmphasis,textDecoration:"underline"},"&[data-focus=visible]":{color:j.color.foreground.neutralEmphasis,textDecoration:"underline",textDecorationStyle:"double"},"&[aria-disabled=true]":{color:j.color.alias.foregroundDisabled}},"&[aria-current=page]":{color:j.color.foreground.neutralEmphasis,fontWeight:j.typography.fontWeight.semibold,overflow:"hidden",textOverflow:"ellipsis"}}),{"is-hovered":g}),e[10]=g,e[11]=S):S=e[11];let k;e[12]!==u||e[13]!==y||e[14]!==w||e[15]!==c||e[16]!==S||e[17]!==n?(k=h.jsx(Ei,{children:h.jsx(u,{...y,...w,ref:c,className:S,children:n})}),e[12]=u,e[13]=y,e[14]=w,e[15]=c,e[16]=S,e[17]=n,e[18]=k):k=e[18];let E;e[19]!==r||e[20]!==i||e[21]!==b?(E=!r&&h.jsx(X,{src:b,color:i?"color.alias.foregroundDisabled":"neutralSecondary",marginX:"small",UNSAFE_className:Pc.element("separator")}),e[19]=r,e[20]=i,e[21]=b,e[22]=E):E=e[22];let T;return e[23]!==k||e[24]!==E?(T=h.jsxs(C.Fragment,{children:[k,E]}),e[23]=k,e[24]=E,e[25]=T):T=e[25],T}const cQ=1,uQ=4;function dQ(t,e){t=WS(t);let{children:n,showRoot:r,size:i="regular",isDisabled:s,onAction:o,...l}=t,a=[];C.Children.forEach(n,E=>{C.isValidElement(E)&&a.push(E)});let c=Ea(e),u=C.useRef(null),[d,f]=C.useState(!1),[p,g]=XO(a.length),{navProps:m}=QO(t),b=Si(l),y=C.useCallback(()=>{let E=T=>{let N=u.current;if(!N)return T;let I=Array.from(N.children);if(I.length<=0)return T;let A=N.offsetWidth,O=a.length>T,_=0,F=0,M=uQ;if(r&&(_+=I.shift().offsetWidth,F++),O&&(_+=I.shift().offsetWidth,M--),r&&_>=A&&F--,I.length>0){let P=I.pop();P.style.overflow="visible",_+=P.offsetWidth,_<A&&F++,P.style.overflow=""}for(let P of I.reverse())_+=P.offsetWidth,_<A&&F++;return Math.max(cQ,Math.min(M,F))};g(function*(){yield a.length;let T=E(a.length);yield T,T<a.length&&T>1&&(yield E(T))})},[a.length,g,r]);MS({ref:c,onResize:y});let x=C.useRef(null);vb(()=>{n!==x.current&&(x.current=n,y())});let v=a;if(a.length>p){var w;let T=(w=a[a.length-1].key)!==null&&w!==void 0?w:a.length-1,N=_=>{_!==T&&o&&o(_)};v=[h.jsx(pS,{isMenu:!0,children:h.jsxs(Ii,{onOpenChange:f,children:[h.jsx(ae,{"aria-label":"…",prominence:"low",isDisabled:s,children:h.jsx(X,{src:d?aQ:lQ})}),h.jsx(Ai,{selectionMode:"single",selectedKeys:[T],onAction:N,children:a})]})},"menu")];let A=[...a],O=p;if(r&&p>1){let _=A.shift();_&&v.unshift(_),O--}v.push(...A.slice(-O))}let S=v.length-1,k=v.map((E,T)=>{var N;let I=T===S,A=(N=E.key)!==null&&N!==void 0?N:T,O=()=>{o&&o(A)};return h.jsx("li",{className:Ye(Pc.element("item"),W({alignItems:"center",display:"inline-flex",whiteSpace:"nowrap","&:last-child":{overflow:"hidden"}})),children:C.createElement(pS,{...E.props,isCurrent:I,isDisabled:s,key:A,onPress:O,size:i},E.props.children)},T)});return h.jsx("nav",{...m,...b,ref:c,className:Ye(Pc.element("root"),b.className),children:h.jsx("ul",{ref:u,className:Ye(Pc.element("list"),W({display:"flex",height:j.size.element.regular,justifyContent:"flex-start"})),children:k})})}const fQ=C.forwardRef(dQ);function R1(t){const e=q(7),n=Nt(),r=cp().current;let i,s;e[0]!==r?(s=r.kind==="loaded"?r.data.tree:new Map,e[0]=r,e[1]=s):s=e[1];const o=s;let l;if(e[2]!==n||e[3]!==t||e[4]!==o){let a;e[6]===Symbol.for("react.memo_cache_sentinel")?(a=c=>c.slug,e[6]=a):a=e[6],l=iu(n,t,o).map(a),e[2]=n,e[3]=t,e[4]=o,e[5]=l}else l=e[5];return i=l,i}var hQ=`
https://bit.ly/2XbVrpR#`;function zp(t,e,n){if(!t){var r="Minfied Error #"+n+`
`,i=new Error(r+hQ+n);throw i.name="Graphcache Error",i}}var pQ={},Vp=t=>t._directives||pQ,Oi=t=>t.name.value,gS=t=>t.typeCondition.name.value,D1=t=>t.alias?t.alias.value:t.name.value,gQ=[],Sr=t=>t.selectionSet?t.selectionSet.selections:gQ,f_=t=>t.typeCondition?t.typeCondition.name.value:null,Up=(t,e)=>{var n=null;if(t.arguments)for(var r=0,i=t.arguments.length;r<i;r++){var s=t.arguments[r],o=ga(s.value,e);o!=null&&(n||(n={}),n[Oi(s)]=o)}return n},mQ=(t,e)=>{if(!(!e||!t.variableDefinitions)){for(var n={},r=0,i=t.variableDefinitions.length;r<i;r++){var s=Oi(t.variableDefinitions[r].variable);n[s]=e[s]}return n}},h_=(t,e)=>{var n={};if(!e)return n;if(t.variableDefinitions)for(var r=0,i=t.variableDefinitions.length;r<i;r++){var s=t.variableDefinitions[r],o=Oi(s.variable);n[o]=e[o]===void 0&&s.defaultValue?ga(s.defaultValue,e):e[o]}for(var l in e)l in n||(n[l]=e[l]);return n};function M1(t){for(var e=0;e<t.definitions.length;e++)if(t.definitions[e].kind===oi.OPERATION_DEFINITION)return t.definitions[e];zp(!1,"",1)}var mh=t=>{for(var e={},n=0;n<t.definitions.length;n++){var r=t.definitions[n];r.kind===oi.FRAGMENT_DEFINITION&&(e[Oi(r)]=r)}return e},yQ=(t,e)=>{var n=Vp(t);if(n.include||n.skip)for(var r in n){var i=n[r];if(i&&(r==="include"||r==="skip")&&i.arguments&&i.arguments[0]&&Oi(i.arguments[0])==="if"){var s=ga(i.arguments[0].value,e);return r==="include"?!!s:!s}}return!0},bQ=(t,e)=>{var{defer:n}=Vp(t);if(n){for(var r of n.arguments||[])if(Oi(r)==="if")return!!ga(r.value,e);return!0}return!1},xQ=t=>{var{optional:e,required:n}=Vp(t);if(n)return!1;if(e)return!0},mS="__",yS=(t,e,n,r)=>{var i=g_(t,e,n);return!!i&&i.type.kind!=="NON_NULL"},p_=(t,e,n,r)=>{var i=g_(t,e,n);if(!i)return!1;var s=i.type.kind==="NON_NULL"?i.type.ofType:i.type;return s.kind==="LIST"&&s.ofType.kind!=="NON_NULL"},vQ=(t,e,n)=>{if(!n)return!1;var r=f_(e);return!r||n===r?!0:t.types.has(r)&&t.types.get(r).kind==="OBJECT"?r===n:(function(s,o){zp(s.types.has(o)&&(s.types.get(o).kind==="INTERFACE"||s.types.get(o).kind==="UNION"),"",5)}(t,r),m_(t,n),t.isSubType(r,n))},g_=(t,e,n,r)=>{if(!(n.indexOf(mS)===0||e.indexOf(mS)===0)){m_(t,e);var i=t.types.get(e).fields()[n];return i}};function m_(t,e){zp(t.types.has(e)&&t.types.get(e).kind==="OBJECT","",3)}var Wo=(t,e)=>e?`${t}(${ts(e)})`:t,Zu=(t,e)=>`${t}.${e}`,kQ=t=>{var e=t.indexOf("(");return e>-1?{fieldKey:t,fieldName:t.slice(0,e),arguments:JSON.parse(t.slice(e+1,-1))}:{fieldKey:t,fieldName:t,arguments:null}},y_=t=>{var e=t.indexOf(".");return{entityKey:t.slice(0,e).replace(/%2e/g,"."),fieldKey:t.slice(e+1)}},ku=null,yh=null,ke=null,Sn=null,cr=null,Ji=null,Va=!1,no=!1;function ki(t,e){var n;if(t){if(ku.has(t))return t;n=yh.get(t)}return n==null&&(n=e?[]:{}),t&&yh.set(t,n),ku.add(n),n}var vm=t=>!!t&&ku.has(t),Co=(t,e,n,r,i)=>{ku=new WeakSet,yh=new WeakMap,cr=t,ke=e,Ji=new Set,no=!!r,Va=!!i,n?cr==="read"?Sn=n:r||e.hydrating||e.optimisticOrder.length>1?(!r&&!e.commutativeKeys.has(n)?lf(e,n):r&&(e.optimisticOrder.indexOf(n)!==-1&&!e.commutativeKeys.has(n)&&e.optimisticOrder.splice(e.optimisticOrder.indexOf(n),1),e.commutativeKeys.delete(n)),Sn=n,EQ(e,n)):(Sn=null,w_(e,n)):Sn=null},Eo=()=>{var t=ke,e=Sn;if(no=!1,Sn=null,!t.hydrating&&e&&t.optimisticOrder.indexOf(e)>-1)for(var n=t.optimisticOrder.length;--n>=0&&t.dirtyKeys.has(t.optimisticOrder[n])&&t.commutativeKeys.has(t.optimisticOrder[n]);)IQ(t.optimisticOrder[n]);ku=null,yh=null,cr=null,ke=null,Ji=null,!t.defer&&(t.storage||!t.optimisticOrder.length)&&(t.defer=!0,setTimeout(()=>{Co("read",t,null),wQ(),AQ(),Eo(),t.defer=!1}))},bS=(t,e,n)=>{e&&!n&&t.deferredKeys.delete(e),Co("write",t,e,n),Eo()},b_=new Set,x_=(t,e,n,r)=>{var i=Sn?t.optimistic.get(Sn):t.base,s=i.get(e);s===void 0&&i.set(e,s=Object.create(null)),r===void 0&&!Sn?delete s[n]:s[n]=r},qp=(t,e,n)=>{for(var r,i=!no&&cr==="read"&&Sn&&ke.commutativeKeys.has(Sn),s=0,o=ke.optimisticOrder.length;s<o;s++){var l=ke.optimisticOrder[s],a=t.optimistic.get(l);if(i=i&&l!==Sn,a&&(!i||!ke.commutativeKeys.has(l))&&(!no||cr==="write"||ke.commutativeKeys.has(l))&&(r=a.get(e))!==void 0&&n in r)return r[n]}return(r=t.base.get(e))!==void 0?r[n]:void 0};function bh(t){return ke.refCount.get(t)||0}var xh=(t,e)=>{if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)xh(t[n],e);else typeof t=="string"&&((i,s)=>{var o=bh(i),l=o+s>0?o+s:0;ke.refCount.set(i,l),l?!o&&l&&ke.gc.delete(i):ke.gc.add(i)})(t,e)},xS=(t,e,n)=>{if(n!==void 0)for(var r in n)e.has(r)||(t.push(kQ(r)),e.add(r))},vS=(t,e,n,r)=>{xS(t,e,r.base.get(n));for(var i=0,s=ke.optimisticOrder.length;i<s;i++){var o=r.optimistic.get(ke.optimisticOrder[i]);o!==void 0&&xS(t,e,o.get(n))}},wQ=()=>{if(!ke.optimisticOrder.length){for(var t of ke.gc.keys())if(ke.gc.delete(t),!(bh(t)>0)){var e=ke.records.base.get(t);ke.refCount.delete(t),ke.records.base.delete(t);var n=e&&e.__typename;if(n){var r=ke.types.get(n);r&&r.delete(t)}var i=ke.links.base.get(t);if(i){ke.links.base.delete(t);for(var s in i)xh(i[s],-1)}}}},Xu=(t,e)=>{t!==ke.queryRootKey?Ji.add(t):e!==void 0&&e!=="__typename"&&Ji.add(Zu(t,e))},v_=(t,e)=>{!no&&ke.storage&&ke.persist.add(((n,r)=>`${n.replace(/\./g,"%2e")}.${r}`)(t,e))},Zi=(t,e)=>(cr==="read"&&Xu(t,e),qp(ke.records,t,e)),wl=(t,e)=>(cr==="read"&&Xu(t,e),qp(ke.links,t,e)),SQ=(t,e)=>{var n=ke.abstractToConcreteMap.get(t);if(n)n.add(e);else{var r=new Set;r.add(e),ke.abstractToConcreteMap.set(t,r)}},wu=(t,e,n)=>{C_(qp(ke.records,t,e),n)||(Xu(t,e),v_(t,e)),x_(ke.records,t,e,n)},CQ=(t,e)=>Zi(t,e)!==void 0||wl(t,e)!==void 0,Qu=(t,e,n)=>{var r=Sn?ke.links.optimistic.get(Sn):ke.links.base;if(!Sn){var i=r&&r.get(t);xh(i&&i[e],-1),xh(n,1)}C_(qp(ke.links,t,e),n)||(Xu(t,e),v_(t,e)),x_(ke.links,t,e,n)},lf=(t,e,n)=>{var r=t.optimisticOrder.indexOf(e);if(r>-1&&t.optimisticOrder.splice(r,1),n)for(t.deferredKeys.add(e),r=r>-1?r:0;r<t.optimisticOrder.length&&!t.deferredKeys.has(t.optimisticOrder[r])&&(!t.dirtyKeys.has(t.optimisticOrder[r])||!t.commutativeKeys.has(t.optimisticOrder[r]));r++);else t.deferredKeys.delete(e),r>-1&&!t.commutativeKeys.has(e)&&k_(t,e),r=0;t.optimisticOrder.splice(r,0,e),t.commutativeKeys.add(e)},EQ=(t,e)=>{t.optimisticOrder.indexOf(e)===-1&&t.optimisticOrder.unshift(e),t.dirtyKeys.has(e)||(t.dirtyKeys.add(e),t.links.optimistic.set(e,new Map),t.records.optimistic.set(e,new Map))},k_=(t,e)=>{t.dirtyKeys.has(e)&&(t.dirtyKeys.delete(e),t.records.optimistic.delete(e),t.links.optimistic.delete(e),t.deferredKeys.delete(e))},w_=(t,e)=>{var n=t.optimisticOrder.indexOf(e);n>-1&&(t.optimisticOrder.splice(n,1),t.commutativeKeys.delete(e)),k_(t,e)},IQ=t=>{var e=Ji;Ji=new Set,cr="write";var n=ke.links.optimistic.get(t);if(n)for(var r of n.entries()){var i=r[0],s=r[1];for(var o in s)Qu(i,o,s[o])}var l=ke.records.optimistic.get(t);if(l)for(var a of l.entries()){var c=a[0],u=a[1];for(var d in u)wu(c,d,u[d])}Ji=e,w_(ke,t)},S_=t=>{var{links:e,records:n}=ke,r=[],i=new Set;return Xu(t),vS(r,i,t,e),vS(r,i,t,n),r},AQ=()=>{if(ke.storage){no=!0,cr="read";var t={};for(var e of ke.persist.keys()){var{entityKey:n,fieldKey:r}=y_(e),i=void 0;(i=wl(n,r))!==void 0?t[e]=`:${ts(i)}`:(i=Zi(n,r))!==void 0?t[e]=ts(i):t[e]=void 0}no=!1,ke.storage.writeData(t),ke.persist.clear()}};function C_(t,e){return typeof t!=typeof e||t!==e?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((n,r)=>n!==e[r]):!0}var af=null,vh=!1,ab=void 0,Hp=t=>t.__internal.path.length>0&&t.__internal.errorMap?t.__internal.errorMap[t.__internal.path.join(".")]:void 0,kh=(t,e,n,r,i,s)=>{var o={store:t,variables:e,fragments:n,parent:{__typename:r},parentTypeName:r,parentKey:i,parentFieldKey:"",fieldName:"",error:void 0,partial:!1,hasNext:!1,optimistic:no,__internal:{path:[],errorMap:void 0}};if(s&&s.graphQLErrors)for(var l=0;l<s.graphQLErrors.length;l++){var a=s.graphQLErrors[l];a.path&&a.path.length&&(o.__internal.errorMap||(o.__internal.errorMap=Object.create(null)),o.__internal.errorMap[a.path.join(".")]=a)}return o},cb=(t,e,n,r,i,s)=>{af=t,t.parent=e,t.parentTypeName=n,t.parentKey=r,t.parentFieldKey=i,t.fieldName=s,t.error=Hp(t)},TQ=(t,e,n,r,i)=>{if(!e)return!1;var s=f_(t);return!s||e===s?!0:!Sr(t).some(o=>{if(o.kind!==oi.FIELD)return!1;var l=Wo(Oi(o),Up(o,r));return!CQ(n,l)})};class F1{constructor(e,n,r,i,s,o){this.typename=e,this.entityKey=n,this.ctx=o,this.stack=[{selectionSet:s,index:0,defer:r,optional:i}]}next(){for(;this.stack.length>0;){for(var e=this.stack[this.stack.length-1];e.index<e.selectionSet.length;){var n=e.selectionSet[e.index++];if(yQ(n,this.ctx.variables)){if(n.kind!==oi.FIELD){var r=n.kind!==oi.INLINE_FRAGMENT?this.ctx.fragments[Oi(n)]:n;if(r){var i=!r.typeCondition||(this.ctx.store.schema?vQ(this.ctx.store.schema,r,this.typename):cr==="read"&&NQ(r.typeCondition.name.value,this.typename)||TQ(r,this.typename,this.entityKey,this.ctx.variables,this.ctx.store.logger));if(i||cr==="write"&&!this.ctx.store.schema){var s=xQ(n);i&&r.typeCondition&&this.typename!==r.typeCondition.name.value&&SQ(r.typeCondition.name.value,this.typename),this.stack.push(e={selectionSet:Sr(r),index:0,defer:e.defer||bQ(n,this.ctx.variables),optional:s!==void 0?s:e.optional})}}}else if(cr==="write"||!n._generated)return vh=e.defer,ab=e.optional,n}}this.stack.pop()}}}var NQ=(t,e)=>{if(!e)return!1;if(t===e)return!0;var n=!(i=>ke.types.has(i))(t);if(!n)return!1;var r=(i=>ke.abstractToConcreteMap.get(i)||b_)(t);return r.size&&r.has(e)},cf=t=>t??null,ub=(t,e)=>{if(e){if(Array.isArray(e)){for(var n=new Array(e.length),r=0,i=n.length;r<i;r++)n[r]=ub(t,e[r]);return n}}else return e||null;var s=t.keyOfEntity(e);return s},db=(t,e,n,r)=>{var i=tu(e.query),s=M1(i),o=t.rootFields[s.operation],l=Sr(s),a=kh(t,h_(s,e.variables),mh(i),o,o,r),c=o!==a.store.rootFields.query?E_(a,o,l,n||ki()):Ca(a,o,l,n||ki());return{dependencies:Ji,partial:a.partial||!c,hasNext:a.hasNext,data:c||null}},E_=(t,e,n,r)=>{if(typeof(t.store.rootNames[e]?e:r.__typename)!="string")return r;for(var i=new F1(e,e,!1,void 0,n,t),s,o=Va,l=ki(r);s=i.next();){var a=D1(s),c=r[a];t.__internal.path.push(a);var u=void 0;s.selectionSet&&c!==null?u=I_(t,Sr(s),cf(c)):u=c,o=o||u!==c,u!==void 0&&(l[a]=u),t.__internal.path.pop()}return o?l:r},I_=(t,e,n)=>{if(Array.isArray(n)){for(var r=new Array(n.length),i=Va,s=0,o=n.length;s<o;s++)t.__internal.path.push(s),r[s]=I_(t,e,n[s]),i=i||r[s]!==n[s],t.__internal.path.pop();return i?r:n}else if(n===null)return null;var l=t.store.keyOfEntity(n);return l!==null?Ca(t,l,e,n)||null:E_(t,n.__typename,e,n)};function jQ(t,e,n,r){var i=r.store.resolvers[e],s=i&&i[n],o;for(var l in t){var a=t[l];if(a&&l!=="include"&&l!=="skip"&&r.store.directives[l])return o=r.store.directives[l](Up(a,r.variables)),o}return o||s}var Ca=(t,e,n,r,i)=>{var{store:s}=t,o=e===s.rootFields.query,l=i&&s.keyOfEntity(i)||e,a=o?e:Zi(l,"__typename")||i&&i.__typename;if(typeof a=="string"&&!(i&&a!==i.__typename)){for(var c=new F1(a,l,!1,void 0,n,t),u=!1,d=!1,f=Va,p,g=t.partial,m=ki(r);(p=c.next())!==void 0;){var b=Oi(p),y=Up(p,t.variables),x=D1(p),v=Vp(p),w=jQ(v,a,b,t),S=Wo(b,y),k=Zu(l,S),E=Zi(l,S),T=i?i[b]:void 0;t.__internal.path.push(x);var N=void 0;if(b==="__typename")N=a;else if(T!==void 0&&p.selectionSet===void 0)N=T;else if(cr==="read"&&w){var I=m;if(p.selectionSet===void 0&&E!==void 0&&(I={...m,[x]:E,[b]:E}),cb(t,I,a,l,S,b),N=w(I,y||{},s,t),p.selectionSet&&(N=fb(t,a,b,k,Sr(p),m[x]!==void 0?m[x]:r[x],N,vm(r))),s.schema&&N===null&&!yS(s.schema,a,b,t.store.logger))return}else if(!p.selectionSet)N=E;else if(T!==void 0)N=fb(t,a,b,k,Sr(p),m[x]!==void 0?m[x]:r[x],T,vm(r));else{var A=wl(l,S);A!==void 0?N=A_(t,A,a,b,Sr(p),m[x]!==void 0?m[x]:r[x],vm(r)):typeof E=="object"&&E!==null&&(N=E)}if(!vh&&N===void 0&&(v.optional||ab&&!v.required||Hp(t)||!v.required&&s.schema&&yS(s.schema,a,b,t.store.logger))?(t.partial=!0,N=null):N===null&&(v.required||ab===!1)?(t.store.logger,N=void 0):u=u||b!=="__typename",t.__internal.path.pop(),f=f||N!==r[x],N!==void 0)m[x]=N;else if(vh)d=!0;else{t.store.logger,t.partial=g;return}}return t.partial=t.partial||g,t.hasNext=t.hasNext||d,o&&t.partial&&!u?void 0:f?m:r}},fb=(t,e,n,r,i,s,o,l)=>{if(Array.isArray(o)){for(var{store:a}=t,c=a.schema?p_(a.schema,e,n,t.store.logger):!1,u=t.partial,d=ki(s,!0),f=Va||!Array.isArray(s)||o.length!==s.length,p=0,g=o.length;p<g;p++){t.__internal.path.push(p);var m=fb(t,e,n,Zu(r,`${p}`),i,s?.[p],o[p],l);if(t.__internal.path.pop(),m===void 0&&!c){t.partial=u;return}else t.partial=t.partial||m===void 0&&c,d[p]=m??null,f=f||d[p]!==s[p]}return f?d:s}else{if(o==null)return o;if(l&&s===null)return null;if(_Q(o)){var b=s||ki(s);return typeof o=="string"?Ca(t,o,i,b):Ca(t,r,i,b,o)}else return}},A_=(t,e,n,r,i,s,o)=>{if(Array.isArray(e)){for(var{store:l}=t,a=l.schema?p_(l.schema,n,r,t.store.logger):!1,c=ki(s,!0),u=t.partial,d=Va||!Array.isArray(s)||e.length!==s.length,f=0,p=e.length;f<p;f++){t.__internal.path.push(f);var g=A_(t,e[f],n,r,i,s?.[f],o);if(t.__internal.path.pop(),g===void 0&&!a){t.partial=u;return}else t.partial=t.partial||g===void 0&&a,c[f]=g||null,d=d||c[f]!==s[f]}return d?c:s}else if(e===null||s===null&&o)return null;return Ca(t,e,i,s||ki(s))},_Q=t=>typeof t=="string"||typeof t=="object"&&typeof t.__typename=="string",T_=(t,e,n)=>{for(var r=e?[{fieldKey:Wo(e,n)}]:S_(t),i=0,s=r.length;i<s;i++){var{fieldKey:o}=r[i];wl(t,o)!==void 0?Qu(t,o,void 0):wu(t,o,void 0)}},hb=(t,e)=>{var n=(i=>ke.types.get(i)||b_)(t);for(var r of n)e.includes(r)||T_(r)},pb=(t,e,n,r)=>{var i=tu(e.query),s=M1(i),o={data:n||ki(),dependencies:Ji},l=t.rootFields[s.operation],a=kh(t,h_(s,e.variables),mh(i),l,l,r);return P1(a,l,Sr(s),o.data),o},P1=(t,e,n,r)=>{var i=t.store.rootNames[e]||"query",s=!!t.store.rootNames[e],o=s?e:r.__typename;if(!o&&e&&t.optimistic&&(o=Zi(e,"__typename")),o)!s&&e&&(wu(e,"__typename",o),((O,_)=>{var F=ke.types.get(O);if(F)F.add(_);else{var M=new Set;M.add(_),ke.types.set(O,M)}})(o,e));else return;for(var l=t.store.updates[o],a=new F1(o,e||o,!1,void 0,n,t),c;c=a.next();){var u=Oi(c),d=Up(c,t.variables),f=Wo(u,d),p=D1(c),g=r[t.optimistic?u:p];if(!(u==="__typename"||g===void 0&&(vh||t.optimistic&&i==="query"))){t.__internal.path.push(p);var m=void 0;if(t.optimistic&&i==="mutation"){if(!(m=t.store.optimisticMutations[u]))continue}else t.optimistic&&typeof g=="function"&&(m=g);if(m&&(cb(t,r,o,e||o,f,u),g=cf(m(d||{},t.store,t))),g!==void 0){if(c.selectionSet)if(e&&i==="query"){var b=Zu(e,f),y=gb(t,Sr(c),cf(g),b,t.optimistic?wl(e||o,f):void 0);Qu(e||o,f,y)}else gb(t,Sr(c),cf(g));else e&&i==="query"&&wu(e||o,f,g!==null||!Hp(t)?g:void 0);var x=l&&l[u];if(x)cb(t,r,o,e||o,f,u),r[u]=g,x(r,d||{},t.store,t);else if(o===t.store.rootFields.mutation&&!t.optimistic){if(g&&Array.isArray(g))for(var v=g.map(O=>t.store.keyOfEntity(O)||""),w=0,S=g.length;w<S;w++){var k=v[w];if(k&&g[w].__typename){var E=Zi(k,"__typename"),T=bh(k);E&&!T&&hb(g[w].__typename,v)}}else if(g&&typeof g=="object"){var N=t.store.keyOfEntity(g);if(N){var I=Zi(N,"__typename"),A=bh(N);(!I||!A)&&g.__typename&&hb(g.__typename,[N])}}}t.__internal.path.pop()}}}},gb=(t,e,n,r,i)=>{if(Array.isArray(n)){for(var s=new Array(n.length),o=0,l=n.length;o<l;o++){t.__internal.path.push(o);var a=r?Zu(r,`${o}`):void 0,c=gb(t,e,n[o],a,i?.[o]);s[o]=c,t.__internal.path.pop()}return s}else if(n===null)return Hp(t)?void 0:null;var u=t.store.keyOfEntity(n)||(typeof i=="string"?i:null);n.__typename;var d=u||r;return P1(t,d,e,n),d||null};class OQ{constructor(e){e||(e={}),this.logger=e.logger,this.resolvers=e.resolvers||{},this.directives=e.directives||{},this.optimisticMutations=e.optimistic||{},this.keys=e.keys||{},this.globalIDs=Array.isArray(e.globalIDs)?new Set(e.globalIDs):!!e.globalIDs;var n="Query",r="Mutation",i="Subscription";if(e.schema){var s=(({__schema:l})=>{var a=new Map,c=m=>{var b;return()=>{if(!b){b={};for(var y=0;y<m.length;y++)b[m[y].name]=m[y]}return b}},u=m=>{switch(m.kind){case"OBJECT":case"INTERFACE":return{name:m.name,kind:m.kind,interfaces:c(m.interfaces||[]),fields:c(m.fields.map(b=>({name:b.name,type:b.type,args:c(b.args)})))};case"UNION":return{name:m.name,kind:m.kind,types:c(m.possibleTypes||[])}}},d={query:l.queryType?l.queryType.name:null,mutation:l.mutationType?l.mutationType.name:null,subscription:l.subscriptionType?l.subscriptionType.name:null,types:void 0,isSubType(m,b){var y=a.get(m),x=a.get(b);return!y||!x?!1:y.kind==="UNION"?!!y.types()[b]:y.kind!=="OBJECT"&&x.kind==="OBJECT"?!!x.interfaces()[m]:m===b}};if(l.types){d.types=a;for(var f=0;f<l.types.length;f++){var p=l.types[f];if(p&&p.name){var g=u(p);g&&a.set(p.name,g)}}}return d})(e.schema);n=s.query||n,r=s.mutation||r,i=s.subscription||i,s.types&&(this.schema=s)}this.updates=e.updates||{},this.rootFields={query:n,mutation:r,subscription:i},this.rootNames={[n]:"query",[r]:"mutation",[i]:"subscription"},this.data=(o=n,{hydrating:!1,defer:!1,gc:new Set,types:new Map,persist:new Set,queryRootKey:o,refCount:new Map,links:{optimistic:new Map,base:new Map},abstractToConcreteMap:new Map,records:{optimistic:new Map,base:new Map},deferredKeys:new Set,commutativeKeys:new Set,dirtyKeys:new Set,optimisticOrder:[],storage:null});var o;this.schema}keyOfField(e,n){return Wo(e,n)}keyOfEntity(e){if(af&&e===af.parent)return af.parentKey;if(e==null||typeof e=="string")return e||null;if(e.__typename){if(this.rootNames[e.__typename])return e.__typename}else return null;var n=null;this.keys[e.__typename]?n=this.keys[e.__typename](e)||null:e.id!=null?n=`${e.id}`:e._id!=null&&(n=`${e._id}`);var r=e.__typename;return this.globalIDs===!0||this.globalIDs&&this.globalIDs.has(r)||!n?n:`${r}:${n}`}resolve(e,n,r){var i=this.keyOfEntity(e);if(i){var s=Wo(n,r),o=Zi(i,s);if(o!==void 0)return o;var l=wl(i,s);return l!==void 0&&(l=ub(this,l)),l}}invalidate(e,n,r){var i=this.keyOfEntity(e);e&&typeof e=="string"&&!n&&!r&&!this.resolve(e,"__typename")?hb(e,[]):(zp(i,"",19),T_(i,n,r))}inspectFields(e){var n=this.keyOfEntity(e);return n?S_(n):[]}updateQuery(e,n){var r=Ps(e.query,e.variables),i=n(this.readQuery(r));i!==null&&pb(this,r,i,void 0)}readQuery(e){var n=Ps(e.query,e.variables);return db(this,n,void 0,void 0).data}readFragment(e,n,r,i){return((s,o,l,a,c)=>{var u=mh(o),d;if(c){if(!(d=u[c]))return null}else if(!(d=u[Object.keys(u)[0]]))return null;var f=gS(d);typeof l!="string"&&!l.__typename&&(l.__typename=f);var p=s.keyOfEntity(l);if(!p)return null;var g=kh(s,a||{},u,f,p,void 0),m=Ca(g,p,Sr(d),ki())||null;return m})(this,tu(e),n,r,i)}writeFragment(e,n,r,i){((s,o,l,a,c)=>{var u=mh(o),d;if(c){if(!(d=u[c]))return null}else if(!(d=u[Object.keys(u)[0]]))return null;var f=gS(d),p={__typename:f,...l},g=s.keyOfEntity(p);if(g){var m=kh(s,a||{},u,f,g,void 0);P1(m,g,Sr(d),p)}})(this,tu(e),n,r,i)}link(e,n,...r){var i=r.length===2?r[0]:null,s=r.length===2?r[1]:r[0],o=this.keyOfEntity(e);o&&Qu(o,Wo(n,i),ub(this,s))}}var kS=(t,e)=>Wi(t.kind,t,{...t.context,requestPolicy:e}),RQ=t=>({forward:e,client:n,dispatchDebug:r})=>{var i=new OQ(t);t&&t.storage&&(i.data.hydrating=!0,t.storage.readData().then(S=>{((k,E,T)=>{Co("write",k,null);for(var N in T){var I=T[N];if(I!==void 0){var{entityKey:A,fieldKey:O}=y_(N);I[0]===":"?wl(A,O)===void 0&&Qu(A,O,JSON.parse(I.slice(1))):Zi(A,O)===void 0&&wu(A,O,JSON.parse(I))}}k.storage=E,k.hydrating=!1,Eo()})(i.data,t.storage,S),t.storage.onCacheHydrated&&t.storage.onCacheHydrated()}));var s=new Map,o=[],l=new Map,a=new Map,c=new Set,u=new Set,d=new Map,f=new Set,p=new Set,g=S=>{for(var k of S.values())if(c.has(k))return!0;return!1},m=(S,k)=>{if(k)for(var E of k.values()){var T=d.get(E);if(T)for(var N of T.values())S.add(N)}},b=(S,k,E)=>{for(var T of k.values())if(T!==S.key){var N=l.get(T);if(N){S.kind==="query"&&p.add(T);var I="cache-first";u.has(T)&&(u.delete(T),I="cache-and-network"),n.reexecuteOperation(kS(N,I))}}if(!E){var A=f;f=p,S.kind==="query"&&f.add(S.key),(p=A).clear()}},y=S=>{var k=!1;if(S.kind==="query")lf(i.data,S.key),l.set(S.key,S);else{if(S.kind==="teardown")return l.delete(S.key),a.delete(S.key),f.delete(S.key),bS(i.data,S.key),S;if(S.kind==="mutation"&&S.context.requestPolicy!=="network-only"){l.set(S.key,S),Co("write",i.data,S.key,!0,!1);var{dependencies:E}=pb(i,S,void 0,void 0);if(Eo(),E.size){for(var T of E.values())c.add(T);s.set(S.key,E);var N=new Set;m(N,E),b(S,N,!0),k=!0}}}return Wi(S.kind,{key:S.key,query:tu(S.query),variables:S.variables?mQ(M1(S.query),S.variables):S.variables},{...S.context,optimistic:k})},x=(S,k)=>{for(var E of k.values()){var T=d.get(E);T||d.set(E,T=new Set),T.add(S.key)}},v=S=>{Co("read",i.data,void 0,!1,!1);var k=db(i,S,a.get(S.key),void 0);Eo();var E=k.data?!k.partial&&!k.hasNext?"hit":"partial":"miss";return a.set(S.key,k.data),l.set(S.key,S),x(S,k.dependencies),{outcome:E,operation:S,data:k.data,dependencies:k.dependencies,hasNext:k.hasNext}},w=(S,k)=>{var E=l.get(S.operation.key)||S.operation;if(E.kind==="mutation"){var T=s.get(E.key);m(k,T),s.delete(E.key)}(E.kind==="subscription"||S.hasNext)&&lf(i.data,E.key,!0);var N,I=S.data;if(I){Co("write",i.data,E.key,!1,!1);var A=pb(i,E,I,S.error).dependencies;Eo(),m(k,A);var O=E.kind==="query"?a.get(E.key):null;Co("read",i.data,E.key,!1,O!==I);var _=db(i,E,O||I,S.error);Eo(),I=_.data,E.kind==="query"&&(m(k,N=_.dependencies),a.set(E.key,I))}else bS(i.data,E.key);return N&&x(S.operation,N),{operation:E,data:I,error:S.error,extensions:S.extensions,hasNext:S.hasNext,stale:S.stale}};return S=>{var k=ma(ks(v)(ut(_=>_.kind==="query"&&_.context.requestPolicy!=="network-only")(S))),E=ut(_=>_.kind!=="query"||_.context.requestPolicy==="network-only")(S),T=ks(_=>_.operation)(ut(_=>_.outcome==="miss"&&_.operation.context.requestPolicy!=="cache-only"&&!g(_.dependencies)&&!f.has(_.operation.key))(k)),N=ks(_=>{var{requestPolicy:F}=_.operation.context,M=F!=="cache-only"&&(_.hasNext||F==="cache-and-network"||F==="cache-first"&&_.outcome==="partial"&&!f.has(_.operation.key)),P=F!=="cache-only"&&(M||_.outcome==="partial"&&f.has(_.operation.key)&&((B=i.data).commutativeKeys.has(z=_.operation.key)||B.optimisticOrder.indexOf(z)>-1)),B,z,U={operation:_.operation,data:_.data,error:_.error,extensions:_.extensions,stale:P&&!_.hasNext,hasNext:M&&_.hasNext};return M&&(g(_.dependencies)?F==="cache-and-network"&&u.add(_.operation.key):n.reexecuteOperation(kS(l.get(_.operation.key)||_.operation,"network-only"))),U})(ut(_=>_.outcome!=="miss"||_.operation.context.requestPolicy==="cache-only")(k)),I=e(ks(y)(Zs([E,T]))),A=ks(_=>{var F=new Set,M=w(_,F);return b(_.operation,F,!1),M})(ut(_=>!s.has(_.operation.key))(I)),O=Kh(_=>{if(o.push(_)<s.size)return cL;for(var F=0;F<o.length;F++)lf(i.data,o[F].operation.key);c.clear();for(var M=[],P=new Set,B;B=o.shift();)M.push(w(B,P));return b(_.operation,P,!1),JI(M)})(ut(_=>s.has(_.operation.key))(I));return Zs([A,O,N])}},km=(t,e)=>Wi(t.kind,t,{...t.context,authAttempt:e});function DQ(t){return({client:e,forward:n})=>{var r=new Set,i=Pf(),s=Pf(),o=new Map;function l(){c=void 0;var d=o;o=new Map,d.forEach(i.next)}function a(d){c=void 0;var f=o;o=new Map,f.forEach(p=>{s.next(eA(p,d))})}var c,u=null;return d=>{function f(){c=Promise.resolve().then(()=>t({mutate(y,x,v){var w=e.createRequestOperation("mutation",Ps(y,x),v);return k0(Gh(1)(ut(S=>S.operation.key===w.key&&w.context._instance===S.operation.context._instance)(ey(()=>{var S=g(w);r.add(S.context._instance),i.next(S)})(b))))},appendHeaders(y,x){var v=typeof y.context.fetchOptions=="function"?y.context.fetchOptions():y.context.fetchOptions||{};return Wi(y.kind,y,{...y.context,fetchOptions:{...v,headers:{...v.headers,...x}}})}})).then(y=>{y&&(u=y),l()}).catch(y=>{a(y)})}f();function p(y){o.set(y.key,km(y,!0)),u&&!c&&(c=u.refreshAuth().then(l).catch(a))}function g(y){return u?u.addAuthToOperation(y):y}var m=ut(Boolean)(ks(y=>y.kind==="teardown"?(o.delete(y.key),y):y.context._instance&&r.has(y.context._instance)?y:y.context.authAttempt?g(y):c||!u?(c||f(),o.has(y.key)||o.set(y.key,km(y,!1)),null):function(v){return!v.context.authAttempt&&u&&u.willAuthError&&u.willAuthError(v)}(y)?(p(y),null):g(km(y,!1)))(Zs([i.source,d]))),b=n(m);return Zs([s.source,ut(y=>!r.has(y.operation.context._instance)&&y.error&&function(v){return u&&u.didAuthError&&u.didAuthError(v.error,v.operation)}(y)&&!y.operation.context.authAttempt?(p(y.operation),!1):(r.has(y.operation.context._instance)&&r.delete(y.operation.context._instance),!0))(b)])}}}var wm=typeof window<"u"?window.crypto:typeof self<"u"?self.crypto:null,lc,MQ=async t=>{if(wm&&wm.subtle){var e=await wm.subtle.digest({name:"SHA-256"},new TextEncoder().encode(t));return new Uint8Array(e).reduce((n,r)=>n+r.toString(16).padStart(2,"0"),"")}else if(await(async()=>{if(!lc)try{lc=new Function("require",'return require("crypto")')(require)}catch{try{lc=new Function('return import("crypto")')()}catch{}}return lc})())return(await lc).createHash("sha256").update(t).digest("hex");return""},FQ=t=>({forward:e})=>{t||(t={});var n=t.preferGetForPersistedQueries,r=!!t.enforcePersistedQueries,i=t.generateHash||MQ,s=!!t.enableForMutation,o=!!t.enableForSubscriptions,l=!0,a=c=>l&&!c.context.persistAttempt&&(s&&c.kind==="mutation"||o&&c.kind==="subscription"||c.kind==="query");return c=>{var u=Pf(),d=ut(p=>!a(p))(c),f=Kh(p=>{var g=(async m=>{var b=Wi(m.kind,m,{...m.context,persistAttempt:!0}),y=await i(Yh(m.query),m.query);return y&&(b.extensions={...b.extensions,persistedQuery:{version:1,sha256Hash:y}},b.kind==="query"&&n&&(b.context.preferGetMethod=n)),b})(p);return v0(ut(m=>m.kind==="teardown"&&m.key===p.key)(c))(uL(g))})(ut(a)(c));return ut(p=>!!p)(ks(p=>{if(!r&&p.operation.extensions&&p.operation.extensions.persistedQuery){if(p.error&&p.error.graphQLErrors.some(b=>b.message==="PersistedQueryNotSupported")){l=!1;var g=Wi(p.operation.kind,p.operation);return g.extensions&&delete g.extensions.persistedQuery,u.next(g),null}else if(p.error&&(b=>b.graphQLErrors.some(y=>y.message==="PersistedQueryNotFound"))(p.error)){if(p.operation.extensions.persistedQuery.miss)return p;var m=Wi(p.operation.kind,p.operation);return m.extensions={...m.extensions,persistedQuery:{...(m.extensions||{}).persistedQuery,miss:!0}},u.next(m),null}}return p})(e(Zs([f,d,u.source]))))}},N_={__typename:"PageInfo",endCursor:null,startCursor:null,hasNextPage:!1,hasPreviousPage:!1},mo=t=>typeof t=="string"?t:null,hs=(t,e,n)=>{for(var r=new Set,i=0,s=e.length;i<s;i++){var o=t.resolve(e[i],"node");typeof o=="string"&&r.add(o)}for(var l=e.slice(),a=0,c=n.length;a<c;a++){var u=n[a],d=t.resolve(u,"node");typeof d=="string"&&!r.has(d)&&(r.add(d),l.push(u))}return l},ps=(t,e)=>{for(var n=new Set,r=0,i=t.length;r<i;r++){var s=t[r];typeof s=="string"&&n.add(s)}for(var o=t.slice(),l=0,a=e.length;l<a;l++){var c=e[l];typeof c=="string"&&!n.has(c)&&(n.add(c),o.push(c))}return o},PQ=(t,e)=>{for(var n in e)if(!(n==="first"||n==="last"||n==="after"||n==="before")){if(!(n in t))return!1;var r=t[n],i=e[n];if(typeof r!=typeof i||typeof r!="object"?r!==i:ts(r)!==ts(i))return!1}for(var s in t)if(!(s==="first"||s==="last"||s==="after"||s==="before")&&!(s in e))return!1;return!0},$Q=(t,e,n)=>{var r=mo(t.resolve(e,n));if(!r)return null;var i=t.resolve(r,"__typename"),s=t.resolve(r,"edges")||[],o=t.resolve(r,"nodes")||[];if(typeof i!="string")return null;var l={__typename:i,edges:s,nodes:o,pageInfo:N_},a=t.resolve(r,"pageInfo");if(typeof a=="string"){var c=mo(t.resolve(a,"__typename")),u=mo(t.resolve(a,"endCursor")),d=mo(t.resolve(a,"startCursor")),f=t.resolve(a,"hasNextPage"),p=t.resolve(a,"hasPreviousPage"),g=l.pageInfo={__typename:typeof c=="string"?c:"PageInfo",hasNextPage:typeof f=="boolean"?f:!!u,hasPreviousPage:typeof p=="boolean"?p:!!d,endCursor:u,startCursor:d};if(g.endCursor===null){var m=s[s.length-1];if(m){var b=t.resolve(m,"cursor");g.endCursor=mo(b)}}if(g.startCursor===null){var y=s[0];if(y){var x=t.resolve(y,"cursor");g.startCursor=mo(x)}}}return l},LQ=(t={})=>{var e=t.mergeMode||"inwards";return(n,r,i,s)=>{var{parentKey:o,fieldName:l}=s,a=i.inspectFields(o).filter(T=>T.fieldName===l),c=a.length;if(c!==0){for(var u=null,d=[],f=[],p=[],g=[],m={...N_},b=0;b<c;b++){var{fieldKey:y,arguments:x}=a[b];if(!(x===null||!PQ(r,x))){var v=$Q(i,o,y);if(v!==null&&!(v.nodes.length===0&&v.edges.length===0&&u)){if(e==="inwards"&&typeof x.last=="number"&&typeof x.first=="number"){var w=v.edges.slice(0,x.first+1),S=v.edges.slice(-x.last),k=v.nodes.slice(0,x.first+1),E=v.nodes.slice(-x.last);d=hs(i,d,w),f=hs(i,S,f),p=ps(p,k),g=ps(E,g),m=v.pageInfo}else x.after?(d=hs(i,d,v.edges),p=ps(p,v.nodes),m.endCursor=v.pageInfo.endCursor,m.hasNextPage=v.pageInfo.hasNextPage):x.before?(f=hs(i,v.edges,f),g=ps(v.nodes,g),m.startCursor=v.pageInfo.startCursor,m.hasPreviousPage=v.pageInfo.hasPreviousPage):typeof x.last=="number"?(f=hs(i,v.edges,f),g=ps(v.nodes,g),m=v.pageInfo):(d=hs(i,d,v.edges),p=ps(p,v.nodes),m=v.pageInfo);v.pageInfo.__typename!==m.__typename&&(m.__typename=v.pageInfo.__typename),u!==v.__typename&&(u=v.__typename)}}}if(typeof u=="string"){if(!mo(i.resolve(o,l,r)))if(s.store.schema)s.partial=!0;else return;return{__typename:u,edges:e==="inwards"?hs(i,d,f):hs(i,f,d),nodes:e==="inwards"?ps(p,g):ps(g,p),pageInfo:{__typename:m.__typename,endCursor:m.endCursor,startCursor:m.startCursor,hasNextPage:m.hasNextPage,hasPreviousPage:m.hasPreviousPage}}}}}},Sm,wS;function BQ(){return wS||(wS=1,Sm=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Sm}var zQ=BQ();const VQ=Ib(zQ),UQ=new Intl.Collator(void 0,{sensitivity:"base"});function qQ(t,e,n){const r=t==="ascending"?1:-1;return e==null?1:n==null?-1:typeof e=="string"&&typeof n=="string"?UQ.compare(e,n)*r:HQ(e,n)*r}function HQ(t,e){return t<e?-1:t>e?1:0}function Ko(t){const e=q(5);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={mobile:"medium",tablet:"xlarge",desktop:"xxlarge"},e[0]=n):n=e[0];let r;e[1]!==t?(r="children"in t?t.children:h.jsxs(h.Fragment,{children:[t.icon&&h.jsx(X,{src:t.icon,size:"large",color:"neutralEmphasis"}),t.title&&h.jsx(nt,{align:"center",size:"medium",children:t.title}),t.message&&h.jsx(Y,{align:"center",children:t.message}),t.actions]}),e[1]=t,e[2]=r):r=e[2];let i;return e[3]!==r?(i=h.jsx(te,{alignItems:"center",direction:"column",gap:"large",justifyContent:"center",minHeight:"scale.3000",paddingX:n,children:r}),e[3]=r,e[4]=i):i=e[4],i}class j_ extends Error{constructor(){super("Not found"),this.name="NotFoundError"}}function __(t){return typeof t=="object"&&t!==null&&t instanceof j_}function Ua(){throw new j_}class WQ extends wi.Component{constructor(e){super(e),this.state={notFound:!1,lastHref:e.href}}static getDerivedStateFromError(e){if(__(e))return{notFound:!0};throw e}static getDerivedStateFromProps(e,n){return e.href!==n.lastHref&&n.notFound?{notFound:!1,lastHref:e.href}:{notFound:n.notFound,lastHref:e.href}}render(){return this.state.notFound?this.props.fallback:this.props.children}}function O_(t){const e=q(3),n=ft();let r;return e[0]!==t||e[1]!==n.href?(r=h.jsx(WQ,{...t,href:n.href}),e[0]=t,e[1]=n.href,e[2]=r):r=e[2],r}class SS extends Map{#s;constructor(e,n){super(n),this.#s=e}get(e){return this.#s(e),super.get(e)}}function dl(t,e){const n=Fa(t.dirpath,t.format),r=e.get(n);if(!r)throw new Error(`Could not find data file at ${n}`);const{loaded:i,extraFakeFile:s}=d_(r,t.format,t.requireFrontmatter),o=new Map(e);s&&o.set(`${t.dirpath}/${s.path}`,s.contents);const l=new Set([n]),a=en(t.schema);let c;const u=f=>(l.add(f),o.get(f)),d=(f,p)=>{const g=new SS(v=>{l.add(`${f}/${v}`)}),m=new Map;for(const[v]of o)if(v.startsWith(f+"/")){const w=v.slice(f.length+1);g.set(w,o.get(v))}for(const v of(b=p.directories)!==null&&b!==void 0?b:[]){var b,y,x;const w=new SS(k=>l.add(S+k)),S=`${v}${((y=t.slug)===null||y===void 0?void 0:y.slug)===void 0?"":`/${(x=t.slug)===null||x===void 0?void 0:x.slug}`}/`;for(const[k,E]of o)if(k.startsWith(S)){const T=k.slice(S.length);w.set(T,E)}w.size&&m.set(v,w)}return{other:g,external:m}};try{c=To(a,i,[],[],(f,p,g,m)=>{var b;if(g.length===1&&g[0]===((b=t.slug)===null||b===void 0?void 0:b.field)){if(f.formKind!=="slug")throw new Error("slugField is not a slug field");return f.parse(p,{slug:t.slug.slug})}if(f.formKind==="asset"){var y,x,v;const k=m.join("/"),E=f.filename(p,{suggestedFilenamePrefix:k,slug:(y=t.slug)===null||y===void 0?void 0:y.slug}),T=E?u(`${f.directory?`${f.directory}${((x=t.slug)===null||x===void 0?void 0:x.slug)===void 0?"":`/${t.slug.slug}`}`:t.dirpath}/${E}`):void 0;return f.parse(p,{asset:T,slug:(v=t.slug)===null||v===void 0?void 0:v.slug})}if(f.formKind==="content"||f.formKind==="assets"){const k=`${t.dirpath}/${m.join("/")}`,{external:E,other:T}=d(k,f);if(f.formKind==="content"){var w;const N=k+f.contentExtension,I=u(N);return f.parse(p,{content:I,other:T,external:E,slug:(w=t.slug)===null||w===void 0?void 0:w.slug})}if(f.formKind==="assets"){var S;return f.parse(p,{other:T,external:E,slug:(S=t.slug)===null||S===void 0?void 0:S.slug})}}return f.parse(p,void 0)},!1)}catch(f){throw _j(f)}return s&&l.delete(`${t.dirpath}/${s.path}`),{initialState:c,initialFiles:[...l]}}function R_(t){return[...t.values()].flatMap(e=>e.children?R_(e.children):[e.entry])}function $1(t){var e;const{current:n}=cp(),r=ml(),i=jr(),s=n.kind==="loaded"?n.data.tree:void 0,o=C.useMemo(()=>{var u;return yA(en(t.schema),t.dirpath,(u=t.slug)===null||u===void 0?void 0:u.slug,t.format)},[t.dirpath,t.format,t.schema,(e=t.slug)===null||e===void 0?void 0:e.slug]),l=C.useMemo(()=>Ac(o,s??new Map),[o,s]),a=C.useMemo(()=>s??new Map,[l,o]),c=n.kind==="loaded";return dr(C.useCallback(()=>{var u;if(!c)return xr;if(((u=Ki(a,Fa(t.dirpath,t.format)))===null||u===void 0?void 0:u.entry.sha)===void 0)return"not-found";const f={dirpath:t.dirpath,format:t.format,schema:t.schema,slug:t.slug},p=o.flatMap(g=>{const m=Ki(a,g);return m?m.children?R_(m.children):[m.entry]:[]}).map(g=>{const m=D_(t.config,g.sha,g.path,r,i);return m instanceof Uint8Array?[g.path,m]:m.then(b=>[g.path,b])});if(p.every(g=>Array.isArray(g))){const{initialFiles:g,initialState:m}=dl(f,new Map(p));return{initialState:m,initialFiles:g,localTreeKey:l}}return Promise.all(p).then(async g=>{const{initialState:m,initialFiles:b}=dl(f,new Map(g));return{initialState:m,initialFiles:b,localTreeKey:l}})},[c,a,t.dirpath,t.format,t.config,t.schema,t.slug,o,r,i,l]))}const yo=new ep({max:200});async function KQ(t){const e=await I0(t);return yo.set(e,t),await SA(e,t),e}async function GQ(t,e,n,r,i){if(i?.isPrivate===!1){var s;return fetch(`https://raw.githubusercontent.com/${tl(i)}/${r}/${(s=Xs(t.storage))!==null&&s!==void 0?s:""}${n}`)}const o=await el(t);return fetch(t.storage.kind==="github"?`https://api.github.com/repos/${tl(t.storage.repo)}/git/blobs/${e}`:`${ls}/v1/github/blob/${e}`,{headers:{Authorization:`Bearer ${o.accessToken}`,Accept:"application/vnd.github.raw",...t.storage.kind==="cloud"?so:{}}})}function D_(t,e,n,r,i){if(yo.has(e))return yo.get(e);const s=(async()=>{const o=t.storage.kind==="local";if(!o){const l=await wB(e);if(l)return yo.set(e,l),l}return(o?fetch(`/api/keystatic/blob/${e}/${n}`,{headers:{"no-cors":"1"}}):GQ(t,e,n,r,i)).then(async l=>{if(!l.ok)throw new Error(`Could not fetch blob ${e} (${n}): ${l.status}
${await l.text()}`);return l.arrayBuffer()}).then(l=>{const a=new Uint8Array(l);return yo.set(e,a),t.storage.kind!=="local"&&SA(e,a),a}).catch(l=>{throw yo.delete(e),l})})();return yo.set(e,s),s}function YQ(t){var e;const n=q(15),{collection:r,config:i}=t,s=(e=i.collections)===null||e===void 0?void 0:e[r];s||Ua();const o=ft();let l;if(n[0]!==o.search){var a;l=(a=new URLSearchParams(o.search).get("search"))!==null&&a!==void 0?a:"",n[0]=o.search,n[1]=l}else l=n[1];const[c,u]=C.useState(l);let d;n[2]!==o?(d=x=>{u(x);const v=new URLSearchParams(o.search);x?v.set("search",x):v.delete("search"),o.replace(o.pathname+"?"+v.toString())},n[2]=o,n[3]=d):d=n[3];const f=d,p=eee(c,300),g=`${t.basePath}/collection/${encodeURIComponent(t.collection)}/create`;let m;n[4]!==s.label||n[5]!==g||n[6]!==c||n[7]!==f?(m=h.jsx(JQ,{collectionLabel:s.label,createHref:g,searchTerm:c,onSearchTermChange:f}),n[4]=s.label,n[5]=g,n[6]=c,n[7]=f,n[8]=m):m=n[8];let b;n[9]!==p||n[10]!==t?(b=h.jsx(ZQ,{searchTerm:p,...t}),n[9]=p,n[10]=t,n[11]=b):b=n[11];let y;return n[12]!==m||n[13]!==b?(y=h.jsxs(Yi,{containerWidth:"none",children:[m,b]}),n[12]=m,n[13]=b,n[14]=y):y=n[14],y}function JQ(t){const e=q(50),{collectionLabel:n,createHref:r}=t,i=Be(et),s=hl(dn.above.mobile),[o,l]=C.useState(s),a=C.useRef(null);let c,u;e[0]!==s?(c=()=>{l(s)},u=[s],e[0]=s,e[1]=c,e[2]=u):(c=e[1],u=e[2]),C.useEffect(c,u);let d,f;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{const F=M=>{if(document.activeElement!==a.current&&$l.isHotkey("mod+f",M)){var P;M.preventDefault(),(P=a.current)===null||P===void 0||P.select()}};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},f=[],e[3]=d,e[4]=f):(d=e[3],f=e[4]),C.useEffect(d,f);let p;e[5]!==n?(p=h.jsx(nt,{elementType:"h1",id:"page-title",size:"small",flex:!0,minWidth:0,children:n}),e[5]=n,e[6]=p):p=e[6];const g=o?"block":"none";let m;e[7]!==g?(m={display:g},e[7]=g,e[8]=m):m=e[8];let b;e[9]!==i?(b=i.format("search"),e[9]=i,e[10]=b):b=e[10];let y;e[11]!==t||e[12]!==s?(y=()=>{t.onSearchTermChange(""),s||setTimeout(()=>{l(!1)},250)},e[11]=t,e[12]=s,e[13]=y):y=e[13];let x;e[14]!==s||e[15]!==t.searchTerm?(x=()=>{!s&&t.searchTerm===""&&l(!1)},e[14]=s,e[15]=t.searchTerm,e[16]=x):x=e[16];let v;e[17]!==i?(v=i.format("search"),e[17]=i,e[18]=v):v=e[18];let w;e[19]!==a||e[20]!==b||e[21]!==t.onSearchTermChange||e[22]!==t.searchTerm||e[23]!==y||e[24]!==x||e[25]!==v?(w=h.jsx(nD,{ref:a,"aria-label":b,onChange:t.onSearchTermChange,onClear:y,onBlur:x,placeholder:v,value:t.searchTerm,width:"scale.2400"}),e[19]=a,e[20]=b,e[21]=t.onSearchTermChange,e[22]=t.searchTerm,e[23]=y,e[24]=x,e[25]=v,e[26]=w):w=e[26];let S;e[27]!==m||e[28]!==w?(S=h.jsx("div",{role:"search",style:m,children:w}),e[27]=m,e[28]=w,e[29]=S):S=e[29];let k;e[30]!==o?(k=o||{above:"mobile"},e[30]=o,e[31]=k):k=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{l(!0);const F=document.createElement("input");F.style.position="absolute",F.style.opacity="0",document.body.appendChild(F),F.focus(),setTimeout(()=>{var M;(M=a.current)===null||M===void 0||M.focus(),F.remove()},0)},e[32]=E):E=e[32];let T;e[33]===Symbol.for("react.memo_cache_sentinel")?(T=h.jsx(X,{src:oC}),e[33]=T):T=e[33];let N;e[34]!==k||e[35]!==E?(N=h.jsx(ae,{"aria-label":"show search",isHidden:k,onPress:E,children:T}),e[34]=k,e[35]=E,e[36]=N):N=e[36];let I;e[37]!==o?(I=o?{below:"tablet"}:void 0,e[37]=o,e[38]=I):I=e[38];let A;e[39]!==i?(A=i.format("add"),e[39]=i,e[40]=A):A=e[40];let O;e[41]!==r||e[42]!==I||e[43]!==A?(O=h.jsx(Re,{marginStart:"auto",prominence:"high",href:r,isHidden:I,children:A}),e[41]=r,e[42]=I,e[43]=A,e[44]=O):O=e[44];let _;return e[45]!==p||e[46]!==S||e[47]!==N||e[48]!==O?(_=h.jsxs(za,{children:[p,S,N,O]}),e[45]=p,e[46]=S,e[47]=N,e[48]=O,e[49]=_):_=e[49],_}function ZQ(t){const e=q(11),n=cp(),r=n.merged.kind==="loaded"?n.merged.data.current.entries.get(C0(t.config,t.collection)):null;if(n.merged.kind==="error"){let s;e[0]!==t.basePath?(s=h.jsx(Re,{tone:"accent",href:t.basePath,children:"Dashboard"}),e[0]=t.basePath,e[1]=s):s=e[1];let o;return e[2]!==n.merged.error.message||e[3]!==s?(o=h.jsx(Ko,{icon:Ab,title:"Unable to load collection",message:n.merged.error.message,actions:s}),e[2]=n.merged.error.message,e[3]=s,e[4]=o):o=e[4],o}if(n.merged.kind==="loading"){let s;return e[5]===Symbol.for("react.memo_cache_sentinel")?(s=h.jsx(Ko,{children:h.jsx(Tr,{"aria-label":"Loading Entries",isIndeterminate:!0,size:"large"})}),e[5]=s):s=e[5],s}if(!r){const s=`${t.basePath}/collection/${encodeURIComponent(t.collection)}/create`;let o;return e[6]!==s?(o=h.jsx(Ko,{icon:ZR,title:"Empty collection",message:h.jsxs(h.Fragment,{children:["There aren't any entries yet."," ",h.jsx(aa,{href:s,children:"Create the first entry"})," ","to see it here."]})}),e[6]=s,e[7]=o):o=e[7],o}let i;return e[8]!==t||e[9]!==n.merged.data?(i=h.jsx(XQ,{...t,trees:n.merged.data}),e[8]=t,e[9]=n.merged.data,e[10]=i):i=e[10],i}const Nl="@@slug",ac="@@status";function XQ(t){let{searchTerm:e}=t;const n=jr(),r=bn();let i=Pa(t.config),s=ft(),[o,l]=C.useState({column:Nl,direction:"ascending"}),a=i||r===n?.defaultBranch;const c=ml(),u=t.config.collections[t.collection],d=C.useMemo(()=>{const y=new Map(iu(t.config,t.collection,t.trees.default.tree).map(x=>[x.slug,x.key]));return iu(t.config,t.collection,t.trees.current.tree).map(x=>({name:x.slug,status:y.has(x.slug)?y.get(x.slug)===x.key?"Unchanged":"Changed":"Added",sha:x.sha}))},[t.collection,t.config,t.trees]),f=dr(C.useCallback(async()=>{var y;if(!((y=u.columns)!==null&&y!==void 0&&y.length))return;const x=Ir(t.config,t.collection),v=await Promise.all(d.map(async E=>[E.name,await D_(t.config,E.sha,Fa($n(t.config,t.collection,E.name),x),c,n)])),w=E0(t.config,t.collection),S={kind:"object",fields:u.schema},k=new Map;for(const[E,T]of v)try{const{loaded:N}=d_(T,x),I=To(S,N,[],[],(A,O,_)=>{if(A.formKind==="asset")return A.reader.parse(O);if(!(A.formKind==="content"||A.formKind==="assets")){if(_.length===1&&E!==void 0&&_[0]===u.slugField){if(A.formKind!=="slug")throw new Error(`Slug field ${u.slugField} is not a slug field`);return A.reader.parseWithSlug(O,{slug:E,glob:w})}return A.reader.parse(O)}},!0);k.set(E,I)}catch{}return k},[u,t.config,t.collection,d,c,n])),p=C.useMemo(()=>{if(f.kind!=="loaded"||!f.data)return d;const{data:y}=f;return d.map(x=>({...x,data:y.get(x.name)}))},[d,f]),g=C.useMemo(()=>p.filter(y=>y.name.toLowerCase().includes(e.toLowerCase())),[p,e]),m=C.useMemo(()=>[...g].sort((y,x)=>{const v=(S,k)=>{var E;if(o.column===Nl){var T,N;return(T=(N=u.parseSlugForSort)===null||N===void 0?void 0:N.call(u,S.name))!==null&&T!==void 0?T:S.name}return o.column===ac?S.status:(E=k?.[o.column])!==null&&E!==void 0?E:S.name},w=f.kind==="loaded"?f.data:void 0;return qQ(o.direction,v(y,w?.get(y.name)),v(x,w?.get(x.name)))}),[u,g,f,o.column,o.direction]),b=C.useMemo(()=>{var y;return(y=u.columns)!==null&&y!==void 0&&y.length?[...a?[]:[{name:"Status",key:ac,minWidth:32,width:32}],{name:"Slug",key:Nl},...u.columns.map(x=>{const v=u.schema[x];return{name:"label"in v&&v.label||x,key:x}})]:a?[{name:"Name",key:Nl}]:[{name:"Status",key:ac,minWidth:32,width:32},{name:"Name",key:Nl}]},[u,a]);return h.jsxs(CD,{"aria-labelledby":"page-title",selectionMode:"none",onSortChange:l,sortDescriptor:o,density:"spacious",overflowMode:"truncate",prominence:"low",onAction:y=>{s.push(QQ(t.basePath,t.collection,y))},renderEmptyState:()=>h.jsx(Ko,{icon:XR,title:"No results",message:`No items matching "${e}" were found.`}),flex:!0,marginTop:{tablet:"large"},marginBottom:{mobile:"regular",tablet:"xlarge"},UNSAFE_className:W({marginInline:j.size.space.regular,[dn.above.mobile]:{marginInline:`calc(${j.size.space.xlarge} - ${j.size.space.medium})`},[dn.above.tablet]:{marginInline:`calc(${j.size.space.xxlarge} - ${j.size.space.medium})`},"[role=rowheader]":{cursor:"pointer"}}),children:[h.jsx(tR,{columns:b,children:({name:y,key:x,...v})=>x===ac?h.jsx(ox,{isRowHeader:!0,allowsSorting:!0,...v,children:h.jsx(X,{"aria-label":"Status",src:QR})},x):h.jsx(ox,{isRowHeader:!0,allowsSorting:!0,...v,children:y},x)}),h.jsx(nR,{items:m,children:y=>{var x;const v=h.jsx(Gp,{textValue:y.status,children:y.status==="Added"?h.jsx(X,{color:"positive",src:eD}):y.status==="Changed"?h.jsx(X,{color:"accent",src:tD}):null},ac+y.name),w=h.jsx(Gp,{textValue:y.name,children:h.jsx(Y,{weight:"medium",children:y.name})},Nl+y.name);return(x=u.columns)!==null&&x!==void 0&&x.length?h.jsx(Yp,{children:[...a?[]:[v],w,...u.columns.map(S=>{var k;let E;return E=(k=y.data)===null||k===void 0?void 0:k[S],E==null?E=void 0:E=E+"",h.jsx(Gp,{textValue:E,children:h.jsx(Y,{weight:"medium",children:E})},S+y.name)})]},y.name):a?h.jsx(Yp,{children:w},y.name):h.jsxs(Yp,{children:[v,w]},y.name)}})]})}function QQ(t,e,n){return`${t}/collection/${encodeURIComponent(e)}/item/${encodeURIComponent(n)}`}function eee(t,e){const n=q(4),r=e,[i,s]=C.useState(t);let o,l;return n[0]!==t||n[1]!==r?(o=()=>{const a=setTimeout(()=>s(t),r);return()=>{clearTimeout(a)}},l=[t,r],n[0]=t,n[1]=r,n[2]=o,n[3]=l):(o=n[2],l=n[3]),C.useEffect(o,l),i}function Xi(t,e){if(t.kind==="form")return t.formKind==="content"&&t.collaboration?t.collaboration.toYjs(e):e;if(t.kind==="child")return null;if(t.kind==="object")return new yi(Object.entries(t.fields).map(([n,r])=>[n,Xi(r,e[n])]));if(t.kind==="array"){const n=new Ms;return n.push(e.map(r=>Xi(t.element,r))),n}if(t.kind==="conditional"){const n=e.discriminant;return new yi([["discriminant",n],["value",Xi(t.values[n+""],e.value)]])}rn(t)}function Pr(t,e,n){if(t.kind==="form")return t.formKind==="content"&&t.collaboration?t.collaboration.fromYjs(n,e):n;if(t.kind==="child")return null;if(t.kind==="object")return Object.fromEntries(Object.entries(t.fields).map(([r,i])=>[r,Pr(i,e,n.get(r))]));if(t.kind==="array"){const r=n;if(!r)debugger;const i=r.map(s=>Pr(t.element,e,s));return vl(i,an(r)),i}if(t.kind==="conditional"){const r=n;return{discriminant:Pr(t.discriminant,e,r.get("discriminant")),value:Pr(t.values[r.get("discriminant")+""],e,r.get("value"))}}}function Mn(t,e){if(t.kind==="form"||t.kind==="child")return e;if(t.kind==="object")return new yi(Object.entries(t.fields).map(([n,r])=>[n,Mn(r,e[n])]));if(t.kind==="array"){const n=new Ms;return n.push(e.map(r=>Mn(t.element,r))),n}if(t.kind==="conditional"){const n=e.discriminant;return new yi([["discriminant",n],["value",Mn(t.values[n.toString()],e.value)]])}}const ed=C.createContext(void 0),tee=ed.Provider;function M_(t){const e=q(18),n=ft(),r=C.useContext(ed);let i;if(e[0]!==n.href||e[1]!==r){var s;i=(s=new URL(n.href,"https://example.com").searchParams.get("slug"))!==null&&s!==void 0?s:r?.value,e[0]=n.href,e[1]=r,e[2]=i}else i=e[2];const o=i;let l;e[3]!==t.config.storage.repo?(l=Vu(t.config.storage.repo),e[3]=t.config.storage.repo,e[4]=l):l=e[4];const a=l;let c;e[5]!==a.name?(c=h.jsx(gt,{label:"Repo Name",width:"100%",isReadOnly:!0,value:a.name}),e[5]=a.name,e[6]=c):c=e[6];let u;e[7]!==a.name?(u=h.jsx(ae,{onPress:()=>{navigator.clipboard.writeText(a.name)},children:"Copy Repo Name"}),e[7]=a.name,e[8]=u):u=e[8];let d;e[9]!==c||e[10]!==u?(d=h.jsxs(te,{alignItems:"end",gap:"regular",children:[c,u]}),e[9]=c,e[10]=u,e[11]=d):d=e[11];let f;e[12]!==o||e[13]!==r?(f=o?h.jsx(Re,{prominence:"high",href:`https://github.com/apps/${o}/installations/new`,children:"Install GitHub App"}):h.jsx(ar,{tone:"caution",children:r?h.jsxs(Y,{children:["The ",h.jsx("code",{children:r.envName})," environment variable wasn't provided so we can't link to the GitHub app installation page. You should find the App on GitHub and add the repo yourself."]}):h.jsx(Y,{children:"Find the App on GitHub and add the repo."})}),e[12]=o,e[13]=r,e[14]=f):f=e[14];let p;return e[15]!==d||e[16]!==f?(p=h.jsxs(te,{direction:"column",gap:"regular",children:[d,f]}),e[15]=d,e[16]=f,e[17]=p):p=e[17],p}function wh(t){const e=Be(et),n=S0(),[r,i]=C.useState({kind:"idle"});C.useEffect(()=>{const o=async l=>{if(l.key==="ks-refetch-installations"&&l.newValue==="true"){localStorage.removeItem("ks-refetch-installations");try{var a;if(!await el(t.config))throw new Error("Unauthorized");(a=(await n.query(qf,Vu(t.config.storage.repo)).toPromise()).data)!==null&&a!==void 0&&(a=a.repository)!==null&&a!==void 0&&(a=a.forks.nodes)!==null&&a!==void 0&&a.some(d=>d?.viewerPermission==="ADMIN"||d?.viewerPermission==="WRITE"||d?.viewerPermission==="MAINTAIN")&&(await new Promise(d=>setTimeout(d,100)),t.onCreate())}catch(c){i({kind:"error",error:c})}}};return addEventListener("storage",o),()=>removeEventListener("storage",o)},[n,t]);const s=C.useContext(ed);return h.jsxs(nn,{size:"small",isDismissable:!0,onDismiss:()=>{t.onDismiss()},children:[h.jsx(nt,{children:"Fork Repo"}),r.kind==="error"?h.jsxs(h.Fragment,{children:[h.jsx(gn,{children:h.jsx(ar,{tone:"critical",children:r.error.message})}),h.jsx(mn,{children:h.jsx(Re,{onPress:t.onDismiss,children:e.format("cancel")})})]}):h.jsx(h.Fragment,{children:h.jsx(gn,{children:h.jsxs(te,{gap:"large",direction:"column",marginBottom:"large",children:[h.jsx(Y,{children:"You don't have permission to write to this repo so to save your changes, you need to fork the repo."}),h.jsxs(Y,{children:["To start,"," ",h.jsx(aa,{href:`https://github.com/${tl(t.config.storage.repo)}/fork`,target:"_blank",rel:"noopener noreferrer",children:"fork the repo on GitHub"}),". Then, come back to this page and"," ",h.jsx(aa,{href:`https://github.com/apps/${s?.value}/installations/new?state=close`,target:"_blank",rel:"noopener noreferrer",children:"install the Keystatic GitHub App on your fork."})]})]})})})]})}const F_=C.memo(t=>{const e=q(5);let n;if(e[0]!==t.items){let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=s=>h.jsx(Je,{href:s.href,children:s.label},s.key),e[2]=i):i=e[2],n=t.items.map(i),e[0]=t.items,e[1]=n}else n=e[1];let r;return e[3]!==n?(r=h.jsx(fQ,{flex:!0,size:"medium",minWidth:"alias.singleLineWidth",children:n}),e[3]=n,e[4]=r):r=e[4],r});function P_(t,e){const n=q(10),r=Nt(),i=R1(t);let s,o;n[0]!==i||n[1]!==e?(o=new Set(i),e&&o.delete(e),n[0]=i,n[1]=e,n[2]=o):o=n[2];const l=r.collections[t];let a;n[3]!==r||n[4]!==t?(a=E0(r,t),n[3]=r,n[4]=t,n[5]=a):a=n[5];let c;return n[6]!==l.slugField||n[7]!==o||n[8]!==a?(c={field:l.slugField,slugs:o,glob:a},n[6]=l.slugField,n[7]=o,n[8]=a,n[9]=c):c=n[9],s=c,s}function L1(){const t=q(7),e=Uu(),n=MA(),r=ft();if(!e)return null;let i;t[0]!==n?(i=n.values(),t[0]=n,t[1]=i):i=t[1];let s;t[2]!==i?(s=[...i],t[2]=i,t[3]=s):s=t[3];let o;return t[4]!==r.href||t[5]!==s?(o=h.jsx(zr,{children:s.map(l=>!l.user||r.href!==`/keystatic/branch/${l.branch}/${l.location}`?null:h.jsx(tp,{src:l.user.avatarUrl,name:l.user.name}))}),t[4]=r.href,t[5]=s,t[6]=o):o=t[6],o}KS({body:{overflow:"hidden"}});function $_(t){const e=t.storage.kind==="github"?Vu(t.storage.repo):{owner:"repo-owner",name:"repo-name"};return OL({url:t.storage.kind==="github"?"https://api.github.com/graphql":`${ls}/v1/github/graphql`,requestPolicy:"cache-and-network",exchanges:[DQ(async n=>{let r=await el(t);return{addAuthToOperation(i){return r=uy(t),r?n.appendHeaders(i,{Authorization:`Bearer ${r.accessToken}`,...t.storage.kind==="cloud"?so:{}}):i},didAuthError(){return!1},willAuthError(i){var s;return r=uy(t),i.query.definitions[0].kind==="OperationDefinition"&&(s=i.query.definitions[0].name)!==null&&s!==void 0&&s.value.includes("AppShell")&&!r?(t.storage.kind==="github"?window.location.href="/api/keystatic/github/login":Bu("",t),!0):!r},async refreshAuth(){r=await el(t)}}}),RQ({resolvers:{Repository:{refs:LQ()}},updates:{Mutation:{createRef(n,r,i,s){i.updateQuery({query:t.storage.kind==="github"?qf:my,variables:e},o=>{var l;return o!=null&&(l=o.repository)!==null&&l!==void 0&&(l=l.refs)!==null&&l!==void 0&&l.nodes&&n.createRef&&typeof n.createRef=="object"&&"ref"in n.createRef?{...o,repository:{...o.repository,refs:{...o.repository.refs,nodes:[...o.repository.refs.nodes,n.createRef.ref]}}}:o})},deleteRef(n,r,i,s){i.updateQuery({query:t.storage.kind==="github"?qf:my,variables:e},o=>{var l;if(o!=null&&(l=o.repository)!==null&&l!==void 0&&(l=l.refs)!==null&&l!==void 0&&l.nodes&&n.deleteRef&&typeof n.deleteRef=="object"&&"__typename"in n.deleteRef&&typeof r.input=="object"&&r.input!==null&&"refId"in r.input&&typeof r.input.refId=="string"){const a=r.input.refId;return{...o,repository:{...o.repository,refs:{...o.repository.refs,nodes:o.repository.refs.nodes.filter(c=>c?.id!==a)}}}}return o})}}}}),...t.storage.kind==="github"?[]:[FQ({enableForMutation:!0,enforcePersistedQueries:!0})],TL]})}function nee(t){const e=q(19),{children:n,config:r}=t,i=Aq(),{push:s}=ft();let o,l;e[0]!==s?(l={navigate:s},e[0]=s,e[1]=l):l=e[1],o=l;const a=o;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e[2]=c):c=e[2];const u=r.locale||"en-US";let d,f;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(LR,{bodyBackground:"surface"}),f=h.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"}),e[3]=d,e[4]=f):(d=e[3],f=e[4]);let p,g;e[5]!==r?(g=$_(r),e[5]=r,e[6]=g):g=e[6],p=g;let m;e[7]!==p||e[8]!==n?(m=h.jsx(RL,{value:p,children:n}),e[7]=p,e[8]=n,e[9]=m):m=e[9];let b;e[10]===Symbol.for("react.memo_cache_sentinel")?(b=h.jsx(BF,{}),e[10]=b):b=e[10];let y;e[11]!==u||e[12]!==i.theme||e[13]!==a||e[14]!==m?(y=h.jsxs(qS,{locale:u,colorScheme:i.theme,router:a,children:[d,f,m,b]}),e[11]=u,e[12]=i.theme,e[13]=a,e[14]=m,e[15]=y):y=e[15];let x;return e[16]!==i||e[17]!==y?(x=h.jsxs(Iq,{value:i,children:[c,y]}),e[16]=i,e[17]=y,e[18]=x):x=e[18],x}const L_=new TextEncoder,jl=L_.encode(`---
`);function ree(t,e){const n=new Uint8Array(t.byteLength+e.byteLength+jl.byteLength*2);return n.set(jl),n.set(t,jl.byteLength),n.set(jl,jl.byteLength+t.byteLength),n.set(e,jl.byteLength*2+t.byteLength),n}function td(t){var e,n;let{value:r,extraFiles:i}=Uo(t.state,en(t.schema),(e=t.slug)===null||e===void 0?void 0:e.field,(n=t.slug)===null||n===void 0?void 0:n.value,!0);const s=t.format.data;let o=L_.encode(s==="json"?JSON.stringify(r,null,2)+`
`:tQ(r));if(t.format.contentField){const l=`${t.format.contentField.path.join("/")}${t.format.contentField.contentExtension}`;let a;i=i.filter(c=>c.path!==l?!0:(a=c.contents,!1)),Ue(a!==void 0,"Expected content field to be present"),o=ree(o,a)}return[{path:Fa(t.basePath,t.format),contents:o},...i.map(l=>({path:`${l.parent?t.slug?`${l.parent}/${t.slug.value}`:l.parent:t.basePath}/${l.path}`,contents:l.contents}))]}function qa(t){const[e,n]=C.useState({kind:"idle"}),r=ml(),i=bn(),s=FA(),[,o]=Zh(B_),l=jr(),a=C.useContext(ed),c=VA();return[e,async u=>{try{var d,f;const w=c.kind==="loaded"?c.data.tree:void 0;if(!w)return!1;if(t.config.storage.kind==="github"&&l&&!l.hasWritePermission&&a!==null&&a!==void 0&&a.value)return n({kind:"needs-fork"}),!1;n({kind:"loading"});const S=(d=Xs(t.config.storage))!==null&&d!==void 0?d:"";let k=td({basePath:t.basePath,schema:t.schema,format:t.format,state:t.state,slug:t.slug}).map(A=>({...A,path:S+A.path}));const E=new Map(await Promise.all(k.map(async A=>[A.path,await KQ(A.contents)]))),T=new Set((f=t.initialFiles)===null||f===void 0?void 0:f.map(A=>S+A));for(const A of k)T.delete(A.path);k=k.filter(A=>{const O=E.get(A.path),_=Ki(w,A.path);return _?.entry.sha!==O});const N=[...T].map(A=>({path:A})),I=await pA(w,{additions:k,deletions:[...T]});if(await xa(I.entries),t.config.storage.kind==="github"||t.config.storage.kind==="cloud"){var p,g,m,b,y;if(!l)throw new Error("Repo info not loaded");const A={branchName:(p=u?.branch)!==null&&p!==void 0?p:i,repositoryNameWithOwner:`${l.owner}/${l.name}`},O=P=>o({input:{branch:A,expectedHeadOid:P,message:{headline:`Update ${t.basePath}`},fileChanges:{additions:k.map(B=>({...B,contents:sy(B.contents)})),deletions:N}}});let _=await O((g=u?.sha)!==null&&g!==void 0?g:r);const F=(m=_.error)===null||m===void 0||(m=m.graphQLErrors[0])===null||m===void 0?void 0:m.originalError;if(F&&"type"in F){if(F.type==="BRANCH_PROTECTION_RULE_VIOLATION")return n({kind:"needs-new-branch",reason:"Changes must be made via pull request to this branch. Create a new branch to save changes."}),!1;if(F.type==="STALE_DATA"){var x,v;const P=await $_(t.config).query(see,{owner:l.owner,name:l.name,ref:`refs/heads/${i}`}).toPromise();if(!((x=P.data)!==null&&x!==void 0&&(x=x.repository)!==null&&x!==void 0&&(x=x.ref)!==null&&x!==void 0&&x.target))throw new Error("Branch not found");const B=dy(await qA(P.data.repository.ref.target.oid,t.config),t.config);if(Ac(yA(en(t.schema),t.basePath,(v=t.slug)===null||v===void 0?void 0:v.value,t.format),B.tree)===t.currentLocalTreeKey)_=await O(P.data.repository.ref.target.oid);else return n({kind:"needs-new-branch",reason:"This entry has been updated since it was opened. Create a new branch to save changes."}),!1}}if((b=_.error)!==null&&b!==void 0&&b.graphQLErrors.some(P=>"type"in P&&P.type==="FORBIDDEN"&&P.message==="Resource not accessible by integration"))throw new Error(`The GitHub App is unable to commit to the repository. Please ensure that the Keystatic GitHub App is installed in the GitHub repository ${l.owner}/${l.name}`);if(_.error)throw _.error;if((y=_.data)===null||y===void 0||(y=y.createCommitOnBranch)===null||y===void 0||(y=y.ref)===null||y===void 0?void 0:y.target)return n({kind:"updated"}),!0;throw new Error("Failed to update")}else{const A=await fetch("/api/keystatic/update",{method:"POST",headers:{"Content-Type":"application/json","no-cors":"1"},body:JSON.stringify({additions:k.map(F=>({...F,contents:sy(F.contents)})),deletions:N})});if(!A.ok)throw new Error(await A.text());const O=await A.json(),{tree:_}=await xa(O);return s(await Lu(_)),n({kind:"updated"}),!0}}catch(w){return n({kind:"error",error:w}),!1}},()=>{n({kind:"idle"})}]}const B_=Ht`
  mutation CreateCommit($input: CreateCommitOnBranchInput!) {
    createCommitOnBranch(input: $input) {
      ref {
        id
        target {
          id
          oid
          ... on Commit {
            tree {
              id
              oid
            }
          }
        }
      }
    }
  }
`;function iee(t){const[e,n]=C.useState({kind:"idle"}),r=ml(),i=bn(),[,s]=Zh(B_),o=FA(),l=jr(),a=C.useContext(ed),c=VA();return[e,async()=>{try{const u=c.kind==="loaded"?c.data.tree:void 0;if(!u)return!1;if(t.storage.kind==="github"&&l&&!l.hasWritePermission&&a!==null&&a!==void 0&&a.value)return n({kind:"needs-fork"}),!1;n({kind:"loading"});const d=t.initialFiles.map(p=>{var g;return((g=Xs(t.storage))!==null&&g!==void 0?g:"")+p}),f=await pA(u,{additions:[],deletions:d});if(await xa(f.entries),t.storage.kind==="github"||t.storage.kind==="cloud"){if(!l)throw new Error("Repo info not loaded");const{error:p}=await s({input:{branch:{repositoryNameWithOwner:`${l.owner}/${l.name}`,branchName:i},message:{headline:`Delete ${t.basePath}`},expectedHeadOid:r,fileChanges:{deletions:d.map(g=>({path:g}))}}});if(p!=null&&p.graphQLErrors.some(g=>"type"in g&&g.type==="FORBIDDEN"&&g.message==="Resource not accessible by integration"))throw new Error(`The GitHub App is unable to commit to the repository. Please ensure that the Keystatic GitHub App is installed in the GitHub repository ${l.owner}/${l.name}`);if(p)throw p;return n({kind:"updated"}),!0}else{const p=await fetch("/api/keystatic/update",{method:"POST",headers:{"Content-Type":"application/json","no-cors":"1"},body:JSON.stringify({additions:[],deletions:d.map(b=>({path:b}))})});if(!p.ok)throw new Error(await p.text());const g=await p.json(),{tree:m}=await xa(g);return o(await Lu(m)),n({kind:"updated"}),!0}}catch(u){n({kind:"error",error:u})}},()=>{n({kind:"idle"})}]}const see=Ht`
  query FetchRef($owner: String!, $name: String!, $ref: String!) {
    repository(owner: $owner, name: $name) {
      id
      ref(qualifiedName: $ref) {
        id
        target {
          id
          oid
        }
      }
    }
  }
`;function nd(t){const e=q(9);let n;e[0]!==t.slugField||e[1]!==t.schema?(n=async f=>{const p=t.slugField?_t({schema:t.schema.fields,slugField:t.slugField},f):void 0,g=Uo(f,t.schema,t.slugField,p,!0);return{slug:p,value:g.value,extraFiles:Object.fromEntries(await Promise.all(g.extraFiles.map(async m=>[JSON.stringify([m.path,m.parent]),await I0(m.contents)])))}},e[0]=t.slugField,e[1]=t.schema,e[2]=n):n=e[2];const r=n;let i;e[3]!==t.initialState||e[4]!==r?(i=()=>t.initialState===null?null:r(t.initialState),e[3]=t.initialState,e[4]=r,e[5]=i):i=e[5];const s=dr(i);let o;e[6]!==r||e[7]!==t.state?(o=()=>r(t.state),e[6]=r,e[7]=t.state,e[8]=o):o=e[8];const l=dr(o);let a;e:{if(s.kind==="loaded"&&l.kind==="loaded"){const f=s.data,p=l.data;a=!VQ(f,p);break e}a="unknown"}const c=a,[u,d]=C.useState(!1);return typeof c=="boolean"&&c!==u&&d(c),u}function B1(t,e){const n=q(14),r=RA();let i,s;n[0]!==t||n[1]!==r.awareness||n[2]!==e?(s=Pr(t,r.awareness,e),n[0]=t,n[1]=r.awareness,n[2]=e,n[3]=s):s=n[3];const o=s;let l;n[4]!==o?(l=()=>s,n[4]=o,n[5]=l):l=n[5];const a=s;let c;n[6]!==a||n[7]!==t||n[8]!==r.awareness||n[9]!==e?(c=f=>{const p=()=>{s=Pr(t,r.awareness,e),f()};return e.observeDeep(p),()=>{e.unobserveDeep(p)}},n[6]=a,n[7]=t,n[8]=r.awareness,n[9]=e,n[10]=c):c=n[10];let u;n[11]!==l||n[12]!==c?(u={getSnapshot:l,subscribe:c},n[11]=l,n[12]=c,n[13]=u):u=n[13],i=u;const d=i;return C.useSyncExternalStore(d.subscribe,d.getSnapshot,d.getSnapshot)}function oee(t,e,n){return t.has(e)||t.set(e,n(e)),t.get(e)}function lee(t,e){if(t.length!==e.length)return;const n=[...t].sort(),r=[...e].sort();if(n.join()!==r.join())return;let i;for(let s=0;s<t.length;s++)if(t[s]!==e[s]){if(i===e[s])continue;if(i!==void 0)return;i=t[s]}return i}function aee(t,e,n){const r={form(u,d){return d},array(u,d){return{rawOnChange:d,inner:new Map,onChange(f){const p=d.yjs(),g=Pr(u,n,p),m=an(p),b=new Set;for(const k of f)if(k.key!==void 0){if(b.has(k.key))throw new Error("Array elements must have unique keys");b.add(k.key)}const y=f.map(k=>{if(k.key!==void 0)return k.key;let E=al();for(;b.has(E);)E=al();return b.add(E),E});vl(p,y);const x=lee(m,y);if(x!==void 0){const k=m.indexOf(x),E=y.indexOf(x);let T=p.get(k);T instanceof Mt&&(T=T.clone()),p.delete(k),p.insert(E,[T]);for(const[N,{value:I}]of f.entries()){const A=m.indexOf(y[N]),O=Fr(u.element,g[A],I);O!==g&&(p.delete(A),p.insert(N,[Mn(u.element,O)]))}return}const v=m.join(),w=y.slice(0,m.length).join();if(v===w){for(const[E,{value:T}]of f.entries()){const N=m.indexOf(y[E]),I=Fr(u.element,g[N],T);I!==g&&(p.delete(N),p.insert(E,[Mn(u.element,I)]))}const k=[];for(const{value:E}of f.slice(m.length))k.push(Mn(u.element,di(u.element,E)));k.length&&p.insert(m.length,k);return}const S=f.map((k,E)=>{const T=y[E],N=m.indexOf(T);if(N!==-1){const I=p.get(N);if(k.value===void 0)return I instanceof Mt?I.clone():I;const A=Fr(u.element,g[N],k.value);return Mn(u.element,A)}return Mn(u.element,di(u.element,k.value))});p.delete(0,p.length),p.insert(0,S)}}},conditional(u,d){return{onChange:(f,p)=>{if(d.yjs().set("discriminant",f),p!==void 0){const g=Pr(u,n,d.yjs().get("value"));d.yjs().set("value",Mn(u,Fr(u.values[f.toString()],g,p)))}},onChangeForValue:Object.assign(f=>{const p=Pr(u,n,d.yjs().get("value"));d.yjs().set("value",Mn(u,f(p)))},{yjs(){return d.yjs().get("value")}})}},object(u,d){return{onChange:f=>{for(const[p,g]of Object.entries(f)){const m=Pr(u.fields[p],n,d.yjs().get(p));d.yjs().set(p,Mn(u.fields[p],Fr(u.fields[p],m,g)))}},innerOnChanges:Object.fromEntries(Object.entries(u.fields).map(([f,p])=>{let g=Object.assign(m=>{d.yjs().set(f,Mn(p,m))},{yjs(){return d.yjs().get(f)}});return[f,g]}))}}},i={form(u,d,f){return{value:d,onChange:f,schema:u}},object(u,d,f,p,g){const m={};for(const y of Object.keys(u.fields))m[y]=g(u.fields[y],d[y],f.innerOnChanges[y],y);return{fields:m,onChange:f.onChange,schema:u}},array(u,d,f,p,g){const m=d,b=an(m),y=new Set(an(d)),x={elements:m.map((v,w)=>{const S=b[w];y.delete(S);const k=oee(f.inner,S,()=>{const T=Object.assign(I=>{const A=f.rawOnChange.yjs(),_=an(A).indexOf(S),F=I(Pr(u,n,A.get(_)));A.delete(_),A.insert(_,[Mn(u.element,F)])},{yjs(){const A=an(f.rawOnChange.yjs()).indexOf(S);return f.rawOnChange.yjs().get(A)}}),N=g(u.element,v,T,S);return{element:N,elementWithKey:{...N,key:S},onChange:T}}),E=g(u.element,v,k.onChange,S);return k.element!==E&&(k.element=E,k.elementWithKey={...E,key:S}),k.elementWithKey}),schema:u,onChange:f.onChange};for(const v of y)f.inner.delete(v);return x},conditional(u,d,f,p,g){return{discriminant:d.discriminant,onChange:f.onChange,value:g(u.values[d.discriminant.toString()],d.value,f.onChangeForValue,"value"),schema:u}}};function s(u,d,f,p,g){return i[u.kind](u,d,f,p,g)}function o(u,d,f,p){const g=new Map,m=r[u.kind](u,f);return{value:d,inner:g,props:s(u,d,m,p,(y,x,v,w)=>{const S=o(y,x,v,p.concat(w));return g.set(w,S),S.props}),schema:u,cached:m}}function l(u,d,f,p,g){if(p.schema!==u)return Object.assign(p,o(u,d,f,g)),p.props;if(p.value===d)return p.props;p.value=d;const m=new Set(p.inner.keys());p.props=s(u,d,p.cached,g,(b,y,x,v)=>{if(m.delete(v),!p.inner.has(v)){const w=o(b,y,x,g.concat(v));return p.inner.set(v,w),w.props}return l(b,y,x,p.inner.get(v),g.concat(v))});for(const b of m)p.inner.delete(b);return p.props}let a;const c=Object.assign(u=>{const d=u(a.value),f=Mn(t,d);for(const[p,g]of f.entries())f.delete(p),e.set(p,g)},{yjs(){return e}});return u=>a===void 0?(a=o(t,u,c,[]),a.props):l(t,u,c,a,[])}function z1(t,e,n){return C.useMemo(()=>Ni(t,e,()=>{}),[t,e])(n)}function V1(t,e,n){const r=RA();return C.useMemo(()=>aee(t,e,r.awareness),[e,t,r.awareness])(n)}function Ha(t){const e=q(5),r=Nt().collections[t];let i,s;e[0]!==r.schema?(s={kind:"object",fields:r.schema},e[0]=r.schema,e[1]=s):s=e[1],i=s;const o=i;let l;return e[2]!==o||e[3]!==r?(l={schema:o,collectionConfig:r},e[2]=o,e[3]=r,e[4]=l):l=e[4],l}function U1(t){const e=q(5),r=Nt().singletons[t];let i,s;e[0]!==r.schema?(s={kind:"object",fields:r.schema},e[0]=r.schema,e[1]=s):s=e[1],i=s;const o=i;let l;return e[2]!==o||e[3]!==r?(l={schema:o,singletonConfig:r},e[2]=o,e[3]=r,e[4]=l):l=e[4],l}class cee extends wi.Component{constructor(e){super(e),this.state={message:null}}static getDerivedStateFromError(e){if(__(e))throw e;return{message:String(e)}}render(){return this.state.message?typeof this.props.fallback=="function"?this.props.fallback(this.state.message):this.props.fallback:this.props.children}}const uee=li({slug:qb(He()),files:AF(He(),gE(Mh(Uint8Array),He(),t=>Xh(t)))}),dee=new TextDecoder;function fee(t,e,n,r){const s=new DOMParser().parseFromString(t,"text/html").querySelector("pre");if(s!=null&&s.dataset.keystaticEntry)try{var o,l;const a=JSON.parse(s.dataset.keystaticEntry),c=uee.create(a),u=new Map(Object.entries(c.files));return dl({dirpath:(o=c.slug)!==null&&o!==void 0?o:"entry",format:e,schema:n,slug:r?{field:r,slug:(l=c.slug)!==null&&l!==void 0?l:""}:void 0,requireFrontmatter:!0},u).initialState}catch{}}function hee(t,e,n,r){try{var i;const s=(i=r?.slug)!==null&&i!==void 0?i:"entry";return dl({dirpath:s,format:e,schema:n,slug:r,requireFrontmatter:!0},new Map([[Fa(s,e),t]])).initialState}catch{}}async function q1(t,e,n){let r;try{r=await navigator.clipboard.read()}catch(i){if(i instanceof DOMException&&i.name==="NotAllowedError"){qi.critical("Failed to paste because clipboard access was denied",{timeout:5e3});return}qi.critical("Failed to read clipboard",{timeout:5e3});return}for(const i of r){if(i.types.includes("text/html")){const o=await(await i.getType("text/html")).text(),l=fee(o,t,e,n?.field);if(l)return l}if(i.types.includes("text/plain")){const o=await(await i.getType("text/plain")).arrayBuffer(),l=hee(new Uint8Array(o),t,e,n);if(l)return l}}qi.critical("Entry not found in clipboard",{timeout:5e3})}function pee(t,e,n,r){var i;const s=(i=r?.value)!==null&&i!==void 0?i:"entry",o=td({basePath:s,format:e,schema:n,slug:r,state:t}),l=document.createElement("pre");l.dataset.keystaticEntry=JSON.stringify({slug:r?.value,files:Object.fromEntries(o.map(d=>[d.path,Fo(d.contents)]))});const a=Fa(s,e),c=o.find(d=>d.path===a);if(!c)throw new Error("No main entry file found");const u=dee.decode(c.contents);return l.textContent=u,{html:l.outerHTML,plain:u}}function H1(t,e,n,r){const i=pee(t,e,n,r);navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([i.plain],{type:"text/plain"}),"text/html":new Blob([i.html],{type:"text/html"})})])}const gee=li({version:Vb(1),savedAt:Dh(),slug:He(),beforeTreeKey:He(),files:Ub(He(),Mh(Uint8Array))});function z_(t){var e,n;const r=q(115),{collection:i,config:s,itemSlug:o,updateResult:l,onUpdate:a}=t,{collectionConfig:c,schema:u}=Ha(i),d=ft(),f=ml();let p;r[0]!==s||r[1]!==i||r[2]!==o?(p=$n(s,i,o),r[0]=s,r[1]=i,r[2]=o,r[3]=p):p=r[3];const g=p;let m;r[4]!==s||r[5]!==i?(m=Ir(s,i),r[4]=s,r[5]=i,r[6]=m):m=r[6];const b=m,y=bn(),x=jr(),[v,w]=C.useState(!1);let S;r[7]!==c.previewUrl||r[8]!==t||r[9]!==y?(S=c.previewUrl?c.previewUrl.replace("{slug}",t.itemSlug).replace("{branch}",y):void 0,r[7]=c.previewUrl,r[8]=t,r[9]=y,r[10]=S):S=r[10];const k=S,{push:E,replace:T}=d,N=P_(i,o);let I;r[11]!==t.initialFiles||r[12]!==s.storage||r[13]!==g?(I={initialFiles:t.initialFiles,storage:s.storage,basePath:g},r[11]=t.initialFiles,r[12]=s.storage,r[13]=g,r[14]=I):I=r[14];const[A,O,_]=iee(I);let F;r[15]!==O||r[16]!==E||r[17]!==t.basePath||r[18]!==i?(F=async()=>{await O()&&E(`${t.basePath}/collection/${encodeURIComponent(i)}`)},r[15]=O,r[16]=E,r[17]=t.basePath,r[18]=i,r[19]=F):F=r[19];const M=Ln(F);let P;r[20]!==E||r[21]!==t.basePath||r[22]!==i||r[23]!==o?(P=()=>{E(`${t.basePath}/collection/${encodeURIComponent(i)}/create?duplicate=${o}`)},r[20]=E,r[21]=t.basePath,r[22]=i,r[23]=o,r[24]=P):P=r[24];const B=P,z=l.kind==="loading"||!t.hasChanged;let U;r[25]!==z||r[26]!==u||r[27]!==t.state||r[28]!==t.basePath||r[29]!==N||r[30]!==c||r[31]!==a||r[32]!==o||r[33]!==T||r[34]!==i?(U=async()=>{if(z)return!1;if(!Jr(u,t.state,N))return w(!0),!1;const Ze=_t(c,t.state),kt=await a();return kt&&Ze!==o&&T(`${t.basePath}/collection/${encodeURIComponent(i)}/item/${encodeURIComponent(Ze)}`),kt},r[25]=z,r[26]=u,r[27]=t.state,r[28]=t.basePath,r[29]=N,r[30]=c,r[31]=a,r[32]=o,r[33]=T,r[34]=i,r[35]=U):U=r[35];const R=Ln(U);let J;r[36]!==t.state||r[37]!==b||r[38]!==c?(J=()=>{H1(t.state,b,c.schema,{field:c.slugField,value:_t(c,t.state)})},r[36]=t.state,r[37]=b,r[38]=c,r[39]=J):J=r[39];const Z=Ln(J);let D;r[40]!==b||r[41]!==c||r[42]!==t.state||r[43]!==t.previewProps?(D=async()=>{const Ze=await q1(b,c.schema,{field:c.slugField,slug:_t(c,t.state)});Ze&&(cl(Ze,t.previewProps),qi.positive("Entry pasted",{shouldCloseOnAction:!0,actionLabel:"Undo",onAction:()=>{cl(t.state,t.previewProps)}}))},r[40]=b,r[41]=c,r[42]=t.state,r[43]=t.previewProps,r[44]=D):D=r[44];const ie=Ln(D),oe=s.storage.kind!=="local"&&x?`${ru(x)}${b.dataLocation==="index"?`/tree/${y}/${(e=Xs(s.storage))!==null&&e!==void 0?e:""}${g}`:`/blob/${y}/${(n=Xs(s.storage))!==null&&n!==void 0?n:""}${g}${$u(b)}`}`:void 0;let re,me;r[45]!==l.kind||r[46]!==R?(re=()=>{const Ze=kt=>{l.kind!=="loading"&&$l.isHotkey("mod+s",kt)&&(kt.preventDefault(),R())};return document.addEventListener("keydown",Ze),()=>document.removeEventListener("keydown",Ze)},me=[l.kind,R],r[45]=l.kind,r[46]=R,r[47]=re,r[48]=me):(re=r[47],me=r[48]),C.useEffect(re,me);const ee=l.kind==="loading";let we;r[49]!==ee||r[50]!==t.hasChanged||r[51]!==t.onReset||r[52]!==M||r[53]!==B||r[54]!==Z||r[55]!==ie||r[56]!==oe||r[57]!==k?(we=h.jsx(bee,{formID:"item-edit-form",isLoading:ee,hasChanged:t.hasChanged,onDelete:M,onDuplicate:B,onCopy:Z,onPaste:ie,onReset:t.onReset,viewHref:oe,previewHref:k}),r[49]=ee,r[50]=t.hasChanged,r[51]=t.onReset,r[52]=M,r[53]=B,r[54]=Z,r[55]=ie,r[56]=oe,r[57]=k,r[58]=we):we=r[58];let ve;r[59]!==l?(ve=l.kind==="error"&&h.jsx(ar,{tone:"critical",children:l.error.message}),r[59]=l,r[60]=ve):ve=r[60];let Ae;r[61]!==A?(Ae=A.kind==="error"&&h.jsx(ar,{tone:"critical",children:A.error.message}),r[61]=A,r[62]=Ae):Ae=r[62];let Oe;r[63]!==R?(Oe=Ze=>{Ze.target===Ze.currentTarget&&(Ze.preventDefault(),R())},r[63]=R,r[64]=Oe):Oe=r[64];const ze=t.previewProps;let Me;r[65]!==ze||r[66]!==v||r[67]!==c.entryLayout||r[68]!==b||r[69]!==N?(Me=h.jsx(h1,{previewProps:ze,forceValidation:v,entryLayout:c.entryLayout,formatInfo:b,slugField:N}),r[65]=ze,r[66]=v,r[67]=c.entryLayout,r[68]=b,r[69]=N,r[70]=Me):Me=r[70];let Le;r[71]!==Oe||r[72]!==Me?(Le=h.jsx(zt,{id:"item-edit-form",height:"100%",minHeight:0,minWidth:0,elementType:"form",onSubmit:Oe,children:Me}),r[71]=Oe,r[72]=Me,r[73]=Le):Le=r[73];let be;r[74]!==l||r[75]!==i||r[76]!==d||r[77]!==o||r[78]!==c||r[79]!==t||r[80]!==a||r[81]!==f?(be=l.kind==="needs-new-branch"&&h.jsx(W1,{branchOid:f,onCreate:async Ze=>{const kt=`/keystatic/branch/${encodeURIComponent(Ze)}/collection/${encodeURIComponent(i)}/item/`;d.push(kt+encodeURIComponent(o));const cs=_t(c,t.state);await a({branch:Ze,sha:f})&&cs!==o&&d.replace(kt+encodeURIComponent(cs))},reason:l.reason,onDismiss:t.onResetUpdateItem}),r[74]=l,r[75]=i,r[76]=d,r[77]=o,r[78]=c,r[79]=t,r[80]=a,r[81]=f,r[82]=be):be=r[82];let rt;r[83]!==t.onResetUpdateItem||r[84]!==be?(rt=h.jsx(dt,{onDismiss:t.onResetUpdateItem,children:be}),r[83]=t.onResetUpdateItem,r[84]=be,r[85]=rt):rt=r[85];let jt;r[86]!==l.kind||r[87]!==t||r[88]!==c||r[89]!==o||r[90]!==d||r[91]!==i?(jt=l.kind==="needs-fork"&&bi(t.config)&&h.jsx(wh,{onCreate:async()=>{const Ze=_t(c,t.state);await t.onUpdate()&&Ze!==o&&d.replace(`${t.basePath}/collection/${encodeURIComponent(i)}/item/${encodeURIComponent(Ze)}`)},onDismiss:t.onResetUpdateItem,config:t.config}),r[86]=l.kind,r[87]=t,r[88]=c,r[89]=o,r[90]=d,r[91]=i,r[92]=jt):jt=r[92];let ot;r[93]!==t.onResetUpdateItem||r[94]!==jt?(ot=h.jsx(dt,{onDismiss:t.onResetUpdateItem,children:jt}),r[93]=t.onResetUpdateItem,r[94]=jt,r[95]=ot):ot=r[95];let Ft;r[96]!==A.kind||r[97]!==t||r[98]!==O||r[99]!==d||r[100]!==i||r[101]!==_?(Ft=A.kind==="needs-fork"&&bi(t.config)&&h.jsx(wh,{onCreate:async()=>{await O(),d.push(`${t.basePath}/collection/${encodeURIComponent(i)}`)},onDismiss:_,config:t.config}),r[96]=A.kind,r[97]=t,r[98]=O,r[99]=d,r[100]=i,r[101]=_,r[102]=Ft):Ft=r[102];let se;r[103]!==_||r[104]!==Ft?(se=h.jsx(dt,{onDismiss:_,children:Ft}),r[103]=_,r[104]=Ft,r[105]=se):se=r[105];let pe;return r[106]!==we||r[107]!==t||r[108]!==ve||r[109]!==Ae||r[110]!==Le||r[111]!==rt||r[112]!==ot||r[113]!==se?(pe=h.jsx(h.Fragment,{children:h.jsxs(uf,{headerActions:we,...t,children:[ve,Ae,Le,rt,ot,se]})}),r[106]=we,r[107]=t,r[108]=ve,r[109]=Ae,r[110]=Le,r[111]=rt,r[112]=ot,r[113]=se,r[114]=pe):pe=r[114],pe}function mee(t){var e;const n=q(64),{collection:r,config:i,initialFiles:s,initialState:o,localTreeKey:l,draft:a}=t,{collectionConfig:c,schema:u}=Ha(r),d=(e=a?.state)!==null&&e!==void 0?e:o;let f;n[0]!==d||n[1]!==l?(f={state:d,localTreeKey:l},n[0]=d,n[1]=l,n[2]=f):f=n[2];const[p,g]=C.useState(f),{state:m,localTreeKey:b}=p;O0(a,m,l),b!==l&&g({state:o,localTreeKey:l});let y;n[3]===Symbol.for("react.memo_cache_sentinel")?(y=J=>{g(Z=>({localTreeKey:Z.localTreeKey,state:J(Z.state)}))},n[3]=y):y=n[3];const v=z1(u,y,m);let w;n[4]!==o||n[5]!==u||n[6]!==m||n[7]!==c.slugField?(w={initialState:o,schema:u,state:m,slugField:c.slugField},n[4]=o,n[5]=u,n[6]=m,n[7]=c.slugField,n[8]=w):w=n[8];const S=nd(w);let k,E,T;if(n[9]!==c||n[10]!==m||n[11]!==i||n[12]!==r){E=_t(c,m);let J;n[16]!==i||n[17]!==r?(J=Ir(i,r),n[16]=i,n[17]=r,n[18]=J):J=n[18],T=J,k=$n(i,r,E),n[9]=c,n[10]=m,n[11]=i,n[12]=r,n[13]=k,n[14]=E,n[15]=T}else k=n[13],E=n[14],T=n[15];const N=k;let I;n[19]!==c.slugField||n[20]!==E?(I={field:c.slugField,value:E},n[19]=c.slugField,n[20]=E,n[21]=I):I=n[21];let A;n[22]!==m||n[23]!==s||n[24]!==i||n[25]!==c.schema||n[26]!==N||n[27]!==T||n[28]!==l||n[29]!==I?(A={state:m,initialFiles:s,config:i,schema:c.schema,basePath:N,format:T,currentLocalTreeKey:l,slug:I},n[22]=m,n[23]=s,n[24]=i,n[25]=c.schema,n[26]=N,n[27]=T,n[28]=l,n[29]=I,n[30]=A):A=n[30];const[O,_,F]=qa(A);let M;n[31]!==r||n[32]!==t.itemSlug||n[33]!==S||n[34]!==N||n[35]!==i||n[36]!==c.schema||n[37]!==c.slugField||n[38]!==E||n[39]!==m||n[40]!==l?(M=()=>{const J=["collection",r,t.itemSlug];if(S){const Z=td({basePath:N,format:Ir(i,r),schema:c.schema,slug:{field:c.slugField,value:E},state:m}),D=new Map(Z.map(oe=>[oe.path,oe.contents]));T0(J,{beforeTreeKey:l,slug:E,files:D,savedAt:new Date,version:1})}else N0(J)},n[31]=r,n[32]=t.itemSlug,n[33]=S,n[34]=N,n[35]=i,n[36]=c.schema,n[37]=c.slugField,n[38]=E,n[39]=m,n[40]=l,n[41]=M):M=n[41];let P;n[42]!==r||n[43]!==c||n[44]!==i||n[45]!==N||n[46]!==l||n[47]!==t.itemSlug||n[48]!==E||n[49]!==m||n[50]!==S?(P=[r,c,i,N,l,t.itemSlug,E,m,S],n[42]=r,n[43]=c,n[44]=i,n[45]=N,n[46]=l,n[47]=t.itemSlug,n[48]=E,n[49]=m,n[50]=S,n[51]=P):P=n[51],C.useEffect(M,P);const B=Ln(_);let z;n[52]!==o||n[53]!==l?(z=()=>{g({state:o,localTreeKey:l})},n[52]=o,n[53]=l,n[54]=z):z=n[54];const U=z;let R;return n[55]!==t||n[56]!==B||n[57]!==U||n[58]!==O||n[59]!==F||n[60]!==v||n[61]!==m||n[62]!==S?(R=h.jsx(z_,{...t,onUpdate:B,onReset:U,updateResult:O,onResetUpdateItem:F,previewProps:v,state:m,hasChanged:S}),n[55]=t,n[56]=B,n[57]=U,n[58]=O,n[59]=F,n[60]=v,n[61]=m,n[62]=S,n[63]=R):R=n[63],R}function yee(t){const e=q(33),{collection:n,config:r,initialFiles:i,initialState:s,localTreeKey:o}=t,{collectionConfig:l,schema:a}=Ha(n),c=B1(a,t.map),u=V1(a,t.map,c),d=_t(l,c);let f;e[0]!==t.config||e[1]!==t.collection?(f=Ir(t.config,t.collection),e[0]=t.config,e[1]=t.collection,e[2]=f):f=e[2];const p=f;let g;e[3]!==s||e[4]!==a||e[5]!==c||e[6]!==l.slugField?(g={initialState:s,schema:a,state:c,slugField:l.slugField},e[3]=s,e[4]=a,e[5]=c,e[6]=l.slugField,e[7]=g):g=e[7];const m=nd(g),b=$n(r,n,d);let y;e[8]!==l.slugField||e[9]!==d?(y={field:l.slugField,value:d},e[8]=l.slugField,e[9]=d,e[10]=y):y=e[10];let x;e[11]!==c||e[12]!==i||e[13]!==r||e[14]!==l.schema||e[15]!==b||e[16]!==p||e[17]!==o||e[18]!==y?(x={state:c,initialFiles:i,config:r,schema:l.schema,basePath:b,format:p,currentLocalTreeKey:o,slug:y},e[11]=c,e[12]=i,e[13]=r,e[14]=l.schema,e[15]=b,e[16]=p,e[17]=o,e[18]=y,e[19]=x):x=e[19];const[v,w,S]=qa(x),k=Ln(w);let E;e[20]!==t.map||e[21]!==t.initialState||e[22]!==l.schema?(E=()=>{var I;(I=t.map.doc)===null||I===void 0||I.transact(()=>{for(const[A,O]of Object.entries(l.schema)){const _=Xi(O,t.initialState[A]);t.map.set(A,_)}})},e[20]=t.map,e[21]=t.initialState,e[22]=l.schema,e[23]=E):E=e[23];const T=E;let N;return e[24]!==t||e[25]!==k||e[26]!==T||e[27]!==v||e[28]!==S||e[29]!==u||e[30]!==c||e[31]!==m?(N=h.jsx(z_,{...t,onUpdate:k,onReset:T,updateResult:v,onResetUpdateItem:S,previewProps:u,state:c,hasChanged:m}),e[24]=t,e[25]=k,e[26]=T,e[27]=v,e[28]=S,e[29]=u,e[30]=c,e[31]=m,e[32]=N):N=e[32],N}function bee(t){const e=q(55),{formID:n,hasChanged:r,isLoading:i,onDelete:s,onDuplicate:o,onReset:l,onCopy:a,onPaste:c,previewHref:u,viewHref:d}=t,f=hl(dn.below.desktop),p=Be(et),[g,m]=C.useState(!1),[b,y]=C.useState(!1);let x,v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v={key:"reset",label:"Reset changes",icon:j1},e[0]=v):v=e[0];let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w={key:"delete",label:"Delete entry…",icon:un},e[1]=w):w=e[1];let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S={key:"copy",label:"Copy entry",icon:_1},e[2]=S):S=e[2];let k;e[3]===Symbol.for("react.memo_cache_sentinel")?(k={key:"paste",label:"Paste entry",icon:O1},e[3]=k):k=e[3];let E;e[4]===Symbol.for("react.memo_cache_sentinel")?(E={key:"duplicate",label:"Duplicate entry…",icon:oQ},e[4]=E):E=e[4];let T;if(e[5]!==u||e[6]!==d){if(T=[v,w,S,k,E],u){let ee;e[8]!==u?(ee={key:"preview",label:"Preview",icon:dp,href:u,target:"_blank",rel:"noopener noreferrer"},e[8]=u,e[9]=ee):ee=e[9],T.push(ee)}if(d){let ee;e[10]!==d?(ee={key:"view",label:"View on GitHub",icon:Th,href:d,target:"_blank",rel:"noopener noreferrer"},e[10]=d,e[11]=ee):ee=e[11],T.push(ee)}e[5]=u,e[6]=d,e[7]=T}else T=e[7];x=T;const N=x;let I;e:{if(i){let ee;e[12]===Symbol.for("react.memo_cache_sentinel")?(ee=h.jsx(Tr,{"aria-label":"Saving changes",isIndeterminate:!0,size:"small",alignSelf:"center"}),e[12]=ee):ee=e[12],I=ee;break e}if(r){let ee;e[13]!==f?(ee=f?h.jsx(zt,{backgroundColor:"pendingEmphasis",height:"scale.75",width:"scale.75",borderRadius:"full",children:h.jsx(Y,{visuallyHidden:!0,children:"Unsaved"})}):h.jsx(cu,{tone:"pending",children:"Unsaved"}),e[13]=f,e[14]=ee):ee=e[14],I=ee;break e}I=null}const A=I;let O;e[15]===Symbol.for("react.memo_cache_sentinel")?(O={mobile:"small",tablet:"regular"},e[15]=O):O=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=h.jsx(L1,{}),e[16]=_):_=e[16];const F=f?"element.regular":void 0;let M;e[17]!==r?(M=r?[]:["reset"],e[17]=r,e[18]=M):M=e[18];let P;e[19]!==l||e[20]!==a||e[21]!==c||e[22]!==r||e[23]!==o?(P=ee=>{e:switch(ee){case"reset":{l();break e}case"delete":{m(!0);break e}case"copy":{a();break e}case"paste":{c();break e}case"duplicate":r?y(!0):o()}},e[19]=l,e[20]=a,e[21]=c,e[22]=r,e[23]=o,e[24]=P):P=e[24];let B;e[25]===Symbol.for("react.memo_cache_sentinel")?(B=ee=>h.jsxs(Je,{textValue:ee.label,href:ee.href,target:ee.target,rel:ee.rel,children:[h.jsx(X,{src:ee.icon}),h.jsx(Y,{children:ee.label})]},ee.key),e[25]=B):B=e[25];let z;e[26]!==F||e[27]!==N||e[28]!==M||e[29]!==P?(z=h.jsx(Ia,{buttonLabelBehavior:"hide",overflowMode:"collapse",prominence:"low",density:"compact",maxWidth:F,items:N,disabledKeys:M,onAction:P,children:B}),e[26]=F,e[27]=N,e[28]=M,e[29]=P,e[30]=z):z=e[30];let U;e[31]!==p?(U=p.format("save"),e[31]=p,e[32]=U):U=e[32];let R;e[33]!==n||e[34]!==i||e[35]!==U?(R=h.jsx(Re,{form:n,isDisabled:i,prominence:"high",type:"submit",children:U}),e[33]=n,e[34]=i,e[35]=U,e[36]=R):R=e[36];let J;e[37]===Symbol.for("react.memo_cache_sentinel")?(J=()=>m(!1),e[37]=J):J=e[37];let Z;e[38]!==g||e[39]!==s?(Z=g&&h.jsx(Am,{title:"Delete entry",tone:"critical",cancelLabel:"Cancel",primaryActionLabel:"Yes, delete",autoFocusButton:"cancel",onPrimaryAction:s,children:"Are you sure? This action cannot be undone."}),e[38]=g,e[39]=s,e[40]=Z):Z=e[40];let D;e[41]!==Z?(D=h.jsx(dt,{onDismiss:J,children:Z}),e[41]=Z,e[42]=D):D=e[42];let ie;e[43]===Symbol.for("react.memo_cache_sentinel")?(ie=()=>y(!1),e[43]=ie):ie=e[43];let oe;e[44]!==b||e[45]!==o?(oe=b&&h.jsx(Am,{title:"Save and duplicate entry",tone:"neutral",cancelLabel:"Cancel",primaryActionLabel:"Save and duplicate",autoFocusButton:"primary",onPrimaryAction:o,children:"You have unsaved changes. Save this entry to duplicate it."}),e[44]=b,e[45]=o,e[46]=oe):oe=e[46];let re;e[47]!==oe?(re=h.jsx(dt,{onDismiss:ie,children:oe}),e[47]=oe,e[48]=re):re=e[48];let me;return e[49]!==A||e[50]!==z||e[51]!==R||e[52]!==D||e[53]!==re?(me=h.jsxs(te,{alignItems:"center",gap:O,children:[_,A,z,R,D,re]}),e[49]=A,e[50]=z,e[51]=R,e[52]=D,e[53]=re,e[54]=me):me=e[54],me}function W1(t){var e;const n=q(41),r=Be(et),i=jr(),[s,o]=C.useState(""),[l,a]=fj(),{error:c,fetching:u,data:d}=l,f=u||!!(d!=null&&(e=d.createRef)!==null&&e!==void 0&&e.__typename),p=Nt();let g;n[0]!==p?(g=_0(p),n[0]=p,n[1]=g):g=n[1];const m=g;let b;n[2]!==m?(b=m?{UNSAFE_className:W({"& input":{paddingInlineStart:j.size.space.xsmall}}),startElement:h.jsx(te,{alignItems:"center",paddingStart:"regular",justifyContent:"center",pointerEvents:"none",children:h.jsx(Y,{color:"neutralSecondary",children:m})})}:{},n[2]=m,n[3]=b):b=n[3];const y=b;let x;n[4]===Symbol.for("react.memo_cache_sentinel")?(x={display:"contents"},n[4]=x):x=n[4];let v;n[5]!==m||n[6]!==s||n[7]!==a||n[8]!==t||n[9]!==i?(v=async F=>{var M;if(F.target!==F.currentTarget)return;F.preventDefault();const P=(m??"")+s,B=`refs/heads/${P}`;(M=(await a({input:{name:B,oid:t.branchOid,repositoryId:i.id}})).data)!==null&&M!==void 0&&(M=M.createRef)!==null&&M!==void 0&&M.__typename&&t.onCreate(P)},n[5]=m,n[6]=s,n[7]=a,n[8]=t,n[9]=i,n[10]=v):v=n[10];let w;n[11]!==r?(w=r.format("newBranch"),n[11]=r,n[12]=w):w=n[12];let S;n[13]!==w?(S=h.jsx(nt,{children:w}),n[13]=w,n[14]=S):S=n[14];let k;n[15]!==c?(k=Uy(c),n[15]=c,n[16]=k):k=n[16];let E;n[17]!==s||n[18]!==t.reason||n[19]!==k||n[20]!==y?(E=h.jsx(gn,{children:h.jsx(te,{gap:"large",direction:"column",children:h.jsx(gt,{value:s,onChange:o,label:"Branch name",description:t.reason,autoFocus:!0,errorMessage:k,...y})})}),n[17]=s,n[18]=t.reason,n[19]=k,n[20]=y,n[21]=E):E=n[21];let T;n[22]!==f?(T=f&&h.jsx(Tr,{isIndeterminate:!0,size:"small","aria-label":"Creating Branch"}),n[22]=f,n[23]=T):T=n[23];let N;n[24]!==r?(N=r.format("cancel"),n[24]=r,n[25]=N):N=n[25];let I;n[26]!==f||n[27]!==t.onDismiss||n[28]!==N?(I=h.jsx(Re,{isDisabled:f,onPress:t.onDismiss,children:N}),n[26]=f,n[27]=t.onDismiss,n[28]=N,n[29]=I):I=n[29];let A;n[30]!==f?(A=h.jsx(Re,{isDisabled:f,prominence:"high",type:"submit",children:"Create branch and save"}),n[30]=f,n[31]=A):A=n[31];let O;n[32]!==T||n[33]!==I||n[34]!==A?(O=h.jsxs(mn,{children:[T,I,A]}),n[32]=T,n[33]=I,n[34]=A,n[35]=O):O=n[35];let _;return n[36]!==v||n[37]!==S||n[38]!==E||n[39]!==O?(_=h.jsx(nn,{children:h.jsxs("form",{style:x,onSubmit:v,children:[S,E,O]})}),n[36]=v,n[37]=S,n[38]=E,n[39]=O,n[40]=_):_=n[40],_}function xee(t){var e;const n=(e=t.config.collections)===null||e===void 0?void 0:e[t.collection];n||Ua();const r=C.useMemo(()=>Ir(t.config,t.collection),[t.config,t.collection]),i=C.useMemo(()=>({slug:t.itemSlug,field:n.slugField}),[n.slugField,t.itemSlug]),s=dr(C.useCallback(async()=>{try{const p=await j0(["collection",t.collection,t.itemSlug]);if(!p)throw new Error("No draft found");const g=gee.create(p);return{state:dl({dirpath:$n(t.config,t.collection,g.slug),format:Ir(t.config,t.collection),schema:n.schema,slug:{field:n.slugField,slug:g.slug}},g.files).initialState,savedAt:g.savedAt,treeKey:g.beforeTreeKey}}catch{}},[n,t.collection,t.config,t.itemSlug])),o=$1({config:t.config,dirpath:$n(t.config,t.collection,t.itemSlug),schema:n.schema,format:r,slug:i}),a=`${bn()}/${t.collection}/item/${t.itemSlug}`,c=op(),u=o.kind!=="loaded",d=!u&&o.data==="not-found",f=dr(C.useCallback(()=>{if(c){if(c==="loading"||u)return xr;if(!d)return(async()=>{await c.doc.whenSynced;let p=c.data.get(a);if(p instanceof Wn){const m=p.whenLoaded;p.load(),await m}else p=new Wn,c.data.set(a,p);return p.getMap("data")})()}},[u,d,a,c]));return h.jsx(O_,{fallback:h.jsx(uf,{...t,children:h.jsx(ui,{children:h.jsx(ar,{tone:"caution",children:"Entry not found."})})}),children:h.jsx(cee,{fallback:p=>h.jsx(uf,{...t,children:h.jsx(ui,{children:h.jsx(ar,{tone:"critical",children:p})})}),children:h.jsx(C.Suspense,{fallback:h.jsx(uf,{...t,children:h.jsx(te,{alignItems:"center",justifyContent:"center",minHeight:"scale.3000",children:h.jsx(Tr,{"aria-label":"Loading Item",isIndeterminate:!0,size:"large"})})}),children:h.jsx(vee,{mapData:f,draftData:s,itemData:o,...t})})})})}function vee(t){const e=xA(t.config,t.collection),n=C.useDeferredValue(t.draftData),r=jg(t.itemData);r==="not-found"&&Ua();const i=jg(t.mapData);C.useMemo(()=>{var o;if(!i||i.size)return;const{initialState:l}=r;(o=i.doc)===null||o===void 0||o.transact(()=>{for(const[a,c]of Object.entries(e.schema)){const u=Xi(c,l[a]);i.set(a,u)}})},[e.schema,r,i]);const s=jg(n);return i?h.jsx(yee,{collection:t.collection,basePath:t.basePath,config:t.config,itemSlug:t.itemSlug,initialState:r.initialState,initialFiles:r.initialFiles,localTreeKey:r.localTreeKey,map:i}):h.jsx(mee,{collection:t.collection,basePath:t.basePath,config:t.config,itemSlug:t.itemSlug,initialState:r.initialState,initialFiles:r.initialFiles,draft:s,localTreeKey:r.localTreeKey})}function uf(t){const e=q(17);let n,r,i;if(e[0]!==t.config||e[1]!==t.collection||e[2]!==t.basePath||e[3]!==t.itemSlug){const a=xA(t.config,t.collection),c=`${t.basePath}/collection/${t.collection}`;n=[{key:"collection",label:a.label,href:c},{key:"item",label:t.itemSlug}],r=Yi,i=f1(a),e[0]=t.config,e[1]=t.collection,e[2]=t.basePath,e[3]=t.itemSlug,e[4]=n,e[5]=r,e[6]=i}else n=e[4],r=e[5],i=e[6];let s;e[7]!==n?(s=h.jsx(F_,{items:n}),e[7]=n,e[8]=s):s=e[8];let o;e[9]!==s||e[10]!==t.headerActions?(o=h.jsxs(za,{children:[s,t.headerActions]}),e[9]=s,e[10]=t.headerActions,e[11]=o):o=e[11];let l;return e[12]!==r||e[13]!==i||e[14]!==o||e[15]!==t.children?(l=h.jsxs(r,{containerWidth:i,children:[o,t.children]}),e[12]=r,e[13]=i,e[14]=o,e[15]=t.children,e[16]=l):l=e[16],l}function kee(t,e){return C.useMemo(()=>{if(t){const{slugField:n}=e,r=t[e.slugField],i=e.schema[e.slugField];if(i.kind==="form"&&i.formKind==="slug")try{const s=i.serializeWithSlug(r),o=i.parse(s.value,{slug:s.slug?`${s.slug}-copy`:""});return{...t,[n]:o}}catch{}return{...t,[n]:r}}},[e,t])}function wee(t){var e;const n=q(53),r=ft();let i,s;n[0]!==r.href?(s=new URL(r.href,"http://localhost").searchParams.get("duplicate"),n[0]=r.href,n[1]=s):s=n[1],i=s;const o=i,l=(e=t.config.collections)===null||e===void 0?void 0:e[t.collection];l||Ua();let a,c;n[2]!==t.config||n[3]!==t.collection?(c=Ir(t.config,t.collection),n[2]=t.config,n[3]=t.collection,n[4]=c):c=n[4],a=c;const u=a;let d;n[5]!==t.collection||n[6]!==t.config||n[7]!==o||n[8]!==u||n[9]!==l.schema||n[10]!==l.slugField?(d=async()=>{const A=await j0(["collection-create",t.collection,...o?[o]:[]]);if(!A)throw new Error("No draft found");const O=See.create(A);return{state:dl({dirpath:$n(t.config,t.collection,O.slug),format:u,schema:l.schema,slug:{field:l.slugField,slug:O.slug}},O.files).initialState,savedAt:O.savedAt}},n[5]=t.collection,n[6]=t.config,n[7]=o,n[8]=u,n[9]=l.schema,n[10]=l.slugField,n[11]=d):d=n[11];const f=dr(d);let p;e:{if(o){let A;n[12]!==l.slugField||n[13]!==o?(A={field:l.slugField,slug:o},n[12]=l.slugField,n[13]=o,n[14]=A):A=n[14],p=A;break e}if(l.template){let A;n[15]!==l.slugField?(A={field:l.slugField,slug:""},n[15]=l.slugField,n[16]=A):A=n[16],p=A;break e}p=void 0}const g=p,m=!!o||!!l.template;let b;n[17]!==l.template||n[18]!==o||n[19]!==t?(b=l.template&&!o?l.template:$n(t.config,t.collection,o??""),n[17]=l.template,n[18]=o,n[19]=t,n[20]=b):b=n[20];let y;n[21]!==t.config||n[22]!==b||n[23]!==l.schema||n[24]!==u||n[25]!==g?(y={config:t.config,dirpath:b,schema:l.schema,format:u,slug:g},n[21]=t.config,n[22]=b,n[23]=l.schema,n[24]=u,n[25]=g,n[26]=y):y=n[26];const x=$1(y),v=m&&x.kind==="loaded"&&x.data!=="not-found"?x.data.initialState:void 0,w=kee(v,l),S=bn(),k=op(),E=`${S}/${t.collection}/create${o!=null&&o.length?`?duplicate=${o}`:""}`;let T;n[27]!==k||n[28]!==m||n[29]!==v||n[30]!==E||n[31]!==l.schema?(T=async()=>{if(!k)return;if(k==="loading"||(await k.doc.whenSynced,m&&!v))return xr;let A=k.data.get(E);if(A instanceof Wn){const _=A.whenLoaded;A.load(),await _}else A=new Wn,k.data.set(E,A);const O=A.getMap("data");return O.size||A.transact(()=>{for(const[F,M]of Object.entries(l.schema)){var _;const P=Xi(M,(_=v?.[F])!==null&&_!==void 0?_:lt(M));O.set(F,P)}}),O},n[27]=k,n[28]=m,n[29]=v,n[30]=E,n[31]=l.schema,n[32]=T):T=n[32];const N=dr(T);if(m&&x.kind==="error"){let A;return n[33]!==x.error.message?(A=h.jsx(ui,{children:h.jsx(ar,{tone:"critical",children:x.error.message})}),n[33]=x.error.message,n[34]=A):A=n[34],A}if(N.kind==="error"){console.log(N.error);let A;return n[35]!==N.error.message?(A=h.jsx(ui,{children:h.jsx(ar,{tone:"critical",children:N.error.message})}),n[35]=N.error.message,n[36]=A):A=n[36],A}if(m&&x.kind==="loading"||f.kind==="loading"||N.kind==="loading"){let A;return n[37]===Symbol.for("react.memo_cache_sentinel")?(A=h.jsx(te,{alignItems:"center",justifyContent:"center",minHeight:"scale.3000",children:h.jsx(Tr,{"aria-label":"Loading Item",isIndeterminate:!0,size:"large"})}),n[37]=A):A=n[37],A}if(m&&x.kind==="loaded"&&x.data==="not-found"){let A;return n[38]===Symbol.for("react.memo_cache_sentinel")?(A=h.jsx(ui,{children:h.jsx(ar,{tone:"caution",children:"Entry not found."})}),n[38]=A):A=n[38],A}if(!N.data){const A=f.kind==="loaded"?f.data:void 0;let O;return n[39]!==t.collection||n[40]!==t.config||n[41]!==t.basePath||n[42]!==A||n[43]!==o||n[44]!==w?(O=h.jsx(Cee,{collection:t.collection,config:t.config,basePath:t.basePath,draft:A,duplicateSlug:o,initialState:w}),n[39]=t.collection,n[40]=t.config,n[41]=t.basePath,n[42]=A,n[43]=o,n[44]=w,n[45]=O):O=n[45],O}let I;return n[46]!==t.collection||n[47]!==t.config||n[48]!==t.basePath||n[49]!==o||n[50]!==w||n[51]!==N.data?(I=h.jsx(Eee,{collection:t.collection,config:t.config,basePath:t.basePath,duplicateSlug:o,initialState:w,map:N.data}),n[46]=t.collection,n[47]=t.config,n[48]=t.basePath,n[49]=o,n[50]=w,n[51]=N.data,n[52]=I):I=n[52],I}const See=li({version:Vb(1),savedAt:Dh(),slug:He(),files:Ub(He(),Mh(Uint8Array))});function Cee(t){var e,n;const r=q(61),{collectionConfig:i,schema:s}=Ha(t.collection);let o,l;if(r[0]!==t.initialState||r[1]!==s){var a;l=(a=t.initialState)!==null&&a!==void 0?a:lt(s),r[0]=t.initialState,r[1]=s,r[2]=l}else l=r[2];o=l;const c=o,[u,d]=C.useState((e=(n=t.draft)===null||n===void 0?void 0:n.state)!==null&&e!==void 0?e:c),f=z1(s,d,u);O0(t.draft,u,void 0);let p,g,m;if(r[3]!==i||r[4]!==u||r[5]!==t.config||r[6]!==t.collection){g=_t(i,u);let F;r[10]!==t.config||r[11]!==t.collection?(F=Ir(t.config,t.collection),r[10]=t.config,r[11]=t.collection,r[12]=F):F=r[12],m=F,p=$n(t.config,t.collection,g),r[3]=i,r[4]=u,r[5]=t.config,r[6]=t.collection,r[7]=p,r[8]=g,r[9]=m}else p=r[7],g=r[8],m=r[9];const b=p;let y;r[13]!==i.slugField||r[14]!==g?(y={field:i.slugField,value:g},r[13]=i.slugField,r[14]=g,r[15]=y):y=r[15];let x;r[16]!==u||r[17]!==b||r[18]!==t.config||r[19]!==i.schema||r[20]!==m||r[21]!==y?(x={state:u,basePath:b,initialFiles:void 0,config:t.config,schema:i.schema,format:m,currentLocalTreeKey:void 0,slug:y},r[16]=u,r[17]=b,r[18]=t.config,r[19]=i.schema,r[20]=m,r[21]=y,r[22]=x):x=r[22];const[v,w,S]=qa(x),k=Ln(w);let E;r[23]!==c||r[24]!==s||r[25]!==u||r[26]!==i.slugField?(E={initialState:c,schema:s,state:u,slugField:i.slugField},r[23]=c,r[24]=s,r[25]=u,r[26]=i.slugField,r[27]=E):E=r[27];const T=nd(E),N=v.kind==="updated"||v.kind==="loading";let I;r[28]!==t.collection||r[29]!==t.duplicateSlug||r[30]!==T||r[31]!==N||r[32]!==b||r[33]!==m||r[34]!==i.schema||r[35]!==i.slugField||r[36]!==g||r[37]!==u?(I=()=>{const F=["collection-create",t.collection,...t.duplicateSlug?[t.duplicateSlug]:[]];if(T&&!N){const M=td({basePath:b,format:m,schema:i.schema,slug:{field:i.slugField,value:g},state:u}),P=new Map(M.map(z=>[z.path,z.contents]));T0(F,{slug:g,files:P,savedAt:new Date,version:1})}else N0(F)},r[28]=t.collection,r[29]=t.duplicateSlug,r[30]=T,r[31]=N,r[32]=b,r[33]=m,r[34]=i.schema,r[35]=i.slugField,r[36]=g,r[37]=u,r[38]=I):I=r[38];let A;r[39]!==i||r[40]!==g||r[41]!==u||r[42]!==T||r[43]!==t.duplicateSlug||r[44]!==t.collection||r[45]!==b||r[46]!==m||r[47]!==N?(A=[i,g,u,T,t.duplicateSlug,t.collection,b,m,N],r[39]=i,r[40]=g,r[41]=u,r[42]=T,r[43]=t.duplicateSlug,r[44]=t.collection,r[45]=b,r[46]=m,r[47]=N,r[48]=A):A=r[48],C.useEffect(I,A);let O;r[49]!==c?(O=()=>{d(c)},r[49]=c,r[50]=O):O=r[50];let _;return r[51]!==t.basePath||r[52]!==t.collection||r[53]!==v||r[54]!==k||r[55]!==S||r[56]!==u||r[57]!==g||r[58]!==f||r[59]!==O?(_=h.jsx(V_,{basePath:t.basePath,collection:t.collection,createResult:v,createItem:k,resetCreateItemState:S,state:u,slug:g,previewProps:f,onReset:O}),r[51]=t.basePath,r[52]=t.collection,r[53]=v,r[54]=k,r[55]=S,r[56]=u,r[57]=g,r[58]=f,r[59]=O,r[60]=_):_=r[60],_}function Eee(t){const e=q(34),{collectionConfig:n,schema:r}=Ha(t.collection),i=B1(r,t.map),s=V1(r,t.map,i);let o,l,a;if(e[0]!==n||e[1]!==i||e[2]!==t.config||e[3]!==t.collection){l=_t(n,i);let x;e[7]!==t.config||e[8]!==t.collection?(x=Ir(t.config,t.collection),e[7]=t.config,e[8]=t.collection,e[9]=x):x=e[9],a=x,o=$n(t.config,t.collection,l),e[0]=n,e[1]=i,e[2]=t.config,e[3]=t.collection,e[4]=o,e[5]=l,e[6]=a}else o=e[4],l=e[5],a=e[6];const c=o;let u;e[10]!==n.slugField||e[11]!==l?(u={field:n.slugField,value:l},e[10]=n.slugField,e[11]=l,e[12]=u):u=e[12];let d;e[13]!==i||e[14]!==c||e[15]!==t.config||e[16]!==n.schema||e[17]!==a||e[18]!==u?(d={state:i,basePath:c,initialFiles:void 0,config:t.config,schema:n.schema,format:a,currentLocalTreeKey:void 0,slug:u},e[13]=i,e[14]=c,e[15]=t.config,e[16]=n.schema,e[17]=a,e[18]=u,e[19]=d):d=e[19];const[f,p,g]=qa(d),m=Ln(p);let b;e[20]!==t.map||e[21]!==t.initialState||e[22]!==n.schema?(b=()=>{var x;(x=t.map.doc)===null||x===void 0||x.transact(()=>{for(const[S,k]of Object.entries(n.schema)){var v,w;const E=Xi(k,(v=(w=t.initialState)===null||w===void 0?void 0:w[S])!==null&&v!==void 0?v:lt(k));t.map.set(S,E)}})},e[20]=t.map,e[21]=t.initialState,e[22]=n.schema,e[23]=b):b=e[23];let y;return e[24]!==t.basePath||e[25]!==t.collection||e[26]!==f||e[27]!==m||e[28]!==g||e[29]!==i||e[30]!==l||e[31]!==s||e[32]!==b?(y=h.jsx(V_,{basePath:t.basePath,collection:t.collection,createResult:f,createItem:m,resetCreateItemState:g,state:i,slug:l,previewProps:s,onReset:b}),e[24]=t.basePath,e[25]=t.collection,e[26]=f,e[27]=m,e[28]=g,e[29]=i,e[30]=l,e[31]=s,e[32]=b,e[33]=y):y=e[33],y}function V_(t){const e=q(96),{onReset:n}=t,r=Be(et),i=ft(),s=Nt(),{collectionConfig:o,schema:l}=Ha(t.collection),[a,c]=C.useState(!1);let u;e[0]!==s||e[1]!==t.collection?(u=Ir(s,t.collection),e[0]=s,e[1]=t.collection,e[2]=u):u=e[2];const d=u,f=ml(),p=`${t.basePath}/collection/${encodeURIComponent(t.collection)}`,{createResult:g}=t,m=g.kind==="updated"||g.kind==="loading"?t.slug:void 0,b=P_(t.collection,m);let y;e[3]!==g.kind||e[4]!==l||e[5]!==t||e[6]!==b||e[7]!==o||e[8]!==i||e[9]!==p?(y=async()=>{if(g.kind!=="loading"){if(!Jr(l,t.state,b)){c(!0);return}if(await t.createItem()){const be=_t(o,t.state);i.push(`${p}/item/${encodeURIComponent(be)}`),qi.positive("Entry created",{timeout:5e3})}}},e[3]=g.kind,e[4]=l,e[5]=t,e[6]=b,e[7]=o,e[8]=i,e[9]=p,e[10]=y):y=e[10];const x=y;let v;e[11]!==t.state||e[12]!==d||e[13]!==o?(v=()=>{H1(t.state,d,o.schema,{field:o.slugField,value:_t(o,t.state)})},e[11]=t.state,e[12]=d,e[13]=o,e[14]=v):v=e[14];const w=v;let S;e[15]!==d||e[16]!==o||e[17]!==t.state||e[18]!==t.previewProps?(S=async()=>{const be=await q1(d,o.schema,{field:o.slugField,slug:_t(o,t.state)});be&&(cl(be,t.previewProps),qi.positive("Entry pasted",{shouldCloseOnAction:!0,actionLabel:"Undo",onAction:()=>{cl(t.state,t.previewProps)}}))},e[15]=d,e[16]=o,e[17]=t.state,e[18]=t.previewProps,e[19]=S):S=e[19];const k=S,E=g.kind==="loading"||g.kind==="updated";let T,N;e[20]!==o.label||e[21]!==p?(N={key:"collection",label:o.label,href:p},e[20]=o.label,e[21]=p,e[22]=N):N=e[22];let I;e[23]!==r?(I=r.format("add"),e[23]=r,e[24]=I):I=e[24];let A;e[25]!==I?(A={key:"current",label:I},e[25]=I,e[26]=A):A=e[26];let O;e[27]!==N||e[28]!==A?(O=[N,A],e[27]=N,e[28]=A,e[29]=O):O=e[29],T=O;const _=T,F=hl(dn.below.desktop);let M;e[30]!==o?(M=f1(o),e[30]=o,e[31]=M):M=e[31];let P;e[32]!==_?(P=h.jsx(F_,{items:_}),e[32]=_,e[33]=P):P=e[33];let B;e[34]===Symbol.for("react.memo_cache_sentinel")?(B=h.jsx(L1,{}),e[34]=B):B=e[34];let z;e[35]!==E?(z=E&&h.jsx(Tr,{"aria-label":"Creating entry",isIndeterminate:!0,size:"small"}),e[35]=E,e[36]=z):z=e[36];const U=F?"element.regular":void 0;let R;e[37]!==n||e[38]!==w||e[39]!==k?(R=be=>{e:switch(be){case"reset":{n(),c(!1);break e}case"copy":{w();break e}case"paste":k()}},e[37]=n,e[38]=w,e[39]=k,e[40]=R):R=e[40];let J;e[41]===Symbol.for("react.memo_cache_sentinel")?(J=be=>h.jsxs(Je,{textValue:be.label,children:[h.jsx(X,{src:be.icon}),h.jsx(Y,{children:be.label})]},be.key),e[41]=J):J=e[41];let Z;e[42]!==U||e[43]!==R?(Z=h.jsx(Ia,{buttonLabelBehavior:"hide",overflowMode:"collapse",prominence:"low",density:"compact",maxWidth:U,items:Iee,onAction:R,children:J}),e[42]=U,e[43]=R,e[44]=Z):Z=e[44];let D;e[45]!==r?(D=r.format("create"),e[45]=r,e[46]=D):D=e[46];let ie;e[47]!==E||e[48]!==D?(ie=h.jsx(Re,{isDisabled:E,prominence:"high",type:"submit",form:"item-create-form",marginStart:"auto",children:D}),e[47]=E,e[48]=D,e[49]=ie):ie=e[49];let oe;e[50]!==P||e[51]!==z||e[52]!==Z||e[53]!==ie?(oe=h.jsxs(za,{children:[P,B,z,Z,ie]}),e[50]=P,e[51]=z,e[52]=Z,e[53]=ie,e[54]=oe):oe=e[54];let re;e[55]!==x?(re=be=>{be.target===be.currentTarget&&(be.preventDefault(),x())},e[55]=x,e[56]=re):re=e[56];let me;e[57]!==g?(me=g.kind==="error"&&h.jsx(ar,{tone:"critical",children:g.error.message}),e[57]=g,e[58]=me):me=e[58];let ee;e[59]!==t.previewProps||e[60]!==a||e[61]!==o.entryLayout||e[62]!==d||e[63]!==b?(ee=h.jsx(h1,{previewProps:t.previewProps,forceValidation:a,entryLayout:o.entryLayout,formatInfo:d,slugField:b}),e[59]=t.previewProps,e[60]=a,e[61]=o.entryLayout,e[62]=d,e[63]=b,e[64]=ee):ee=e[64];let we;e[65]!==re||e[66]!==me||e[67]!==ee?(we=h.jsxs(te,{id:"item-create-form",elementType:"form",onSubmit:re,direction:"column",gap:"xxlarge",height:"100%",minHeight:0,minWidth:0,children:[me,ee]}),e[65]=re,e[66]=me,e[67]=ee,e[68]=we):we=e[68];let ve;e[69]!==M||e[70]!==oe||e[71]!==we?(ve=h.jsxs(Yi,{containerWidth:M,children:[oe,we]}),e[69]=M,e[70]=oe,e[71]=we,e[72]=ve):ve=e[72];let Ae;e[73]!==g||e[74]!==i||e[75]!==t||e[76]!==f||e[77]!==o?(Ae=g.kind==="needs-new-branch"&&h.jsx(W1,{branchOid:f,onCreate:async be=>{if(i.push(`/keystatic/branch/${encodeURIComponent(be)}/collection/${encodeURIComponent(t.collection)}/create`),await t.createItem({branch:be,sha:f})){const rt=_t(o,t.state);i.push(`/keystatic/branch/${encodeURIComponent(be)}/collection/${encodeURIComponent(t.collection)}/item/${encodeURIComponent(rt)}`)}},reason:g.reason,onDismiss:t.resetCreateItemState}),e[73]=g,e[74]=i,e[75]=t,e[76]=f,e[77]=o,e[78]=Ae):Ae=e[78];let Oe;e[79]!==t.resetCreateItemState||e[80]!==Ae?(Oe=h.jsx(dt,{onDismiss:t.resetCreateItemState,children:Ae}),e[79]=t.resetCreateItemState,e[80]=Ae,e[81]=Oe):Oe=e[81];let ze;e[82]!==g.kind||e[83]!==s||e[84]!==t||e[85]!==o||e[86]!==i||e[87]!==p?(ze=g.kind==="needs-fork"&&bi(s)&&h.jsx(wh,{onCreate:async()=>{if(await t.createItem()){const be=_t(o,t.state);i.push(`${p}/item/${encodeURIComponent(be)}`)}},onDismiss:t.resetCreateItemState,config:s}),e[82]=g.kind,e[83]=s,e[84]=t,e[85]=o,e[86]=i,e[87]=p,e[88]=ze):ze=e[88];let Me;e[89]!==t.resetCreateItemState||e[90]!==ze?(Me=h.jsx(dt,{onDismiss:t.resetCreateItemState,children:ze}),e[89]=t.resetCreateItemState,e[90]=ze,e[91]=Me):Me=e[91];let Le;return e[92]!==ve||e[93]!==Oe||e[94]!==Me?(Le=h.jsxs(h.Fragment,{children:[ve,Oe,Me]}),e[92]=ve,e[93]=Oe,e[94]=Me,e[95]=Le):Le=e[95],Le}const Iee=[{key:"reset",label:"Reset",icon:j1},{key:"copy",label:"Copy entry",icon:_1},{key:"paste",label:"Paste entry",icon:O1}],K1=t=>{const e=q(5),{children:n,title:r}=t;let i;e[0]!==r?(i=h.jsx(Y,{casing:"uppercase",color:"neutralTertiary",size:"small",weight:"bold",elementType:"h2",children:r}),e[0]=r,e[1]=i):i=e[1];let s;return e[2]!==i||e[3]!==n?(s=h.jsxs(te,{elementType:"section",direction:"column",gap:"medium",children:[i,n]}),e[2]=i,e[3]=n,e[4]=s):s=e[4],s},bo="fill",U_=t=>h.jsx("div",{className:W({display:"grid",gap:j.size.space.large,gridAutoRows:j.size.element.xlarge,gridTemplateColumns:`[${bo}-start] 1fr [${bo}-end]`,[$c.above.mobile]:{gridTemplateColumns:`[${bo}-start] 1fr 1fr [${bo}-end]`},[$c.above.tablet]:{gridTemplateColumns:`[${bo}-start] 1fr 1fr 1fr [${bo}-end]`}}),...t}),Aee=t=>{const e=q(12),n=C.useRef(null),{linkProps:r}=FS(t,n);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=Ye(W({color:j.color.foreground.neutral,outline:"none","&:hover":{color:j.color.foreground.neutralEmphasis,"::before":{backgroundColor:j.color.alias.backgroundIdle,borderColor:j.color.border.neutral}},"&:active":{"::before":{backgroundColor:j.color.alias.backgroundHovered,borderColor:j.color.alias.borderHovered}},"&:focus-visible::before":{outline:`${j.size.alias.focusRing} solid ${j.color.alias.focusRing}`,outlineOffset:j.size.alias.focusRingGap},"::before":{border:`${j.size.border.regular} solid ${j.color.border.muted}`,borderRadius:j.size.radius.medium,content:'""',position:"absolute",inset:0,transition:vr(["background-color","border-color"])}})),e[0]=i):i=e[0];let s;e[1]!==n||e[2]!==t.href||e[3]!==t.label||e[4]!==r?(s=h.jsx(nt,{elementType:"h3",size:"small",truncate:!0,children:h.jsx("a",{ref:n,href:t.href,...r,className:i,children:t.label})}),e[1]=n,e[2]=t.href,e[3]=t.label,e[4]=r,e[5]=s):s=e[5];let o;e[6]!==s||e[7]!==t.children?(o=h.jsxs(te,{direction:"column",gap:"medium",flex:!0,children:[s,t.children]}),e[6]=s,e[7]=t.children,e[8]=o):o=e[8];let l;return e[9]!==o||e[10]!==t.endElement?(l=h.jsxs(te,{alignItems:"center",backgroundColor:"canvas",padding:"large",position:"relative",children:[o,t.endElement]}),e[9]=o,e[10]=t.endElement,e[11]=l):l=e[11],l};function Tee(){return Be(et)}function Nee(){const t=q(30),e=jr(),n=bn(),r=ft(),i=Tee(),s=mj();let o;t[0]!==e?(o=e&&ru(e),t[0]=e,t[1]=o):o=t[1];const l=o,a=n===e?.defaultBranch;let c;t[2]!==i?(c=i.format("currentBranch"),t[2]=i,t[3]=c):c=t[3];let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsx(X,{src:mT,color:"neutralTertiary"}),t[4]=u):u=t[4];let d;t[5]!==n?(d=h.jsxs(te,{alignItems:"center",gap:"regular",border:"muted",borderRadius:"medium",backgroundColor:"canvas",padding:"large",children:[u,h.jsx(Y,{size:"medium",weight:"semibold",children:n})]}),t[5]=n,t[6]=d):d=t[6];let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(X,{src:hT}),t[7]=f):f=t[7];let p;t[8]!==i?(p=i.format("newBranch"),t[8]=i,t[9]=p):p=t[9];let g;t[10]!==p?(g=h.jsxs(ae,{children:[f,h.jsx(Y,{children:p})]}),t[10]=p,t[11]=g):g=t[11];let m;t[12]!==r?(m=w=>h.jsx(dj,{onDismiss:w,onCreate:S=>{w(),r.push(r.href.replace(/\/branch\/[^/]+/,"/branch/"+encodeURIComponent(S)))}}),t[12]=r,t[13]=m):m=t[13];let b;t[14]!==g||t[15]!==m?(b=h.jsxs(BR,{children:[g,m]}),t[14]=g,t[15]=m,t[16]=b):b=t[16];let y;t[17]!==a||t[18]!==s||t[19]!==l||t[20]!==n||t[21]!==i?(y=!a&&s!==void 0&&(s===!1?h.jsxs(ae,{href:`${l}/pull/new/${n}`,target:"_blank",children:[h.jsx(X,{src:Wf}),h.jsx(Y,{children:i.format("createPullRequest")})]}):h.jsxs(ae,{href:`${l}/pull/${s}`,target:"_blank",children:[h.jsx(X,{src:Wf}),h.jsxs(Y,{children:["Pull request #",s]})]})),t[17]=a,t[18]=s,t[19]=l,t[20]=n,t[21]=i,t[22]=y):y=t[22];let x;t[23]!==b||t[24]!==y?(x=h.jsxs(te,{gap:"regular",wrap:!0,children:[b,y]}),t[23]=b,t[24]=y,t[25]=x):x=t[25];let v;return t[26]!==c||t[27]!==d||t[28]!==x?(v=h.jsxs(K1,{title:c,children:[d,x]}),t[26]=c,t[27]=d,t[28]=x,t[29]=v):v=t[29],v}function jee(){const t=q(9),e=uj();let n;if(t[0]!==e){let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=a=>"children"in a,t[2]=l):l=t[2],n=e.some(l),t[0]=e,t[1]=n}else n=t[1];const r=n;let i;if(t[3]!==e){let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=a=>q_(a),t[5]=l):l=t[5],i=e.map(l),t[3]=e,t[4]=i}else i=t[4];const s=i;let o;return t[6]!==r||t[7]!==s?(o=r?h.jsx(h.Fragment,{children:s}):h.jsx(K1,{title:"Content",children:h.jsx(U_,{children:s})}),t[6]=r,t[7]=s,t[8]=o):o=t[8],o}let _ee=0;function q_(t){if(t.isDivider)return h.jsx(te,{gridColumn:bo,children:h.jsx(Ds,{alignSelf:"center",size:"medium",width:"alias.singleLineWidth"})},_ee++);if(t.children)return h.jsx(K1,{title:t.title,children:h.jsx(U_,{children:t.children.map(r=>q_(r))})},t.title);let e=(()=>{if(t.changed)return typeof t.changed=="number"?h.jsx(cu,{tone:"accent",marginStart:"auto",children:ll(t.changed,{singular:"change",plural:"changes"})}):h.jsx(cu,{tone:"accent",children:"Changed"})})(),n=typeof t.entryCount!="number"?e:h.jsxs(te,{gap:"medium",alignItems:"center",children:[e,h.jsx(ae,{"aria-label":"Add",href:`${t.href}/create`,children:h.jsx(X,{src:Eb})})]});return h.jsx(Aee,{label:t.label,href:t.href,endElement:n,children:typeof t.entryCount=="number"?h.jsx(Y,{color:"neutralSecondary",children:ll(t.entryCount,{singular:"entry",plural:"entries"})}):null},t.key)}function Oee(t){const e=q(19),n=Be(et),r=wA(),i=Uu();let s;if(e[0]!==r||e[1]!==i){var o;s=r?{name:(o=r.name)!==null&&o!==void 0?o:r.login,avatarUrl:r.avatarUrl}:i?.user,e[0]=r,e[1]=i,e[2]=s}else s=e[2];const l=s;let a;e[3]!==n?(a=n.format("dashboard"),e[3]=n,e[4]=a):a=e[4];let c;e[5]!==a?(c=h.jsx(za,{children:h.jsx(nt,{elementType:"h1",id:"page-title",size:"small",children:a})}),e[5]=a,e[6]=c):c=e[6];let u;e[7]!==l||e[8]!==i?(u=l&&h.jsx(Ree,{user:l,manageAccount:!!i}),e[7]=l,e[8]=i,e[9]=u):u=e[9];let d;e[10]!==t.config?(d=!Pa(t.config)&&h.jsx(Nee,{}),e[10]=t.config,e[11]=d):d=e[11];let f;e[12]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(jee,{}),e[12]=f):f=e[12];let p;e[13]!==u||e[14]!==d?(p=h.jsx(ui,{isScrollable:!0,children:h.jsxs(te,{direction:"column",gap:"xxlarge",children:[u,d,f]})}),e[13]=u,e[14]=d,e[15]=p):p=e[15];let g;return e[16]!==c||e[17]!==p?(g=h.jsxs(Yi,{containerWidth:"large",children:[c,p]}),e[16]=c,e[17]=p,e[18]=g):g=e[18],g}function Ree(t){const e=q(15),{user:n,manageAccount:r}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={below:"tablet"},e[0]=i):i=e[0];let s;e[1]!==n.avatarUrl||e[2]!==n.name?(s=h.jsx(tp,{src:n.avatarUrl,name:n.name,size:"large"}),e[1]=n.avatarUrl,e[2]=n.name,e[3]=s):s=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={fontWeight:j.typography.fontWeight.bold},e[4]=o):o=e[4];let l;e[5]!==n.name?(l=h.jsxs(nt,{size:"medium",elementType:"p",UNSAFE_style:o,children:["Hello, ",n.name,"!"]}),e[5]=n.name,e[6]=l):l=e[6];let a;e[7]!==r?(a=r&&h.jsx(aa,{href:"https://keystatic.cloud/account",children:"Manage Account"}),e[7]=r,e[8]=a):a=e[8];let c;e[9]!==l||e[10]!==a?(c=h.jsxs(fn,{gap:"medium",children:[l,a]}),e[9]=l,e[10]=a,e[11]=c):c=e[11];let u;return e[12]!==s||e[13]!==c?(u=h.jsxs(te,{alignItems:"center",gap:"medium",isHidden:i,children:[s,c]}),e[12]=s,e[13]=c,e[14]=u):u=e[14],u}const Dee=t=>{const e=q(13),n=hl(dn.below.desktop),r=u1(),i=C.useRef(null),s=GB(i),o=n||!r.isOpen;let l;e[0]!==n?(l=n?h.jsx($q,{}):h.jsx(eC,{children:h.jsx(Pq,{})}),e[0]=n,e[1]=l):l=e[1];let a;e[2]!==i||e[3]!==t.children?(a=h.jsx(QS,{ref:i,children:t.children}),e[2]=i,e[3]=t.children,e[4]=a):a=e[4];let c;e[5]!==o||e[6]!==r.toggle||e[7]!==l||e[8]!==a?(c=h.jsxs(nC,{autoSaveId:"keystatic-app-split-view",isCollapsed:o,onCollapseChange:r.toggle,defaultSize:260,minSize:180,maxSize:400,height:"100vh",children:[l,a]}),e[5]=o,e[6]=r.toggle,e[7]=l,e[8]=a,e[9]=c):c=e[9];let u;return e[10]!==s||e[11]!==c?(u=h.jsx(WB,{value:s,children:c}),e[10]=s,e[11]=c,e[12]=u):u=e[12],u};function Mee(t){var e;const n=q(2),r=La(),i=bn(),s=C.useContext(lp);if((s==null||(e=s.data)===null||e===void 0||(e=e.repository)===null||e===void 0||(e=e.refs)===null||e===void 0?void 0:e.pageInfo.hasNextPage)===!1&&!r.has(i)){const o=`The branch ${i} does not exist in this repository.`;let l;return n[0]!==o?(l=h.jsx(Ko,{icon:Ab,title:"Branch not found",message:o}),n[0]=o,n[1]=l):l=n[1],l}return t.children}const Fee=t=>{const e=q(19);let n;e[0]!==t.children?(n=h.jsx($A.Consumer,{children:c=>c&&!(c!=null&&c.graphQLErrors.some(u=>{var d;return(u==null||(d=u.originalError)===null||d===void 0?void 0:d.type)==="NOT_FOUND"}))?h.jsx(Ko,{icon:Ab,title:"Failed to load shell",message:c.message}):t.children}),e[0]=t.children,e[1]=n):n=e[1];const r=n;let i;e[2]!==t.basePath?(i={basePath:t.basePath},e[2]=t.basePath,e[3]=i):i=e[3];let s;e[4]!==r?(s=h.jsx(Fq,{children:h.jsx(Dee,{children:h.jsx(Mee,{children:r})})}),e[4]=r,e[5]=s):s=e[5];let o;e[6]!==i||e[7]!==s?(o=h.jsx(KA.Provider,{value:i,children:s}),e[6]=i,e[7]=s,e[8]=o):o=e[8];let l;e[9]!==t.config||e[10]!==o?(l=h.jsx(WA.Provider,{value:t.config,children:o}),e[9]=t.config,e[10]=o,e[11]=l):l=e[11];const a=l;if(bi(t.config)||t.config.storage.kind==="cloud"){let c;return e[12]!==t.currentBranch||e[13]!==t.config||e[14]!==a?(c=h.jsx(VB,{currentBranch:t.currentBranch,config:t.config,children:a}),e[12]=t.currentBranch,e[13]=t.config,e[14]=a,e[15]=c):c=e[15],c}if(Pa(t.config)){let c;return e[16]!==t.config||e[17]!==a?(c=h.jsx(PB,{config:t.config,children:a}),e[16]=t.config,e[17]=a,e[18]=c):c=e[18],c}return null};function H_(t){const e=q(96),n=hl(dn.below.desktop),r=jr(),i=bn(),[s,o]=C.useState(!1),{schema:l,singletonConfig:a}=U1(t.singleton),c=ft();let u;e:{if(!a.previewUrl){u=void 0;break e}let se;e[0]!==a.previewUrl||e[1]!==i?(se=a.previewUrl.replace("{branch}",i),e[0]=a.previewUrl,e[1]=i,e[2]=se):se=e[2],u=se}const d=u;let f;e[3]!==t.config?(f=bi(t.config)||cy(t.config),e[3]=t.config,e[4]=f):f=e[4];const p=f;let g,m;if(e[5]!==t.config||e[6]!==t.singleton||e[7]!==t.initialState||e[8]!==p||e[9]!==r||e[10]!==i){var b,y;m=nu(t.config,t.singleton);const se=!!t.initialState,pe=Pu(t.config,t.singleton);g=p&&se&&r?`${ru(r)}${m.dataLocation==="index"?`/tree/${i}/${(b=Xs(t.config.storage))!==null&&b!==void 0?b:""}${pe}`:`/blob/${(y=Xs(t.config.storage))!==null&&y!==void 0?y:""}${i}/${pe}${$u(m)}`}`:void 0,e[5]=t.config,e[6]=t.singleton,e[7]=t.initialState,e[8]=p,e[9]=r,e[10]=i,e[11]=g,e[12]=m}else g=e[11],m=e[12];const x=g;let v,w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w={key:"reset",label:"Reset",icon:j1},e[13]=w):w=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S={key:"copy",label:"Copy entry",icon:_1},e[14]=S):S=e[14];let k;e[15]===Symbol.for("react.memo_cache_sentinel")?(k={key:"paste",label:"Paste entry",icon:O1},e[15]=k):k=e[15];let E;if(e[16]!==d||e[17]!==x){if(E=[w,S,k],d){let se;e[19]!==d?(se={key:"preview",label:"Preview",icon:dp,href:d,target:"_blank",rel:"noopener noreferrer"},e[19]=d,e[20]=se):se=e[20],E.push(se)}if(x){let se;e[21]!==x?(se={key:"view",label:"View on GitHub",icon:Th,href:x,target:"_blank",rel:"noopener noreferrer"},e[21]=x,e[22]=se):se=e[22],E.push(se)}e[16]=d,e[17]=x,e[18]=E}else E=e[18];v=E;const T=v,N=ml(),I=t.initialState===null;let A;e[23]!==t||e[24]!==l?(A=async()=>{if(!(t.updateResult.kind==="loading"||!t.hasChanged)){if(!Jr(l,t.state,void 0)){o(!0);return}await t.onUpdate()}},e[23]=t,e[24]=l,e[25]=A):A=e[25];const O=A;let _;e[26]!==t.state||e[27]!==m||e[28]!==a.schema?(_=()=>{H1(t.state,m,a.schema,void 0)},e[26]=t.state,e[27]=m,e[28]=a.schema,e[29]=_):_=e[29];const F=_;let M;e[30]!==m||e[31]!==a.schema||e[32]!==t.previewProps||e[33]!==t.state?(M=async()=>{const se=await q1(m,a.schema,void 0);se&&(cl(se,t.previewProps),qi.positive("Entry pasted",{shouldCloseOnAction:!0,actionLabel:"Undo",onAction:()=>{cl(t.state,t.previewProps)}}))},e[30]=m,e[31]=a.schema,e[32]=t.previewProps,e[33]=t.state,e[34]=M):M=e[34];const P=M;let B;e[35]!==a?(B=f1(a),e[35]=a,e[36]=B):B=e[36];let z;e[37]!==a.label?(z=h.jsx(nt,{elementType:"h1",id:"page-title",size:"small",children:a.label}),e[37]=a.label,e[38]=z):z=e[38];let U;e[39]!==t||e[40]!==a?(U=t.updateResult.kind==="loading"?h.jsx(Tr,{"aria-label":`Updating ${a.label}`,isIndeterminate:!0,size:"small",alignSelf:"center"}):t.hasChanged&&h.jsx(cu,{tone:"pending",children:"Unsaved"}),e[39]=t,e[40]=a,e[41]=U):U=e[41];let R;e[42]!==z||e[43]!==U?(R=h.jsxs(te,{flex:!0,alignItems:"center",gap:"regular",children:[z,U]}),e[42]=z,e[43]=U,e[44]=R):R=e[44];let J;e[45]===Symbol.for("react.memo_cache_sentinel")?(J=h.jsx(L1,{}),e[45]=J):J=e[45];const Z=n?"element.regular":void 0;let D;e[46]!==t.hasChanged?(D=t.hasChanged?[]:["reset"],e[46]=t.hasChanged,e[47]=D):D=e[47];let ie;e[48]!==t||e[49]!==F||e[50]!==P?(ie=se=>{e:switch(se){case"reset":{t.onReset();break e}case"copy":{F();break e}case"paste":P()}},e[48]=t,e[49]=F,e[50]=P,e[51]=ie):ie=e[51];let oe;e[52]===Symbol.for("react.memo_cache_sentinel")?(oe=se=>h.jsxs(Je,{textValue:se.label,href:se.href,target:se.target,rel:se.rel,children:[h.jsx(X,{src:se.icon}),h.jsx(Y,{children:se.label})]},se.key),e[52]=oe):oe=e[52];let re;e[53]!==Z||e[54]!==T||e[55]!==D||e[56]!==ie?(re=h.jsx(Ia,{buttonLabelBehavior:"hide",overflowMode:"collapse",prominence:"low",density:"compact",maxWidth:Z,items:T,disabledKeys:D,onAction:ie,children:oe}),e[53]=Z,e[54]=T,e[55]=D,e[56]=ie,e[57]=re):re=e[57];const me=t.updateResult.kind==="loading",ee=I?"Create":"Save";let we;e[58]!==me||e[59]!==ee?(we=h.jsx(Re,{form:"singleton-form",isDisabled:me,prominence:"high",type:"submit",children:ee}),e[58]=me,e[59]=ee,e[60]=we):we=e[60];let ve;e[61]!==R||e[62]!==re||e[63]!==we?(ve=h.jsxs(za,{children:[R,J,re,we]}),e[61]=R,e[62]=re,e[63]=we,e[64]=ve):ve=e[64];let Ae;e[65]!==O?(Ae=se=>{se.target===se.currentTarget&&(se.preventDefault(),O())},e[65]=O,e[66]=Ae):Ae=e[66];let Oe;e[67]!==t.updateResult?(Oe=t.updateResult.kind==="error"&&h.jsx(ar,{tone:"critical",children:t.updateResult.error.message}),e[67]=t.updateResult,e[68]=Oe):Oe=e[68];const ze=t.previewProps;let Me;e[69]!==ze||e[70]!==s||e[71]!==a.entryLayout||e[72]!==m?(Me=h.jsx(h1,{previewProps:ze,forceValidation:s,entryLayout:a.entryLayout,formatInfo:m,slugField:void 0}),e[69]=ze,e[70]=s,e[71]=a.entryLayout,e[72]=m,e[73]=Me):Me=e[73];let Le;e[74]!==t||e[75]!==c||e[76]!==N?(Le=t.updateResult.kind==="needs-new-branch"&&h.jsx(W1,{branchOid:N,onCreate:async se=>{c.push(`/keystatic/branch/${encodeURIComponent(se)}/singleton/${encodeURIComponent(t.singleton)}`),t.onUpdate({branch:se,sha:N})},reason:t.updateResult.reason,onDismiss:t.onResetUpdateItem}),e[74]=t,e[75]=c,e[76]=N,e[77]=Le):Le=e[77];let be;e[78]!==t.onResetUpdateItem||e[79]!==Le?(be=h.jsx(dt,{onDismiss:t.onResetUpdateItem,children:Le}),e[78]=t.onResetUpdateItem,e[79]=Le,e[80]=be):be=e[80];let rt;e[81]!==t?(rt=t.updateResult.kind==="needs-fork"&&bi(t.config)&&h.jsx(wh,{onCreate:async()=>{t.onUpdate()},onDismiss:t.onResetUpdateItem,config:t.config}),e[81]=t,e[82]=rt):rt=e[82];let jt;e[83]!==t.onResetUpdateItem||e[84]!==rt?(jt=h.jsx(dt,{onDismiss:t.onResetUpdateItem,children:rt}),e[83]=t.onResetUpdateItem,e[84]=rt,e[85]=jt):jt=e[85];let ot;e[86]!==Ae||e[87]!==Oe||e[88]!==Me||e[89]!==be||e[90]!==jt?(ot=h.jsxs(te,{elementType:"form",id:"singleton-form",onSubmit:Ae,direction:"column",gap:"xxlarge",height:"100%",minHeight:0,minWidth:0,children:[Oe,Me,be,jt]}),e[86]=Ae,e[87]=Oe,e[88]=Me,e[89]=be,e[90]=jt,e[91]=ot):ot=e[91];let Ft;return e[92]!==B||e[93]!==ve||e[94]!==ot?(Ft=h.jsxs(Yi,{containerWidth:B,children:[ve,ot]}),e[92]=B,e[93]=ve,e[94]=ot,e[95]=Ft):Ft=e[95],Ft}function Pee(t){const e=q(49),{singleton:n,initialFiles:r,initialState:i,localTreeKey:s,config:o,draft:l}=t,{schema:a,singletonConfig:c}=U1(t.singleton);let u;e[0]!==o||e[1]!==n?(u=Pu(o,n),e[0]=o,e[1]=n,e[2]=u):u=e[2];const d=u;let f;e[3]!==s||e[4]!==l||e[5]!==i||e[6]!==a?(f=()=>{var z;return{localTreeKey:s,state:(z=l?.state)!==null&&z!==void 0?z:i===null?lt(a):i}},e[3]=s,e[4]=l,e[5]=i,e[6]=a,e[7]=f):f=e[7];const[p,g]=C.useState(f),{state:m,localTreeKey:b}=p;O0(l,m,s),b!==s&&g({localTreeKey:s,state:i===null?lt(a):i});const y=i===null,x=nd({initialState:i,state:m,schema:a,slugField:void 0})||y;let v;e[8]!==n||e[9]!==x||e[10]!==d||e[11]!==o||e[12]!==c.schema||e[13]!==m||e[14]!==s?(v=()=>{const z=["singleton",n];if(x){const U=td({basePath:d,format:nu(o,n),schema:c.schema,slug:void 0,state:m}),R=new Map(U.map(Z=>[Z.path,Z.contents]));T0(z,{beforeTreeKey:s,files:R,savedAt:new Date,version:1})}else N0(z)},e[8]=n,e[9]=x,e[10]=d,e[11]=o,e[12]=c.schema,e[13]=m,e[14]=s,e[15]=v):v=e[15];let w;e[16]!==o||e[17]!==s||e[18]!==m||e[19]!==x||e[20]!==n||e[21]!==d||e[22]!==c?(w=[o,s,m,x,n,d,c],e[16]=o,e[17]=s,e[18]=m,e[19]=x,e[20]=n,e[21]=d,e[22]=c,e[23]=w):w=e[23],C.useEffect(v,w);let S;e[24]===Symbol.for("react.memo_cache_sentinel")?(S=z=>{g(U=>({localTreeKey:U.localTreeKey,state:z(U.state)}))},e[24]=S):S=e[24];const E=z1(a,S,m);let T;e[25]!==o||e[26]!==n?(T=nu(o,n),e[25]=o,e[26]=n,e[27]=T):T=e[27];const N=T;let I;e[28]!==m||e[29]!==r||e[30]!==o||e[31]!==c.schema||e[32]!==d||e[33]!==N||e[34]!==s?(I={state:m,initialFiles:r,config:o,schema:c.schema,basePath:d,format:N,currentLocalTreeKey:s,slug:void 0},e[28]=m,e[29]=r,e[30]=o,e[31]=c.schema,e[32]=d,e[33]=N,e[34]=s,e[35]=I):I=e[35];const[A,O,_]=qa(I),F=Ln(O);let M;e[36]!==s||e[37]!==i||e[38]!==a?(M=()=>g({localTreeKey:s,state:i===null?lt(a):i}),e[36]=s,e[37]=i,e[38]=a,e[39]=M):M=e[39];const P=M;let B;return e[40]!==t||e[41]!==x||e[42]!==P||e[43]!==F||e[44]!==_||e[45]!==A||e[46]!==m||e[47]!==E?(B=h.jsx(H_,{...t,hasChanged:x,onReset:P,onUpdate:F,onResetUpdateItem:_,updateResult:A,state:m,previewProps:E}),e[40]=t,e[41]=x,e[42]=P,e[43]=F,e[44]=_,e[45]=A,e[46]=m,e[47]=E,e[48]=B):B=e[48],B}function $ee(t){const e=q(27),{singleton:n,initialFiles:r,initialState:i,localTreeKey:s,config:o}=t,{schema:l,singletonConfig:a}=U1(t.singleton);let c;e[0]!==o||e[1]!==n?(c=Pu(o,n),e[0]=o,e[1]=n,e[2]=c):c=e[2];const u=c,d=B1(l,t.map),f=V1(l,t.map,d),p=i===null,g=nd({initialState:i,state:d,schema:l,slugField:void 0})||p;let m;e[3]!==o||e[4]!==n?(m=nu(o,n),e[3]=o,e[4]=n,e[5]=m):m=e[5];const b=m;let y;e[6]!==d||e[7]!==r||e[8]!==o||e[9]!==a.schema||e[10]!==u||e[11]!==b||e[12]!==s?(y={state:d,initialFiles:r,config:o,schema:a.schema,basePath:u,format:b,currentLocalTreeKey:s,slug:void 0},e[6]=d,e[7]=r,e[8]=o,e[9]=a.schema,e[10]=u,e[11]=b,e[12]=s,e[13]=y):y=e[13];const[x,v,w]=qa(y),S=Ln(v);let k;e[14]!==t.map||e[15]!==t.initialState||e[16]!==a.schema?(k=()=>{t.map.doc.transact(()=>{for(const[A,O]of Object.entries(a.schema)){var N,I;const _=Xi(O,(N=(I=t.initialState)===null||I===void 0?void 0:I[A])!==null&&N!==void 0?N:lt(O));t.map.set(A,_)}})},e[14]=t.map,e[15]=t.initialState,e[16]=a.schema,e[17]=k):k=e[17];const E=k;let T;return e[18]!==t||e[19]!==g||e[20]!==E||e[21]!==S||e[22]!==w||e[23]!==x||e[24]!==d||e[25]!==f?(T=h.jsx(H_,{...t,hasChanged:g,onReset:E,onUpdate:S,onResetUpdateItem:w,updateResult:x,state:d,previewProps:f}),e[18]=t,e[19]=g,e[20]=E,e[21]=S,e[22]=w,e[23]=x,e[24]=d,e[25]=f,e[26]=T):T=e[26],T}const Lee=li({version:Vb(1),savedAt:Dh(),beforeTreeKey:qb(He()),files:Ub(He(),Mh(Uint8Array))});function Bee(t){var e;const n=q(55),r=(e=t.config.singletons)===null||e===void 0?void 0:e[t.singleton];r||Ua();let i;n[0]!==r.label?(i=h.jsx(za,{children:h.jsx(nt,{elementType:"h1",id:"page-title",size:"small",children:r.label})}),n[0]=r.label,n[1]=i):i=n[1];const s=i;let o,l;n[2]!==t.config||n[3]!==t.singleton?(l=nu(t.config,t.singleton),n[2]=t.config,n[3]=t.singleton,n[4]=l):l=n[4],o=l;const a=o;let c;n[5]!==t.config||n[6]!==t.singleton?(c=Pu(t.config,t.singleton),n[5]=t.config,n[6]=t.singleton,n[7]=c):c=n[7];const u=c;let d;n[8]!==t.singleton||n[9]!==u||n[10]!==a||n[11]!==r.schema?(d=async()=>{const I=await j0(["singleton",t.singleton]);if(!I)throw new Error("No draft found");const A=Lee.create(I);return{state:dl({dirpath:u,format:a,schema:r.schema,slug:void 0},A.files).initialState,savedAt:A.savedAt,treeKey:A.beforeTreeKey}},n[8]=t.singleton,n[9]=u,n[10]=a,n[11]=r.schema,n[12]=d):d=n[12];const f=dr(d);let p;n[13]!==t.config||n[14]!==u||n[15]!==r.schema||n[16]!==a?(p={config:t.config,dirpath:u,schema:r.schema,format:a,slug:void 0},n[13]=t.config,n[14]=u,n[15]=r.schema,n[16]=a,n[17]=p):p=n[17];const g=$1(p),b=`${bn()}/${t.singleton}`,y=op(),x=g.kind==="loading";let v;n[18]!==y||n[19]!==x||n[20]!==b?(v=async()=>{if(!y)return;if(y==="loading"||(await y.doc.whenSynced,x))return xr;let I=y.data.get(b);if(I instanceof Wn){const A=I.whenLoaded;I.load(),await A}else I=new Wn,y.data.set(b,I);return I.getMap("data")},n[18]=y,n[19]=x,n[20]=b,n[21]=v):v=n[21];const w=dr(v);e:{if(w.kind!=="loaded"||g.kind!=="loaded"||!w.data||w.data.size)break e;const I=w.data;I.doc.transact(()=>{for(const[A,O]of Object.entries(r.schema)){const _=Xi(O,g.data==="not-found"?lt(O):g.data.initialState[A]);I.set(A,_)}})}if(g.kind==="error"){let I;n[22]!==g.error.message?(I=h.jsx(ui,{children:h.jsx(ar,{margin:"xxlarge",tone:"critical",children:g.error.message})}),n[22]=g.error.message,n[23]=I):I=n[23];let A;return n[24]!==s||n[25]!==I?(A=h.jsxs(Yi,{children:[s,I]}),n[24]=s,n[25]=I,n[26]=A):A=n[26],A}if(w.kind==="error"){let I;n[27]!==w.error.message?(I=h.jsx(ui,{children:h.jsx(ar,{margin:"xxlarge",tone:"critical",children:w.error.message})}),n[27]=w.error.message,n[28]=I):I=n[28];let A;return n[29]!==s||n[30]!==I?(A=h.jsxs(Yi,{children:[s,I]}),n[29]=s,n[30]=I,n[31]=A):A=n[31],A}if(g.kind==="loading"||f.kind==="loading"||w.kind==="loading"){const I=`Loading ${r.label}`;let A;n[32]!==I?(A=h.jsx(ui,{children:h.jsx(te,{alignItems:"center",justifyContent:"center",minHeight:"scale.3000",children:h.jsx(Tr,{"aria-label":I,isIndeterminate:!0,size:"large"})})}),n[32]=I,n[33]=A):A=n[33];let O;return n[34]!==s||n[35]!==A?(O=h.jsxs(Yi,{children:[s,A]}),n[34]=s,n[35]=A,n[36]=O):O=n[36],O}if(w.data){const I=g.data==="not-found"?null:g.data.initialState;let A;n[37]!==g.data?(A=g.data==="not-found"?[]:g.data.initialFiles,n[37]=g.data,n[38]=A):A=n[38];const O=g.data==="not-found"?void 0:g.data.localTreeKey;let _;return n[39]!==t.singleton||n[40]!==t.config||n[41]!==I||n[42]!==A||n[43]!==O||n[44]!==w.data?(_=h.jsx($ee,{singleton:t.singleton,config:t.config,initialState:I,initialFiles:A,localTreeKey:O,map:w.data}),n[39]=t.singleton,n[40]=t.config,n[41]=I,n[42]=A,n[43]=O,n[44]=w.data,n[45]=_):_=n[45],_}const S=g.data==="not-found"?null:g.data.initialState;let k;n[46]!==g.data?(k=g.data==="not-found"?[]:g.data.initialFiles,n[46]=g.data,n[47]=k):k=n[47];const E=g.data==="not-found"?void 0:g.data.localTreeKey,T=f.kind==="loaded"?f.data:void 0;let N;return n[48]!==t.singleton||n[49]!==t.config||n[50]!==S||n[51]!==k||n[52]!==E||n[53]!==T?(N=h.jsx(Pee,{singleton:t.singleton,config:t.config,initialState:S,initialFiles:k,localTreeKey:E,draft:T}),n[48]=t.singleton,n[49]=t.config,n[50]=S,n[51]=k,n[52]=E,n[53]=T,n[54]=N):N=n[54],N}function zee(t){const e=q(11);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=h.jsx(nt,{children:"You've installed Keystatic! 🎉"}),e[0]=n):n=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=h.jsx(Y,{children:"To start using Keystatic, you need to install the GitHub app you've created."}),e[1]=r):r=e[1];let i;e[2]!==t.config.storage.repo?(i=tl(t.config.storage.repo),e[2]=t.config.storage.repo,e[3]=i):i=e[3];let s;e[4]!==i?(s=h.jsxs(Y,{children:["Make sure to add the App to the"," ",h.jsx("code",{children:i})," ","repository."]}),e[4]=i,e[5]=s):s=e[5];let o;e[6]!==t.config?(o=h.jsx(M_,{config:t.config}),e[6]=t.config,e[7]=o):o=e[7];let l;return e[8]!==s||e[9]!==o?(l=h.jsx(te,{alignItems:"center",justifyContent:"center",margin:"xxlarge",children:h.jsxs(te,{backgroundColor:"surface",padding:"large",border:"color.alias.borderIdle",borderRadius:"medium",direction:"column",justifyContent:"center",gap:"xlarge",maxWidth:"scale.4600",children:[n,r,s,o]})}),e[8]=s,e[9]=o,e[10]=l):l=e[10],l}function Vee(t){const e=q(22),[n,r]=C.useState(""),[i,s]=C.useState(""),o=`https://github.com${i?`/organizations/${i}`:""}/settings/apps/new`;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=h.jsx(te,{justifyContent:"center",children:h.jsx(nt,{children:"Keystatic Setup"})}),e[0]=l):l=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Y,{children:"Keystatic doesn't have the required config."}),e[1]=a):a=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Y,{children:"If you've already created your GitHub app, make sure to add the following environment variables:"}),e[2]=c):c=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=h.jsxs(zt,{elementType:"ul",children:[h.jsx("li",{children:h.jsx("code",{children:"KEYSTATIC_GITHUB_CLIENT_ID"})}),h.jsx("li",{children:h.jsx("code",{children:"KEYSTATIC_GITHUB_CLIENT_SECRET"})}),h.jsx("li",{children:h.jsx("code",{children:"KEYSTATIC_SECRET"})})]}),e[3]=u):u=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(Y,{children:"If you haven't created your GitHub app for Keystatic, you can create one below."}),e[4]=d):d=e[4];let f;e[5]!==n?(f=h.jsx(gt,{label:"Deployed App URL",description:"This should the root of your domain. If you're not sure where Keystatic will be deployed, leave this blank and you can update the GitHub app later.",value:n,onChange:r}),e[5]=n,e[6]=f):f=e[6];let p;e[7]!==i?(p=h.jsx(gt,{label:"GitHub organization (if any)",description:"You must be an owner or GitHub App manager in the organization to create the GitHub App. Leave this blank to create the app in your personal account.",value:i,onChange:s}),e[7]=i,e[8]=p):p=e[8];let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=h.jsxs(Y,{children:["After visiting GitHub to create the GitHub app, you'll be redirected back here and secrets generated from GitHub will be written to your"," ",h.jsx("code",{children:".env"})," file."]}),e[9]=g):g=e[9];let m;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=W({display:"none"}),e[10]=m):m=e[10];let b;e[11]!==t.config.storage.repo||e[12]!==n?(b=JSON.stringify({name:`${Vu(t.config.storage.repo).owner} Keystatic`,url:n?`${n}/keystatic`:`${window.location.origin}/keystatic`,public:!0,redirect_url:`${window.location.origin}/api/keystatic/github/created-app`,callback_urls:[`${window.location.origin}/api/keystatic/github/oauth/callback`,"http://127.0.0.1/api/keystatic/github/oauth/callback",...n?[`${n}/api/keystatic/github/oauth/callback`]:[]],request_oauth_on_install:!0,default_permissions:{contents:"write",metadata:"read",pull_requests:"read"}}),e[11]=t.config.storage.repo,e[12]=n,e[13]=b):b=e[13];let y;e[14]!==b?(y=h.jsx("input",{type:"text",name:"manifest",className:m,value:b}),e[14]=b,e[15]=y):y=e[15];let x;e[16]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(Re,{prominence:"high",type:"submit",children:"Create GitHub App"}),e[16]=x):x=e[16];let v;return e[17]!==o||e[18]!==f||e[19]!==p||e[20]!==y?(v=h.jsx(te,{alignItems:"center",justifyContent:"center",margin:"xxlarge",children:h.jsxs(te,{backgroundColor:"surface",padding:"large",border:"color.alias.borderIdle",borderRadius:"medium",direction:"column",justifyContent:"center",gap:"xlarge",maxWidth:"scale.4600",elementType:"form",action:o,method:"post",children:[l,a,c,u,d,f,p,g,y,x]})}),e[17]=o,e[18]=f,e[19]=p,e[20]=y,e[21]=v):v=e[21],v}function Uee(t){const e=q(11);let n;e[0]!==t.config.storage.repo?(n=tl(t.config.storage.repo),e[0]=t.config.storage.repo,e[1]=n):n=e[1];const r=n;let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=h.jsx(te,{justifyContent:"center",children:h.jsx(nt,{children:"Repo not found"})}),e[2]=i):i=e[2];const s=`https://github.com/${r}`;let o;e[3]!==s||e[4]!==r?(o=h.jsxs(Y,{children:["Keystatic is configured for the"," ",h.jsx("a",{href:s,children:r})," GitHub repo but Keystatic isn't able to access this repo. This is either because you don't have access to this repo or you haven't added the GitHub app to it."]}),e[3]=s,e[4]=r,e[5]=o):o=e[5];let l;e[6]!==t.config?(l=h.jsx(M_,{config:t.config}),e[6]=t.config,e[7]=l):l=e[7];let a;return e[8]!==o||e[9]!==l?(a=h.jsx(te,{alignItems:"center",justifyContent:"center",margin:"xxlarge",children:h.jsxs(te,{backgroundColor:"surface",padding:"large",border:"color.alias.borderIdle",borderRadius:"medium",direction:"column",justifyContent:"center",gap:"xlarge",maxWidth:"scale.4600",children:[i,o,l]})}),e[8]=o,e[9]=l,e[10]=a):a=e[10],a}const qee=Fh({state:He(),from:He(),code_verifier:He()}),Hee=li({access_token:He(),token_type:He(),expires_in:fa()});function Wee({config:t}){var e;const n=ft(),r=new URL(window.location.href),i=r.searchParams.get("code"),s=r.searchParams.get("state"),o=C.useMemo(()=>{const c=localStorage.getItem("keystatic-cloud-state");return(()=>{try{return qee.create(JSON.parse(c||""))}catch{return null}})()},[]),[l,a]=C.useState(null);return C.useEffect(()=>{var c;if(i&&s&&o&&(c=t.cloud)!==null&&c!==void 0&&c.project){const{project:u}=t.cloud;(async()=>{const d=await fetch(`${ls}/oauth/token`,{method:"POST",body:new URLSearchParams({code:i,client_id:u,redirect_uri:`${window.location.origin}/keystatic/cloud/oauth/callback`,code_verifier:o.code_verifier,grant_type:"authorization_code"}).toString(),headers:{"Content-Type":"application/x-www-form-urlencoded",...so}});if(!d.ok)throw new Error(`Bad response: ${d.status} ${d.statusText}

${await d.text()}`);const f=await d.json(),p=Hee.create(f);localStorage.setItem("keystatic-cloud-access-token",JSON.stringify({token:p.access_token,project:u,validUntil:Date.now()+p.expires_in*1e3})),n.push(`/keystatic/${o.from}`)})().catch(d=>{a(d)})}},[i,s,n,o,t]),(e=t.cloud)!==null&&e!==void 0&&e.project?!i||!s?h.jsx(Y,{children:"Missing code or state"}):!o||s!==o.state?h.jsx(Y,{children:"Invalid state"}):l?h.jsx(Y,{children:l.message}):h.jsx(te,{justifyContent:"center",alignItems:"center",height:"100vh",children:h.jsx(Tr,{size:"large",isIndeterminate:!0,"aria-label":"Authenticating"})}):h.jsx(Y,{children:"Missing Keystatic Cloud config"})}function CS(t){if(t.length===0)return{};if(t.length===2&&t[0]==="singleton")return{singleton:t[1]};if(t.length<2||t[0]!=="collection")return null;const e=t[1];if(t.length===2)return{collection:e};if(t.length===3&&t[2]==="create")return{collection:e,kind:"create"};if(t.length===4&&t[2]==="item"){const n=t[3];return{collection:e,kind:"edit",slug:n}}return null}function Kee(t){const e=q(6),{push:n}=ft(),{data:r,error:i}=C.useContext(lp);let s,o;return e[0]!==i||e[1]!==t.config||e[2]!==r||e[3]!==n?(s=()=>{var l,a,c,u,d;(i==null||(l=i.response)===null||l===void 0?void 0:l.status)===401&&(t.config.storage.kind==="github"?window.location.href="/api/keystatic/github/login":Bu("",t.config)),r!=null&&(a=r.repository)!==null&&a!==void 0&&a.defaultBranchRef&&n(`/keystatic/branch/${encodeURIComponent(r.repository.defaultBranchRef.name)}`),(t.config.storage.kind==="github"&&!(r!=null&&(c=r.repository)!==null&&c!==void 0&&c.id)&&(i==null||(u=i.graphQLErrors)===null||u===void 0||(u=u[0])===null||u===void 0||(u=u.originalError)===null||u===void 0?void 0:u.type)==="NOT_FOUND"||(i==null||(d=i.graphQLErrors)===null||d===void 0||(d=d[0])===null||d===void 0||(d=d.originalError)===null||d===void 0?void 0:d.type)==="FORBIDDEN")&&(window.location.href="/api/keystatic/github/repo-not-found")},o=[r,i,n,t.config],e[0]=i,e[1]=t.config,e[2]=r,e[3]=n,e[4]=s,e[5]=o):(s=e[4],o=e[5]),C.useEffect(s,o),null}function Gee(t){var e;const n=q(37),{config:r}=t,{params:i}=ft();let s=null,o,l;if(i.join("/")==="cloud/oauth/callback"){let m;return n[0]!==r?(m=h.jsx(Wee,{config:r}),n[0]=r,n[1]=m):m=n[1],m}let a;n[2]===Symbol.for("react.memo_cache_sentinel")?(a=m=>m,n[2]=a):a=n[2];let c=a;if(cy(r)||Pa(r)&&(e=r.cloud)!==null&&e!==void 0&&e.project){let m;n[3]!==r?(m=b=>h.jsx(BB,{config:r,children:b}),n[3]=r,n[4]=m):m=n[4],c=m}if(bi(r)||cy(r)){const m=c;let b;if(n[5]!==r||n[6]!==m?(b=x=>h.jsx(Jee,{config:r,children:h.jsx(zB,{config:r,children:m(x)})}),n[5]=r,n[6]=m,n[7]=b):b=n[7],c=b,i.length===0){let x;n[8]!==r?(x=h.jsx(Kee,{config:r}),n[8]=r,n[9]=x):x=n[9];let v;return n[10]!==c||n[11]!==x?(v=c(x),n[10]=c,n[11]=x,n[12]=v):v=n[12],v}if(i.length===1&&bi(r)){if(i[0]==="setup"){let x;return n[13]!==r?(x=h.jsx(Vee,{config:r}),n[13]=r,n[14]=x):x=n[14],x}if(i[0]==="repo-not-found"){let x;return n[15]!==r?(x=h.jsx(Uee,{config:r}),n[15]=r,n[16]=x):x=n[16],x}if(i[0]==="created-github-app"){let x;return n[17]!==r?(x=h.jsx(zee,{config:r}),n[17]=r,n[18]=x):x=n[18],x}}if(i[0]!=="branch"||i.length<2){let x;return n[19]===Symbol.for("react.memo_cache_sentinel")?(x=h.jsx(Y,{children:"Not found"}),n[19]=x):x=n[19],x}s=i[1],l=`/keystatic/branch/${encodeURIComponent(s)}`;let y;n[20]!==i?(y=CS(i.slice(2)),n[20]=i,n[21]=y):y=n[21],o=y}else{let m;n[22]!==i?(m=CS(i),n[22]=i,n[23]=m):m=n[23],o=m,l="/keystatic"}const u=s||"";let d;n[24]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx(Yi,{children:h.jsx(ui,{children:h.jsx(Ko,{icon:YR,title:"Not found",message:"This page could not be found."})})}),n[24]=d):d=n[24];let f;n[25]!==o||n[26]!==r||n[27]!==l?(f=h.jsx(O_,{fallback:d,children:o===null?h.jsx(Yee,{}):o.collection?o.kind==="create"?h.jsx(wee,{collection:o.collection,config:r,basePath:l},o.collection):o.kind==="edit"?h.jsx(xee,{collection:o.collection,basePath:l,config:r,itemSlug:o.slug},o.collection):h.jsx(YQ,{basePath:l,collection:o.collection,config:r},o.collection):o.singleton?h.jsx(Bee,{config:r,singleton:o.singleton},o.singleton):h.jsx(Oee,{config:r,basePath:l})}),n[25]=o,n[26]=r,n[27]=l,n[28]=f):f=n[28];let p;n[29]!==r||n[30]!==u||n[31]!==l||n[32]!==f?(p=h.jsx(Fee,{config:r,currentBranch:u,basePath:l,children:f}),n[29]=r,n[30]=u,n[31]=l,n[32]=f,n[33]=p):p=n[33];let g;return n[34]!==c||n[35]!==p?(g=c(p),n[34]=c,n[35]=p,n[36]=g):g=n[36],g}function Yee(){Ua()}function Jee(t){const e=q(13),[n,r]=C.useState("unknown"),i=ft();let s,o;if(e[0]!==t.config?(s=()=>{el(t.config).then(l=>{if(l){r("valid");return}r("explicit-auth")})},o=[t.config],e[0]=t.config,e[1]=s,e[2]=o):(s=e[1],o=e[2]),C.useEffect(s,o),n==="valid")return t.children;if(n==="explicit-auth"){if(t.config.storage.kind==="github"){const l=`/api/keystatic/github/login${i.params.length?`?${new URLSearchParams({from:i.params.map(encodeURIComponent).join("/")})}`:""}`;let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(X,{src:Th}),e[3]=a):a=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=h.jsx(Y,{children:"Log in with GitHub"}),e[4]=c):c=e[4];let u;return e[5]!==l?(u=h.jsx(te,{justifyContent:"center",alignItems:"center",height:"100vh",children:h.jsxs(Re,{href:l,target:"_top",children:[a,c]})}),e[5]=l,e[6]=u):u=e[6],u}if(t.config.storage.kind==="cloud"){let l;e[7]!==i.params||e[8]!==t.config?(l=()=>{Bu(i.params.map(encodeURIComponent).join("/"),t.config)},e[7]=i.params,e[8]=t.config,e[9]=l):l=e[9];let a;e[10]===Symbol.for("react.memo_cache_sentinel")?(a=h.jsx(Y,{children:"Log in with Keystatic Cloud"}),e[10]=a):a=e[10];let c;return e[11]!==l?(c=h.jsx(te,{justifyContent:"center",alignItems:"center",height:"100vh",children:h.jsx(Re,{onPress:l,children:a})}),e[11]=l,e[12]=c):c=e[12],c}}return null}function Zee(t){const e=q(2);let n,r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{window.location.hostname==="localhost"&&(window.location.href=window.location.href.replace("localhost","127.0.0.1"))},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),C.useEffect(n,r),window.location.hostname==="localhost"?null:t.children}function Zte(t){const e=q(8);t.config.storage.kind==="github"&&kB(t.config.storage.repo);let n;e[0]!==t.config?(n=h.jsx(Gee,{config:t.config}),e[0]=t.config,e[1]=n):n=e[1];let r;e[2]!==t.config||e[3]!==n?(r=h.jsx(ZL,{children:h.jsx(nee,{config:t.config,children:n})}),e[2]=t.config,e[3]=n,e[4]=r):r=e[4];let i;return e[5]!==t.appSlug||e[6]!==r?(i=h.jsx(Xee,{children:h.jsx(Zee,{children:h.jsx(tee,{value:t.appSlug,children:r})})}),e[5]=t.appSlug,e[6]=r,e[7]=i):i=e[7],i}function Xee(t){const e=q(2),[n,r]=C.useState(!1);let i,s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{r(!0)},s=[],e[0]=i,e[1]=s):(i=e[0],s=e[1]),C.useEffect(i,s),n?t.children:null}function W_(t,e,n){if(e!==null&&(typeof e!="number"||!Number.isInteger(e)))return`${n} must be a whole number`;if(t!=null&&t.isRequired&&e===null)return`${n} is required`;if(e!==null){if(t?.min!==void 0&&e<t.min)return`${n} must be at least ${t.min}`;if(t?.max!==void 0&&e>t.max)return`${n} must be at most ${t.max}`}}function Qee(t){var e;const n=q(15);let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!0,n[0]=r):r=n[0];const[i,s]=C.useReducer(r,!1),o=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let l;n[1]!==t||n[2]!==i?(l=t.forceValidation||i?W_(t.validation,t.value,t.label):void 0,n[1]=t,n[2]=i,n[3]=l):l=n[3];const a=t.value===null?void 0:t.value;let c;n[4]!==t?(c=d=>{t.onChange(d===void 0?null:d)},n[4]=t,n[5]=c):c=n[5];let u;return n[6]!==t.label||n[7]!==t.description||n[8]!==t.autoFocus||n[9]!==o||n[10]!==l||n[11]!==s||n[12]!==a||n[13]!==c?(u=h.jsx(df,{label:t.label,description:t.description,isRequired:o,errorMessage:l,onBlur:s,autoFocus:t.autoFocus,value:a,onChange:c}),n[6]=t.label,n[7]=t.description,n[8]=t.autoFocus,n[9]=o,n[10]=l,n[11]=s,n[12]=a,n[13]=c,n[14]=u):u=n[14],u}function mb({label:t,defaultValue:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(Qee,{label:t,description:r,validation:n,...i})},defaultValue(){return e??null},parse(i){if(i===void 0)return null;if(typeof i=="number")return i;throw new Ce("Must be a number")},validate(i){const s=W_(n,i,t);if(s!==void 0)throw new Ce(s);return Hr(i,n,t),i},serialize(i){return{value:i===null?void 0:i}}})}function K_(t,e){var n;return{kind:"array",element:t,label:(n=e?.label)!==null&&n!==void 0?n:"Items",description:e?.description,itemLabel:e?.itemLabel,asChildTag:e?.asChildTag,slugField:e?.slugField,validation:e?.validation}}function ete(t){const e=q(13),n=Lq();let r;e[0]!==t?(r=a=>{t.onChange(a)},e[0]=t,e[1]=r):r=e[1];const i=n===12?"alias.singleLineWidth":"auto";let s;e[2]!==i?(s={mobile:"auto",tablet:i},e[2]=i,e[3]=s):s=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=a=>h.jsx(Je,{children:a.label},a.value),e[4]=o):o=e[4];let l;return e[5]!==t.label||e[6]!==t.description||e[7]!==t.options||e[8]!==t.value||e[9]!==t.autoFocus||e[10]!==r||e[11]!==s?(l=h.jsx(Cb,{label:t.label,description:t.description,items:t.options,selectedKey:t.value,onSelectionChange:r,autoFocus:t.autoFocus,width:s,children:o}),e[5]=t.label,e[6]=t.description,e[7]=t.options,e[8]=t.value,e[9]=t.autoFocus,e[10]=r,e[11]=s,e[12]=l):l=e[12],l}function G_({label:t,options:e,defaultValue:n,description:r}){const i=new Set(e.map(o=>o.value));if(!i.has(n))throw new Error(`A defaultValue of ${n} was provided to a select field but it does not match the value of one of the options provided`);return{...Gn({label:t,Input(o){return h.jsx(ete,{label:t,options:e,description:r,...o})},defaultValue(){return n},parse(o){if(o===void 0)return n;if(typeof o!="string")throw new Ce("Must be a string");if(!i.has(o))throw new Ce("Must be a valid option");return o},validate(o){return o},serialize(o){return{value:o}}}),options:e}}function tte(t){var e,n;const r=q(77);let i;r[0]===Symbol.for("react.memo_cache_sentinel")?(i={kind:"closed"},r[0]=i):i=r[0];const[s,o]=C.useState(i);let l;r[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{o({kind:"closed"})},r[1]=l):l=r[1];const a=l,c=(e=(n=t.schema.validation)===null||n===void 0||(n=n.length)===null||n===void 0?void 0:n.min)!==null&&e!==void 0?e:0,u=C.useId(),d=Be(et),f=Dj(t),p=!!f;let g;r[2]!==t.schema.description||r[3]!==t.schema.label||r[4]!==f||r[5]!==p?(g={description:t.schema.description,errorMessage:f,isInvalid:p,label:t.schema.label,labelElementType:"span"},r[2]=t.schema.description,r[3]=t.schema.label,r[4]=f,r[5]=p,r[6]=g):g=r[6];const{descriptionProps:m,errorMessageProps:b,fieldProps:y,labelProps:x}=PS(g),v=c>0;let w;r[7]!==v||r[8]!==x||r[9]!==t.schema.label?(w=h.jsx(Cu,{elementType:"span",isRequired:v,supplementRequiredState:!0,...x,children:t.schema.label}),r[7]=v,r[8]=x,r[9]=t.schema.label,r[10]=w):w=r[10];let S;r[11]!==t.schema.description||r[12]!==m?(S=t.schema.description&&h.jsx(Ah,{...m,children:t.schema.description}),r[11]=t.schema.description,r[12]=m,r[13]=S):S=r[13];let k;r[14]===Symbol.for("react.memo_cache_sentinel")?(k=h.jsx(ae,{alignSelf:"start",children:"Add"}),r[14]=k):k=r[14];let E;r[15]!==t.schema.element.discriminant.options?(E=z=>{var U;const R=(U=t.schema.element.discriminant.options.find(J=>J.value.toString()===z.toString()))===null||U===void 0?void 0:U.value;R!==void 0&&o({kind:"new",discriminant:R})},r[15]=t.schema.element.discriminant.options,r[16]=E):E=r[16];let T;r[17]===Symbol.for("react.memo_cache_sentinel")?(T=z=>h.jsx(Je,{children:z.label},z.value.toString()),r[17]=T):T=r[17];let N;r[18]!==t.schema.element.discriminant.options||r[19]!==E?(N=h.jsxs(Ii,{children:[k,h.jsx(Ai,{items:t.schema.element.discriminant.options,onAction:E,children:T})]}),r[18]=t.schema.element.discriminant.options,r[19]=E,r[20]=N):N=r[20];let I;r[21]===Symbol.for("react.memo_cache_sentinel")?(I=z=>{o({kind:"edit",idx:z})},r[21]=I):I=r[21];let A;r[22]!==t?(A=h.jsx(Mj,{...t,"aria-label":t.schema.label,onOpenItem:I}),r[22]=t,r[23]=A):A=r[23];let O;r[24]!==f||r[25]!==b?(O=f&&h.jsx(Eu,{...b,children:f}),r[24]=f,r[25]=b,r[26]=O):O=r[26];let _;e:{if(s.kind==="closed"){_=null;break e}if(s.kind==="edit"){const ee=s.idx,we=t.elements[ee].value,{discriminant:ve}=t.elements[ee];let Ae;if(r[27]!==ve||r[28]!==t.schema.element.discriminant.options){var F;Ae=(F=t.schema.element.discriminant.options.find(be=>be.value===ve))===null||F===void 0?void 0:F.label,r[27]=ve,r[28]=t.schema.element.discriminant.options,r[29]=Ae}else Ae=r[29];let Oe;r[30]!==Ae?(Oe=h.jsxs(nt,{children:["Edit"," ",Ae]}),r[30]=Ae,r[31]=Oe):Oe=r[31];let ze;r[32]!==u||r[33]!==we||r[34]!==ee?(ze=h.jsx(nte,{formId:u,onClose:a,previewProps:we,modalStateIndex:ee}),r[32]=u,r[33]=we,r[34]=ee,r[35]=ze):ze=r[35];let Me;r[36]!==u?(Me=h.jsx(mn,{children:h.jsx(Re,{form:u,prominence:"high",type:"submit",children:"Done"})}),r[36]=u,r[37]=Me):Me=r[37];let Le;r[38]!==Oe||r[39]!==ze||r[40]!==Me?(Le=h.jsxs(nn,{children:[Oe,ze,Me]}),r[38]=Oe,r[39]=ze,r[40]=Me,r[41]=Le):Le=r[41],_=Le;break e}const z=s.discriminant;let U;if(r[42]!==z||r[43]!==t.schema.element.discriminant.options){var M;U=(M=t.schema.element.discriminant.options.find(ee=>ee.value===z))===null||M===void 0?void 0:M.label,r[42]=z,r[43]=t.schema.element.discriminant.options,r[44]=U}else U=r[44];let R;r[45]!==U?(R=h.jsxs(nt,{children:["Add"," ",U]}),r[45]=U,r[46]=R):R=r[46];let J;r[47]!==z||r[48]!==u||r[49]!==t?(J=h.jsx(gn,{children:h.jsx(rte,{discriminant:z,formId:u,previewProps:t})}),r[47]=z,r[48]=u,r[49]=t,r[50]=J):J=r[50];let Z;r[51]!==d?(Z=d.format("cancel"),r[51]=d,r[52]=Z):Z=r[52];let D;r[53]!==Z?(D=h.jsx(Re,{onPress:a,children:Z}),r[53]=Z,r[54]=D):D=r[54];let ie;r[55]!==d?(ie=d.format("add"),r[55]=d,r[56]=ie):ie=r[56];let oe;r[57]!==u||r[58]!==ie?(oe=h.jsx(Re,{form:u,prominence:"high",type:"submit",children:ie}),r[57]=u,r[58]=ie,r[59]=oe):oe=r[59];let re;r[60]!==D||r[61]!==oe?(re=h.jsxs(mn,{children:[D,oe]}),r[60]=D,r[61]=oe,r[62]=re):re=r[62];let me;r[63]!==R||r[64]!==J||r[65]!==re?(me=h.jsxs(nn,{children:[R,J,re]}),r[63]=R,r[64]=J,r[65]=re,r[66]=me):me=r[66],_=me}let P;r[67]!==_?(P=h.jsx(dt,{onDismiss:a,children:_}),r[67]=_,r[68]=P):P=r[68];let B;return r[69]!==y||r[70]!==w||r[71]!==S||r[72]!==N||r[73]!==A||r[74]!==O||r[75]!==P?(B=h.jsxs(fn,{gap:"medium",role:"group",minWidth:0,...y,children:[w,S,N,A,O,P]}),r[69]=y,r[70]=w,r[71]=S,r[72]=N,r[73]=A,r[74]=O,r[75]=P,r[76]=B):B=r[76],B}function nte(t){const e=q(8);let n;e[0]!==t?(n=s=>{s.target===s.currentTarget&&(s.preventDefault(),t.onClose())},e[0]=t,e[1]=n):n=e[1];let r;e[2]!==t.previewProps?(r=h.jsx(ji,{autoFocus:!0,...t.previewProps}),e[2]=t.previewProps,e[3]=r):r=e[3];let i;return e[4]!==t.formId||e[5]!==n||e[6]!==r?(i=h.jsx(gn,{children:h.jsx(fn,{id:t.formId,elementType:"form",onSubmit:n,gap:"xxlarge",children:r})}),e[4]=t.formId,e[5]=n,e[6]=r,e[7]=i):i=e[7],i}function rte(t){const e=t.previewProps.schema.element.values[t.discriminant.toString()],[n,r]=C.useState(()=>lt(e)),[i,s]=C.useState(!1),o=C.useMemo(()=>Ni(e,r,()=>{}),[e,r])(n),{dismiss:l}=fl();return h.jsx(fn,{id:t.formId,elementType:"form",onSubmit:a=>{if(a.target===a.currentTarget){if(a.preventDefault(),!Jr(e,n,void 0)){s(!0);return}t.previewProps.onChange([...t.previewProps.elements.map(c=>({key:c.key})),{key:void 0,value:zs({value:n,discriminant:t.discriminant},t.previewProps.schema.element)}]),l()}},gap:"xxlarge",children:h.jsx(ji,{forceValidation:i,autoFocus:!0,...o})})}function ite(t,e){const n=Object.entries(t);if(!n.length)throw new Error("fields.blocks must have at least one entry");const r=G_({label:"Kind",defaultValue:n[0][0],options:Object.entries(t).map(([s,{label:o}])=>({label:o,value:s}))}),i=Y_(r,Object.fromEntries(n.map(([s,{schema:o}])=>[s,o])));return{...K_(i,{label:e.label,description:e.description,validation:e.validation,itemLabel(s){const o=s.discriminant,l=t[o];return l.itemLabel?l.itemLabel(s.value):l.label}}),Input:tte}}function ste(t){const e=q(10);let n;e[0]!==t.label?(n=h.jsx(Y,{children:t.label}),e[0]=t.label,e[1]=n):n=e[1];let r;e[2]!==t.description?(r=t.description&&h.jsx(Y,{slot:"description",children:t.description}),e[2]=t.description,e[3]=r):r=e[3];let i;return e[4]!==t.value||e[5]!==t.onChange||e[6]!==t.autoFocus||e[7]!==n||e[8]!==r?(i=h.jsxs(Ih,{isSelected:t.value,onChange:t.onChange,autoFocus:t.autoFocus,children:[n,r]}),e[4]=t.value,e[5]=t.onChange,e[6]=t.autoFocus,e[7]=n,e[8]=r,e[9]=i):i=e[9],i}function ote({label:t,defaultValue:e=!1,description:n}){return Gn({label:t,Input(r){return h.jsx(ste,{...r,label:t,description:n})},defaultValue(){return e},parse(r){if(r===void 0)return e;if(typeof r!="boolean")throw new Ce("Must be a boolean");return r},validate(r){return r},serialize(r){return{value:r}}})}function lte(t){return{kind:"child",options:t.kind==="block"?{...t,dividers:t.dividers,formatting:t.formatting==="inherit"?{blockTypes:"inherit",headingLevels:"inherit",inlineMarks:"inherit",listTypes:"inherit",alignment:"inherit",softBreaks:"inherit"}:t.formatting,links:t.links,images:t.images,tables:t.tables,componentBlocks:t.componentBlocks}:{kind:"inline",placeholder:t.placeholder,formatting:t.formatting==="inherit"?{inlineMarks:"inherit",softBreaks:"inherit"}:t.formatting,links:t.links}}}function ate(t){const e=q(41),{image:n,onChange:r}=t,[i,s]=C.useState(n.src?"good":""),o=sT();let l;e[0]!==t?(l=A=>{A.preventDefault();const O=A.clipboardData.getData("text/plain"),_=dz(O);t.onChange(_)},e[0]=t,e[1]=l):l=e[1];const a=l;let c;e[2]!==r?(c=A=>{r(A),s("good")},e[2]=r,e[3]=c):c=e[3];const u=Ln(c),d=Nt(),f=!!(t.image.alt||t.image.width||t.image.height);let p,g;e[4]!==t.image.src||e[5]!==f||e[6]!==d||e[7]!==u?(p=()=>{if(!t.image.src){s("");return}if(Yu(t.image.src)){if(f){s("good");return}s("loading"),pz(t.image.src,d).then(A=>{u(A)}).catch(()=>{s("error")})}},g=[d,f,u,t.image.src],e[4]=t.image.src,e[5]=f,e[6]=d,e[7]=u,e[8]=p,e[9]=g):(p=e[8],g=e[9]),C.useEffect(p,g);const[m,b]=C.useState(!1),y=(m||t.forceValidation)&&t.isRequired&&!n.src?"Image URL is required.":void 0;let x;e[10]!==t?(x=A=>{(A.code==="Backspace"||A.code==="Delete")&&t.onChange(Lv)},e[10]=t,e[11]=x):x=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=()=>b(!0),e[12]=v):v=e[12];let w;e[13]!==o?(w=h.jsxs(Y,{children:["Upload an image, or copy a URL from the"," ",h.jsx(aa,{prominence:"high",href:o,target:"_blank",rel:"noreferrer",children:"Image Library"})," ","and paste it into this field."]}),e[13]=o,e[14]=w):w=e[14];let S;e[15]!==i||e[16]!==n||e[17]!==t?(S=i==="loading"?h.jsx(te,{height:"element.regular",width:"element.regular",alignItems:"center",justifyContent:"center",children:h.jsx(Tr,{size:"small","aria-label":"Checking…",isIndeterminate:!0})}):n.src?h.jsx(wb,{onPress:()=>{t.onChange(Lv),s("")},preventFocus:!0}):null,e[15]=i,e[16]=n,e[17]=t,e[18]=S):S=e[18];let k;e[19]!==t.isRequired||e[20]!==t.autoFocus||e[21]!==y||e[22]!==a||e[23]!==x||e[24]!==n.src||e[25]!==w||e[26]!==S?(k=h.jsx(gt,{label:"Image URL",isRequired:t.isRequired,errorMessage:y,autoFocus:t.autoFocus,onPaste:a,onKeyDown:x,onBlur:v,value:n.src,description:w,endElement:S}),e[19]=t.isRequired,e[20]=t.autoFocus,e[21]=y,e[22]=a,e[23]=x,e[24]=n.src,e[25]=w,e[26]=S,e[27]=k):k=e[27];let E;e[28]!==r?(E=h.jsx(bz,{alignSelf:"start",onUploaded:A=>{r(A)}}),e[28]=r,e[29]=E):E=e[29];let T;e[30]!==k||e[31]!==E?(T=h.jsxs(fn,{gap:"medium",children:[k,E]}),e[30]=k,e[31]=E,e[32]=T):T=e[32];let N;e[33]!==i||e[34]!==n||e[35]!==t||e[36]!==r?(N=i==="good"?h.jsxs(h.Fragment,{children:[h.jsx(zt,{alignSelf:"start",backgroundColor:"canvas",borderRadius:"regular",border:"neutral",padding:"regular",children:h.jsx("img",{alt:n.alt,src:n.src,style:{display:"block",maxHeight:j.size.alias.singleLineWidth,maxWidth:"100%"}})}),h.jsx(HS,{label:"Alt text",value:n.alt,onChange:A=>t.onChange({...n,alt:A})}),h.jsx(gz,{src:n.src,image:n,onChange:A=>{r({...t.image,...A})}})]}):h.jsxs(fn,{"aria-hidden":!0,alignItems:"center",backgroundColor:"surface",borderRadius:"regular",gap:"medium",paddingX:"large",paddingY:"xlarge",children:[h.jsx(X,{src:Iu,color:"neutralSecondary",size:"medium"}),h.jsx(Y,{align:"center",color:"neutralSecondary",size:"small",children:"Awaiting URL to display image preview and information…"})]}),e[33]=i,e[34]=n,e[35]=t,e[36]=r,e[37]=N):N=e[37];let I;return e[38]!==T||e[39]!==N?(I=h.jsxs(fn,{gap:"xlarge",padding:"large",children:[T,N]}),e[38]=T,e[39]=N,e[40]=I):I=e[40],I}function cte(t){var e,n;const r=q(27),i=C.useId(),s=C.useId(),o=t.schema.description?s:void 0;let l;r[0]!==i||r[1]!==t.schema.label?(l=h.jsx(Y,{color:"neutralEmphasis",size:"medium",weight:"medium",id:i,children:t.schema.label}),r[0]=i,r[1]=t.schema.label,r[2]=l):l=r[2];let a;r[3]!==t.schema.description||r[4]!==s?(a=!!t.schema.description&&h.jsx(Y,{id:s,size:"regular",color:"neutralSecondary",children:t.schema.description}),r[3]=t.schema.description,r[4]=s,r[5]=a):a=r[5];let c;r[6]!==l||r[7]!==a?(c=h.jsxs(fn,{backgroundColor:"surface",borderBottom:"muted",borderTopStartRadius:"medium",borderTopEndRadius:"medium",gap:"medium",minWidth:0,padding:"large",children:[l,a]}),r[6]=l,r[7]=a,r[8]=c):c=r[8];const u=(e=t.fields.width.value)!==null&&e!==void 0?e:void 0,d=(n=t.fields.height.value)!==null&&n!==void 0?n:void 0;let f;r[9]!==t.fields.src.value||r[10]!==t.fields.alt.value||r[11]!==u||r[12]!==d?(f={src:t.fields.src.value,alt:t.fields.alt.value,width:u,height:d},r[9]=t.fields.src.value,r[10]=t.fields.alt.value,r[11]=u,r[12]=d,r[13]=f):f=r[13];let p;r[14]!==t?(p=b=>{var y,x;t.onChange({src:b.src,alt:b.alt,width:(y=b.width)!==null&&y!==void 0?y:null,height:(x=b.height)!==null&&x!==void 0?x:null})},r[14]=t,r[15]=p):p=r[15];let g;r[16]!==f||r[17]!==p||r[18]!==t.autoFocus||r[19]!==t.isRequired||r[20]!==t.forceValidation?(g=h.jsx(ate,{image:f,onChange:p,autoFocus:t.autoFocus,isRequired:t.isRequired,forceValidation:t.forceValidation}),r[16]=f,r[17]=p,r[18]=t.autoFocus,r[19]=t.isRequired,r[20]=t.forceValidation,r[21]=g):g=r[21];let m;return r[22]!==i||r[23]!==o||r[24]!==c||r[25]!==g?(m=h.jsxs(fn,{"aria-labelledby":i,"aria-describedby":o,border:"muted",borderRadius:"medium",minWidth:0,role:"group",children:[c,g]}),r[22]=i,r[23]=o,r[24]=c,r[25]=g,r[26]=m):m=r[26],m}function ute({label:t,description:e,validation:n}){return{...en({src:au({label:"URL",validation:{length:{min:n!=null&&n.isRequired?1:0}}}),alt:au({label:"Alt text"}),height:mb({label:"Height"}),width:mb({label:"Width"})},{label:t,description:e}),Input(r){return h.jsx(cte,{...r,isRequired:n?.isRequired})}}}function Y_(t,e){return{kind:"conditional",discriminant:t,values:e}}function J_(t,e,n){if(e!==null&&!/^\d{4}-\d{2}-\d{2}$/.test(e))return`${n} is not a valid date`;if(t!=null&&t.isRequired&&e===null)return`${n} is required`;if((t!=null&&t.min||t!=null&&t.max)&&e!==null){const r=new Date(e);if(t?.min!==void 0){const i=new Date(t.min);if(r<i)return`${n} must be after ${i.toLocaleDateString()}`}if(t?.max!==void 0){const i=new Date(t.max);if(r>i)return`${n} must be no later than ${i.toLocaleDateString()}`}}}function dte(t){var e;const n=q(15);let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!0,n[0]=r):r=n[0];const[i,s]=C.useReducer(r,!1);let o;n[1]!==t?(o=d=>{t.onChange(d===""?null:d)},n[1]=t,n[2]=o):o=n[2];const l=t.value===null?"":t.value,a=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let c;n[3]!==i||n[4]!==t?(c=i||t.forceValidation?J_(t.validation,t.value,t.label):void 0,n[3]=i,n[4]=t,n[5]=c):c=n[5];let u;return n[6]!==t.label||n[7]!==t.description||n[8]!==t.autoFocus||n[9]!==o||n[10]!==l||n[11]!==s||n[12]!==a||n[13]!==c?(u=h.jsx(gt,{label:t.label,description:t.description,type:"date",onChange:o,autoFocus:t.autoFocus,value:l,onBlur:s,isRequired:a,errorMessage:c}),n[6]=t.label,n[7]=t.description,n[8]=t.autoFocus,n[9]=o,n[10]=l,n[11]=s,n[12]=a,n[13]=c,n[14]=u):u=n[14],u}function fte({label:t,defaultValue:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(dte,{validation:n,label:t,description:r,...i})},defaultValue(){if(e===void 0)return null;if(typeof e=="string")return e;const i=new Date,s=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),l=String(i.getDate()).padStart(2,"0");return`${s}-${o}-${l}`},parse(i){if(i===void 0)return null;if(i instanceof Date){const s=i.getUTCFullYear(),o=String(i.getUTCMonth()+1).padStart(2,"0"),l=String(i.getUTCDate()).padStart(2,"0");return`${s}-${o}-${l}`}if(typeof i!="string")throw new Ce("Must be a string");return i},serialize(i){if(i===null)return{value:void 0};const s=new Date(i);return s.toISOString=()=>i,s.toString=()=>i,{value:s}},validate(i){const s=J_(n,i,t);if(s!==void 0)throw new Ce(s);return Hr(i,n,t),i}})}function Z_(t,e,n){if(e!==null&&!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(e))return`${n} is not a valid datetime`;if(t!=null&&t.isRequired&&e===null)return`${n} is required`;if((t!=null&&t.min||t!=null&&t.max)&&e!==null){const r=new Date(e);if(t?.min!==void 0){const i=new Date(t.min);if(r<i)return`${n} must be after ${i.toISOString()}`}if(t?.max!==void 0){const i=new Date(t.max);if(r>i)return`${n} must be no later than ${i.toISOString()}`}}}function hte(t){var e;const n=q(15);let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!0,n[0]=r):r=n[0];const[i,s]=C.useReducer(r,!1);let o;n[1]!==t?(o=d=>{t.onChange(d===""?null:d)},n[1]=t,n[2]=o):o=n[2];const l=t.value===null?"":t.value,a=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let c;n[3]!==i||n[4]!==t?(c=i||t.forceValidation?Z_(t.validation,t.value,t.label):void 0,n[3]=i,n[4]=t,n[5]=c):c=n[5];let u;return n[6]!==t.label||n[7]!==t.description||n[8]!==t.autoFocus||n[9]!==o||n[10]!==l||n[11]!==s||n[12]!==a||n[13]!==c?(u=h.jsx(gt,{label:t.label,description:t.description,type:"datetime-local",onChange:o,autoFocus:t.autoFocus,value:l,onBlur:s,isRequired:a,errorMessage:c}),n[6]=t.label,n[7]=t.description,n[8]=t.autoFocus,n[9]=o,n[10]=l,n[11]=s,n[12]=a,n[13]=c,n[14]=u):u=n[14],u}function pte({label:t,defaultValue:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(hte,{validation:n,label:t,description:r,...i})},defaultValue(){if(e===void 0)return null;if(typeof e=="string")return e;if(e.kind==="now"){const i=new Date;return new Date(i.getTime()-i.getTimezoneOffset()*60*1e3).toISOString().slice(0,-8)}return null},parse(i){if(i===void 0)return null;if(i instanceof Date)return i.toISOString().slice(0,-8);if(typeof i!="string")throw new Ce("Must be a string or date");return i},serialize(i){if(i===null)return{value:void 0};const s=new Date(i+"Z");return s.toJSON=()=>s.toISOString().slice(0,-8),s.toString=()=>s.toISOString().slice(0,-8),{value:s}},validate(i){const s=Z_(n,i,t);if(s!==void 0)throw new Ce(s);return Hr(i,n,t),i}})}function gte(){return Gn({Input(){return null},defaultValue(){return null},parse(){return null},serialize(){return{value:void 0}},validate(t){return t},label:"Empty"})}function mte(){return{kind:"form",formKind:"content",Input(){return null},defaultValue(){return null},parse(){return null},contentExtension:".mdoc",serialize(){return{value:void 0,content:new Uint8Array,external:new Map,other:new Map}},validate(t){return t},reader:{parse(){return null}}}}function yte(t){return{kind:"form",formKind:"content",Input(){return null},defaultValue(){return null},parse(){return null},contentExtension:`.${t.extension}`,serialize(){return{value:void 0,content:new Uint8Array,external:new Map,other:new Map}},validate(e){return e},reader:{parse(){return null}}}}function bte(t){var e;const n=q(34),{value:r}=t;let i;n[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>!0,n[0]=i):i=n[0];const[s,o]=C.useReducer(i,!1),l=l2(),a=g1(r===null?null:r.data,void 0),c=C.useId(),u=C.useId(),d=t.description?u:void 0,f=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let p;n[1]!==c||n[2]!==f||n[3]!==t.label?(p=h.jsx(Cu,{id:c,elementType:"span",isRequired:f,children:t.label}),n[1]=c,n[2]=f,n[3]=t.label,n[4]=p):p=n[4];let g;n[5]!==t.description||n[6]!==u?(g=t.description&&h.jsx(Ah,{id:u,children:t.description}),n[5]=t.description,n[6]=u,n[7]=g):g=n[7];let m;n[8]!==t?(m=h.jsx(ae,{onPress:async()=>{const k=await Gj("");if(k){var E,T;t.onChange({data:k.content,filename:t.transformFilename?t.transformFilename(k.filename):k.filename,extension:(E=(T=k.filename.match(/\.([^.]+$)/))===null||T===void 0?void 0:T[1])!==null&&E!==void 0?E:""})}},children:"Choose file"}),n[8]=t,n[9]=m):m=n[9];let b;n[10]!==r||n[11]!==t||n[12]!==o||n[13]!==a?(b=r!==null&&h.jsxs(h.Fragment,{children:[h.jsx(ae,{prominence:"low",onPress:()=>{t.onChange(null),o()},children:"Remove"}),a&&h.jsx(Re,{href:a,download:r.filename,prominence:"low",children:"Download"})]}),n[10]=r,n[11]=t,n[12]=o,n[13]=a,n[14]=b):b=n[14];let y;n[15]!==m||n[16]!==b?(y=h.jsxs(mn,{children:[m,b]}),n[15]=m,n[16]=b,n[17]=y):y=n[17];let x;n[18]!==l||n[19]!==r||n[20]!==t?(x=l&&r!==null&&h.jsx(gt,{label:"Filename",onChange:k=>{t.onChange({...r,filename:k})},value:r.filename}),n[18]=l,n[19]=r,n[20]=t,n[21]=x):x=n[21];let v;if(n[22]!==t||n[23]!==s||n[24]!==r){var w;v=(t.forceValidation||s)&&((w=t.validation)===null||w===void 0?void 0:w.isRequired)&&r===null&&h.jsxs(Eu,{children:[t.label," is required"]}),n[22]=t,n[23]=s,n[24]=r,n[25]=v}else v=n[25];let S;return n[26]!==d||n[27]!==c||n[28]!==p||n[29]!==g||n[30]!==y||n[31]!==x||n[32]!==v?(S=h.jsxs(te,{"aria-describedby":d,"aria-labelledby":c,direction:"column",gap:"medium",role:"group",children:[p,g,y,x,v]}),n[26]=d,n[27]=c,n[28]=p,n[29]=g,n[30]=y,n[31]=x,n[32]=v,n[33]=S):S=n[33],S}function xte({label:t,directory:e,validation:n,description:r,publicPath:i,transformFilename:s}){return{kind:"form",formKind:"asset",label:t,Input(o){return h.jsx(bte,{label:t,description:r,validation:n,transformFilename:s,...o})},defaultValue(){return null},filename(o,l){if(typeof o=="string")return o.slice(Vs(i,l.slug).length)},parse(o,l){var a,c;if(o===void 0)return null;if(typeof o!="string")throw new Ce("Must be a string");return l.asset===void 0?null:{data:l.asset,filename:o.slice(Vs(i,l.slug).length),extension:(a=(c=o.match(/\.([^.]+$)/))===null||c===void 0?void 0:c[1])!==null&&a!==void 0?a:""}},validate(o){return Hr(o,n,t),o},serialize(o,l){if(o===null)return{value:void 0,asset:void 0};const a=l.suggestedFilenamePrefix?l.suggestedFilenamePrefix+"."+o.extension:o.filename;return{value:`${Vs(i,l.slug)}${a}`,asset:{filename:a,content:o.data}}},directory:e?Wt(e):void 0,reader:{parse(o){if(typeof o!="string"&&o!==void 0)throw new Ce("Must be a string");const l=o===void 0?null:o;return Hr(l,n,t),l}}}}function vte({label:t,directory:e,validation:n,description:r,publicPath:i,transformFilename:s}){return{kind:"form",formKind:"asset",label:t,Input(o){return h.jsx(rW,{label:t,description:r,validation:n,transformFilename:s,...o})},defaultValue(){return null},filename(o,l){if(typeof o=="string")return o.slice(Vs(i,l.slug).length)},parse(o,l){var a,c;if(o===void 0)return null;if(typeof o!="string")throw new Ce("Must be a string");return l.asset===void 0?null:{data:l.asset,filename:o.slice(Vs(i,l.slug).length),extension:(a=(c=o.match(/\.([^.]+$)/))===null||c===void 0?void 0:c[1])!==null&&a!==void 0?a:""}},validate(o){return Hr(o,n,t),o},serialize(o,l){if(o===null)return{value:void 0,asset:void 0};const a=l.suggestedFilenamePrefix?l.suggestedFilenamePrefix+"."+o.extension:o.filename;return{value:`${Vs(i,l.slug)}${a}`,asset:{filename:a,content:o.data}}},directory:e?Wt(e):void 0,reader:{parse(o){if(typeof o!="string"&&o!==void 0)throw new Ce("Must be a string");const l=o===void 0?null:o;return Hr(l,n,t),l}}}}function X_(t,e){var n,r,i,s;const o=(n=t==null||(r=t.length)===null||r===void 0?void 0:r.min)!==null&&n!==void 0?n:0;if(e.length<o)return`Must have at least ${ll(o,{singular:"item"})}.`;const l=(i=t==null||(s=t.length)===null||s===void 0?void 0:s.max)!==null&&i!==void 0?i:1/0;if(e.length>l)return`Must have at most ${ll(l,{singular:"item"})}.`}function kte(t){var e;const n=C.useMemo(()=>t.value.map(d=>({key:d})),[t.value]),[r,i]=C.useReducer(()=>!0,!1),s=R1(t.collection),o=C.useMemo(()=>s.map(d=>({slug:d})),[s]),l=(t.forceValidation||r)&&X_(t.validation,t.value),[a,c]=C.useState(l);C.useEffect(()=>{c(l)},[l]);const u=C.useMemo(()=>{const d=new Set(t.value);return o.filter(f=>!d.has(f.slug))},[t.value,o]);return h.jsxs(fn,{gap:"medium",minWidth:0,children:[h.jsx(Tu,{label:t.label,description:t.description,selectedKey:null,placeholder:u.length===0?"All selected":void 0,onSelectionChange:d=>{typeof d=="string"&&t.onChange([...t.value,d])},disabledKeys:["No more items…"],onBlur:i,autoFocus:t.autoFocus,defaultItems:u.length?u:[{slug:"No more items…"}],isReadOnly:u.length===0,isRequired:((e=t.validation)===null||e===void 0||(e=e.length)===null||e===void 0?void 0:e.min)!==void 0&&t.validation.length.min>=1,errorMessage:a,width:"auto",children:d=>h.jsx(Je,{children:d.slug},d.slug)}),h.jsx(wte,{autoFocus:t.autoFocus,forceValidation:t.forceValidation,onChange:d=>{t.onChange(d.map(f=>f.key))},elements:n,"aria-label":t.label})]})}function wte(t){const[e,n]=C.useState(()=>new Set([]));let r=(o,l)=>{const a=t.elements.findIndex(f=>f.key===l.key);if(a===-1)return;const c=t.elements.map(f=>({key:f.key})),u=l.dropPosition==="before"?a:a+1,d=o.map(f=>c.findIndex(p=>p.key===f));t.onChange(ZS(c,d,u))};const i=C.useMemo(()=>Math.random().toString(36),[]);let{dragAndDropHooks:s}=GS({getItems(o){return[...o].map(l=>(l=JSON.stringify(l),{[i]:l,"text/plain":l}))},getAllowedDropOperations(){return["move","cancel"]},async onDrop(o){if(o.target.type!=="root"&&o.target.dropPosition!=="on"){let l=[];for(let a of o.items)if(a.kind==="text"){let c;a.types.has(i)?(c=JSON.parse(await a.getText(i)),l.push(c)):a.types.has("text/plain")&&(c=await a.getText("text/plain"),l=c.split(`
`).map(u=>u.replaceAll('"',"")))}r(l,o.target)}},getDropOperation(o){return o.type==="root"||o.dropPosition==="on"?"cancel":"move"}});return h.jsxs(UR,{maxHeight:"scale.3400",minHeight:"scale.1600",children:[h.jsx(YS,{"aria-label":t["aria-label"],items:t.elements,dragAndDropHooks:s,selectionMode:"multiple",onSelectionChange:n,selectedKeys:e,renderEmptyState:Ste,UNSAFE_className:W({borderRadius:j.size.radius.regular}),children:o=>{const l=o.key;return h.jsx(Je,{textValue:l,children:l},o.key)}}),h.jsx(qR,{selectedItemCount:e==="all"?"all":e.size,onClearSelection:()=>n(new Set),onAction:o=>{if(o==="delete"){let l=t.elements;e instanceof Set?l=t.elements.filter(a=>!e.has(a.key)):e==="all"&&(l=[]),t.onChange(l),n(new Set)}},children:h.jsxs(Je,{textValue:"Remove",children:[h.jsx(X,{src:un}),h.jsx(Y,{children:"Remove"})]},"delete")})]})}function Ste(){return h.jsx(fn,{gap:"large",alignItems:"center",justifyContent:"center",height:"100%",padding:"regular",children:h.jsx(Y,{align:"center",color:"neutralTertiary",children:"No items selected…"})})}function Cte({label:t,collection:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(kte,{label:t,collection:e,description:r,validation:n,...i})},defaultValue(){return[]},parse(i){if(i===void 0)return[];if(!Array.isArray(i)||!i.every(zR))throw new Ce("Must be an array of strings");return i},validate(i){const s=X_(n,i);if(s)throw new Ce(s);return i},serialize(i){return{value:i}}})}function Ete(t){const e=q(14),n=C.useId(),r=C.useId(),i=t.description?r:void 0;let s;e[0]!==n||e[1]!==t.label?(s=h.jsx(Cu,{elementType:"span",id:n,children:t.label}),e[0]=n,e[1]=t.label,e[2]=s):s=e[2];let o;e[3]!==t.description||e[4]!==r?(o=t.description&&h.jsx(Y,{id:r,size:"small",color:"neutralSecondary",children:t.description}),e[3]=t.description,e[4]=r,e[5]=o):o=e[5];let l;e[6]!==t?(l=t.options.map(c=>h.jsx(Ih,{isSelected:t.value.includes(c.value),onChange:()=>{t.value.includes(c.value)?t.onChange(t.value.filter(u=>u!==c.value)):t.onChange([...t.value,c.value])},children:c.label},c.value)),e[6]=t,e[7]=l):l=e[7];let a;return e[8]!==n||e[9]!==i||e[10]!==s||e[11]!==o||e[12]!==l?(a=h.jsxs(te,{role:"group","aria-labelledby":n,"aria-describedby":i,direction:"column",gap:"medium",children:[s,o,l]}),e[8]=n,e[9]=i,e[10]=s,e[11]=o,e[12]=l,e[13]=a):a=e[13],a}function Ite({label:t,options:e,defaultValue:n=[],description:r}){const i=new Map(e.map(o=>[o.value,o]));return{...Gn({label:t,Input(o){return h.jsx(Ete,{label:t,description:r,options:e,...o})},defaultValue(){return n},parse(o){if(o===void 0)return[];if(!Array.isArray(o))throw new Ce("Must be an array of options");if(!o.every(l=>typeof l=="string"&&i.has(l)))throw new Ce(`Must be an array with one of ${e.map(l=>l.value).join(", ")}`);return o},validate(o){return o},serialize(o){return{value:o}}}),options:e}}function Q_(t,e,n,r){if(e!==null&&typeof e!="number")return`${r} must be a number`;if(t!=null&&t.isRequired&&e===null)return`${r} is required`;if(e!==null){if(t?.min!==void 0&&e<t.min)return`${r} must be at least ${t.min}`;if(t?.max!==void 0&&e>t.max)return`${r} must be at most ${t.max}`;if(n!==void 0&&t?.validateStep!==void 0&&!Ate(e,n))return`${r} must be a multiple of ${n}`}}function ES(t){const e=t.toString(),n=e.indexOf(".");if(n===-1){const r=e.indexOf("e-");return r===-1?0:parseInt(e.slice(r+2))}return e.length-n-1}function Ate(t,e){const n=Math.max(ES(e),ES(t)),r=Math.pow(10,n);return t*r%(e*r)===0}function Tte(t){var e;const n=q(16);let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!0,n[0]=r):r=n[0];const[i,s]=C.useReducer(r,!1),o=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let l;n[1]!==t||n[2]!==i?(l=t.forceValidation||i?Q_(t.validation,t.value,t.step,t.label):void 0,n[1]=t,n[2]=i,n[3]=l):l=n[3];const a=t.value===null?void 0:t.value;let c;n[4]!==t?(c=d=>{t.onChange(d===void 0?null:d)},n[4]=t,n[5]=c):c=n[5];let u;return n[6]!==t.label||n[7]!==t.description||n[8]!==t.autoFocus||n[9]!==t.step||n[10]!==o||n[11]!==l||n[12]!==s||n[13]!==a||n[14]!==c?(u=h.jsx(df,{label:t.label,description:t.description,isRequired:o,errorMessage:l,onBlur:s,autoFocus:t.autoFocus,step:t.step,value:a,onChange:c}),n[6]=t.label,n[7]=t.description,n[8]=t.autoFocus,n[9]=t.step,n[10]=o,n[11]=l,n[12]=s,n[13]=a,n[14]=c,n[15]=u):u=n[15],u}function Nte({label:t,defaultValue:e,step:n,validation:r,description:i}){return Gn({label:t,Input(s){return h.jsx(Tte,{label:t,description:i,validation:r,step:n,...s})},defaultValue(){return e??null},parse(s){if(s===void 0)return null;if(typeof s=="number")return s;throw new Ce("Must be a number")},validate(s){const o=Q_(r,s,n,t);if(o!==void 0)throw new Ce(o);return Hr(s,r,t),s},serialize(s){return{value:s===null?void 0:s}}})}function jte(t){var e,n;const r=q(24);let i,s;r[0]!==t.pattern?(s=t.pattern?HR(t.pattern):()=>!0,r[0]=t.pattern,r[1]=s):s=r[1],i=s;const o=i;let l;r[2]===Symbol.for("react.memo_cache_sentinel")?(l=()=>!0,r[2]=l):l=r[2];const[a,c]=C.useReducer(l,!1),u=cp().current;let d,f;if(r[3]!==u||r[4]!==o){const E=u.kind==="loaded"?[...u.data.entries.values()]:[];let T;r[6]!==o?(T=N=>o(N.path),r[6]=o,r[7]=T):T=r[7],f=E.filter(T),r[3]=u,r[4]=o,r[5]=f}else f=r[5];d=f;const p=d,g=(t.forceValidation||a)&&(e=t.validation)!==null&&e!==void 0&&e.isRequired&&t.value===null?`${t.label} is required`:void 0,[m,b]=C.useState(g);let y,x;r[8]!==g?(y=()=>{b(g)},x=[g],r[8]=g,r[9]=y,r[10]=x):(y=r[9],x=r[10]),C.useEffect(y,x);let v;r[11]!==t?(v=E=>{(typeof E=="string"||E===null)&&t.onChange(E)},r[11]=t,r[12]=v):v=r[12];const w=(n=t.validation)===null||n===void 0?void 0:n.isRequired;let S;r[13]===Symbol.for("react.memo_cache_sentinel")?(S=E=>h.jsx(Je,{children:E.path},E.path),r[13]=S):S=r[13];let k;return r[14]!==t.label||r[15]!==t.description||r[16]!==t.value||r[17]!==t.autoFocus||r[18]!==v||r[19]!==c||r[20]!==w||r[21]!==m||r[22]!==p?(k=h.jsx(Tu,{label:t.label,description:t.description,selectedKey:t.value,onSelectionChange:v,onBlur:c,isRequired:w,errorMessage:m,autoFocus:t.autoFocus,defaultItems:p,width:"auto",children:S}),r[14]=t.label,r[15]=t.description,r[16]=t.value,r[17]=t.autoFocus,r[18]=v,r[19]=c,r[20]=w,r[21]=m,r[22]=p,r[23]=k):k=r[23],k}function _te({label:t,pattern:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(jte,{label:t,pattern:e,description:r,validation:n,...i})},defaultValue(){return null},parse(i){if(i===void 0)return null;if(typeof i!="string")throw new Ce("Must be a string");return i},validate(i){return Hr(i,n,t),i},serialize(i){return{value:i===null?void 0:i}}})}function Ote(t){var e,n;const r=q(20);let i;r[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>!0,r[0]=i):i=r[0];const[s,o]=C.useReducer(i,!1),l=R1(t.collection);let a,c;if(r[1]!==l){let w;r[3]===Symbol.for("react.memo_cache_sentinel")?(w=S=>({slug:S}),r[3]=w):w=r[3],c=l.map(w),r[1]=l,r[2]=c}else c=r[2];a=c;const u=a,d=(t.forceValidation||s)&&(e=t.validation)!==null&&e!==void 0&&e.isRequired&&t.value===null?`${t.label} is required`:void 0,[f,p]=C.useState(d);let g,m;r[4]!==d?(g=()=>{p(d)},m=[d],r[4]=d,r[5]=g,r[6]=m):(g=r[5],m=r[6]),C.useEffect(g,m);let b;r[7]!==t?(b=w=>{(typeof w=="string"||w===null)&&t.onChange(w)},r[7]=t,r[8]=b):b=r[8];const y=(n=t.validation)===null||n===void 0?void 0:n.isRequired;let x;r[9]===Symbol.for("react.memo_cache_sentinel")?(x=w=>h.jsx(Je,{children:w.slug},w.slug),r[9]=x):x=r[9];let v;return r[10]!==t.label||r[11]!==t.description||r[12]!==t.value||r[13]!==t.autoFocus||r[14]!==b||r[15]!==o||r[16]!==u||r[17]!==y||r[18]!==f?(v=h.jsx(Tu,{label:t.label,description:t.description,selectedKey:t.value,onSelectionChange:b,onBlur:o,autoFocus:t.autoFocus,defaultItems:u,isRequired:y,errorMessage:f,width:"auto",children:x}),r[10]=t.label,r[11]=t.description,r[12]=t.value,r[13]=t.autoFocus,r[14]=b,r[15]=o,r[16]=u,r[17]=y,r[18]=f,r[19]=v):v=r[19],v}function Rte({label:t,collection:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(Ote,{label:t,collection:e,description:r,validation:n,...i})},defaultValue(){return null},parse(i){if(i===void 0)return null;if(typeof i!="string")throw new Ce("Must be a string");return i},validate(i){return Hr(i,n,t),i},serialize(i){return{value:i===null?void 0:i}}})}const Dte=new Set;function Mte(t){var e,n,r,i,s,o,l,a,c,u,d,f,p,g;const m=C.useContext(q0),b=C.useContext(lu),y=b.length===1&&b[0]===m?.field?m:{slugs:Dte,glob:"*"},[x,v]=C.useState(!1),[w,S]=C.useState(!1),[k,E]=C.useState(t.value===t.defaultValue),T=A=>{const O=t.naiveGenerateSlug(A);if(y.slugs.has(O)){let _=1;for(;y.slugs.has(`${O}-${_}`);)_++;return`${O}-${_}`}return O},N=(e=(n=t.args.slug)===null||n===void 0?void 0:n.label)!==null&&e!==void 0?e:"Slug",I=t.forceValidation||w?va(t.value.slug,(r=(i=t.args.slug)===null||i===void 0||(i=i.validation)===null||i===void 0||(i=i.length)===null||i===void 0?void 0:i.min)!==null&&r!==void 0?r:1,(s=(o=t.args.slug)===null||o===void 0||(o=o.validation)===null||o===void 0||(o=o.length)===null||o===void 0?void 0:o.max)!==null&&s!==void 0?s:1/0,N,y,(l=t.args.slug)===null||l===void 0||(l=l.validation)===null||l===void 0?void 0:l.pattern):void 0;return h.jsxs(te,{gap:"xlarge",direction:"column",children:[h.jsx(gt,{label:t.args.name.label,description:t.args.name.description,autoFocus:t.autoFocus,value:t.value.name,isRequired:!!((a=t.args.name.validation)!==null&&a!==void 0&&(a=a.length)!==null&&a!==void 0&&a.min),onChange:A=>{t.onChange({name:A,slug:k?T(A):t.value.slug})},onBlur:()=>v(!0),errorMessage:t.forceValidation||x?va(t.value.name,(c=(u=t.args.name.validation)===null||u===void 0||(u=u.length)===null||u===void 0?void 0:u.min)!==null&&c!==void 0?c:0,(d=(f=t.args.name.validation)===null||f===void 0||(f=f.length)===null||f===void 0?void 0:f.max)!==null&&d!==void 0?d:1/0,t.args.name.label,void 0,(p=t.args.name.validation)===null||p===void 0?void 0:p.pattern):void 0}),h.jsxs(te,{gap:"regular",alignItems:"end",children:[h.jsx(gt,{flex:1,label:N,description:(g=t.args.slug)===null||g===void 0?void 0:g.description,value:t.value.slug,onChange:A=>{E(!1),t.onChange({name:t.value.name,slug:A})},onBlur:()=>S(!0),errorMessage:I,isRequired:!0}),h.jsxs(te,{gap:"regular",direction:"column",children:[h.jsxs(ae,{"aria-label":"regenerate",onPress:()=>{t.onChange({name:t.value.name,slug:T(t.value.name)})},children:[h.jsx(X,{src:WR,UNSAFE_className:W({[$c.above.mobile]:{display:"none"}})}),h.jsx(Y,{UNSAFE_className:W({[$c.below.tablet]:{display:"none"}}),children:"Regenerate"})]}),I!==void 0&&h.jsx(zt,{height:"element.xsmall"})]})]})]})}function IS(t){if(t===void 0)return{name:"",slug:""};if(typeof t!="object")throw new Ce("Must be an object");if(Object.keys(t).length!==2)throw new Ce("Unexpected keys");if(!("name"in t)||!("slug"in t))throw new Ce("Missing name or slug");if(typeof t.name!="string")throw new Ce("name must be a string");if(typeof t.slug!="string")throw new Ce("slug must be a string");return{name:t.name,slug:t.slug}}function AS(t,e){if(t===void 0)return{name:"",slug:e};if(typeof t!="string")throw new Ce("Must be a string");return{name:t,slug:e}}function Fte(t){var e,n,r,i,s,o;const l={...t,name:{...t.name,validation:{pattern:(e=t.name.validation)===null||e===void 0?void 0:e.pattern,length:{min:Math.max((n=t.name.validation)!==null&&n!==void 0&&n.isRequired?1:0,(r=(i=t.name.validation)===null||i===void 0||(i=i.length)===null||i===void 0?void 0:i.min)!==null&&r!==void 0?r:0),max:(s=t.name.validation)===null||s===void 0||(s=s.length)===null||s===void 0?void 0:s.max}}}},a=((o=l.slug)===null||o===void 0?void 0:o.generate)||VR;let c;function u(){if(!c){var p,g;c={name:(p=l.name.defaultValue)!==null&&p!==void 0?p:"",slug:a((g=l.name.defaultValue)!==null&&g!==void 0?g:"")}}return c}function d(p,{slugField:g}={slugField:void 0}){var m,b,y,x,v,w,S,k,E,T,N,I;const A=va(p.name,(m=(b=l.name.validation)===null||b===void 0||(b=b.length)===null||b===void 0?void 0:b.min)!==null&&m!==void 0?m:0,(y=(x=l.name.validation)===null||x===void 0||(x=x.length)===null||x===void 0?void 0:x.max)!==null&&y!==void 0?y:1/0,l.name.label,void 0,(v=l.name.validation)===null||v===void 0?void 0:v.pattern);if(A!==void 0)throw new Ce(A);const O=va(p.slug,(w=(S=l.slug)===null||S===void 0||(S=S.validation)===null||S===void 0||(S=S.length)===null||S===void 0?void 0:S.min)!==null&&w!==void 0?w:1,(k=(E=l.slug)===null||E===void 0||(E=E.validation)===null||E===void 0||(E=E.length)===null||E===void 0?void 0:E.max)!==null&&k!==void 0?k:1/0,(T=(N=l.slug)===null||N===void 0?void 0:N.label)!==null&&T!==void 0?T:"Slug",g||{slugs:f,glob:"*"},(I=l.slug)===null||I===void 0||(I=I.validation)===null||I===void 0?void 0:I.pattern);if(O!==void 0)throw new Ce(O);return p}const f=new Set;return{kind:"form",formKind:"slug",label:l.name.label,Input(p){return h.jsx(Mte,{args:l,naiveGenerateSlug:a,defaultValue:u(),...p})},defaultValue:u,parse(p,g){return g?.slug!==void 0?AS(p,g.slug):IS(p)},validate:d,serialize(p){return{value:p}},serializeWithSlug(p){return{value:p.name,slug:p.slug}},reader:{parse(p){const g=IS(p);return d(g)},parseWithSlug(p,g){return d(AS(p,g.slug),{slugField:{glob:g.glob,slugs:f}}).name}}}}function eO(t,e,n){if(e!==null&&(typeof e!="string"||!Yu(e)))return`${n} is not a valid URL`;if(t!=null&&t.isRequired&&e===null)return`${n} is required`}function Pte(t){var e;const n=q(15);let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!0,n[0]=r):r=n[0];const[i,s]=C.useReducer(r,!1),o=t.value===null?"":t.value;let l;n[1]!==t?(l=d=>{t.onChange(d===""?null:d)},n[1]=t,n[2]=l):l=n[2];const a=(e=t.validation)===null||e===void 0?void 0:e.isRequired;let c;n[3]!==t||n[4]!==i?(c=t.forceValidation||i?eO(t.validation,t.value,t.label):void 0,n[3]=t,n[4]=i,n[5]=c):c=n[5];let u;return n[6]!==t.label||n[7]!==t.description||n[8]!==t.autoFocus||n[9]!==o||n[10]!==l||n[11]!==s||n[12]!==a||n[13]!==c?(u=h.jsx(gt,{inputMode:"url",width:"auto",maxWidth:"scale.6000",label:t.label,description:t.description,autoFocus:t.autoFocus,value:o,onChange:l,onBlur:s,isRequired:a,errorMessage:c}),n[6]=t.label,n[7]=t.description,n[8]=t.autoFocus,n[9]=o,n[10]=l,n[11]=s,n[12]=a,n[13]=c,n[14]=u):u=n[14],u}function $te({label:t,defaultValue:e,validation:n,description:r}){return Gn({label:t,Input(i){return h.jsx(Pte,{label:t,description:r,validation:n,...i})},defaultValue(){return e||null},parse(i){if(i===void 0)return null;if(typeof i!="string")throw new Ce("Must be a string");return i===""?null:i},validate(i){const s=eO(n,i,t);if(s!==void 0)throw new Ce(s);return Hr(i,n,t),i},serialize(i){return{value:i===null?void 0:i}}})}function Lte(){return{kind:"form",Input(){return null},defaultValue(){return{value:void 0}},parse(t){return{value:t}},serialize(t){return t},validate(t){return t},label:"Ignored",reader:{parse(t){return t}}}}var Xte=Object.freeze({__proto__:null,array:K_,blocks:ite,checkbox:ote,child:lte,cloudImage:ute,conditional:Y_,date:fte,datetime:pte,document:GK,empty:gte,emptyDocument:mte,emptyContent:yte,file:xte,image:vte,integer:mb,multiRelationship:Cte,multiselect:Ite,number:Nte,object:en,pathReference:_te,relationship:Rte,select:G_,slug:Fte,text:au,url:$te,ignored:Lte,mdx:L2,markdoc:E1});export{Zte as K,Pe as a,pt as b,Hk as c,n1 as d,kn as e,qe as f,vp as g,I8 as h,Jte as i,Xte as j,Yte as k,xe as m,Gte as o,qd as s,sl as u};
